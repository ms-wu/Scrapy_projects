{"create_date": "2017/10/17 ", "url": "http://blog.jobbole.com/112718/", "fav_nums": 4, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://mp.weixin.qq.com/s/Jpo2Cf446u39noe7v-koig\">迅雷创始人程浩</a>   </div><p>大家好，我是迅雷创始人程浩，我现在专注科技领域的投资。今天跟大家聊聊人工智能领域的创业和创新，包括如何选择赛道、团队的搭配、以及如何应对巨头的挑战。</p>\n<p>为此我从投资人的视角，给大家总结了人工智能创业的 6 大核心问题。</p>\n<h2>第一个问题：互联网 vs 人工智能</h2>\n<p>首先如果今天大家选择创业，我建议更应该关注人工智能，而非互联网。为什么这么讲？</p>\n<p>1. 互联网的流量红利已经消失；</p>\n<p>以PC来说，全球PC出货量连续5年下滑。大家知道国内最后出现的一个PC互联网独角兽是谁吗？是知乎，大概是2011年初推出，这么多年过去，再也没有PC互联网的独角兽出现。做个类比，我们知道2015年移动互联网的渗透率和竞争程度和2011年的PC互联网类似，以此类推，2015年以后再做移动APP，也很难出独角兽了。</p>\n<p>毕竟中国连续两年手机出货量都在5亿多台，增长放缓，代表无线流量基本已走平，你多卖一台，我就少卖一台，是存量竞争。今天创业者再做一个纯互联网的APP，投资人问的第一个问题就是你怎么获客。因为现阶段流量格局已定，首屏就那几个APP。</p>\n<h3>2. 互联网+的机会同样有限；</h3>\n<p>主要在于互联网最大的价值，是解决信息不对称和连接。所以对于电商特别有价值。淘宝用皇冠、钻石等信用体系解决了信息不对称，同时又把全国有这么多买家和卖家连接在一起。这个是互联网的价值。</p>\n<p>但很多行业信息和连接并不是痛点。拿医疗举例，中国三甲医院的大夫就那么多，你把全国13亿人民都和这些大夫连接上了也没用，因为一个医生一天还是只能看那么多病人。互联网并没有提高医生看诊的效率。在诸如餐饮、医疗这些传统领域，互联网的帮助是很有限的。</p>\n<p>也包括滴滴打车，互联网解决了打车难的问题，但是没解决打车价格的问题。事实上，补贴去掉之后，大家都发现了滴滴一点都不便宜，道理很简单——不管是专车还是出租车，还是需要由人来开，人工成本降不下来，就不可能便宜。</p>\n<h3>3. 真正能够提高社会生产力，解决供需关系不平衡的就是人工智能；</h3>\n<p>人工智能将给社会生产力带来的提高，以及对人类带来的影响将远远超过互联网。</p>\n<p>还是拿医疗来说，很多基层医院水平不高，那未来完全可以通过人工智能来辅助医生读CT、X光等医疗影像。像今年，IBMWatson对皮肤黑色素瘤的诊断，准确率已提高至97%，远远超过了人类专家75%-84%的平均水平。</p>\n<p>未来，人工智能无论是在无人车、机器人、医疗、金融、教育还是其他领域，都将爆发巨大的社会效益，这点毋庸置疑。我认为下一波大趋势和大的红利不是互联网+，而是人工智能+。我建议现在的创业者更应该关注人工智能领域的创业机会。</p>\n<h2>第二个问题：人工智能 vs 人工智能+</h2>\n<p>人工智能主要分三层。最底层是基础架构（Infrastructure），包括云计算、芯片以及TensorFlow这样的框架。在基础层之上是中间层，叫通用技术（EnablingTechnology），例如图像识别、语音识别、语义理解、机器翻译这些。</p>\n<p>基础层和中间层，是互联网巨头的必争之地。比如芯片领域，Intel、英伟达、高通都投入巨资，竞争极其激烈。同样云计算、框架也是一样，都不是小公司能够涉足的领地。</p>\n<p>现在对于中间层的通用技术，BAT也极其重视。因为大家都相信人工智能是下一波工业革命浪潮。对腾讯、阿里、百度这些巨头来讲，要想在大浪中屹立不倒，必须要构建出人工智能的生态系统（Ecosystem）。而核心就是要依靠这些Enabling Technology技术。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/10/326d31f3fdb700c798bd91ff04147980.jpeg\" alt=\"迅雷创始人程浩：人工智能创业的6大核心问题\" data-img-size-val=\"596,380\"></p>\n<p>相比创业公司，BAT的最大优势是什么呢？第一，不缺数据；第二，为了构建自己的生态系统，未来通用技术一定全部是免费的；第三，虽然通用技术免费，但BAT有羊毛出在身上的猪机会。这是典型的互联网打法。</p>\n<p>这里的猪是什么？猪就是云计算。例如百度的ABC策略，分别代表人工智能（AI）、大数据（Big Data）和云计算（Cloud Computing）。AI我可以不赚钱，开放给大家，那么大家想享受我的服务，就来买我的云吧。</p>\n<p>而对于创业企业来说，只做图像识别、语音识别、语义理解、机器翻译这些通用技术，指望通过SDK卖钱，未来路会越来越窄，特别是BAT都免费的压力下。</p>\n<p>所以从这个角度讲，创业公司做下面两层风险比较大。我认为创业公司的机会在最上层，就是拿着下两层的成果去服务垂直行业，也就是我们所谓的人工智能+。</p>\n<h2>第三个问题：人工智能+ vs +人工智能</h2>\n<p>深入垂直行业的人工智能+，又可细分为两类情况：即“人工智能+行业”和“行业+人工智能”，他们间有明显的区别。</p>\n<p>“AI+行业”简单讲就是在AI技术成熟之前，这个行业、产品从未存在过。比如自动驾驶，亚马逊的Echo智能音箱、苹果的Siri语音助手。在人工智能技术未突破前，不存在这样的产品。因为AI，创造出了一条全新的产业链。</p>\n<p>“行业+AI”就是行业本身一直存在，产业链条成熟，只是以前完全靠人工，效率比较低，现在加入AI元素后，使得行业效率有了明显提高。比如安防、医疗等领域。</p>\n<p>客观讲，这两个类别都有创业机会。但“AI+行业”，因为是一条新的产业链，创业公司与互联网巨头实际是处在同一起跑线上。巨头们坐拥数据优势。所以从这个角度，“行业+AI”相对对创业公司更为友好，也更容易构建出壁垒。</p>\n<p>我认为，未来行业壁垒才是人工智能创业最大的护城河。因为每个行业都有垂直纵深, 尽管BAT技术好一点、并不关键。拿医疗+AI举例，什么最重要？大量准确的被医生标注过的数据最重要。没有数据，再天才的科学家也无用武之地。</p>\n<p>但在国内，这个医疗数据拿出来非常困难。所以BAT做医疗一点优势都没有，因为他们要把这些数据，从各医院、各科室搞出来也很累。相反，如果一个创业者在医疗行业耕耘很多年，也许拿起数据来比大公司更容易。</p>\n<p>这要求创始团队的合伙人中，必须有懂行业、有行业资源的人才。这与互联网+一样，一旦细分到具体行业，并不是说你百度、腾讯有资金、有流量，投入人才就什么都能做，比拼的还有行业资源和人脉。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/10/5ff7998ba95b9006be6db2ef83bc7ae7.jpeg\" alt=\"迅雷创始人程浩：人工智能创业的6大核心问题\" data-img-size-val=\"640,366\"></p>\n<p>之所以跟大家聊这个话题，是因为前一段去百度大学跟大家交流，他们提到百度人工智能在无人车和DuerOS的应用。同时又问我，人脸识别在国内安防领域的应用价值非常大。像海康威视有近3000亿人民币的市值，每年光净利润就有近百亿。百度在AI方面是不是该考虑进军这个领域。我回答说千万别，因为安防是典型的、有巨大壁垒的“行业+AI”领域。</p>\n<p>即使百度技术好，在人脸识别率方面比海康威视高一个百分点（实际不一定，海康背后有几百人的AI研发团队）。但这并不代表百度就能替代海康。因为安防是“非关键性应用”（non-mission-critical），100个犯人我识别了95个，你比我多识别了一个做到了96个，其实没那么重要。</p>\n<p>而反过来，海康对比百度有什么优势？首先海康是做摄像头的，用自己的硬件跑自己的算法，是很自然的事儿。就像苹果手机，软硬一体体验更好。其次，海康做了这么多年的安防，积累了非常多的数据，人脸的数据、环境的数据……在安防领域有数据优势。最后，海康给公安系统做了很多类似警务通、基站信息采集、视图档案管理等SaaS平台的东西，以及警用云系统。我们可以认为公安系统的IT化，其中有一部分就是海康威视参与的。</p>\n<p>这些东西可能不赚钱，但却为海康构建了壁垒。因为底层的基础设施都是我建的，那前端的东西就只能用我的（我可以有100个理由，说竞品与我不兼容）。而且海康做了这么长时间，积累了大量的客户资源，特别是政府公安局的资源，开拓这些资源非常需要时间。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/10/da17c367646dbcb512ad556b6b243a06.jpeg\" alt=\"迅雷创始人程浩：人工智能创业的6大核心问题\" data-img-size-val=\"640,360\"></p>\n<p>这些就是所谓的行业纵深。所以即使对BAT而言，想进入“行业+AI”领域，选择垂直赛道时，同样要非常谨慎。在巨大的行业壁垒面前，真不是说我的算法比你好一些，市场就是我的，只有技术优势仍然差的很远。</p>\n<p>回归 “AI+行业”和“行业+AI”，通常来讲前者的行业纵深会比较浅，而后者则有巨大的行业壁垒。而行业壁垒，则是创业公司最大的护城河，也是抵挡BAT的关键。</p>\n<h2>第四个问题：关键性应用 vs 非关键性应用</h2>\n<p>谈到人工智能领域的创业，很多人都会有个误解，就是如果我团队没有个大牛的科学家，比如斯坦福、MIT的博士坐镇，我都不好意思讲在人工智能方面创业。其实这个认知是完全错的。因为在人工智能领域，算法到底有多重要，完全取决于你要准备进入哪个行业。</p>\n<p>根据行业和应用场景不同，我认人工智能的创业本质上有mission-critical和non-mission-critical之分。为了方便大家理解，我们简称为“关键性应用”和“非关键性应用”。</p>\n<p>“关键性应用”要追求99.9……%后的多个9，做不到就没法商业化。比如大家认为，99%可靠度的自动驾驶能上路吗？肯定不能，意味着100次就出1次事故。99.9%也不行，1000次出一次事故。</p>\n<p>千万记住，99%和99.9%的可靠度差距并不是0.9%，而是要反过来算，差距是10倍。也包括手术机器人，听起来99.9%可靠度已经很高了，但意味着1000次出一次医疗事故，放在美国，医院还不得被巨额索赔搞得破产。</p>\n<p>所以“关键性应用”领域，就是一丁点儿错都不能犯的人工智能领域，必须要有技术大牛、科学家或算法专家坐镇。同时，这类项目研发周期都很长。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/10/7e48d49a9c8f3538006fa9653333c2d0.jpeg\" alt=\"迅雷创始人程浩：人工智能创业的6大核心问题\" data-img-size-val=\"596,380\"></p>\n<p>正如以色列做ADAS （高级驾驶辅助系统）解决方案的Mobileye公司，今年3月被Intel以153亿美金收购。大家知道这家公司研发周期有多长吗？Mobileye成立于1999年，到他们推出首款产品、挣到第一桶金已是2007年。长达8年的研发周期。这在互联网创业里不可想象。包括谷歌无人车从2009年开始研发，到现在一直没有商业化；达芬奇手术机器人从启动研发到2000年拿到美国食品药品管理局（FDA）的认证，花了十年时间。</p>\n<p>“关键性应用”的普遍特点就是这样，项目通常很贵，研发周期巨长，离钱非常远，需要持续的融资能力，团队怎样才有持续融资？起码要有非常好的简历和非常好的背景。这个是能够持续融资的必要前提。所以大家可以看到，今天做无人驾驶的创业团队都是高富帅。因为不是高富帅，你都熬不到产品真正商业化应用那天。</p>\n<p>当然，如果在人工智能领域都是“关键性应用”，那就没大多数创业者什么事了。实际上，人工智能领域的创业，95%都是“非关键性应用（none-mission-critical）”。简单讲对这些领域，AI的可靠度只要过了基础线，高一点低一点区别不大。</p>\n<p>最简单的例子，现在很多公司的门禁开始用人脸识别。你今天带个帽子，明天戴个墨镜或口罩，识别率没法做到99%。可即使没识别出来也没问题。因为所有带人脸识别的门禁都有地方让你按指纹。即使指纹也刷不进去，问题也不大，公司不还有前台吗。</p>\n<p>这就是“非关键性应用“。这类项目不追求99%后面的很多个9。实际上，国内人工智能和机器人方向的创业，大部分领域都是“非关键性应用”。当然并不是说，在这个领域算法不重要，你天天认不出来也不行，所以一定要过了基础的可用性门槛，偶尔出现问题可以容忍。“关键性应用”则不能容忍。</p>\n<p>“非关键性应用“不追求高大上，简单、实用、性价比高更重要，这样的项目通常比拼综合实力。包括：</p>\n<ul>\n<li>对行业的洞察理解。要熟知行业痛点；</li>\n<li>产品和工程化能力。光在实验室里搞没意义；</li>\n<li>成本控制。不光能做出来的产品，还得便宜的做出来；</li>\n<li>供应链能力。不光能出货，还要能批量生产；</li>\n<li>营销能力。产品出来了，你得把东西卖出去。团队里有没有营销高手，能不能搞定最好的渠道是关键。</li>\n</ul>\n<p>所以大家在创业组团队时，一定要想好你选择的赛道处于哪个领域，不同的赛道对于团队的要求是不一样。“关键性应用”必须有技术大牛坐镇，“非关键性应用”则要求团队更加综合和全面。</p>\n<h2>第五个问题：技术提供商 vs 全栈服务商</h2>\n<p>现在很多人工智能创业者都是技术背景出身，创业的第一个想法通常是做技术提供商。技术提供商作为创业的敲门砖可以。但如果只定位做技术提供商，未来路会非常窄。为什么说未来只做技术提供商价值会越来越小？原因有几点：</p>\n<h3>1. 首先通用技术一定是大公司的赛道，BAT未来一定会开放免费。</h3>\n<p>人家大公司会免费提供人脸识别、语音识别、语义理解、机器翻译这类EnablingTechnology，你还打算怎么靠API调用赚钱呢？也许现在还可赚点小钱，但很难成为一个长久的生意。</p>\n<h3>2. 依托于算法的技术壁垒会越来越低。</h3>\n<p>未来随着基础计算平台和开源平台的丰富成熟，技术方面的壁垒会越来越不明显，整个人工智能的技术准入门槛会越降越低。就像2008年你想找个IOS开发者，很难，现在却很容易一样，所有技术的演进都遵循这一规律。特别随着今天各大学的计算机专业，都纷纷开设机器学习课程，未来人才不缺，这会拉低整个行业的进入门槛。</p>\n<p>同时随着谷歌TensorFlow等生态系统的成熟，很多领域都会有训练好的模型可以用来参考（出Demo会更快），创业者只要有足够的数据来训练参数就好了。所以未来算法的壁垒会越来越低，如果这个公司的核心竞争力只是算法，那将非常危险。</p>\n<h3>3. 技术提供商如果不直接面向用户/客户提供整体解决方案，则非常容易被上下游碾压：</h3>\n<p>对于技术提供商和算法类公司，如果你的技术壁垒不够高，上游很可能直接把你的事做了。这样的例子比比皆是，比如给海康威视提供人脸识别算法的公司。问题就在于，海康在用你算法的时候，人家也有庞大的研发团队在研究自己的算法。现在用你是人家还没准备好，一旦准备好立刻会把你替换掉。</p>\n<p>即使在有一定技术门槛的行业，技术提供商的日子同样并不好过。比如专注嵌入式的视觉处理芯片的Movidius，大疆无人机一直在用他们的芯片。但自从大疆统治了消费级无人机市场后，大疆现在也很自然地开始研发自己的芯片。</p>\n<p>按说芯片的技术壁垒并不低，但只要行业集中度高，赢家就会选择通吃。比如做手机的厂商，出货量到了一个阀值，都有动力自己做芯片。像苹果、三星、华为还有现在的小米，都选择了自己做手机CPU。所以联发科、高通这些技术提供商，其实是挺痛苦的。</p>\n<p>这其实是一个产业链通用规律：产业链上的垄断者会吃掉所有利润，而且他们非常有动力往上游或下游扩展。拿PC产业链举例，内存、硬盘、整机、显示器……都不赚钱。钱被谁赚走了？Windows和Intel却赚走了绝大部分利润。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/10/d635f948f322781c4226a283f8a46aa5.jpeg\" alt=\"迅雷创始人程浩：人工智能创业的6大核心问题\" data-src=\"http://s2.51cto.com/wyfs02/M02/A6/CA/wKioL1nbMBjAhVGDAAEFUgBCzMQ83.jpeg-wh_600x-s_561520517.jpeg\" data-img-size-val=\"720,405\"></p>\n<p>既然做纯技术提供商没有出路，那怎么办？浩哥提出“一横一纵”理论。前期做技术服务可以，但是不能一辈子做技术服务。</p>\n<p>“一横”就是指你提供的技术服务。通常“一横”能服务很多行业，一定要找到1、2个，你认为最有市场机会，最适合你的垂直领域，深扎进去做“全栈”：把技术转化为产品，然后搞定用户卖出去，实现商业变现，再通过商业反馈更多的数据，更加夯实自己的技术。一句话讲，要做技术、产品、商业和数据四位一体的“全栈”，这就是“一纵”。这才是健康的商业模式。</p>\n<p>在垂直外的行业，因为没有利益冲突，你仍可老老实实的做技术服务。这样的话，商业上你能吃透一个垂直行业，技术上你还能通过横向合作，形成更多的数据回路，从而夯实你的技术。这个就是“一横一纵”理论。</p>\n<p>那么对于技术创业公司，从“一横”走到“一纵”，要选哪个垂直领域，取决5个关键因素：</p>\n<ul>\n<li>\n<h3>市场空间够不够大？</h3>\n</li>\n</ul>\n<p>做垂直领域的全栈，还是做横向的技术提供商？取决市场空间哪个更大。找对垂直领域，即使只占一点点市场份额，也可能比做“一横”全归你的收益大。拿美图公司举例，他们有美图秀秀、美拍、美颜相机等APP，同时还会跟很多手机厂商合作，提供相机拍摄的美颜效果，你可以理解这就是技术服务。</p>\n<p>但研究2016财报后，大家知道美图秀秀选的“一纵”是什么吗？就是美图手机。以上提到的技术服务都远没有垂直做美图手机赚钱。美图手机占了公司全部营收的93%。虽然美图手机去年的销量大约在74.8万台，仅仅只占国内手机市场全年销量5亿多台的不足0.15%。</p>\n<ul>\n<li>\n<h3>行业集中度如何？</h3>\n</li>\n</ul>\n<p>做“一横”技术提供商时，最担心的是你的上游或下游过于集中，或者说头部效应越明显，对技术提供商就越不利。举个简单的例子，IDC时代，HP、DELL等厂商卖服务器，都是直接卖给各IT公司，大家日子过的都很滋润。但2010年之后就很难做了，因为云计算出现了。</p>\n<p>提供云计算的厂商就那几个，两只手就能数出来。而且头部效应极其明显，仅阿里云一家占了50%以上份额。如果你是一个技术提供商，在跟这么垄断的行业去谈判，你会发现没有任何筹码。所以现在就很悲催，假设我是阿里云，会让你列出BOM成本，我就给你5%或10%的利润，这个生意就很难做了。</p>\n<p>在这种情况下，你当然有意愿也往上游走。但带来的问题是什么？如果上游集中度高，说明这事的壁垒很高，你作为技术提供商想往上走，同样很困难；如果这个上游集中度低或客户很零散，对你是件好事。但是你也没有太大动力往上游走，因为这个市场本来就很零散，你即使杀进去，可能只有1%的市场份额，而且使得99%的人都变成你的竞争对手了。这是个悖论。</p>\n<ul>\n<li>\n<h3>技术是改良还是革命？</h3>\n</li>\n</ul>\n<p>如果你的技术创新对这个垂直领域是革命性的，就越有机会走到上游。如果只是改良性的，你就老老实实在下游赚个辛苦钱算了。 越是颠覆性的东西，越有机会往上游走。因为上游越离不开你，意味着你有机会做他的事。</p>\n<p>打个异想天开的比方，如果你能提供一个“待机一礼拜”的电池，那你就可以考虑自己做手机，你的手机只打一点：一星期不用充电，而且是全球唯一！就这一点可能就够了，因为这个技术是革命性的。相反，如果是改良性的技术，例如你的电池待机只是比以前多了10~20%，那你还是老老实实卖电池吧。</p>\n<ul>\n<li>\n<h3>双方壁垒谁更高？</h3>\n</li>\n</ul>\n<p>技术提供商的壁垒和上游客户的壁垒哪个更高，也决定做“一纵”的成败。拿比较火的直播平台而言，现在都有美颜功能，例如给女孩长出个耳朵那种，这个通常都是第三方提供的技术。技术本身的壁垒并不高，很多公司都能提供，虽然效果有一些小的差异，但你没有明显优势。</p>\n<p>可是直播的壁垒相当高，这事有网络效应，用户越多会吸引更多的美女主播，因为能赚到更多钱，美女主播越多，也会带来更多的用户。同时你舍得花钱，需要很多资金来买流量以及签约很NB的主播。所以这个事壁垒很高。你做技术提供商壁垒不高。这种情况下，虽然技术提供商只能赚个辛苦钱，但是仍然完全没有机会往上游走。</p>\n<ul>\n<li>\n<h3>到底跟团队基因相符不相符？</h3>\n</li>\n</ul>\n<p>能做得了技术服务，不代表能做垂直解决方案，做全栈，因为团队不一定有行业经验，这是很大的问题。亚马逊的无人便利店Amazon Go出来之后，国内不少技术团队也想提供类似的技术，甚至想做2C的便利店。</p>\n<p>与他们聊完后，我都会劝他们再考虑一下，你的技术再好，对于用户而言，他买东西的时候，会看这个便利店有人还是无人的吗？不会，这不是优先选项。他首要考虑的还是——哪个便利店离我更近，以及我想买的东西这个便利店有没有。</p>\n<p>从这个意义讲，这又回到了零售的本质。所以如果团队没有零售的基因，没有懂零售的人，就别考虑自己开便利店的事。这时候，很多人可能会问“那我找个懂行业的高管不就行了么？”这事没那么简单，如果CEO不了解行业本质，其实是很难靠一个高管去弥补的。</p>\n<p>我特别相信基因决定论，如果任何一个新的商业，BAT找个懂行业的高管就能搞定了，那中国互联网的生意就全是BAT的了，就没创业公司什么事了。BAT，一个做搜索，一个做电商，一个做社交。其实他们3个都把对方的事情已尝试了一遍，最后都不成功。所以大家能做什么，不能做什么，跟这个公司的基因是高度相关的。</p>\n<h2>第六个问题：2C vs 2B</h2>\n<p>最后一个问题，简单说一下，科技成熟都需要一定的时间。因为从任何技术普及演进的角度，几乎都延续了先是从军工（航天）、到政府、到企业、到B2B2C、再到2C这个规律。人工智能也一样，目前人工智能在2C市场还不是很成熟。</p>\n<p>简单说机器人，在个人消费者市场，出货量大的机器人只有4类产品：扫地机器人、无人机、STEAM教育类机器人和亚马逊ECHO为代表的智能音箱。为什么2C市场早期的普及有一定的困难，简单讲几个原因：</p>\n<h3>1. 产业链不成熟</h3>\n<p>我做一个创新的东西，成品有10个部件。每一个部件都得自己做，而且因为出货量不大，每个部件都没有规模效应，这就导致每个部件都很贵，那你最后做出成品一定很贵。这是非常大的问题。</p>\n<h3>2. 2C是额外花钱</h3>\n<p>这也是很重要的一个问题，2C端的用户因为自掏腰包、额外花钱，所以对价格通常比较敏感，产品很贵就是一个很大的门槛。</p>\n<h3>3. 2C产品的用户期待度高</h3>\n<p>用户买了这么贵的东西，自然对产品的期待度会更高很多。大家觉得我买一个机器人回来，恨不得什么都能干：又能唱歌、又能跳舞、又能聊天、又能清洁、又能讲英语。但这是不现实的，现在的技术成熟度离此还有些远。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/10/a2fe69f39ad0441d3963bf785e9754e7.jpeg\" alt=\"迅雷创始人程浩：人工智能创业的6大核心问题\" data-img-size-val=\"720,405\"></p>\n<p>相对于2C端，这些问题在2B端却不是问题。</p>\n<h3>1. 2B端对价格承受能力更高</h3>\n<p>首先，企业对价格的承受能力显然比2C强很多。你说一个机器人2万，2C消费者不可能买，但企业问题不大，企业对成本承受能力高。</p>\n<h3>2. 2B的核心目的是降成本</h3>\n<p>举例工业机器人，10万块钱一个，听起来很贵。但一个工业机器人替代你2个岗位。这2个岗位一年也得10万块钱，还不算四险一金。然后这机器人能工作4年，这一下成本只有你原来的25%，甚至不到。那么企业一算账，觉得还是很便宜。</p>\n<h3>3. 2B可以采取人机混合模式</h3>\n<p>还有2B端的机器人应用更简单一些。一方面大多是单任务，机器人只要做好一件事就行了，实现起来简单。另外，很多都是以”人机混合”模式在作业。也就是以前需要10个人干活，现在我用机器人替代一半人。简单重复的工作用机器人替代，复杂的用剩下的5个人，这就是”人机混合”模式。</p>\n<p>举个例子，现在国内外已有很多安保机器人，按固定路线去巡逻。你可以理解为移动的摄像头，当然算法上肯定加入了一些识别的东西。固定绕路线巡逻，这个完全可以交给机器人来做。难的是，在巡逻的过程中，如果发现有老太太摔倒了，让机器人扶起来，这个目前还做不到。</p>\n<p>但这不重要，你们后台不还有5个人么，让他们过来就好了。所以人机混合是2B比较主流的模式，这个大幅降低了机器人普及的难度。</p>\n<p>最后再说一点，目前大多数AI创业公司都是技术专家主导，这很容易理解，因为现在技术还有壁垒，技术专家主导起码保证产品能做出来。不过未来随着技术门槛的降低，特别在“非关键应用”领域里，团队的核心主导，会慢慢过渡到产品经理和行业专家为主，因为他们离用户需求最近。“非关键应用”领域，懂需求比技术实现更重要。长期来看，人工智能创业和任何其他领域的创业一样，一定是综合实力的比拼！</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112718\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112718votetotal\">3</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112718\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 4 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": "  评论", "praise_nums": "3", "url_object_id": "1513c70bbc65ce07f55dc829aa54c6f7", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/10/326d31f3fdb700c798bd91ff04147980.jpeg"], "front_image_path": "full/9bf88283c9108849eb733631c201cd6d19232b29.jpg", "title": "人工智能创业，你需要知道的 6 大核心问题"}
{"create_date": "2017/10/19 ", "url": "http://blog.jobbole.com/112706/", "fav_nums": 1, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/q3198108035\">tsteho</a> 翻译，<a href=\"http://www.jobbole.com/members/hanxiaomax\">艾凌风</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://michael.stapelberg.de/Artikel/golang_favorite\">Michael Stapelberg</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>我力图尊重每个人的喜好，因此我通常会避开相关争论：哪种编程语言、文本编辑器或者操作系统才是最好的。然而，我最近很多次被问到为什么我喜欢并且大量使用 <a href=\"https://golang.org/\">Go</a>，所以写下这篇文章 :-)</p>\n<p><img id=\"pic\" class=\"aligncenter\" src=\"http://wx2.sinaimg.cn/large/7cc829d3gy1fknpksz2oej20h30aymzi.jpg\"></p>\n<h3>我的经历/背景</h3>\n<p>我已经使用 C 和 Perl 进行了很多规模宏大的项目。我也用 Python、Ruby、 C++、CHICKEN Scheme、Emacs Lisp、Rust和Java (仅仅针对Android )编写程序。我了解一些 Lua、PHP、Erlang 和 Haskell。我以前使用 <a href=\"https://en.wikipedia.org/wiki/Delphi_(programming_language)\">Delphi</a> 开发了很多程序。</p>\n<p>在 2009 年，当它首次发布时，我简要地了解了一下 Go。当 Go1.0 在 2012 年发布时，我认真地开始使用该语言。Go1.0 的一个特色是 <a href=\"https://golang.org/doc/go1compat\">Go 1 兼容性保证</a>的发布。我仍然在生产环境中运行着这些<a href=\"https://github.com/stapelberg/greetbot\">代码</a> ，它们是我在2012年编写的，基本上没有修改过。</p>\n<h1>一、清晰性</h1>\n<h3>格式化</h3>\n<p>按照惯例，Go使用 <a href=\"https://golang.org/cmd/gofmt/\">gofmt</a> 来格式化代码。以编程方式来格式化代码并不是新的想法，但与它的先辈们相比，<a href=\"https://golang.org/cmd/gofmt/\">gofmt</a> 严格地支持一种规范风格。</p>\n<p>用相同的方式格式化所有代码，使得阅读代码更容易，因为代码令人感觉似曾相识。这不仅有助于阅读标准库或 Go 编译器，也有助于和许多代码库打交道—想想看开源或者大公司。</p>\n<p>此外，在代码审查（Code Review）期间，自动格式化能大大节省时间，因为在代码能够被审计前，代码的规范风格不再需要人为处理：现在，你能让持续集成系统验证 <a href=\"https://golang.org/cmd/gofmt/\">gofmt</a> 并没有产生差异。</p>\n<p>有趣的是，有了编辑器在保存文件时应用 gofmt，我写代码的方式也已经改变。我曾经试图匹配格式化程序执行后的内容，之后再让gofmt 更正我的错误。如今，我尽可能快地表达我的想法，并且相信 gofmt 能够使得格式化的更好（这个<a href=\"https://play.golang.org/p/I6GJwiT77v\">例子</a>是我可能会写的内容，点击Format）。</p>\n<h3>高质量的代码</h3>\n<p>我使用标准库（<a href=\"https://golang.org/pkg/\">文档</a>，<a href=\"https://github.com/golang/go/tree/master/src\">源码</a>）相当多，具体参见下文。</p>\n<p>所有我已经阅读的标准库的质量都是极其高的。其中一个例子就是 <a href=\"https://golang.org/pkg/image/jpeg/\">image/jpeg</a> 包：我当时并不知道 JPEG 是如何工作的，但通过在阅读维基百科中有关介绍 JPEG 的文章和阅读 <a href=\"https://golang.org/pkg/image/jpeg/\">image/jpeg</a> 源码之间切换，我轻易地明白了JPEG是如何工作的。如果包中还有一些注释，我把它看作教学实施。</p>\n<h3>观点</h3>\n<p>我已经慢慢地认同 Go 社区秉承的很多观点，比如：</p>\n<ul>\n<li><a href=\"https://github.com/golang/go/wiki/CodeReviewComments#variable-names\">变量</a>默认情况下应该简短，并且能够从它的声明中进一步变得更具描述性。</li>\n<li>保持依赖关系树短小精悍（以一种合理的程度）：<a href=\"https://www.youtube.com/watch?v=PAAkCSZUG1c&amp;t=9m28s\">有点重复代码比一点依赖更好</a>。</li>\n<li>引入抽象层是有代价的。Go代码通常是相当清晰的，但这是有代价的，因为有时候代码有点重复。</li>\n<li>参见<a href=\"https://github.com/golang/go/wiki/CodeReviewComments\">代码审计说明</a>和<a href=\"https://go-proverbs.github.io/\">Go格言</a>获取更多信息。</li>\n</ul>\n<h3>很少的关键字和抽象层</h3>\n<p>Go 规范仅仅列出了 <a href=\"https://golang.org/ref/spec#Keywords\">25 个关键字</a>，而我能很容易地记在脑中。</p>\n<p><a href=\"https://golang.org/pkg/builtin/\">内建函数</a>和<a href=\"https://golang.org/ref/spec#Types\">类型</a>也是同样的情况。</p>\n<p>根据我的经验，少量的抽象层次和概念使得该语言容易学习，并且很快感到适应。</p>\n<p>当我们在谈论它时：我对 <a href=\"https://golang.org/ref/spec\">Go 规范</a>的可读性感到惊讶。它真的看起来是针对程序员（而不是标准委员会？）</p>\n<h1>二、速度</h1>\n<h3>反馈快/延迟低</h3>\n<p>我喜欢快速的反馈：我喜欢快速加载的网站，我更喜欢流畅、不会滞后的用户界面，并且任何时候我都将选择一个快速的工具，而不是一个功能更强大的工具。大型网站性能的<a href=\"https://blog.gigaspaces.com/amazon-found-every-100ms-of-latency-cost-them-1-in-sales/\">调查结果</a>证明这种行为被大量用户认可。</p>\n<p>Go 编译器的作者满足了我对低延迟的期望：编译速度对他们来讲很重要，并且新的优化需要仔细地衡量是否会降低编译速度。</p>\n<p>我有一个之前没有用过 Go 的朋友。在使用 go get 命令安装了 <a href=\"https://robustirc.net/\">RobustIRC</a> 桥之后，他得出结论，Go 一定是一种解释性语言，我不得不纠正他：不，Go 编译器本来就这么快。</p>\n<p>大部分 Go 工具也不例外，例如 gofmt 或者 goimports 是惊人的快。</p>\n<h3>最大化利用资源</h3>\n<p>对于批量应用程序（相对于交互式应用程序），充分利用可用资源通常比低延迟更重要。</p>\n<p>配置和更改 Go 程序利用所有可用的 IOPS、网络带宽和计算能力是很容易的。例如，我之前写过<a href=\"https://people.debian.org/~stapelberg/2014/01/17/debmirror-rackspace.html\">填充 1Gbps 的链路信息</a>，并且优化 <a href=\"https://github.com/Debian/debiman/\">debiman</a> 利用所有可用的资源，这减少了几小时运行时间。</p>\n<h1>三、丰富的标准库</h1>\n<p><a href=\"https://golang.org/pkg\">Go 标准库</a>提供了有效地使用通用通讯协议和数据存储格式/机制的方法，如TCP/IP、HTTP、JPEG、SQL等。</p>\n<p>Go 的标准库是我迄今看到的最好的标准库。我认为它组织良好、清晰、精细又全面：我经常发现只需使用标准库和一两个外部包就可以编写出大小合理的程序。</p>\n<p>领域特定的数据类型和算法（通常）不包括在标准库内，而是包括在第三方库中，例如 <a href=\"https://godoc.org/golang.org/x/net/html\">golang.org/x/net/html</a>。在新代码合入标准库之前，golang.org/x命名空间也充当了新代码的暂存区：<a href=\"https://golang.org/doc/go1compat\">Go 1 兼容性保证</a>排除任何破坏性的改变，即使这些改变看起来很明显是有价值的。golang.org/x/crypto/ssh就是一个典型的例子，为了<a href=\"https://github.com/golang/crypto/commit/e4e2799dd7aab89f583e1d898300d96367750991\">建立更安全的默认配置</a>，它不得不打破现有的代码。</p>\n<h1>四、工具</h1>\n<p>我使用 go get 工具来下载、编译、安装和更新 Go 包。</p>\n<p>所有我用到的 Go 代码库都用内建的 <a href=\"https://golang.org/pkg/testing/\">testing</a> 工具。这不仅令测试容易和快速，而且使得<a href=\"https://blog.golang.org/cover\">覆盖率报告</a>很容易生成。</p>\n<p>每当一个程序使用比预期更多的资源时，我就使用 pprof。参见 golang.org 发布的有关 pprof 的<a href=\"https://blog.golang.org/profiling-go-programs\">博文</a>，或者我发布的有关优化 Debian 代码搜索的<a href=\"https://people.debian.org/~stapelberg/2014/12/23/code-search-taming-the-latency-tail.html\">博文</a>。在导入 net/http/pprof <a href=\"https://golang.org/pkg/net/http/pprof/\">包</a>之后，你可以在服务器运行时对其进行配置，而无需重新编译或重新启动。</p>\n<p>交叉编译就像设置 GOARCH 环境变量一样简单，例如树莓派3 只需设置 GOARCH=arm64。值得注意的是，工具也能够跨平台运行！比如，我能在我的 AMD64 电脑上配置 <a href=\"https://gokrazy.org\">gokrazy</a>：go tool pprof ~/go/bin/linux_arm64/dhcp <a href=\"http://gokrazy:3112/debug/pprof/heap\">http://gokrazy:3112/debug/pprof/heap</a>。</p>\n<p><a href=\"https://godoc.org/golang.org/x/tools/cmd/godoc\">godoc</a> 以纯文本形式显示文档，或者通过 HTTP 提供服务。<a href=\"https://godoc.org/\">godoc.org</a> 是一个公共实例，但是我在本地运行了一个实例，这样我就可以在离线时或者包还未发布时使用了。</p>\n<p>需要注意的是，这些标准工具和 Go 语言是互相伴随的。如果这些标准工具来自于 C 语言，上述每一项将是一个重大的成就。在 Go 中，我们认为这是理所应当的。</p>\n<h3>开始学习</h3>\n<p>希望我已经说清楚了，为什么我喜欢使用Go。</p>\n<p>如果你有兴趣开始使用 Go，请核查<a href=\"https://github.com/gopheracademy/gopher/blob/1cdbcd9fc3ba58efd628d4a6a552befc8e3912be/bot/bot.go#L516\">初学者的资源</a>获取相关信息，这也是我们引导刚加入Gophers <a href=\"https://slack.com/\">Slack</a>频道的人需要核查的。参见<a href=\"https://golang.org/help/\">https://golang.org/help/</a>。</p>\n<h3>注意事项</h3>\n<p>当然，没有编程工具是完全没有问题的。鉴于这篇文章解释为什么 Go 是我最喜欢的编程语言，所以该文只讨论了好的一面。不过，我将顺便地提及一些问题：</p>\n<ul>\n<li>如果你使用的 Go 包还没有提供稳定的 API，你可能想要使用特定的、已知的能够正常运行的版本。最好的办法是用 <a href=\"https://github.com/golang/dep\">dep</a> 工具，在编写 Go 语言时，它还不是 Go 的一部分。</li>\n<li>地道的 Go 代码不一定能转化为最高性能的机器代码，而且运行时间需要付出一些（小的）代价。在极少的情况下，我发现有性能缺乏的情况，我成功地诉诸于 <a href=\"https://golang.org/cmd/cgo/\">cgo</a> 或者汇编器。如果你的范围是硬实时应用程序或其他性能极其关键的代码，你的情况就可能不一样了。</li>\n<li>我之前写到 Go 标准库是我见过的最好的标准库，但是那不意味着它一点问题都没有。其中一个例子是 go/ast—标准库中最古老的包之一，当以编程的方式修改 Go 代码时，用它<a href=\"https://golang.org/issues/20744\">处理注释时会很复杂</a>。</li>\n</ul>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112706\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112706votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112706\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 3 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/q3198108035\">tsteho</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/q3198108035\">\r\n\t\t\t<img src=\"http://q.qlogo.cn/qqapp/208656/78BB6F88A07D4D78DB552CAD9BD3D689/100\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            Python爱好者        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/q3198108035\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/q3198108035/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/q3198108035/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 13</a> · <a title=\"QQ：3280767506\" target=\"_blank\" href=\"#\"><i class=\"fa fa-qq\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": 3, "praise_nums": "1", "url_object_id": "9091dd1d699348e40b009cdeae41ea85", "front_image_url": ["http://wx2.sinaimg.cn/large/7cc829d3gy1fknpksz2oej20h30aymzi.jpg"], "front_image_path": "full/a5e9e0f4c0aa89aeba655b9235066a4a93a5d4a4.jpg", "title": "为什么我最喜欢的编程语言是 Go"}
{"create_date": "2017/10/19 ", "url": "http://blog.jobbole.com/112726/", "fav_nums": 16, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://segmentfault.com/a/1190000011466454\">枫上雾棋</a>   </div><blockquote><p><img src=\"https://segmentfault.com/img/bVWhNF?w=1920&amp;h=1080\"><code>Vim</code> 是一个上古神器，本篇文章主要 <code>持续总结</code> 使用 <code>Vim</code> 的过程中不得不了解的一些 <code>指令</code> 和 <code>注意事项</code>，以及 <code>持续分享</code> 一个 <code>前端工作者</code> 不得不安装的一些 <code>插件</code>，而关于 <code>Vim</code> 的简介，<code>主题</code> 的选择，以及为何使用 <code>vim-plug</code> 来管理插件等内容，有兴趣的同学下来可以自己了解和对比下</p></blockquote>\n<h1>安装</h1>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f334b767e23516739373\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsudo apt-get install vim  // Ubuntu</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f334b767e23516739373-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f334b767e23516739373-1\"><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">apt</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">get </span><span class=\"crayon-e\">install </span><span class=\"crayon-v\">vim</span><span class=\"crayon-h\">  </span><span class=\"crayon-c\">// Ubuntu</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>其他平台，可以自行谷歌</p>\n<h1>新手指南</h1>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f334b767e2e965279974\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nvimtutor  // vim 教程</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f334b767e2e965279974-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f334b767e2e965279974-1\"><span class=\"crayon-v\">vimtutor</span><span class=\"crayon-h\">  </span><span class=\"crayon-c\">// vim 教程</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>上面是史上最简单，最全面的 <code>Vim</code> 基础教程，至今无人超越</p>\n<p>下面是作者基于上面的归纳</p>\n<h2><code>移动光标</code></h2>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f334b767e32298004097\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# hjkl\r\n# 2w 向前移动两个单词\r\n# 3e 向前移动到第 3 个单词的末尾\r\n# 0 移动到行首\r\n# $ 当前行的末尾\r\n# gg 文件第一行\r\n# G 文件最后一行\r\n# 行号+G 指定行\r\n# &lt;ctrl&gt;+o 跳转回之前的位置\r\n# &lt;ctrl&gt;+i 返回跳转之前的位置</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f334b767e32298004097-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e32298004097-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767e32298004097-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e32298004097-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767e32298004097-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e32298004097-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767e32298004097-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e32298004097-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767e32298004097-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e32298004097-10\">10</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f334b767e32298004097-1\"><span class=\"crayon-p\"># hjkl</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e32298004097-2\"><span class=\"crayon-p\"># 2w 向前移动两个单词</span></div><div class=\"crayon-line\" id=\"crayon-59f334b767e32298004097-3\"><span class=\"crayon-p\"># 3e 向前移动到第 3 个单词的末尾</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e32298004097-4\"><span class=\"crayon-p\"># 0 移动到行首</span></div><div class=\"crayon-line\" id=\"crayon-59f334b767e32298004097-5\"><span class=\"crayon-p\"># $ 当前行的末尾</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e32298004097-6\"><span class=\"crayon-p\"># gg 文件第一行</span></div><div class=\"crayon-line\" id=\"crayon-59f334b767e32298004097-7\"><span class=\"crayon-p\"># G 文件最后一行</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e32298004097-8\"><span class=\"crayon-p\"># 行号+G 指定行</span></div><div class=\"crayon-line\" id=\"crayon-59f334b767e32298004097-9\"><span class=\"crayon-p\"># &lt;ctrl&gt;+o 跳转回之前的位置</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e32298004097-10\"><span class=\"crayon-p\"># &lt;ctrl&gt;+i 返回跳转之前的位置</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p></p>\n<h2><code>退出</code></h2>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f334b767e36191054294\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# &lt;esc&gt; 进入正常模式\r\n# :q! 不保存退出\r\n# :wq 保存后退出</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f334b767e36191054294-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e36191054294-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767e36191054294-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f334b767e36191054294-1\"><span class=\"crayon-p\"># &lt;esc&gt; 进入正常模式</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e36191054294-2\"><span class=\"crayon-p\"># :q! 不保存退出</span></div><div class=\"crayon-line\" id=\"crayon-59f334b767e36191054294-3\"><span class=\"crayon-p\"># :wq 保存后退出</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p></p>\n<h2><code>删除</code></h2>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f334b767e39882210222\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# x 删除当前字符\r\n# dw 删除至当前单词末尾\r\n# de 删除至当前单词末尾，包括当前字符\r\n# d$ 删除至当前行尾\r\n# dd 删除整行\r\n# 2dd 删除两行</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f334b767e39882210222-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e39882210222-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767e39882210222-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e39882210222-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767e39882210222-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e39882210222-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f334b767e39882210222-1\"><span class=\"crayon-p\"># x 删除当前字符</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e39882210222-2\"><span class=\"crayon-p\"># dw 删除至当前单词末尾</span></div><div class=\"crayon-line\" id=\"crayon-59f334b767e39882210222-3\"><span class=\"crayon-p\"># de 删除至当前单词末尾，包括当前字符</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e39882210222-4\"><span class=\"crayon-p\"># d$ 删除至当前行尾</span></div><div class=\"crayon-line\" id=\"crayon-59f334b767e39882210222-5\"><span class=\"crayon-p\"># dd 删除整行</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e39882210222-6\"><span class=\"crayon-p\"># 2dd 删除两行</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p></p>\n<h2><code>修改</code></h2>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f334b767e3c254315448\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# i 插入文本\r\n# A 当前行末尾添加\r\n# r 替换当前字符\r\n# o 打开新的一行并进入插入模式</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f334b767e3c254315448-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e3c254315448-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767e3c254315448-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e3c254315448-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f334b767e3c254315448-1\"><span class=\"crayon-p\"># i 插入文本</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e3c254315448-2\"><span class=\"crayon-p\"># A 当前行末尾添加</span></div><div class=\"crayon-line\" id=\"crayon-59f334b767e3c254315448-3\"><span class=\"crayon-p\"># r 替换当前字符</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e3c254315448-4\"><span class=\"crayon-p\"># o 打开新的一行并进入插入模式</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p></p>\n<h2><code>撤销</code></h2>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f334b767e3f805440884\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# u 撤销\r\n# &lt;ctrl&gt;+r 取消撤销</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f334b767e3f805440884-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e3f805440884-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f334b767e3f805440884-1\"><span class=\"crayon-p\"># u 撤销</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e3f805440884-2\"><span class=\"crayon-p\"># &lt;ctrl&gt;+r 取消撤销</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p></p>\n<h2><code>复制粘贴剪切</code></h2>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f334b767e44040715923\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# v 进入可视模式\r\n# y 复制\r\n# p 粘贴\r\n# yy 复制当前行\r\n# dd 剪切当前行</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f334b767e44040715923-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e44040715923-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767e44040715923-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e44040715923-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767e44040715923-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f334b767e44040715923-1\"><span class=\"crayon-p\"># v 进入可视模式</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e44040715923-2\"><span class=\"crayon-p\"># y 复制</span></div><div class=\"crayon-line\" id=\"crayon-59f334b767e44040715923-3\"><span class=\"crayon-p\"># p 粘贴</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e44040715923-4\"><span class=\"crayon-p\"># yy 复制当前行</span></div><div class=\"crayon-line\" id=\"crayon-59f334b767e44040715923-5\"><span class=\"crayon-p\"># dd 剪切当前行</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p></p>\n<h2><code>状态</code></h2>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f334b767e48861525564\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# &lt;ctrl&gt;+g 显示当前行以及文件信息</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f334b767e48861525564-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f334b767e48861525564-1\"><span class=\"crayon-p\"># &lt;ctrl&gt;+g 显示当前行以及文件信息</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p></p>\n<h2><code>查找</code></h2>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f334b767e4b685347078\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# / 正向查找（n：继续查找，N：相反方向继续查找）\r\n# ？ 逆向查找\r\n# % 查找配对的 {，[，(\r\n# :set ic 忽略大小写\r\n# :set noic 取消忽略大小写\r\n# :set hls 匹配项高亮显示\r\n# :set is 显示部分匹配</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f334b767e4b685347078-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e4b685347078-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767e4b685347078-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e4b685347078-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767e4b685347078-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e4b685347078-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767e4b685347078-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f334b767e4b685347078-1\"><span class=\"crayon-p\"># / 正向查找（n：继续查找，N：相反方向继续查找）</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e4b685347078-2\"><span class=\"crayon-p\"># ？ 逆向查找</span></div><div class=\"crayon-line\" id=\"crayon-59f334b767e4b685347078-3\"><span class=\"crayon-p\"># % 查找配对的 {，[，(</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e4b685347078-4\"><span class=\"crayon-p\"># :set ic 忽略大小写</span></div><div class=\"crayon-line\" id=\"crayon-59f334b767e4b685347078-5\"><span class=\"crayon-p\"># :set noic 取消忽略大小写</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e4b685347078-6\"><span class=\"crayon-p\"># :set hls 匹配项高亮显示</span></div><div class=\"crayon-line\" id=\"crayon-59f334b767e4b685347078-7\"><span class=\"crayon-p\"># :set is 显示部分匹配</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p></p>\n<h2><code>替换</code></h2>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f334b767e4e569685214\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# :s/old/new 替换该行第一个匹配串\r\n# :s/old/new/g 替换全行的匹配串\r\n# :%s/old/new/g 替换整个文件的匹配串</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f334b767e4e569685214-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e4e569685214-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767e4e569685214-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f334b767e4e569685214-1\"><span class=\"crayon-p\"># :s/old/new 替换该行第一个匹配串</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e4e569685214-2\"><span class=\"crayon-p\"># :s/old/new/g 替换全行的匹配串</span></div><div class=\"crayon-line\" id=\"crayon-59f334b767e4e569685214-3\"><span class=\"crayon-p\"># :%s/old/new/g 替换整个文件的匹配串</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p></p>\n<h2><code>执行外部命令</code></h2>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f334b767e51608060736\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# :!shell 执行外部命令</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f334b767e51608060736-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f334b767e51608060736-1\"><span class=\"crayon-p\"># :!shell 执行外部命令</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p></p>\n<h1>.vimrc</h1>\n<p><code>.vimrc</code> 是 <code>Vim</code> 的配置文件，需要我们自己创建</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f334b767e54134487883\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ncd Home               // 进入 Home 目录\r\ntouch .vimrc          // 配置文件\r\n\r\n# Unix\r\n# vim-plug\r\n# Vim\r\ncurl -fLo ~/.vim/autoload/plug.vim --create-dirs \\\r\n    https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim\r\n# Neovim\r\ncurl -fLo ~/.local/share/nvim/site/autoload/plug.vim --create-dirs \\\r\n    https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f334b767e54134487883-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e54134487883-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767e54134487883-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e54134487883-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767e54134487883-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e54134487883-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767e54134487883-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e54134487883-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767e54134487883-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e54134487883-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767e54134487883-11\">11</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f334b767e54134487883-1\"><span class=\"crayon-e\">cd </span><span class=\"crayon-v\">Home</span><span class=\"crayon-h\">               </span><span class=\"crayon-c\">// 进入 Home 目录</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e54134487883-2\"><span class=\"crayon-i\">touch</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">vimrc</span><span class=\"crayon-h\">          </span><span class=\"crayon-c\">// 配置文件</span></div><div class=\"crayon-line\" id=\"crayon-59f334b767e54134487883-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e54134487883-4\"><span class=\"crayon-p\"># Unix</span></div><div class=\"crayon-line\" id=\"crayon-59f334b767e54134487883-5\"><span class=\"crayon-p\"># vim-plug</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e54134487883-6\"><span class=\"crayon-p\"># Vim</span></div><div class=\"crayon-line\" id=\"crayon-59f334b767e54134487883-7\"><span class=\"crayon-v\">curl</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">fLo</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">/</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">vim</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">autoload</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">plug</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">vim</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">create</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">dirs</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">\\</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e54134487883-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">https</span><span class=\"crayon-o\">:</span><span class=\"crayon-c\">//raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim</span></div><div class=\"crayon-line\" id=\"crayon-59f334b767e54134487883-9\"><span class=\"crayon-p\"># Neovim</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e54134487883-10\"><span class=\"crayon-v\">curl</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">fLo</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">/</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">local</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">share</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">nvim</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">site</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">autoload</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">plug</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">vim</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">create</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">dirs</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">\\</span></div><div class=\"crayon-line\" id=\"crayon-59f334b767e54134487883-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">https</span><span class=\"crayon-o\">:</span><span class=\"crayon-c\">//raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0017 seconds] -->\r\n<p>其他平台，可以查看 <a href=\"https://github.com/junegunn/vim-plug\">vim-plug</a></p>\n<h2>基本配置</h2>\n<h3><code>取消备份</code></h3>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f334b767e58606390997\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nset nobackup\r\nset noswapfile</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f334b767e58606390997-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e58606390997-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f334b767e58606390997-1\"><span class=\"crayon-e\">set </span><span class=\"crayon-e\">nobackup</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e58606390997-2\"><span class=\"crayon-e\">set </span><span class=\"crayon-v\">noswapfile</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p></p>\n<h3><code>文件编码</code></h3>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f334b767e5b939729771\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nset encoding=utf-8</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f334b767e5b939729771-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f334b767e5b939729771-1\"><span class=\"crayon-e\">set </span><span class=\"crayon-v\">encoding</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">utf</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">8</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p></p>\n<h3><code>显示行号</code></h3>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f334b767e5e189998586\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nset number</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f334b767e5e189998586-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f334b767e5e189998586-1\"><span class=\"crayon-e\">set </span><span class=\"crayon-v\">number</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p></p>\n<h3><code>取消换行</code></h3>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f334b767e61743921261\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nset nowrap</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f334b767e61743921261-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f334b767e61743921261-1\"><span class=\"crayon-e\">set </span><span class=\"crayon-v\">nowrap</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p></p>\n<h3><code>显示光标当前位置</code></h3>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f334b767e64472408124\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nset ruler</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f334b767e64472408124-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f334b767e64472408124-1\"><span class=\"crayon-e\">set </span><span class=\"crayon-v\">ruler</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p></p>\n<h3><code>设置缩进</code></h3>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f334b767e67010325706\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nset cindent\r\n\r\nset tabstop=2\r\nset shiftwidth=2</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f334b767e67010325706-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e67010325706-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767e67010325706-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e67010325706-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f334b767e67010325706-1\"><span class=\"crayon-e\">set </span><span class=\"crayon-e\">cindent</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e67010325706-2\"> </div><div class=\"crayon-line\" id=\"crayon-59f334b767e67010325706-3\"><span class=\"crayon-e\">set </span><span class=\"crayon-v\">tabstop</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">2</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e67010325706-4\"><span class=\"crayon-e\">set </span><span class=\"crayon-v\">shiftwidth</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">2</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p></p>\n<h3><code>突出显示当前行</code></h3>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f334b767e6a155549955\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nset cursorline</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f334b767e6a155549955-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f334b767e6a155549955-1\"><span class=\"crayon-e\">set </span><span class=\"crayon-v\">cursorline</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p></p>\n<h3><code>查找</code></h3>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f334b767e6d243829679\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nset ic\r\nset hls\r\nset is</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f334b767e6d243829679-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e6d243829679-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767e6d243829679-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f334b767e6d243829679-1\"><span class=\"crayon-e\">set </span><span class=\"crayon-e\">ic</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e6d243829679-2\"><span class=\"crayon-e\">set </span><span class=\"crayon-e\">hls</span></div><div class=\"crayon-line\" id=\"crayon-59f334b767e6d243829679-3\"><span class=\"crayon-e\">set </span><span class=\"crayon-st\">is</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p></p>\n<h3><code>左下角显示当前 vim 模式</code></h3>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f334b767e70217095221\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nset showmode</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f334b767e70217095221-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f334b767e70217095221-1\"><span class=\"crayon-e\">set </span><span class=\"crayon-v\">showmode</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p></p>\n<h3><code>代码折叠</code></h3>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f334b767e73915657416\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# 启动 vim 时关闭折叠代码\r\nset nofoldenable</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f334b767e73915657416-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e73915657416-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f334b767e73915657416-1\"><span class=\"crayon-p\"># 启动 vim 时关闭折叠代码</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e73915657416-2\"><span class=\"crayon-e\">set </span><span class=\"crayon-v\">nofoldenable</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p></p>\n<h3><code>主题</code></h3>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f334b767e76719959369\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsyntax enable\r\nset background=dark\r\ncolorscheme solarized</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f334b767e76719959369-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e76719959369-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767e76719959369-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f334b767e76719959369-1\"><span class=\"crayon-e\">syntax </span><span class=\"crayon-e\">enable</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e76719959369-2\"><span class=\"crayon-e\">set </span><span class=\"crayon-v\">background</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">dark</span></div><div class=\"crayon-line\" id=\"crayon-59f334b767e76719959369-3\"><span class=\"crayon-e\">colorscheme </span><span class=\"crayon-v\">solarized</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p></p>\n<ul>\n<li><a href=\"https://github.com/altercation/vim-colors-solarized\">altercation/vim-colors-solarized</a></li>\n<li><a href=\"https://github.com/Anthony25/gnome-terminal-colors-solarized\">Anthony25/gnome-terminal-colors-solarized</a></li>\n</ul>\n<h2>插件配置</h2>\n<h3><code>树形目录</code></h3>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f334b767e7b278783411\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nPlug 'scrooloose/nerdtree'\r\nPlug 'jistr/vim-nerdtree-tabs'\r\nPlug 'Xuyuanp/nerdtree-git-plugin'\r\n\r\nautocmd vimenter * NERDTree\r\nmap &lt;C-n&gt; :NERDTreeToggle &lt;CR&gt;\r\nlet NERDTreeShowHidden=1\r\nlet g:NERDTreeShowIgnoredStatus = 1\r\nlet g:nerdtree_tabs_open_on_console_startup=1\r\nlet g:NERDTreeIndicatorMapCustom = {\r\n    \\ \"Modified\"  : \"✹\",\r\n    \\ \"Staged\"    : \"✚\",\r\n    \\ \"Untracked\" : \"✭\",\r\n    \\ \"Renamed\"   : \"➜\",\r\n    \\ \"Unmerged\"  : \"═\",\r\n    \\ \"Deleted\"   : \"✖\",\r\n    \\ \"Dirty\"     : \"✗\",\r\n    \\ \"Clean\"     : \"✔︎\",\r\n    \\ 'Ignored'   : '☒',\r\n    \\ \"Unknown\"   : \"?\"\r\n    \\ }\r\n\r\n# o 打开关闭文件或目录\r\n# e 以文件管理的方式打开选中的目录\r\n# t 在标签页中打开\r\n# T 在标签页中打开，但光标仍然留在 NERDTree\r\n# r 刷新光标所在的目录\r\n# R 刷新当前根路径\r\n# X 收起所有目录\r\n# p 小写，跳转到光标所在的上一级路径\r\n# P 大写，跳转到当前根路径\r\n# J 到第一个节点\r\n# K 到最后一个节点\r\n# I 显示隐藏文件\r\n# m 显示文件操作菜单\r\n# C 将根路径设置为光标所在的目录\r\n# u 设置上级目录为根路径\r\n# ctrl + w + w 光标自动在左右侧窗口切换\r\n# ctrl + w + r 移动当前窗口的布局位置\r\n# :tabc 关闭当前的 tab\r\n# :tabo   关闭所有其他的 tab\r\n# :tabp   前一个 tab\r\n# :tabn   后一个 tab\r\n# gT      前一个 tab\r\n# gt      后一个 tab</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f334b767e7b278783411-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e7b278783411-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767e7b278783411-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e7b278783411-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767e7b278783411-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e7b278783411-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767e7b278783411-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e7b278783411-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767e7b278783411-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e7b278783411-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767e7b278783411-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e7b278783411-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767e7b278783411-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e7b278783411-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767e7b278783411-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e7b278783411-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767e7b278783411-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e7b278783411-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767e7b278783411-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e7b278783411-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767e7b278783411-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e7b278783411-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767e7b278783411-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e7b278783411-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767e7b278783411-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e7b278783411-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767e7b278783411-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e7b278783411-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767e7b278783411-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e7b278783411-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767e7b278783411-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e7b278783411-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767e7b278783411-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e7b278783411-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767e7b278783411-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e7b278783411-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767e7b278783411-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e7b278783411-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767e7b278783411-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e7b278783411-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767e7b278783411-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e7b278783411-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767e7b278783411-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e7b278783411-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767e7b278783411-45\">45</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f334b767e7b278783411-1\"><span class=\"crayon-i\">Plug</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'scrooloose/nerdtree'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e7b278783411-2\"><span class=\"crayon-i\">Plug</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'jistr/vim-nerdtree-tabs'</span></div><div class=\"crayon-line\" id=\"crayon-59f334b767e7b278783411-3\"><span class=\"crayon-i\">Plug</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Xuyuanp/nerdtree-git-plugin'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e7b278783411-4\"> </div><div class=\"crayon-line\" id=\"crayon-59f334b767e7b278783411-5\"><span class=\"crayon-e\">autocmd </span><span class=\"crayon-e \">vimenter *</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">NERDTree</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e7b278783411-6\"><span class=\"crayon-v\">map</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">C</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">n</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">NERDTreeToggle</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">CR</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-59f334b767e7b278783411-7\"><span class=\"crayon-e\">let </span><span class=\"crayon-v\">NERDTreeShowHidden</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e7b278783411-8\"><span class=\"crayon-i\">let</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">g</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">NERDTreeShowIgnoredStatus</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line\" id=\"crayon-59f334b767e7b278783411-9\"><span class=\"crayon-i\">let</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">g</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">nerdtree_tabs_open_on_console_startup</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e7b278783411-10\"><span class=\"crayon-i\">let</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">g</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">NERDTreeIndicatorMapCustom</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f334b767e7b278783411-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">\\</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Modified\"</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"✹\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e7b278783411-12\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">\\</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Staged\"</span><span class=\"crayon-h\">    </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"✚\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f334b767e7b278783411-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">\\</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Untracked\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"✭\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e7b278783411-14\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">\\</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Renamed\"</span><span class=\"crayon-h\">   </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"➜\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f334b767e7b278783411-15\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">\\</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Unmerged\"</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"═\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e7b278783411-16\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">\\</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Deleted\"</span><span class=\"crayon-h\">   </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"✖\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f334b767e7b278783411-17\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">\\</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Dirty\"</span><span class=\"crayon-h\">     </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"✗\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e7b278783411-18\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">\\</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Clean\"</span><span class=\"crayon-h\">     </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"✔︎\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f334b767e7b278783411-19\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">\\</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Ignored'</span><span class=\"crayon-h\">   </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'☒'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e7b278783411-20\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">\\</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Unknown\"</span><span class=\"crayon-h\">   </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"?\"</span></div><div class=\"crayon-line\" id=\"crayon-59f334b767e7b278783411-21\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">\\</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e7b278783411-22\"> </div><div class=\"crayon-line\" id=\"crayon-59f334b767e7b278783411-23\"><span class=\"crayon-p\"># o 打开关闭文件或目录</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e7b278783411-24\"><span class=\"crayon-p\"># e 以文件管理的方式打开选中的目录</span></div><div class=\"crayon-line\" id=\"crayon-59f334b767e7b278783411-25\"><span class=\"crayon-p\"># t 在标签页中打开</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e7b278783411-26\"><span class=\"crayon-p\"># T 在标签页中打开，但光标仍然留在 NERDTree</span></div><div class=\"crayon-line\" id=\"crayon-59f334b767e7b278783411-27\"><span class=\"crayon-p\"># r 刷新光标所在的目录</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e7b278783411-28\"><span class=\"crayon-p\"># R 刷新当前根路径</span></div><div class=\"crayon-line\" id=\"crayon-59f334b767e7b278783411-29\"><span class=\"crayon-p\"># X 收起所有目录</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e7b278783411-30\"><span class=\"crayon-p\"># p 小写，跳转到光标所在的上一级路径</span></div><div class=\"crayon-line\" id=\"crayon-59f334b767e7b278783411-31\"><span class=\"crayon-p\"># P 大写，跳转到当前根路径</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e7b278783411-32\"><span class=\"crayon-p\"># J 到第一个节点</span></div><div class=\"crayon-line\" id=\"crayon-59f334b767e7b278783411-33\"><span class=\"crayon-p\"># K 到最后一个节点</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e7b278783411-34\"><span class=\"crayon-p\"># I 显示隐藏文件</span></div><div class=\"crayon-line\" id=\"crayon-59f334b767e7b278783411-35\"><span class=\"crayon-p\"># m 显示文件操作菜单</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e7b278783411-36\"><span class=\"crayon-p\"># C 将根路径设置为光标所在的目录</span></div><div class=\"crayon-line\" id=\"crayon-59f334b767e7b278783411-37\"><span class=\"crayon-p\"># u 设置上级目录为根路径</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e7b278783411-38\"><span class=\"crayon-p\"># ctrl + w + w 光标自动在左右侧窗口切换</span></div><div class=\"crayon-line\" id=\"crayon-59f334b767e7b278783411-39\"><span class=\"crayon-p\"># ctrl + w + r 移动当前窗口的布局位置</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e7b278783411-40\"><span class=\"crayon-p\"># :tabc 关闭当前的 tab</span></div><div class=\"crayon-line\" id=\"crayon-59f334b767e7b278783411-41\"><span class=\"crayon-p\"># :tabo   关闭所有其他的 tab</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e7b278783411-42\"><span class=\"crayon-p\"># :tabp   前一个 tab</span></div><div class=\"crayon-line\" id=\"crayon-59f334b767e7b278783411-43\"><span class=\"crayon-p\"># :tabn   后一个 tab</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e7b278783411-44\"><span class=\"crayon-p\"># gT      前一个 tab</span></div><div class=\"crayon-line\" id=\"crayon-59f334b767e7b278783411-45\"><span class=\"crayon-p\"># gt      后一个 tab</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0039 seconds] -->\r\n<p></p>\n<ul>\n<li><a href=\"https://github.com/scrooloose/nerdtree\">scrooloose/nerdtree</a></li>\n<li><a href=\"https://github.com/jistr/vim-nerdtree-tabs\">vim-nerdtree-tabs</a></li>\n<li><a href=\"https://github.com/Xuyuanp/nerdtree-git-plugin\">nerdtree-git-plugin</a></li>\n</ul>\n<h3><code>代码，引号，路径补全</code></h3>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f334b767e7f480924154\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nPlug 'Valloric/YouCompleteMe'\r\nPlug 'Raimondi/delimitMate'\r\nPlug 'Shougo/deoplete.nvim', { 'do': ':UpdateRemotePlugins' }</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f334b767e7f480924154-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e7f480924154-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767e7f480924154-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f334b767e7f480924154-1\"><span class=\"crayon-i\">Plug</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Valloric/YouCompleteMe'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e7f480924154-2\"><span class=\"crayon-i\">Plug</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Raimondi/delimitMate'</span></div><div class=\"crayon-line\" id=\"crayon-59f334b767e7f480924154-3\"><span class=\"crayon-i\">Plug</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Shougo/deoplete.nvim'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'do'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">':UpdateRemotePlugins'</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p></p>\n<ul>\n<li><a href=\"https://github.com/Valloric/YouCompleteMe\">Valloric/YouCompleteMe</a></li>\n<li><a href=\"https://github.com/Raimondi/delimitMate\">Raimondi/delimitMate</a></li>\n<li><a href=\"https://github.com/Shougo/deoplete.nvim\">Shougo/deoplete.nvim</a></li>\n</ul>\n<h3><code>语法高亮，检查</code></h3>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f334b767e82088752456\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nPlug 'sheerun/vim-polyglot'\r\nPlug 'w0rp/ale'\r\n\r\nlet g:ale_linters = {\r\n\\    'javascript': ['eslint'],\r\n\\    'css': ['stylelint'],\r\n\\}\r\nlet g:ale_fixers = {\r\n\\    'javascript': ['eslint'],\r\n\\    'css': ['stylelint'],\r\n\\}\r\nlet g:ale_fix_on_save = 1\r\n\r\nlet g:ale_sign_column_always = 1\r\nlet g:ale_sign_error = '●'\r\nlet g:ale_sign_warning = '▶'\r\n\r\nnmap &lt;silent&gt; &lt;C-k&gt; &lt;Plug&gt;(ale_previous_wrap)\r\nnmap &lt;silent&gt; &lt;C-j&gt; &lt;Plug&gt;(ale_next_wrap)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f334b767e82088752456-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e82088752456-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767e82088752456-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e82088752456-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767e82088752456-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e82088752456-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767e82088752456-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e82088752456-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767e82088752456-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e82088752456-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767e82088752456-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e82088752456-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767e82088752456-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e82088752456-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767e82088752456-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e82088752456-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767e82088752456-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e82088752456-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767e82088752456-19\">19</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f334b767e82088752456-1\"><span class=\"crayon-i\">Plug</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'sheerun/vim-polyglot'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e82088752456-2\"><span class=\"crayon-i\">Plug</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'w0rp/ale'</span></div><div class=\"crayon-line\" id=\"crayon-59f334b767e82088752456-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e82088752456-4\"><span class=\"crayon-i\">let</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">g</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">ale_linters</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f334b767e82088752456-5\"><span class=\"crayon-sy\">\\</span><span class=\"crayon-h\">    </span><span class=\"crayon-s\">'javascript'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'eslint'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e82088752456-6\"><span class=\"crayon-sy\">\\</span><span class=\"crayon-h\">    </span><span class=\"crayon-s\">'css'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'stylelint'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f334b767e82088752456-7\"><span class=\"crayon-sy\">\\</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e82088752456-8\"><span class=\"crayon-i\">let</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">g</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">ale_fixers</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f334b767e82088752456-9\"><span class=\"crayon-sy\">\\</span><span class=\"crayon-h\">    </span><span class=\"crayon-s\">'javascript'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'eslint'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e82088752456-10\"><span class=\"crayon-sy\">\\</span><span class=\"crayon-h\">    </span><span class=\"crayon-s\">'css'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'stylelint'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f334b767e82088752456-11\"><span class=\"crayon-sy\">\\</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e82088752456-12\"><span class=\"crayon-i\">let</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">g</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">ale_fix_on_save</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line\" id=\"crayon-59f334b767e82088752456-13\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e82088752456-14\"><span class=\"crayon-i\">let</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">g</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">ale_sign_column_always</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line\" id=\"crayon-59f334b767e82088752456-15\"><span class=\"crayon-i\">let</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">g</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">ale_sign_error</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'●'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e82088752456-16\"><span class=\"crayon-i\">let</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">g</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">ale_sign_warning</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'▶'</span></div><div class=\"crayon-line\" id=\"crayon-59f334b767e82088752456-17\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e82088752456-18\"><span class=\"crayon-v\">nmap</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">silent</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">C</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">k</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">Plug</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ale_previous_wrap</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f334b767e82088752456-19\"><span class=\"crayon-v\">nmap</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">silent</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">C</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">Plug</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ale_next_wrap</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0029 seconds] -->\r\n<p></p>\n<ul>\n<li><a href=\"https://github.com/w0rp/ale\">w0rp/ale</a></li>\n<li><a href=\"https://github.com/sheerun/vim-polyglot\">sheerun/vim-polyglot</a></li>\n</ul>\n<h3><code>文件，代码搜索</code></h3>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f334b767e8c688203086\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nPlug 'rking/ag.vim'\r\nPlug 'kien/ctrlp.vim'</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f334b767e8c688203086-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e8c688203086-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f334b767e8c688203086-1\"><span class=\"crayon-i\">Plug</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'rking/ag.vim'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e8c688203086-2\"><span class=\"crayon-i\">Plug</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'kien/ctrlp.vim'</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p></p>\n<ul>\n<li><a href=\"https://github.com/kien/ctrlp.vim\">kien/ctrlp.vim</a></li>\n<li><a href=\"https://github.com/ggreer/the_silver_searcher\">ggreer/the_silver_searcher</a></li>\n<li><a href=\"https://github.com/rking/ag.vim\">rking/ag.vim</a></li>\n</ul>\n<h3><code>加强版状态栏</code></h3>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f334b767e90925419337\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nPlug 'vim-airline/vim-airline'\r\nPlug 'vim-airline/vim-airline-themes'\r\n\r\nlet g:airline_theme='papercolor'</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f334b767e90925419337-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e90925419337-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767e90925419337-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e90925419337-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f334b767e90925419337-1\"><span class=\"crayon-i\">Plug</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'vim-airline/vim-airline'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e90925419337-2\"><span class=\"crayon-i\">Plug</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'vim-airline/vim-airline-themes'</span></div><div class=\"crayon-line\" id=\"crayon-59f334b767e90925419337-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e90925419337-4\"><span class=\"crayon-i\">let</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">g</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">airline_theme</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'papercolor'</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p></p>\n<ul>\n<li><a href=\"https://github.com/vim-airline/vim-airline\">vim-airline/vim-airline</a></li>\n<li><a href=\"https://github.com/vim-airline/vim-airline-themes\">vim-airline/vim-airline-themes</a></li>\n</ul>\n<h3><code>代码注释</code></h3>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f334b767e95867833645\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nPlug 'scrooloose/nerdcommenter'\r\n\r\n# &lt;leader&gt;cc // 注释\r\n# &lt;leader&gt;cm 只用一组符号注释\r\n# &lt;leader&gt;cA 在行尾添加注释\r\n# &lt;leader&gt;c$ /* 注释 */\r\n# &lt;leader&gt;cs /* 块注释 */\r\n# &lt;leader&gt;cy 注释并复制\r\n# &lt;leader&gt;c&lt;space&gt; 注释/取消注释\r\n# &lt;leader&gt;ca 切换　// 和 /* */\r\n# &lt;leader&gt;cu 取消注释\r\n\r\nlet g:NERDSpaceDelims = 1\r\nlet g:NERDDefaultAlign = 'left'\r\nlet g:NERDCustomDelimiters = {\r\n            \\ 'javascript': { 'left': '//', 'leftAlt': '/**', 'rightAlt': '*/' },\r\n            \\ 'less': { 'left': '/**', 'right': '*/' }\r\n        \\ }</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f334b767e95867833645-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e95867833645-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767e95867833645-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e95867833645-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767e95867833645-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e95867833645-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767e95867833645-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e95867833645-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767e95867833645-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e95867833645-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767e95867833645-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e95867833645-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767e95867833645-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e95867833645-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767e95867833645-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e95867833645-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767e95867833645-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e95867833645-18\">18</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f334b767e95867833645-1\"><span class=\"crayon-i\">Plug</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'scrooloose/nerdcommenter'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e95867833645-2\"> </div><div class=\"crayon-line\" id=\"crayon-59f334b767e95867833645-3\"><span class=\"crayon-p\"># &lt;leader&gt;cc // 注释</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e95867833645-4\"><span class=\"crayon-p\"># &lt;leader&gt;cm 只用一组符号注释</span></div><div class=\"crayon-line\" id=\"crayon-59f334b767e95867833645-5\"><span class=\"crayon-p\"># &lt;leader&gt;cA 在行尾添加注释</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e95867833645-6\"><span class=\"crayon-p\"># &lt;leader&gt;c$ /* 注释 */</span></div><div class=\"crayon-line\" id=\"crayon-59f334b767e95867833645-7\"><span class=\"crayon-p\"># &lt;leader&gt;cs /* 块注释 */</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e95867833645-8\"><span class=\"crayon-p\"># &lt;leader&gt;cy 注释并复制</span></div><div class=\"crayon-line\" id=\"crayon-59f334b767e95867833645-9\"><span class=\"crayon-p\"># &lt;leader&gt;c&lt;space&gt; 注释/取消注释</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e95867833645-10\"><span class=\"crayon-p\"># &lt;leader&gt;ca 切换　// 和 /* */</span></div><div class=\"crayon-line\" id=\"crayon-59f334b767e95867833645-11\"><span class=\"crayon-p\"># &lt;leader&gt;cu 取消注释</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e95867833645-12\"> </div><div class=\"crayon-line\" id=\"crayon-59f334b767e95867833645-13\"><span class=\"crayon-i\">let</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">g</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">NERDSpaceDelims</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e95867833645-14\"><span class=\"crayon-i\">let</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">g</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">NERDDefaultAlign</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'left'</span></div><div class=\"crayon-line\" id=\"crayon-59f334b767e95867833645-15\"><span class=\"crayon-i\">let</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">g</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">NERDCustomDelimiters</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e95867833645-16\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">\\</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'javascript'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'left'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'//'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'leftAlt'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'/**'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'rightAlt'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'*/'</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f334b767e95867833645-17\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">\\</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'less'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'left'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'/**'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'right'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'*/'</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e95867833645-18\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">\\</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0022 seconds] -->\r\n<p></p>\n<ul>\n<li><a href=\"https://github.com/scrooloose/nerdcommenter\">scrooloose/nerdcommenter</a></li>\n</ul>\n<h3><code>git</code></h3>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f334b767e99666333730\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nPlug 'airblade/vim-gitgutter'\r\nPlug 'tpope/vim-fugitive'</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f334b767e99666333730-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e99666333730-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f334b767e99666333730-1\"><span class=\"crayon-i\">Plug</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'airblade/vim-gitgutter'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e99666333730-2\"><span class=\"crayon-i\">Plug</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'tpope/vim-fugitive'</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p></p>\n<ul>\n<li><a href=\"https://github.com/airblade/vim-gitgutter\">airblade/vim-gitgutter</a></li>\n<li><a href=\"https://github.com/tpope/vim-fugitive\">tpope/vim-fugitive</a></li>\n</ul>\n<h3><code>Markdown</code></h3>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f334b767e9c186947316\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nPlug 'suan/vim-instant-markdown'\r\n\r\nlet g:instant_markdown_slow = 1\r\nlet g:instant_markdown_autostart = 0\r\n# :InstantMarkdownPreview</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f334b767e9c186947316-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e9c186947316-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767e9c186947316-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e9c186947316-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767e9c186947316-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f334b767e9c186947316-1\"><span class=\"crayon-i\">Plug</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'suan/vim-instant-markdown'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e9c186947316-2\"> </div><div class=\"crayon-line\" id=\"crayon-59f334b767e9c186947316-3\"><span class=\"crayon-i\">let</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">g</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">instant_markdown_slow</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e9c186947316-4\"><span class=\"crayon-i\">let</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">g</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">instant_markdown_autostart</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line\" id=\"crayon-59f334b767e9c186947316-5\"><span class=\"crayon-p\"># :InstantMarkdownPreview</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p></p>\n<ul>\n<li><a href=\"https://github.com/suan/vim-instant-markdown\">suan/vim-instant-markdown</a></li>\n</ul>\n<h3><code>Emmet</code></h3>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f334b767e9f944906499\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nPlug 'mattn/emmet-vim'\r\n\r\nlet g:user_emmet_leader_key='&lt;Tab&gt;'\r\nlet g:user_emmet_settings = {\r\n         \\ 'javascript.jsx' : {\r\n            \\ 'extends' : 'jsx',\r\n        \\ },\r\n         \\ }</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f334b767e9f944906499-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e9f944906499-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767e9f944906499-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e9f944906499-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767e9f944906499-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e9f944906499-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767e9f944906499-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767e9f944906499-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f334b767e9f944906499-1\"><span class=\"crayon-i\">Plug</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'mattn/emmet-vim'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e9f944906499-2\"> </div><div class=\"crayon-line\" id=\"crayon-59f334b767e9f944906499-3\"><span class=\"crayon-i\">let</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">g</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">user_emmet_leader_key</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'&lt;Tab&gt;'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e9f944906499-4\"><span class=\"crayon-i\">let</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">g</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">user_emmet_settings</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f334b767e9f944906499-5\"><span class=\"crayon-h\">         </span><span class=\"crayon-sy\">\\</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'javascript.jsx'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e9f944906499-6\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">\\</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'extends'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'jsx'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f334b767e9f944906499-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">\\</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767e9f944906499-8\"><span class=\"crayon-h\">         </span><span class=\"crayon-sy\">\\</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p></p>\n<ul>\n<li><a href=\"https://github.com/mattn/emmet-vim\">mattn/emmet-vim</a></li>\n</ul>\n<h3><code>html 5</code></h3>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f334b767ea2947901421\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nPlug 'othree/html5.vim'</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f334b767ea2947901421-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f334b767ea2947901421-1\"><span class=\"crayon-i\">Plug</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'othree/html5.vim'</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p></p>\n<ul>\n<li><a href=\"https://github.com/othree/html5.vim\">othree/html5.vim</a></li>\n</ul>\n<h3><code>css 3</code></h3>\n<p><img src=\"https://segmentfault.com/img/bVWLbE?w=684&amp;h=451\"></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f334b767ea5590259948\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nPlug 'hail2u/vim-css3-syntax'\r\nPlug 'ap/vim-css-color'\r\n\r\naugroup VimCSS3Syntax\r\n  autocmd!\r\n\r\n  autocmd FileType css setlocal iskeyword+=-\r\naugroup END</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f334b767ea5590259948-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767ea5590259948-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767ea5590259948-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767ea5590259948-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767ea5590259948-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767ea5590259948-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767ea5590259948-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767ea5590259948-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f334b767ea5590259948-1\"><span class=\"crayon-i\">Plug</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'hail2u/vim-css3-syntax'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767ea5590259948-2\"><span class=\"crayon-i\">Plug</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'ap/vim-css-color'</span></div><div class=\"crayon-line\" id=\"crayon-59f334b767ea5590259948-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767ea5590259948-4\"><span class=\"crayon-e\">augroup </span><span class=\"crayon-e\">VimCSS3Syntax</span></div><div class=\"crayon-line\" id=\"crayon-59f334b767ea5590259948-5\"><span class=\"crayon-e\">  </span><span class=\"crayon-v\">autocmd</span><span class=\"crayon-o\">!</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767ea5590259948-6\"> </div><div class=\"crayon-line\" id=\"crayon-59f334b767ea5590259948-7\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">autocmd </span><span class=\"crayon-e\">FileType </span><span class=\"crayon-e\">css </span><span class=\"crayon-e\">setlocal </span><span class=\"crayon-v\">iskeyword</span><span class=\"crayon-o\">+=</span><span class=\"crayon-o\">-</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767ea5590259948-8\"><span class=\"crayon-e\">augroup </span><span class=\"crayon-st\">END</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p></p>\n<ul>\n<li><a href=\"https://github.com/hail2u/vim-css3-syntax\">hail2u/vim-css3-syntax</a></li>\n<li><a href=\"https://github.com/ap/vim-css-color\">ap/vim-css-color</a></li>\n</ul>\n<h3><code>JavaScipt</code></h3>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f334b767ea9631100527\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nPlug 'pangloss/vim-javascript'\r\n\r\nlet g:javascript_plugin_jsdoc = 1\r\nlet g:javascript_plugin_ngdoc = 1\r\nlet g:javascript_plugin_flow = 1\r\nset foldmethod=syntax\r\nlet g:javascript_conceal_function             = \"ƒ\"\r\nlet g:javascript_conceal_null                 = \"ø\"\r\nlet g:javascript_conceal_this                 = \"@\"\r\nlet g:javascript_conceal_return               = \"⇚\"\r\nlet g:javascript_conceal_undefined            = \"¿\"\r\nlet g:javascript_conceal_NaN                  = \"ℕ\"\r\nlet g:javascript_conceal_prototype            = \"¶\"\r\nlet g:javascript_conceal_static               = \"•\"\r\nlet g:javascript_conceal_super                = \"Ω\"\r\nlet g:javascript_conceal_arrow_function       = \"⇒\"\r\nlet g:javascript_conceal_noarg_arrow_function = \"\"\r\nlet g:javascript_conceal_underscore_arrow_function = \"\"\r\nset conceallevel=1</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f334b767ea9631100527-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767ea9631100527-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767ea9631100527-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767ea9631100527-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767ea9631100527-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767ea9631100527-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767ea9631100527-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767ea9631100527-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767ea9631100527-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767ea9631100527-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767ea9631100527-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767ea9631100527-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767ea9631100527-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767ea9631100527-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767ea9631100527-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767ea9631100527-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767ea9631100527-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767ea9631100527-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767ea9631100527-19\">19</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f334b767ea9631100527-1\"><span class=\"crayon-i\">Plug</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'pangloss/vim-javascript'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767ea9631100527-2\"> </div><div class=\"crayon-line\" id=\"crayon-59f334b767ea9631100527-3\"><span class=\"crayon-i\">let</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">g</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">javascript_plugin_jsdoc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767ea9631100527-4\"><span class=\"crayon-i\">let</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">g</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">javascript_plugin_ngdoc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line\" id=\"crayon-59f334b767ea9631100527-5\"><span class=\"crayon-i\">let</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">g</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">javascript_plugin_flow</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767ea9631100527-6\"><span class=\"crayon-e\">set </span><span class=\"crayon-v\">foldmethod</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">syntax</span></div><div class=\"crayon-line\" id=\"crayon-59f334b767ea9631100527-7\"><span class=\"crayon-i\">let</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">g</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">javascript_conceal_function</span><span class=\"crayon-h\">             </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"ƒ\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767ea9631100527-8\"><span class=\"crayon-i\">let</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">g</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">javascript_conceal_null</span><span class=\"crayon-h\">                 </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"ø\"</span></div><div class=\"crayon-line\" id=\"crayon-59f334b767ea9631100527-9\"><span class=\"crayon-i\">let</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">g</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">javascript_conceal_this</span><span class=\"crayon-h\">                 </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"@\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767ea9631100527-10\"><span class=\"crayon-i\">let</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">g</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">javascript_conceal_return</span><span class=\"crayon-h\">               </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"⇚\"</span></div><div class=\"crayon-line\" id=\"crayon-59f334b767ea9631100527-11\"><span class=\"crayon-i\">let</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">g</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">javascript_conceal_undefined</span><span class=\"crayon-h\">            </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"¿\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767ea9631100527-12\"><span class=\"crayon-i\">let</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">g</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">javascript_conceal_NaN</span><span class=\"crayon-h\">                  </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"ℕ\"</span></div><div class=\"crayon-line\" id=\"crayon-59f334b767ea9631100527-13\"><span class=\"crayon-i\">let</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">g</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">javascript_conceal_prototype</span><span class=\"crayon-h\">            </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"¶\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767ea9631100527-14\"><span class=\"crayon-i\">let</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">g</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">javascript_conceal_static</span><span class=\"crayon-h\">               </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"•\"</span></div><div class=\"crayon-line\" id=\"crayon-59f334b767ea9631100527-15\"><span class=\"crayon-i\">let</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">g</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">javascript_conceal_super</span><span class=\"crayon-h\">                </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Ω\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767ea9631100527-16\"><span class=\"crayon-i\">let</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">g</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">javascript_conceal_arrow_function</span><span class=\"crayon-h\">       </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"⇒\"</span></div><div class=\"crayon-line\" id=\"crayon-59f334b767ea9631100527-17\"><span class=\"crayon-i\">let</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">g</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">javascript_conceal_noarg_arrow_function</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767ea9631100527-18\"><span class=\"crayon-i\">let</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">g</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">javascript_conceal_underscore_arrow_function</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"\"</span></div><div class=\"crayon-line\" id=\"crayon-59f334b767ea9631100527-19\"><span class=\"crayon-e\">set </span><span class=\"crayon-v\">conceallevel</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">1</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0036 seconds] -->\r\n<p></p>\n<ul>\n<li><a href=\"https://github.com/pangloss/vim-javascript\">pangloss/vim-javascript</a></li>\n</ul>\n<h3><code>React</code></h3>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f334b767eac203396755\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nPlug 'mxw/vim-jsx'\r\n\r\nlet g:jsx_ext_required = 0</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f334b767eac203396755-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767eac203396755-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767eac203396755-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f334b767eac203396755-1\"><span class=\"crayon-i\">Plug</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'mxw/vim-jsx'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767eac203396755-2\"> </div><div class=\"crayon-line\" id=\"crayon-59f334b767eac203396755-3\"><span class=\"crayon-i\">let</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">g</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">jsx_ext_required</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p></p>\n<ul>\n<li><a href=\"https://github.com/mxw/vim-jsx\">mxw/vim-jsx</a></li>\n</ul>\n<h3><code>Prettier</code></h3>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f334b767eb2240142368\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nPlug 'prettier/vim-prettier', {\r\n  \\ 'do': 'yarn install',\r\n  \\ 'for': ['javascript', 'typescript', 'css', 'less', 'scss', 'json', 'graphql'] }\r\n\r\nlet g:prettier#config#bracket_spacing = 'true'\r\nlet g:prettier#autoformat = 0\r\nautocmd BufWritePre *.js,*.jsx,*.mjs,*.ts,*.tsx,*.css,*.less,*.scss,*.json,*.graphql PrettierAsync\r\n\r\n# :Prettier</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f334b767eb2240142368-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767eb2240142368-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767eb2240142368-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767eb2240142368-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767eb2240142368-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767eb2240142368-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767eb2240142368-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f334b767eb2240142368-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f334b767eb2240142368-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f334b767eb2240142368-1\"><span class=\"crayon-i\">Plug</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'prettier/vim-prettier'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767eb2240142368-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">\\</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'do'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'yarn install'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f334b767eb2240142368-3\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">\\</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'for'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'javascript'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'typescript'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'css'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'less'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'scss'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'json'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'graphql'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767eb2240142368-4\"> </div><div class=\"crayon-line\" id=\"crayon-59f334b767eb2240142368-5\"><span class=\"crayon-i\">let</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">g</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">prettier</span><span class=\"crayon-p\">#config#bracket_spacing = 'true'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767eb2240142368-6\"><span class=\"crayon-i\">let</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">g</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">prettier</span><span class=\"crayon-p\">#autoformat = 0</span></div><div class=\"crayon-line\" id=\"crayon-59f334b767eb2240142368-7\"><span class=\"crayon-e\">autocmd </span><span class=\"crayon-e \">BufWritePre *</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">js</span><span class=\"crayon-sy\">,</span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">jsx</span><span class=\"crayon-sy\">,</span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">mjs</span><span class=\"crayon-sy\">,</span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">ts</span><span class=\"crayon-sy\">,</span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">tsx</span><span class=\"crayon-sy\">,</span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">css</span><span class=\"crayon-sy\">,</span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">less</span><span class=\"crayon-sy\">,</span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">scss</span><span class=\"crayon-sy\">,</span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">json</span><span class=\"crayon-sy\">,</span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">graphql </span><span class=\"crayon-v\">PrettierAsync</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f334b767eb2240142368-8\"> </div><div class=\"crayon-line\" id=\"crayon-59f334b767eb2240142368-9\"><span class=\"crayon-p\"># :Prettier</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0021 seconds] -->\r\n<p></p>\n<ul>\n<li><a href=\"https://github.com/prettier/vim-prettier\">prettier/vim-prettier</a></li>\n</ul>\n<h1>总结</h1>\n<p>最后，呈上<code>参考配置</code> <a href=\"https://github.com/FengShangWuQi/to-vim/blob/master/.vimrc\">.vimrc</a>，如果关于 <code>vim</code> 有更好的 <code>idea</code>，欢迎在评论中交流</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112726\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112726votetotal\">4</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112726\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 16 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 3 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": 3, "praise_nums": "4", "url_object_id": "b63f0e37d6ad2afe0c8f7bd7208167ab", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2012/04/vim-logo.png"], "front_image_path": "full/4c6abd763d27eeeb4c7e7665f213388ec74df623.jpg", "title": "如何让 Vim 成为我们的神器"}
{"create_date": "2017/10/17 ", "url": "http://blog.jobbole.com/112716/", "fav_nums": 4, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://www.ruanyifeng.com/blog/2017/10/open-source-license-tutorial.html\">阮一峰的日志</a>   </div><p>作为一个开发者，如果你打算开源自己的代码，千万不要忘记，选择一种开源许可证（license）。</p>\n<p>许多开发者对开源许可证了解很少，不清楚有哪些许可证，应该怎么选择。本文介绍开源许可证的基本知识，主要参考了 OpenSource.com （<a href=\"https://opensource.com/article/17/9/9-open-source-software-rules-startups\">1</a>，<a href=\"https://opensource.com/article/17/9/open-source-licensing\">2</a>）。</p>\n<p><img title=\"\" src=\"http://jbcdn2.b0.upaiyun.com/2017/10/5f2ee2454532cd8e62d6bce42c989eea.jpg\" alt=\"\"></p>\n<h2>一、什么是开源许可证</h2>\n<p>开源许可证是一种法律许可。通过它，版权拥有人明确允许，用户可以免费地使用、修改、共享版权软件。</p>\n<p>版权法默认禁止共享，也就是说，没有许可证的软件，就等同于保留版权，虽然开源了，用户只能看看源码，不能用，一用就会侵犯版权。所以软件开源的话，必须明确地授予用户开源许可证。</p>\n<h2>二、开源许可证的种类</h2>\n<p>目前，国际公认的开源许可证共有<a href=\"https://opensource.org/licenses/alphabetical\">80多种</a>。它们的共同特征是，都允许用户免费地使用、修改、共享源码，但是都有各自的使用条件。</p>\n<p>如果一种开源许可证没有任何使用条件，连保留作者信息都不需要，那么就等同于放弃版权了。这时，软件可以直接声明进入”公共领域”（public domain）。</p>\n<p>根据使用条件的不同，开源许可证分成两大类。</p>\n<blockquote>\n<ul>\n<li>宽松式（permissive）许可证</li>\n<li>Copyleft 许可证</li>\n</ul>\n</blockquote>\n<h2>三、宽松式许可证</h2>\n<h3>3.1 特点</h3>\n<p>宽松式许可证（permissive license）是最基本的类型，对用户几乎没有限制。用户可以修改代码后闭源。</p>\n<p>它有三个基本特点。</p>\n<p><strong>（1）没有使用限制</strong></p>\n<p>用户可以使用代码，做任何想做的事情。</p>\n<p><strong>（2）没有担保</strong></p>\n<p>不保证代码质量，用户自担风险。</p>\n<p><strong>（3）披露要求（notice requirement）</strong></p>\n<p>用户必须披露原始作者。</p>\n<h3>3.2 常见许可证</h3>\n<p>常见的宽松式许可证有四种。它们都允许用户任意使用代码，区别在于要求用户遵守的条件不同。</p>\n<p><strong>（1）BSD（二条款版）</strong></p>\n<p>分发软件时，必须保留原始的许可证声明。</p>\n<p><strong>（2） BSD（三条款版）</strong></p>\n<p>分发软件时，必须保留原始的许可证声明。不得使用原始作者的名字为软件促销。</p>\n<p><strong>（3）MIT</strong></p>\n<p>分发软件时，必须保留原始的许可证声明，与 BSD（二条款版）基本一致。</p>\n<p><strong>（4）Apache 2</strong></p>\n<p>分发软件时，必须保留原始的许可证声明。凡是修改过的文件，必须向用户说明该文件修改过；没有修改过的文件，必须保持许可证不变。</p>\n<h2>四、Copyleft 许可证</h2>\n<h3>4.1 Copyleft 的含义</h3>\n<p>Copyleft 是<a href=\"http://www.ruanyifeng.com/blog/2005/03/post_112.html\">理查德·斯托曼</a>发明的一个词，作为 Copyright （版权）的反义词。</p>\n<p>Copyright 直译是”复制权”，这是版权制度的核心，意为不经许可，用户无权复制。作为反义词，Copyleft 的含义是不经许可，用户可以随意复制。</p>\n<p>但是，它带有前提条件，比宽松式许可证的限制要多。</p>\n<blockquote>\n<ul>\n<li>如果分发二进制格式，必须提供源码</li>\n<li>修改后的源码，必须与修改前保持许可证一致</li>\n<li>不得在原始许可证以外，附加其他限制</li>\n</ul>\n</blockquote>\n<p>上面三个条件的核心就是：修改后的 Copyleft 代码不得闭源。</p>\n<h3>4.2 常见许可证</h3>\n<p>常见的 Copyleft 许可证也有四种（对用户的限制从最强到最弱排序）。</p>\n<p><strong>（1）Affero GPL (AGPL)</strong></p>\n<p>如果云服务（即 SAAS）用到的代码是该许可证，那么云服务的代码也必须开源。</p>\n<p><strong>（2）GPL</strong></p>\n<p>如果项目包含了 GPL 许可证的代码，那么整个项目都必须使用 GPL 许可证。</p>\n<p><strong>（3）LGPL</strong></p>\n<p>如果项目采用动态链接调用该许可证的库，项目可以不用开源。</p>\n<p><strong>（4）Mozilla（MPL）</strong></p>\n<p>只要该许可证的代码在单独的文件中，新增的其他文件可以不用开源。</p>\n<h2>五、常见问题</h2>\n<p>本节回答一些开源许可证的常见问题。</p>\n<h3>5.1 什么叫分发（distribution）？</h3>\n<p>除了 Affero GPL (AGPL) ，其他许可证都规定只有在”分发”时，才需要遵守许可证。换言之，如果不”分发”，就不需要遵守。</p>\n<p>简单说，分发就是指将版权作品从一个人转移到另一个人。这意味着，如果你是自己使用，不提供给他人，就没有分发。另外，这里的”人”也指”法人”，因此如果使用方是公司，且只在公司内部使用，也不需要遵守许可证。</p>\n<p>云服务（SaaS）是否构成”分发”呢？答案是不构成。所以你使用开源软件提供云服务，不必提供源码。但是，Affero GPL (AGPL) 许可证除外，它规定云服务也必须提供源码。</p>\n<h3>5.2 开源软件的专利如何处理？</h3>\n<p>某些许可证（Apache 2 和 GPL v3）包含明确的条款，授予用户许可，使用软件所包含的所有专利。</p>\n<p>另一些许可证（BSD、MIT 和 GPL v2）根本没提到专利。但是一般认为，它们默认给予用户专利许可，不构成侵犯专利。</p>\n<p>总得来说，除非有明确的”保留专利”的条款，使用开源软件都不会构成侵犯专利。</p>\n<h3>5.3 什么是披露要求？</h3>\n<p>所有的开源许可证都带有”披露要求”（notice requirement），即要求软件的分发者必须向用户披露，软件里面有开源代码。</p>\n<p>一般来说，你只要在软件里面提供完整的原始许可证文本，并且披露原始作者，就满足了”披露要求”。</p>\n<h3>5.4 GPL 病毒是真的吗？</h3>\n<p>GPL 许可证规定，只要你的项目包含了 GPL 代码，整个项目就都变成了 GPL。有人把这种传染性比喻成”GPL 病毒”。</p>\n<p>很多公司希望避开这个条款，既使用 GPL 软件，又不把自己的专有代码开源。理论上，这是做不到的。因为 GPL 的设计目的，就是为了防止出现这种情况。</p>\n<p>但是实际上，不遵守 GPL，最坏情况就是被起诉。如果你向法院表示无法履行 GPL 的条件，法官只会判决你停止使用 GPL 代码（法律上叫做”停止侵害”），而不会强制要求你将源码开源，因为《版权法》里面的”违约救济”没有提到违约者必须开源，只提到可以停止侵害和赔偿损失。</p>\n<p>（完）</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112716\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112716votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112716\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 4 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": "  评论", "praise_nums": "2", "url_object_id": "c29aa1ef06c0496133b27af176b5caa2", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/10/5f2ee2454532cd8e62d6bce42c989eea.jpg"], "front_image_path": "full/c101dcc5700c51fb6b89a25cd6bad61c665f0b3e.jpg", "title": "若你要开源自己的代码，此文带你了解开源协议"}
{"create_date": "2017/10/16 ", "url": "http://blog.jobbole.com/112713/", "fav_nums": 2, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://githubengineering.com/mysql-testing-automation-at-github/\">tomkrouper, Shlomi Noach</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-8927-1.html\">Linux中国/MonkeyDEcho</a>   </div><p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/10/b04d0a2ac9daafe9ef55487f7989d502.jpg\"></p>\n<p>我们 MySQL 数据库基础架构是 Github 关键组件。 MySQL 提供 Github.com、 GitHub 的 API 和验证等等的服务。每一次的 <code>git</code> 请求都以某种方式触及 MySQL。我们的任务是保持数据的可用性，并保持其完整性。即使我们 MySQL 集群是按流量分配的，但是我们还是需要执行深度清理、即时更新、在线模式schema迁移、集群拓扑重构、连接池化pooling和负载平衡等任务。 我们建有基础架构来自动化测试这些操作，在这篇文章中，我们将分享几个例子，来说明我们是如何通过持续测试打造我们的基础架构的。这是让我们一梦到天亮的根本保障。</p>\n<h3 id=\"toc_1\">备份</h3>\n<p>没有比备份数据更重要的了，如果您没有备份数据库，在它出事前这可能并不是什么问题。Percona 的 <a href=\"https://www.percona.com/software/mysql-database/percona-xtrabackup\">Xtrabackup</a> 是我们一直用来完整备份 MySQL 数据库的工具。如果有专门需要备份的数据，我们就会备份到另一个专门备份数据的服务器上。</p>\n<p>除了完整的二进制备份外，我们每天还会多次运行逻辑备份。这些备份数据可以让我们的工程师获取到最新的数据副本。有时候，他们希望从表中获取一整套数据，以便他们可以在一个生产级规模的表上测试索引的修改，或查看特定时间以来的数据。Hubot 可以让我们恢复备份的表，并且当表准备好使用时会通知我们。</p>\n<p><strong>tomkrouper</strong></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f25dbe87289361565834\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n.mysql backup-list locations\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f25dbe87289361565834-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25dbe87289361565834-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f25dbe87289361565834-1\"><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">mysql </span><span class=\"crayon-v\">backup</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">list </span><span class=\"crayon-i\">locations</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25dbe87289361565834-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p><strong>Hubot</strong></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f25dbe87292769382100\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n+-----------+------------+---------------+---------------------+---------------------+----------------------------------------------+\r\n| Backup ID | Table Name | Donor Host    | Backup Start        | Backup End          | File Name                                    |\r\n+-----------+------------+---------------+---------------------+---------------------+----------------------------------------------+\r\n|   1699494 | locations  | db-mysql-0903 | 2017-07-01 22:09:17 | 2017-07-01 22:09:17 | backup-mycluster-locations-1498593122.sql.gz |\r\n|   1699133 | locations  | db-mysql-0903 | 2017-07-01 16:11:37 | 2017-07-01 16:11:39 | backup-mycluster-locations-1498571521.sql.gz |\r\n|   1698772 | locations  | db-mysql-0903 | 2017-07-01 10:09:21 | 2017-07-01 10:09:22 | backup-mycluster-locations-1498549921.sql.gz |\r\n|   1698411 | locations  | db-mysql-0903 | 2017-07-01 04:12:32 | 2017-07-01 04:12:32 | backup-mycluster-locations-1498528321.sql.gz |\r\n|   1698050 | locations  | db-mysql-0903 | 2017-06-30 22:18:23 | 2017-06-30 22:18:23 | backup-mycluster-locations-1498506721.sql.gz |\r\n| ...\r\n|   1262253 | locations  | db-mysql-0088 | 2016-08-01 01:58:51 | 2016-08-01 01:58:54 | backup-mycluster-locations-1470034801.sql.gz |\r\n|   1064984 | locations  | db-mysql-0088 | 2016-04-04 13:07:40 | 2016-04-04 13:07:43 | backup-mycluster-locations-1459494001.sql.gz |\r\n+-----------+------------+---------------+---------------------+---------------------+----------------------------------------------+\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f25dbe87292769382100-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25dbe87292769382100-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f25dbe87292769382100-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25dbe87292769382100-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f25dbe87292769382100-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25dbe87292769382100-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f25dbe87292769382100-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25dbe87292769382100-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f25dbe87292769382100-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25dbe87292769382100-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f25dbe87292769382100-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25dbe87292769382100-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59f25dbe87292769382100-13\">13</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f25dbe87292769382100-1\"><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">+</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25dbe87292769382100-2\"><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Backup </span><span class=\"crayon-v\">ID</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Table </span><span class=\"crayon-v\">Name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Donor </span><span class=\"crayon-v\">Host</span><span class=\"crayon-h\">    </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Backup </span><span class=\"crayon-v\">Start</span><span class=\"crayon-h\">        </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Backup </span><span class=\"crayon-st\">End</span><span class=\"crayon-h\">          </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">File </span><span class=\"crayon-v\">Name</span><span class=\"crayon-h\">                                    </span><span class=\"crayon-o\">|</span></div><div class=\"crayon-line\" id=\"crayon-59f25dbe87292769382100-3\"><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">+</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25dbe87292769382100-4\"><span class=\"crayon-o\">|</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">1699494</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">locations</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">db</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0903</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2017</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">07</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">01</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">22</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">09</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">17</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2017</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">07</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">01</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">22</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">09</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">17</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">backup</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mycluster</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">locations</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1498593122.sql.gz</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span></div><div class=\"crayon-line\" id=\"crayon-59f25dbe87292769382100-5\"><span class=\"crayon-o\">|</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">1699133</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">locations</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">db</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0903</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2017</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">07</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">01</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">16</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">11</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">37</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2017</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">07</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">01</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">16</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">11</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">39</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">backup</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mycluster</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">locations</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1498571521.sql.gz</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25dbe87292769382100-6\"><span class=\"crayon-o\">|</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">1698772</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">locations</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">db</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0903</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2017</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">07</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">01</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">09</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">21</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2017</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">07</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">01</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">09</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">22</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">backup</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mycluster</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">locations</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1498549921.sql.gz</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span></div><div class=\"crayon-line\" id=\"crayon-59f25dbe87292769382100-7\"><span class=\"crayon-o\">|</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">1698411</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">locations</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">db</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0903</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2017</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">07</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">01</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">04</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">12</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">32</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2017</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">07</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">01</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">04</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">12</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">32</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">backup</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mycluster</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">locations</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1498528321.sql.gz</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25dbe87292769382100-8\"><span class=\"crayon-o\">|</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">1698050</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">locations</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">db</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0903</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2017</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">06</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">30</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">22</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">23</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2017</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">06</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">30</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">22</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">23</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">backup</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mycluster</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">locations</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1498506721.sql.gz</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span></div><div class=\"crayon-line\" id=\"crayon-59f25dbe87292769382100-9\"><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25dbe87292769382100-10\"><span class=\"crayon-o\">|</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">1262253</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">locations</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">db</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0088</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2016</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">08</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">01</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">01</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">58</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">51</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2016</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">08</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">01</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">01</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">58</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">54</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">backup</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mycluster</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">locations</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1470034801.sql.gz</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span></div><div class=\"crayon-line\" id=\"crayon-59f25dbe87292769382100-11\"><span class=\"crayon-o\">|</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">1064984</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">locations</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">db</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0088</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2016</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">04</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">04</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">13</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">07</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">40</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2016</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">04</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">04</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">13</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">07</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">43</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">backup</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mycluster</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">locations</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1459494001.sql.gz</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25dbe87292769382100-12\"><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">+</span></div><div class=\"crayon-line\" id=\"crayon-59f25dbe87292769382100-13\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0113 seconds] -->\r\n<p><strong>tomkrouper</strong></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f25dbe87297921435858\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n.mysql restore 1699133\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f25dbe87297921435858-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25dbe87297921435858-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f25dbe87297921435858-1\"><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">mysql </span><span class=\"crayon-i\">restore</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1699133</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25dbe87297921435858-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p><strong>Hubot</strong></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f25dbe8729b026394559\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nA restore job has been created for the backup job 1699133. You will be notified in #database-ops when the restore is complete.\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f25dbe8729b026394559-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25dbe8729b026394559-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f25dbe8729b026394559-1\"><span class=\"crayon-i\">A</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">restore </span><span class=\"crayon-e\">job </span><span class=\"crayon-e\">has </span><span class=\"crayon-e\">been </span><span class=\"crayon-e\">created </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">the </span><span class=\"crayon-e\">backup </span><span class=\"crayon-i\">job</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1699133.</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">You </span><span class=\"crayon-e\">will </span><span class=\"crayon-e\">be </span><span class=\"crayon-e\">notified </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\">#database-ops when the restore is complete.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25dbe8729b026394559-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p><strong>Hubot</strong></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f25dbe8729f654071150\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n@tomkrouper: the locations table has been restored as locations_2017_07_01_16_11 in the restores database on db-mysql-0482\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f25dbe8729f654071150-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25dbe8729f654071150-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f25dbe8729f654071150-1\"><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">tomkrouper</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">the </span><span class=\"crayon-e\">locations </span><span class=\"crayon-e\">table </span><span class=\"crayon-e\">has </span><span class=\"crayon-e\">been </span><span class=\"crayon-e\">restored </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">locations_2017_07_01_16_11 </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">the </span><span class=\"crayon-e\">restores </span><span class=\"crayon-e\">database </span><span class=\"crayon-e\">on </span><span class=\"crayon-v\">db</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0482</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25dbe8729f654071150-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>数据被加载到非生产环境的数据库，该数据库可供请求该次恢复的工程师访问。</p>\n<p>我们保留数据的“备份”的最后一个方法是使用<a href=\"https://dev.mysql.com/doc/refman/5.6/en/replication-delayed.html\">延迟副本</a>delayed replica。这与其说是备份，不如说是保护。对于每个生产集群，我们有一个延迟 4 个小时复制的主机。如果运行了一个不该运行的请求，我们可以在 chatops 中运行 <code>mysql panic</code> 。这将导致我们所有的延迟副本立即停止复制。这也将给值班 DBA 发送消息。从而我们可以使用延迟副本来验证是否有问题，并快速前进到二进制日志的错误发生之前的位置。然后，我们可以将此数据恢复到主服务器，从而恢复数据到该时间点。</p>\n<p>备份固然好，但如果发生了一些未知或未捕获的错误破坏它们，它们就没有价值了。让脚本恢复备份的好处是它允许我们通过 cron 自动执行备份验证。我们为每个集群设置了一个专用的主机，用于运行最新备份的恢复。这样可以确保备份运行正常，并且我们能够从备份中检索数据。</p>\n<p>根据数据集大小，我们每天运行几次恢复。恢复的服务器被加入到复制工作流，并通过复制保持数据更新。这测试不仅让我们得到了可恢复的备份，而且也让我们得以正确地确定备份的时间点，并且可以从该时间点进一步应用更改。如果恢复过程中出现问题，我们会收到通知。</p>\n<p>我们还追踪恢复所需的时间，所以我们知道在紧急情况下建立新的副本或还原需要多长时间。</p>\n<p>以下是由 Hubot 在我们的机器人聊天室中输出的自动恢复过程。</p>\n<p><strong>Hubot</strong></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f25dbe872a3312266747\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ngh-mysql-backup-restore: db-mysql-0752: restore_log.id = 4447 \r\ngh-mysql-backup-restore: db-mysql-0752: Determining backup to restore for cluster 'prodcluster'. \r\ngh-mysql-backup-restore: db-mysql-0752: Enabling maintenance mode \r\ngh-mysql-backup-restore: db-mysql-0752: Setting orchestrator downtime \r\ngh-mysql-backup-restore: db-mysql-0752: Disabling Puppet \r\ngh-mysql-backup-restore: db-mysql-0752: Stopping MySQL \r\ngh-mysql-backup-restore: db-mysql-0752: Removing MySQL files \r\ngh-mysql-backup-restore: db-mysql-0752: Running gh-xtrabackup-restore \r\ngh-mysql-backup-restore: db-mysql-0752: Restore file: xtrabackup-notify-2017-07-02_0000.xbstream \r\ngh-mysql-backup-restore: db-mysql-0752: Running gh-xtrabackup-prepare \r\ngh-mysql-backup-restore: db-mysql-0752: Starting MySQL \r\ngh-mysql-backup-restore: db-mysql-0752: Update file ownership \r\ngh-mysql-backup-restore: db-mysql-0752: Upgrade MySQL \r\ngh-mysql-backup-restore: db-mysql-0752: Stopping MySQL \r\ngh-mysql-backup-restore: db-mysql-0752: Starting MySQL \r\ngh-mysql-backup-restore: db-mysql-0752: Backup Host: db-mysql-0034 \r\ngh-mysql-backup-restore: db-mysql-0752: Setting up replication \r\ngh-mysql-backup-restore: db-mysql-0752: Starting replication \r\ngh-mysql-backup-restore: db-mysql-0752: Replication catch-up \r\ngh-mysql-backup-restore: db-mysql-0752: Restore complete (replication running) \r\ngh-mysql-backup-restore: db-mysql-0752: Enabling Puppet \r\ngh-mysql-backup-restore: db-mysql-0752: Disabling maintenance mode \r\ngh-mysql-backup-restore: db-mysql-0752: Setting orchestrator downtime \r\ngh-mysql-backup-restore: db-mysql-0752: Restore process complete. \r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f25dbe872a3312266747-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25dbe872a3312266747-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f25dbe872a3312266747-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25dbe872a3312266747-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f25dbe872a3312266747-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25dbe872a3312266747-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f25dbe872a3312266747-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25dbe872a3312266747-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f25dbe872a3312266747-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25dbe872a3312266747-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f25dbe872a3312266747-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25dbe872a3312266747-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59f25dbe872a3312266747-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25dbe872a3312266747-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59f25dbe872a3312266747-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25dbe872a3312266747-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-59f25dbe872a3312266747-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25dbe872a3312266747-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-59f25dbe872a3312266747-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25dbe872a3312266747-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-59f25dbe872a3312266747-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25dbe872a3312266747-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-59f25dbe872a3312266747-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25dbe872a3312266747-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-59f25dbe872a3312266747-25\">25</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f25dbe872a3312266747-1\"><span class=\"crayon-v\">gh</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">backup</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">restore</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">db</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0752</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">restore_log</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">id</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4447</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25dbe872a3312266747-2\"><span class=\"crayon-v\">gh</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">backup</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">restore</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">db</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0752</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Determining </span><span class=\"crayon-e\">backup </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">restore </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">cluster</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'prodcluster'</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-59f25dbe872a3312266747-3\"><span class=\"crayon-v\">gh</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">backup</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">restore</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">db</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0752</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Enabling </span><span class=\"crayon-e\">maintenance </span><span class=\"crayon-e\">mode </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25dbe872a3312266747-4\"><span class=\"crayon-v\">gh</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">backup</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">restore</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">db</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0752</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Setting </span><span class=\"crayon-e\">orchestrator </span><span class=\"crayon-e\">downtime </span></div><div class=\"crayon-line\" id=\"crayon-59f25dbe872a3312266747-5\"><span class=\"crayon-v\">gh</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">backup</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">restore</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">db</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0752</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Disabling </span><span class=\"crayon-e\">Puppet </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25dbe872a3312266747-6\"><span class=\"crayon-v\">gh</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">backup</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">restore</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">db</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0752</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Stopping </span><span class=\"crayon-e\">MySQL </span></div><div class=\"crayon-line\" id=\"crayon-59f25dbe872a3312266747-7\"><span class=\"crayon-v\">gh</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">backup</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">restore</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">db</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0752</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Removing </span><span class=\"crayon-e\">MySQL </span><span class=\"crayon-e\">files </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25dbe872a3312266747-8\"><span class=\"crayon-v\">gh</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">backup</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">restore</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">db</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0752</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Running </span><span class=\"crayon-v\">gh</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">xtrabackup</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">restore </span></div><div class=\"crayon-line\" id=\"crayon-59f25dbe872a3312266747-9\"><span class=\"crayon-v\">gh</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">backup</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">restore</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">db</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0752</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Restore </span><span class=\"crayon-v\">file</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">xtrabackup</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">notify</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2017</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">07</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">02_0000.xbstream</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25dbe872a3312266747-10\"><span class=\"crayon-v\">gh</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">backup</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">restore</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">db</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0752</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Running </span><span class=\"crayon-v\">gh</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">xtrabackup</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">prepare </span></div><div class=\"crayon-line\" id=\"crayon-59f25dbe872a3312266747-11\"><span class=\"crayon-v\">gh</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">backup</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">restore</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">db</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0752</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Starting </span><span class=\"crayon-e\">MySQL </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25dbe872a3312266747-12\"><span class=\"crayon-v\">gh</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">backup</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">restore</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">db</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0752</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Update </span><span class=\"crayon-e\">file </span><span class=\"crayon-e\">ownership </span></div><div class=\"crayon-line\" id=\"crayon-59f25dbe872a3312266747-13\"><span class=\"crayon-v\">gh</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">backup</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">restore</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">db</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0752</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Upgrade </span><span class=\"crayon-e\">MySQL </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25dbe872a3312266747-14\"><span class=\"crayon-v\">gh</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">backup</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">restore</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">db</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0752</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Stopping </span><span class=\"crayon-e\">MySQL </span></div><div class=\"crayon-line\" id=\"crayon-59f25dbe872a3312266747-15\"><span class=\"crayon-v\">gh</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">backup</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">restore</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">db</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0752</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Starting </span><span class=\"crayon-e\">MySQL </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25dbe872a3312266747-16\"><span class=\"crayon-v\">gh</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">backup</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">restore</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">db</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0752</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Backup </span><span class=\"crayon-v\">Host</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">db</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0034</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-59f25dbe872a3312266747-17\"><span class=\"crayon-v\">gh</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">backup</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">restore</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">db</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0752</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Setting </span><span class=\"crayon-e\">up </span><span class=\"crayon-e\">replication </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25dbe872a3312266747-18\"><span class=\"crayon-v\">gh</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">backup</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">restore</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">db</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0752</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Starting </span><span class=\"crayon-e\">replication </span></div><div class=\"crayon-line\" id=\"crayon-59f25dbe872a3312266747-19\"><span class=\"crayon-v\">gh</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">backup</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">restore</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">db</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0752</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Replication </span><span class=\"crayon-st\">catch</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">up </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25dbe872a3312266747-20\"><span class=\"crayon-v\">gh</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">backup</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">restore</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">db</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0752</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Restore </span><span class=\"crayon-e\">complete</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">replication </span><span class=\"crayon-v\">running</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-59f25dbe872a3312266747-21\"><span class=\"crayon-v\">gh</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">backup</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">restore</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">db</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0752</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Enabling </span><span class=\"crayon-e\">Puppet </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25dbe872a3312266747-22\"><span class=\"crayon-v\">gh</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">backup</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">restore</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">db</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0752</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Disabling </span><span class=\"crayon-e\">maintenance </span><span class=\"crayon-e\">mode </span></div><div class=\"crayon-line\" id=\"crayon-59f25dbe872a3312266747-23\"><span class=\"crayon-v\">gh</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">backup</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">restore</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">db</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0752</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Setting </span><span class=\"crayon-e\">orchestrator </span><span class=\"crayon-e\">downtime </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25dbe872a3312266747-24\"><span class=\"crayon-v\">gh</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">backup</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">restore</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">db</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0752</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Restore </span><span class=\"crayon-e\">process </span><span class=\"crayon-v\">complete</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-59f25dbe872a3312266747-25\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0097 seconds] -->\r\n<p>还有一件我们可以使用备份做的事情是向一组现有的 MySQL 服务器添加一个新的副本。我们初始化一个新的服务器，一旦我们得知它准备就绪，我们就可以开始恢复该特定集群的最新备份。我们有一个脚本，可以运行所有需要手动执行的恢复命令。我们的自动恢复系统基本上使用的是相同的脚本。这简化了系统构建过程，并允许我们在一个启动运行的主机上使用几个对话命令（chatops）来替代一堆手动执行命令。下面显示的是在该对话（chatops）中手动执行的恢复：</p>\n<p><strong>jessbreckenridge</strong></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f25dbe872a7755729353\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n.mysql backup-restore -H db-mysql-0007 -o -r magic_word=daily_rotating_word\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f25dbe872a7755729353-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25dbe872a7755729353-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f25dbe872a7755729353-1\"><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">mysql </span><span class=\"crayon-v\">backup</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">restore</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">H</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">db</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0007</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">o</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">r</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">magic_word</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">daily_rotating</span><span class=\"crayon-sy\">_</span>word</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25dbe872a7755729353-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p><strong>Hubot</strong></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f25dbe872ab037198145\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n@jessbreckenridge gh-mysql-backup-restore: db-mysql-0007: Determining backup to restore for cluster 'mycluster'. \r\n@jessbreckenridge gh-mysql-backup-restore: db-mysql-0007: restore_log.id = 4449 \r\n@jessbreckenridge gh-mysql-backup-restore: db-mysql-0007: Enabling maintenance mode\r\n@jessbreckenridge gh-mysql-backup-restore: db-mysql-0007: Setting orchestrator downtime \r\n@jessbreckenridge gh-mysql-backup-restore: db-mysql-0007: Disabling Puppet \r\n@jessbreckenridge gh-mysql-backup-restore: db-mysql-0007: Stopping MySQL \r\n@jessbreckenridge gh-mysql-backup-restore: db-mysql-0007: Removing MySQL files \r\n@jessbreckenridge gh-mysql-backup-restore: db-mysql-0007: Running gh-xtrabackup-restore \r\n@jessbreckenridge gh-mysql-backup-restore: db-mysql-0007: Restore file: xtrabackup-mycluster-2017-07-02_0015.xbstream \r\n@jessbreckenridge gh-mysql-backup-restore: db-mysql-0007: Running gh-xtrabackup-prepare \r\n@jessbreckenridge gh-mysql-backup-restore: db-mysql-0007: Update file ownership \r\n@jessbreckenridge gh-mysql-backup-restore: db-mysql-0007: Starting MySQL \r\n@jessbreckenridge gh-mysql-backup-restore: db-mysql-0007: Upgrade MySQL \r\n@jessbreckenridge gh-mysql-backup-restore: db-mysql-0007: Stopping MySQL \r\n@jessbreckenridge gh-mysql-backup-restore: db-mysql-0007: Starting MySQL \r\n@jessbreckenridge gh-mysql-backup-restore: db-mysql-0007: Setting up replication \r\n@jessbreckenridge gh-mysql-backup-restore: db-mysql-0007: Starting replication \r\n@jessbreckenridge gh-mysql-backup-restore: db-mysql-0007: Backup Host: db-mysql-0201 \r\n@jessbreckenridge gh-mysql-backup-restore: db-mysql-0007: Replication catch-up \r\n@jessbreckenridge gh-mysql-backup-restore: db-mysql-0007: Replication behind by 4589 seconds, waiting 1800 seconds before next check. \r\n@jessbreckenridge gh-mysql-backup-restore: db-mysql-0007: Restore complete (replication running) \r\n@jessbreckenridge gh-mysql-backup-restore: db-mysql-0007: Enabling puppet \r\n@jessbreckenridge gh-mysql-backup-restore: db-mysql-0007: Disabling maintenance mode \r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f25dbe872ab037198145-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25dbe872ab037198145-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f25dbe872ab037198145-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25dbe872ab037198145-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f25dbe872ab037198145-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25dbe872ab037198145-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f25dbe872ab037198145-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25dbe872ab037198145-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f25dbe872ab037198145-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25dbe872ab037198145-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f25dbe872ab037198145-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25dbe872ab037198145-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59f25dbe872ab037198145-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25dbe872ab037198145-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59f25dbe872ab037198145-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25dbe872ab037198145-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-59f25dbe872ab037198145-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25dbe872ab037198145-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-59f25dbe872ab037198145-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25dbe872ab037198145-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-59f25dbe872ab037198145-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25dbe872ab037198145-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-59f25dbe872ab037198145-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25dbe872ab037198145-24\">24</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f25dbe872ab037198145-1\"><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">jessbreckenridge </span><span class=\"crayon-v\">gh</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">backup</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">restore</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">db</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0007</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Determining </span><span class=\"crayon-e\">backup </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">restore </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">cluster</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'mycluster'</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25dbe872ab037198145-2\"><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">jessbreckenridge </span><span class=\"crayon-v\">gh</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">backup</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">restore</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">db</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0007</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">restore_log</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">id</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4449</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-59f25dbe872ab037198145-3\"><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">jessbreckenridge </span><span class=\"crayon-v\">gh</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">backup</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">restore</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">db</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0007</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Enabling </span><span class=\"crayon-e\">maintenance </span><span class=\"crayon-i\">mode</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25dbe872ab037198145-4\"><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">jessbreckenridge </span><span class=\"crayon-v\">gh</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">backup</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">restore</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">db</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0007</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Setting </span><span class=\"crayon-e\">orchestrator </span><span class=\"crayon-i\">downtime</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-59f25dbe872ab037198145-5\"><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">jessbreckenridge </span><span class=\"crayon-v\">gh</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">backup</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">restore</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">db</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0007</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Disabling </span><span class=\"crayon-i\">Puppet</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25dbe872ab037198145-6\"><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">jessbreckenridge </span><span class=\"crayon-v\">gh</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">backup</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">restore</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">db</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0007</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Stopping </span><span class=\"crayon-i\">MySQL</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-59f25dbe872ab037198145-7\"><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">jessbreckenridge </span><span class=\"crayon-v\">gh</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">backup</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">restore</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">db</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0007</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Removing </span><span class=\"crayon-e\">MySQL </span><span class=\"crayon-i\">files</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25dbe872ab037198145-8\"><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">jessbreckenridge </span><span class=\"crayon-v\">gh</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">backup</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">restore</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">db</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0007</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Running </span><span class=\"crayon-v\">gh</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">xtrabackup</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">restore</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-59f25dbe872ab037198145-9\"><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">jessbreckenridge </span><span class=\"crayon-v\">gh</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">backup</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">restore</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">db</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0007</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Restore </span><span class=\"crayon-v\">file</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">xtrabackup</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mycluster</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2017</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">07</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">02_0015.xbstream</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25dbe872ab037198145-10\"><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">jessbreckenridge </span><span class=\"crayon-v\">gh</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">backup</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">restore</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">db</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0007</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Running </span><span class=\"crayon-v\">gh</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">xtrabackup</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">prepare</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-59f25dbe872ab037198145-11\"><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">jessbreckenridge </span><span class=\"crayon-v\">gh</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">backup</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">restore</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">db</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0007</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Update </span><span class=\"crayon-e\">file </span><span class=\"crayon-i\">ownership</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25dbe872ab037198145-12\"><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">jessbreckenridge </span><span class=\"crayon-v\">gh</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">backup</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">restore</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">db</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0007</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Starting </span><span class=\"crayon-i\">MySQL</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-59f25dbe872ab037198145-13\"><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">jessbreckenridge </span><span class=\"crayon-v\">gh</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">backup</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">restore</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">db</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0007</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Upgrade </span><span class=\"crayon-i\">MySQL</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25dbe872ab037198145-14\"><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">jessbreckenridge </span><span class=\"crayon-v\">gh</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">backup</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">restore</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">db</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0007</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Stopping </span><span class=\"crayon-i\">MySQL</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-59f25dbe872ab037198145-15\"><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">jessbreckenridge </span><span class=\"crayon-v\">gh</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">backup</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">restore</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">db</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0007</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Starting </span><span class=\"crayon-i\">MySQL</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25dbe872ab037198145-16\"><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">jessbreckenridge </span><span class=\"crayon-v\">gh</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">backup</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">restore</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">db</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0007</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Setting </span><span class=\"crayon-e\">up </span><span class=\"crayon-i\">replication</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-59f25dbe872ab037198145-17\"><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">jessbreckenridge </span><span class=\"crayon-v\">gh</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">backup</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">restore</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">db</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0007</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Starting </span><span class=\"crayon-i\">replication</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25dbe872ab037198145-18\"><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">jessbreckenridge </span><span class=\"crayon-v\">gh</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">backup</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">restore</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">db</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0007</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Backup </span><span class=\"crayon-v\">Host</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">db</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0201</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-59f25dbe872ab037198145-19\"><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">jessbreckenridge </span><span class=\"crayon-v\">gh</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">backup</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">restore</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">db</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0007</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Replication </span><span class=\"crayon-st\">catch</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">up</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25dbe872ab037198145-20\"><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">jessbreckenridge </span><span class=\"crayon-v\">gh</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">backup</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">restore</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">db</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0007</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Replication </span><span class=\"crayon-e\">behind </span><span class=\"crayon-i\">by</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4589</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">seconds</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">waiting</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1800</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">seconds </span><span class=\"crayon-e\">before </span><span class=\"crayon-e\">next </span><span class=\"crayon-v\">check</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-59f25dbe872ab037198145-21\"><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">jessbreckenridge </span><span class=\"crayon-v\">gh</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">backup</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">restore</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">db</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0007</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Restore </span><span class=\"crayon-e\">complete</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">replication </span><span class=\"crayon-v\">running</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25dbe872ab037198145-22\"><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">jessbreckenridge </span><span class=\"crayon-v\">gh</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">backup</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">restore</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">db</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0007</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Enabling </span><span class=\"crayon-i\">puppet</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-59f25dbe872ab037198145-23\"><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">jessbreckenridge </span><span class=\"crayon-v\">gh</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">backup</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">restore</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">db</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0007</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Disabling </span><span class=\"crayon-e\">maintenance </span><span class=\"crayon-i\">mode</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25dbe872ab037198145-24\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0113 seconds] -->\r\n<p></p>\n<h3 id=\"toc_2\">故障转移</h3>\n<p><a href=\"http://githubengineering.com/orchestrator-github/\">我们使用协调器</a> 来为主服务器master和中间服务器intermediate master执行自动化故障切换。我们期望协调器orchestrator能够正确检测主服务器故障，指定一个副本进行晋升，在所指定的副本下修复拓扑，完成晋升。我们预期 VIP（虚拟 IP）、连接池可以相应地进行变化、客户端进行重连、puppet 在晋升后的主服务器上运行基本组件等等。故障转移是一项复杂的任务，涉及到我们基础架构的许多方面。</p>\n<p>为了建立对我们的故障转移的信赖，我们建立了一个<em>类生产环境</em>的测试集群，并且我们不断地崩溃它来观察故障转移情况。</p>\n<p>这个<em>类生产环境</em>的测试集群是一套复制环境，与我们的生产集群的各个方面都相同：硬件类型、操作系统、MySQL 版本、网络环境、VIP、puppet 配置、<a href=\"https://githubengineering.com/context-aware-mysql-pools-via-haproxy/\">haproxy 设置</a> 等。与生产集群唯一不同的是它不发送/接收生产流量。</p>\n<p>我们在测试集群上模拟写入负载，同时避免复制滞后。写入负载不会太大，但是有一些有意地写入相同数据集的竞争请求。这在正常情况下并不是很有用，但是事实证明这在故障转移中是有用的，我们将会稍后简要描述它。</p>\n<p>我们的测试集群有来自三个数据中心的典型的服务器。我们希望故障转移能够从同一个数据中心内晋升替代副本。我们希望在这样的限制下尽可能多地恢复副本。我们要求尽可能地实现这两者。协调器对拓扑结构没有先验假定prior assumption；它必须依据崩溃时的状态作出反应。</p>\n<p>然而，我们有兴趣创建各种复杂而多变的故障恢复场景。我们的故障转移测试脚本为故障转移提供了基础：</p>\n<ul>\n<li>它能够识别现有的主服务器</li>\n<li>它能够重构拓扑结构，来代表主服务器下的所有的三个数据中心。不同的数据中心具有不同的网络延迟，并且预期会在不同的时间对主机崩溃做出反应。</li>\n<li>能够选择崩溃方式。可以选择干掉主服务器（<code>kill -9</code>）或网络隔离（比较好的方式： <code>iptables -j REJECT</code> 或无响应的方式： <code>iptables -j DROP</code>）方式。</li>\n</ul>\n<p>脚本通过选择的方法使主机崩溃，并等待协调器可靠地检测到崩溃然后执行故障转移。虽然我们期望检测和晋升在 30 秒钟内完成，但脚本会稍微放宽这一期望，并在查找故障转移结果之前休眠一段指定的时间。然后它将检查：</p>\n<ul>\n<li>一个新的（不同的）主服务器是否到位</li>\n<li>集群中有足够的副本</li>\n<li>主服务器是可写的</li>\n<li>对主服务器的写入在副本上可见</li>\n<li>内部服务发现项已更新（如预期般识别到新的主服务器；移除旧的主服务器）</li>\n<li>其他内部检查</li>\n</ul>\n<p>这些测试可以证实故障转移是成功的，不仅是 MySQL 级别的，而是在更大的基础设施范围内成功的。VIP 被赋予；特定的服务已经启动；信息到达了应该去的地方。</p>\n<p>该脚本进一步继续恢复那个失败的服务器：</p>\n<ul>\n<li>从备份恢复它，从而隐含地测试了我们的备份/恢复过程</li>\n<li>验证服务器配置是否符合预期（该服务器不再认为其是主服务器）</li>\n<li>将其加入到复制集群，期望找到在主服务器上写入的数据</li>\n</ul>\n<p>看一下以下可视化的计划的故障转移测试：从运行良好的群集，到在某些副本上发现问题，诊断主服务器（<code>7136</code>）是否死机，选择一个服务器（<code>a79d</code>）来晋升，重构该服务器下的拓扑，晋升它（故障切换成功），恢复失败的（原）主服务器并将其放回群集。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/10/0166bd164ba629026460a4ff478f68aa.gif\" alt=\"automated master failover\"></p>\n<h4 id=\"toc_3\">测试失败怎么样?</h4>\n<p>我们的测试脚本使用了一种“停止世界”的方法。任何故障切换组件中的单个故障都将导致整个测试失败，因此在有人解决该问题之前，无法进行任何进一步的自动化测试。我们会得到警报，并检查状态和日志进行处理。</p>\n<p>脚本将各种情况下失败，如不可接受的检测或故障转移时间；备份/还原出现问题；失去太多服务器；在故障切换后的意外配置等等。</p>\n<p>我们需要确保协调器正确地连接服务器。这是竞争性写入负载有用的地方：如果设置不正确，复制很容易中断。我们会得到 <code>DUPLICATE KEY</code> 或其他错误提示出错。</p>\n<p>这是特别重要的，因此我们改进协调器并引入新的行为，以允许我们在安全的环境中测试这些变化。</p>\n<h4 id=\"toc_4\">出现：混乱测试</h4>\n<p>上面所示的测试程序将捕获（并已经捕获）我们基础设施许多部分的问题。这些够了吗？</p>\n<p>在生产环境中总是有其他的东西。有些特定测试方法不适用于我们的生产集群。它们不具有相同的流量和流量方式，也不具有完全相同的服务器集。故障类型可能有所不同。</p>\n<p>我们正在为我们的生产集群设计混乱测试。 混乱测试将会在我们的生产中，但是按照预期的时间表和充分控制的方式来逐个破坏我们的部分生产环境。 混乱测试在恢复机制中引入更高层次的信赖，并影响（因此测试）我们的基础设施和应用程序的更大部分。</p>\n<p>这是微妙的工作：当我们承认需要混乱测试时，我们也希望可以避免对我们的服务造成不必要的影响。不同的测试将在风险级别和影响方面有所不同，我们将努力确保我们的服务的可用性。</p>\n<h3 id=\"toc_5\">模式迁移</h3>\n<p><a href=\"http://githubengineering.com/gh-ost-github-s-online-migration-tool-for-mysql/\">我们使用 gh-ost</a>来运行实时模式迁移schema migration。gh-ost 是稳定的，但也处于活跃开发中，重大新功能正在不断开发和计划中。</p>\n<p>gh-ost 通过将数据复制到 ghost 表来迁移，将由二进制日志拦截的进一步更改应用到 ghost 表中，就如其正在写入原始表。然后它将 ghost 表交换代替原始表。迁移完成时，GitHub 继续使用由 gh-ost 生成和填充的表。</p>\n<p>在这个时候，几乎所有的 GitHub 的 MySQL 数据都被 gh-ost 重新创建，其中大部分重新创建多次。我们必须高度信赖 gh-ost，让它一遍遍地操弄我们的数据，即使它还处于活跃开发中。下面是我们如何获得这种信赖的。</p>\n<p>gh-ost 提供生产环境测试能力。它支持在副本上运行迁移，其方式与在主服务器上运行的方式大致相同： gh-ost 将连接到副本，并将其视为主服务器。它将采用与实际主机迁移相同的方式解析其二进制日志。但是，它将复制行并将二进制日志事件应用于副本，并避免对主服务器进行写入。</p>\n<p>我们在生产环境中给 gh-ost 提供专用的副本。这些副本并不为生产环境提供服务。每个这样的副本将检索生产表的当前列表，并以随机顺序对其进行迭代。一个接一个地选择一个表并在该表上执行复制迁移。迁移实际上并不修改表结构，而是运行一个微不足道的 <code>ENGINE=InnoDB</code> 更改。该测试运行迁移时，如果表正在生产环境中使用，会复制实际的生产数据，并接受二进制日志之外的真实的生产环境流量。</p>\n<p>这些迁移可以被审计。以下是我们如何从对话中（chatops）检查运行中的测试状态：</p>\n<p><strong>ggunson</strong></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f25dbe872b4844516034\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n.migration test-status\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f25dbe872b4844516034-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25dbe872b4844516034-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f25dbe872b4844516034-1\"><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">migration </span><span class=\"crayon-v\">test</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">status</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25dbe872b4844516034-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p><strong>Hubot</strong></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f25dbe872b7766690167\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# Migrating `prod`.`pull_requests`; Ghost table is `prod`.`_pull_requests_gho`\r\n# Migrating ghost-db-mysql-0007:3306; inspecting ghost-db-mysql-0007:3306; executing on ghost-db-mysql-0007\r\n# Migration started at Mon Jan 30 02:13:39 -0800 2017\r\n# chunk-size: 2500; max-lag-millis: 1500ms; max-load: Threads_running=30; critical-load: Threads_running=1000; nice-ratio: 0.000000\r\n# throttle-additional-flag-file: /tmp/gh-ost.throttle\r\n# panic-flag-file: /tmp/ghost-test-panic.flag\r\n# Serving on unix socket: /tmp/gh-ost.test.sock\r\nCopy: 57992500/86684838 66.9%; Applied: 57708; Backlog: 1/100; Time: 3h28m38s(total), 3h28m36s(copy); streamer: mysql-bin.000576:142993938; State: migrating; ETA: 1h43m12s\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f25dbe872b7766690167-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25dbe872b7766690167-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f25dbe872b7766690167-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25dbe872b7766690167-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f25dbe872b7766690167-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25dbe872b7766690167-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f25dbe872b7766690167-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25dbe872b7766690167-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f25dbe872b7766690167-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f25dbe872b7766690167-1\"><span class=\"crayon-p\"># Migrating `prod`.`pull_requests`; Ghost table is `prod`.`_pull_requests_gho`</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25dbe872b7766690167-2\"><span class=\"crayon-p\"># Migrating ghost-db-mysql-0007:3306; inspecting ghost-db-mysql-0007:3306; executing on ghost-db-mysql-0007</span></div><div class=\"crayon-line\" id=\"crayon-59f25dbe872b7766690167-3\"><span class=\"crayon-p\"># Migration started at Mon Jan 30 02:13:39 -0800 2017</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25dbe872b7766690167-4\"><span class=\"crayon-p\"># chunk-size: 2500; max-lag-millis: 1500ms; max-load: Threads_running=30; critical-load: Threads_running=1000; nice-ratio: 0.000000</span></div><div class=\"crayon-line\" id=\"crayon-59f25dbe872b7766690167-5\"><span class=\"crayon-p\"># throttle-additional-flag-file: /tmp/gh-ost.throttle</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25dbe872b7766690167-6\"><span class=\"crayon-p\"># panic-flag-file: /tmp/ghost-test-panic.flag</span></div><div class=\"crayon-line\" id=\"crayon-59f25dbe872b7766690167-7\"><span class=\"crayon-p\"># Serving on unix socket: /tmp/gh-ost.test.sock</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25dbe872b7766690167-8\"><span class=\"crayon-v\">Copy</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">57992500</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">86684838</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">66.9</span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Applied</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">57708</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Backlog</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">100</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Time</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3h28m38s</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">total</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3h28m36s</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">copy</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">streamer</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">bin</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">000576</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">142993938</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">State</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">migrating</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ETA</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1h43m12s</span></div><div class=\"crayon-line\" id=\"crayon-59f25dbe872b7766690167-9\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0017 seconds] -->\r\n<p>当测试迁移完成表数据的复制时，它将停止复制并执行切换，使用 ghost 表替换原始表，然后交换回来。我们对实际替换数据并不感兴趣。相反，我们将留下原始的表和 ghost 表，它们应该是相同的。我们通过校验两个表的整个表数据来验证。</p>\n<p>测试能以下列方式完成：</p>\n<ul>\n<li><em>成功</em> ：一切顺利，校验和相同。我们期待看到这一结果。</li>\n<li><em>失败</em> ：执行问题。这可能偶尔发生，因为迁移进程被杀死、复制问题等，并且通常与 gh-ost 自身无关。</li>\n<li><em>校验失败</em> ：表数据不一致。对于被测试的分支，这个需要修复。对于正在进行的 master 分支测试，这意味着立即阻止生产迁移。我们不会遇到后者。</li>\n</ul>\n<p>测试结果经过审核，发送到机器人聊天室，作为事件发送到我们的度量系统。下图中的每条垂直线代表成功的迁移测试:</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/10/71e92c739206c69fde93c70a457376b8.png\" alt=\"automated master failover\"></p>\n<p>这些测试不断运行。如果发生故障，我们会收到通知。当然，我们可以随时访问机器人聊天室（chatops），了解发生了什么。</p>\n<h4 id=\"toc_6\">测试新版本</h4>\n<p>我们不断改进 gh-ost。我们的开发流程基于 git 分支，然后我们通过<a href=\"https://github.com/github/gh-ost/pulls\">拉取请求（PR）</a>来提供合并。</p>\n<p>提交的 gh-ost 拉取请求（PR）通过持续集成（CI）进行基本的编译和单元测试。一旦通过，该 PR 在技术上就有资格合并，但更好的是它<a href=\"https://githubengineering.com/deploying-branches-to-github-com/\">有资格通过 Heaven 进行部署</a>。作为我们基础架构中的敏感组件，在其进入 master 分支前，我们会小心部署分支进行密集测试。</p>\n<p><strong>shlomi-noach</strong></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f25dbe872bc984094731\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n.deploy gh-ost/fix-reappearing-throttled-reasons to prod/ghost-db-mysql-0007\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f25dbe872bc984094731-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25dbe872bc984094731-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f25dbe872bc984094731-1\"><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">deploy </span><span class=\"crayon-v\">gh</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">ost</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">fix</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">reappearing</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">throttled</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">reasons </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">prod</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">ghost</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">db</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0007</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25dbe872bc984094731-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p><strong>Hubot</strong></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f25dbe872bf054241578\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n@shlomi-noach is deploying gh-ost/fix-reappearing-throttled-reasons (baee4f6) to production (ghost-db-mysql-0007). \r\n@shlomi-noach's production deployment of gh-ost/fix-reappearing-throttled-reasons (baee4f6) is done! (2s) \r\n@shlomi-noach, make sure you watch for exceptions in haystack\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f25dbe872bf054241578-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25dbe872bf054241578-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f25dbe872bf054241578-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25dbe872bf054241578-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f25dbe872bf054241578-1\"><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">shlomi</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">noach </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">deploying </span><span class=\"crayon-v\">gh</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">ost</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">fix</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">reappearing</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">throttled</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">reasons</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">baee4f6</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">production</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ghost</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">db</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0007</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25dbe872bf054241578-2\"><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">shlomi</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">noach</span>'<span class=\"crayon-i\">s</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">production </span><span class=\"crayon-e\">deployment </span><span class=\"crayon-e\">of </span><span class=\"crayon-v\">gh</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">ost</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">fix</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">reappearing</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">throttled</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">reasons</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">baee4f6</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">done</span><span class=\"crayon-o\">!</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2s</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-59f25dbe872bf054241578-3\"><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">shlomi</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">noach</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">make </span><span class=\"crayon-e\">sure </span><span class=\"crayon-e\">you </span><span class=\"crayon-e\">watch </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">exceptions </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">haystack</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25dbe872bf054241578-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0020 seconds] -->\r\n<p><strong>jonahberquist</strong></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f25dbe872c2323189330\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n.deploy gh-ost/interactive-command-question to prod/ghost-db-mysql-0012\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f25dbe872c2323189330-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25dbe872c2323189330-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f25dbe872c2323189330-1\"><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">deploy </span><span class=\"crayon-v\">gh</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">ost</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">interactive</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">command</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">question </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">prod</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">ghost</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">db</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0012</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25dbe872c2323189330-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p><strong>Hubot</strong></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f25dbe872c6737521130\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n@jonahberquist is deploying gh-ost/interactive-command-question (be1ab17) to production (ghost-db-mysql-0012). \r\n@jonahberquist's production deployment of gh-ost/interactive-command-question (be1ab17) is done! (2s) \r\n@jonahberquist, make sure you watch for exceptions in haystack\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f25dbe872c6737521130-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25dbe872c6737521130-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f25dbe872c6737521130-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25dbe872c6737521130-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f25dbe872c6737521130-1\"><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">jonahberquist </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">deploying </span><span class=\"crayon-v\">gh</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">ost</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">interactive</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">command</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">question</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">be1ab17</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">production</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ghost</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">db</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0012</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25dbe872c6737521130-2\"><span class=\"crayon-sy\">@</span><span class=\"crayon-i\">jonahberquist</span>'<span class=\"crayon-i\">s</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">production </span><span class=\"crayon-e\">deployment </span><span class=\"crayon-e\">of </span><span class=\"crayon-v\">gh</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">ost</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">interactive</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">command</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">question</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">be1ab17</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">done</span><span class=\"crayon-o\">!</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2s</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-59f25dbe872c6737521130-3\"><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">jonahberquist</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">make </span><span class=\"crayon-e\">sure </span><span class=\"crayon-e\">you </span><span class=\"crayon-e\">watch </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">exceptions </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">haystack</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25dbe872c6737521130-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0018 seconds] -->\r\n<p><strong>shlomi-noach</strong></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f25dbe872c9677171335\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n.wcid gh-ost\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f25dbe872c9677171335-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25dbe872c9677171335-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f25dbe872c9677171335-1\"><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">wcid </span><span class=\"crayon-v\">gh</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">ost</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25dbe872c9677171335-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p><strong>Hubot</strong></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f25dbe872cc139622623\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nshlomi-noach testing fix-reappearing-throttled-reasons 41 seconds ago: ghost-db-mysql-0007 \r\njonahberquist testing interactive-command-question 7 seconds ago: ghost-db-mysql-0012 \r\n\r\nNobody is in the queue.\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f25dbe872cc139622623-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25dbe872cc139622623-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f25dbe872cc139622623-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25dbe872cc139622623-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f25dbe872cc139622623-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f25dbe872cc139622623-1\"><span class=\"crayon-v\">shlomi</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">noach </span><span class=\"crayon-e\">testing </span><span class=\"crayon-v\">fix</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">reappearing</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">throttled</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">reasons</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">41</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">seconds </span><span class=\"crayon-v\">ago</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ghost</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">db</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0007</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25dbe872cc139622623-2\"><span class=\"crayon-e\">jonahberquist </span><span class=\"crayon-e\">testing </span><span class=\"crayon-v\">interactive</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">command</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">question</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">seconds </span><span class=\"crayon-v\">ago</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ghost</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">db</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0012</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-59f25dbe872cc139622623-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25dbe872cc139622623-4\"><span class=\"crayon-e\">Nobody </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">the </span><span class=\"crayon-v\">queue</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-59f25dbe872cc139622623-5\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p>一些 PR 很小，不影响数据本身。对状态消息，交互式命令等的更改对 gh-ost 应用程序的影响较小。而其他的 PR 对迁移逻辑和操作会造成重大变化，我们将严格测试这些，通过我们的生产表车队运行这些，直到其满足了这些改变不会造成数据损坏威胁的程度。</p>\n<h3 id=\"toc_7\">总结</h3>\n<p>在整个测试过程中，我们建立对我们的系统的信赖。通过自动化这些测试，在生产环境中，我们得到了一切都按预期工作的反复确认。随着我们继续发展我们的基础设施，我们还通过调整测试来覆盖最新的变化。</p>\n<p>产品总会有令你意想不到的未被测试覆盖的场景。我们对生产环境的测试越多，我们对应用程序的期望越多，基础设施的能力就越强。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112713\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112713votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112713\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": 1, "praise_nums": "1", "url_object_id": "3fb3aeaf27ebfbe4ca62bf81130103c4", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/10/b04d0a2ac9daafe9ef55487f7989d502.jpg"], "front_image_path": "full/74bd3f28858c8b017da84facee861639472ce72a.jpg", "title": "GitHub 的 MySQL 基础架构自动化测试"}
{"create_date": "2017/10/20 ", "url": "http://blog.jobbole.com/112744/", "fav_nums": 2, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"http://engineering.skybettingandgaming.com/2017/09/25/redis-2-to-redis-3/\">Craig Stewart</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-8968-1.html\">Linux中国/geekpi</a>   </div><p>我们在 Sky Betting＆Gaming 中使用 <a href=\"https://redis.io/\">Redis</a> 作为共享内存缓存，用于那些需要跨 API 服务器或者 Web 服务器鉴别令牌之类的操作。在 Core Tribe 内，它用来帮助处理日益庞大的登录数量，特别是在繁忙的时候，我们在一分钟内登录数量会超过 20,000 人。这在很大程度上适用于数据存放在大量服务器的情况下（在 SSO 令牌用于 70 台 Apache HTTPD 服务器的情况下）。我们最近着手升级 Redis 服务器，此升级旨在使用 Redis 3.2 提供的原生集群功能。这篇博客希望解释为什么我们要使用集群、我们遇到的问题以及我们的解决方案。</p>\n<h3 id=\"toc_1\">在开始阶段（或至少在升级之前）</h3>\n<p>我们的传统缓存中每个缓存都包括一对 Redis 服务器，使用 keepalive 确保始终有一个主节点监听浮动 IP floating IP地址。当出现问题时，这些服务器对需要很大的精力来进行管理，而故障模式有时是非常各种各样的。有时，只允许读取它所持有的数据，而不允许写入的从属节点却会得到浮动 IP 地址，这种问题是相对容易诊断的，但会让无论哪个程序试图使用该缓存时都很麻烦。</p>\n<h3 id=\"toc_2\">新的应用程序</h3>\n<p>因此，这种情况下，我们需要构建一个新的应用程序，一个使用共享内存缓存shared in-memory cache的应用程序，但是我们不希望对该缓存进行迂回的故障切换过程。因此，我们的要求是共享的内存缓存，没有单点故障，可以使用尽可能少的人为干预来应对多种不同的故障模式，并且在事件恢复之后也能够在很少的人为干预下恢复，一个额外的要求是提高缓存的安全性，以减少数据泄露的范围（稍后再说）。当时 Redis Sentinel 看起来很有希望，并且有许多程序支持代理 Redis 连接，比如 <a href=\"https://github.com/twitter/twemproxy\">twemproxy</a>。这会导致还要安装其它很多组件，它应该有效，并且人际交互最少，但它复杂而需要运行大量的服务器和服务，并且相互通信。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/10/90754ddd08473e05e755ad65f7249460.jpg\"></p>\n<p>将会有大量的应用服务器与 twemproxy 进行通信，这会将它们的调用路由到合适的 Redis 主节点，twemproxy 将从 sentinal 集群获取主节点的信息，它将控制哪台 Redis 实例是主，哪台是从。这个设置是复杂的，而且仍有单点故障，它依赖于 twemproxy 来处理分片，来连接到正确的 Redis 实例。它具有对应用程序透明的优点，所以我们可以在理论上做到将现有的应用程序转移到这个 Redis 配置，而不用改变应用程序。但是我们要从头开始构建一个应用程序，所以迁移应用程序不是一个必需条件。</p>\n<p>幸运的是，这个时候，Redis 3.2 出来了，而且内置了原生集群，消除了对单一 sentinel 集群需要。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/10/6dd57f0b87ff2ebcffddc4c7c5d7f450.jpg\"></p>\n<p>它有一个更简单的设置，但 twemproxy 不支持 Redis 集群分片，它能为你分片数据，但是如果尝试在与分片不一致的集群中这样做会导致问题。有参考的指南可以使其匹配，但是集群可以自动改变形式，并改变分片的设置方式。它仍然有单点故障。正是在这一点上，我将永远感谢我的一位同事发现了一个 Node.js 的 Redis 的集群发现驱动程序，让我们完全放弃了 twemproxy。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/10/3839953e6c3ea86ff837d079b1796564.jpg\"></p>\n<p>因此，我们能够自动分片数据，故障转移和故障恢复基本上是自动的。应用程序知道哪些节点存在，并且在写入数据时，如果写入错误的节点，集群将自动重定向该写入。这是被选的配置，这让我们共享的内存缓存相当健壮，可以没有干预地应付基本的故障模式。在测试期间，我们的确发现了一些缺陷。复制是在一个接一个节点的基础上进行的，因此如果我们丢失了一个主节点，那么它的从节点会成为一个单点故障，直到死去的节点恢复服务，也只有主节点对集群健康投票，所以如果我们一下失去太多主节点，那么集群无法自我恢复。但这比我们过去的好。</p>\n<h3 id=\"toc_3\">向前进</h3>\n<p>随着使用集群 Redis 配置的新程序，我们对于老式 Redis 实例的状态变得越来越不适应，但是新程序与现有程序的规模并不相同（超过 30GB 的内存专用于我们最大的老式 Redis 实例数据库）。因此，随着 Redis 集群在底层得到了证实，我们决定迁移老式的 Redis 实例到新的 Redis 集群中。</p>\n<p>由于我们有一个原生支持 Redis 集群的 Node.js Redis 驱动程序，因此我们开始将 Node.js 程序迁移到 Redis 集群。但是，如何将数十亿字节的数据从一个地方移动到另一个地方，而不会造成重大问题？特别是考虑到这些数据是认证令牌，所以如果它们错了，我们的终端用户将会被登出。一个选择是要求网站完全下线，将所有内容都指向新的 Redis 群集，并将数据迁移到其中，以希望获得最佳效果。另一个选择是切换到新集群，并强制所有用户再次登录。由于显而易见的原因，这些都不是非常合适的。我们决定采取的替代方法是将数据同时写入老式 Redis 实例和正在替换它的集群，同时随着时间的推移，我们将逐渐更多地向该集群读取。由于数据的有效期有限（令牌在几个小时后到期），这种方法可以导致零停机，并且不会有数据丢失的风险。所以我们这么做了。迁移是成功的。</p>\n<p>剩下的就是服务于我们的 PHP 代码（其中还有一个项目是有用的，其它的最终是没必要的）的 Redis 的实例了，我们在这过程中遇到了一个困难，实际上是两个。首先，也是最紧迫的是找到在 PHP 中使用的 Redis 集群发现驱动程序，还要是我们正在使用的 PHP 版本。这被证明是可行的，因为我们升级到了最新版本的 PHP。我们选择的驱动程序不喜欢使用 Redis 的授权方式，因此我们决定使用 Redis 集群作为一个额外的安全步骤 （我告诉你，这将有更多的安全性）。当我们用 Redis 集群替换每个老式 Redis 实例时，修复似乎很直接，将 Redis 授权关闭，这样它将会响应所有的请求。然而，这并不是真的，由于某些原因，Redis 集群不会接受来自 Web 服务器的连接。 Redis 在版本 3 中引入的称为“保护模式”的新安全功能将在 Redis 绑定到任何接口时将停止监听来自外部 IP 地址的连接，并无需配置 Redis 授权密码。这被证明相当容易修复，但让我们保持警惕。</p>\n<h3 id=\"toc_4\">现在？</h3>\n<p>这就是我们现在的情况。我们已经迁移了我们的一些老式 Redis 实例，并且正在迁移其余的。我们通过这样做解决了我们的一些技术债务，并提高了我们的平台的稳定性。使用 Redis 集群，我们还可以扩展内存数据库并扩展它们。 Redis 是单线程的，所以只要在单个实例中留出更多的内存就会可以得到这么多的增长，而且我们已经紧跟在这个限制后面。我们期待着从新的集群中获得改进的性能，同时也为我们提供了扩展和负载均衡的更多选择。</p>\n<h3 id=\"toc_5\">未来怎么样？</h3>\n<p>我们解决了一些技术性债务，这使我们的服务更容易支持，更加稳定。但这并不意味着这项工作完成了，Redis 4 似乎有一些我们可能想要研究的功能。而且 Redis 并不是我们使用的唯一软件。我们将继续努力改进平台，缩短处理技术债务的时间，但随着客户群体的扩大，我们力求提供更丰富的服务，我们总是会遇到需要改进的事情。下一个挑战可能与每分钟超过 20,000次 登录到超过 40,000 次甚至更高的扩展有关。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112744\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112744votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112744\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": "  评论", "praise_nums": "1", "url_object_id": "f44e9d126df9e68989db9db38ee1066e", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2016/04/49961db8952e63d98b519b76a2daa5e2.png"], "front_image_path": "full/c766feed221138f7946130756cddfc7e86e388b4.jpg", "title": "如何让网站不下线而从 Redis 2 迁移到 Redis 3"}
{"create_date": "2017/10/17 ", "url": "http://blog.jobbole.com/112705/", "fav_nums": 3, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/wx330778213\">龚一</a> 翻译，<a href=\"http://www.jobbole.com/members/hanxiaomax\">艾凌风</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://www.startups.co/articles/finding-the-energy-to-work-on-your-sidehustle\">Kennedy Collins</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><blockquote><p>创业很难，在全职工作种用少量的自由时间创业更难。我真心地祝福你，这不容易，但是这真的是值得的。</p></blockquote>\n<p>在 IT 资讯聚合网站 Hacker News 上花超过 5 分钟，你就会看到那些在兼职创业的人。这些敬业的副业工作者花一整天的时间做专职工作，然后赶回家中投入到另一个项目中。他们的创业雄心被挤压到夜晚那仅剩的一点点时间里，往往通过减少睡眠来做更多的工作。这些疯狂的雄心中只有少数的幸运者得到了回报，而大多数尝试的人最终放弃了。</p>\n<p>放弃是如此寻常，因为从你的日常工作中跳出来去做你的副业真的非常非常难。这不仅困难又倍感压力， 所以人们逃避工作以致没有任何成果，或者强迫自己工作到完全心力交瘁。</p>\n<p><img class=\"alignnone\" src=\"http://wx3.sinaimg.cn/mw690/7cc829d3gy1fkl9k67ic4j20m80b4k04.jpg\" width=\"690\" height=\"345\"></p>\n<p>避免心力交瘁的寻常建议和满大街的大男子主义废话一样：别逃避！赶紧做！钻研！努力钻研！咬紧牙关不屈不挠。甘愿三头燃烧蜡烛（译注：过分消耗精力）或者逃避，都说明你不适合这个游戏。这个建议问题就是，它不仅有害而且是错误的。</p>\n<p>这种“磨砺！磨砺！再磨砺！”的心态经不起科学的考验，有两个主要的原因：从你朝九晚五的工作中转换到你的副业中来时，你往往处于很差的状态；毫不夸张地说，你不可能每周 70 个小时都保持创造性。你不能加快你的成功之路，但是你可以每天在工作之后花 1-2 个小时，像砌砖一样，直到你建立起成功的事业。</p>\n<h3>解决转换工作后状态不好的方法</h3>\n<p>如果你想在下班之后继续工作，你将不得不停止思考你朝九晚五的日常工作，并且开始专注于创业项目中必须完成的事。如果你在转换注意力上天生表现糟糕，那真是太不幸了。</p>\n<p>当然，这无关个人。人的大脑不仅不能同时做好两件事件，而且也不能很好地在当前任务完成后转向第二个任务。来自纽约大学的 Sophie Leroy 的研究把这种现象叫做注意力残留：即时在你停止工作时，原先的任务还是逗留在你的脑中，在后台占用你额外的脑力。这使得你很难在工作后投入副业工作，而取得有意义的进展就更加困难了。</p>\n<p>更糟糕的是，当你的大脑感到你做的东西都处于未完成状态——你若想开始一个新的任务，你的潜意识会对做这件事毫无兴趣。如果你曾花了整个上下班时间处理工作中的问题，或者让周五下午的邮件毁了你的周末，那么你就知道我在说什么了。</p>\n<p>但是，如果你说服你的潜意识关闭掉所有你大脑后台运行的其他进程，那么你可以真正有心力在晚上做你的副业。摆脱这些注意力残留的最好方法就是硬复位。</p>\n<h3>硬复位</h3>\n<p>有一种仪式或一种例行程序，能够让你在完成一天的工作之后，完全关闭那些仍然运行的心理进程。</p>\n<p>好的硬复位有两个组成部分：<strong>关机和启动</strong>。关机让你能够清理掉你脑中所有原先的工作，启动帮助你在恢复身体的同时更具体地转移到你新的心理框架中——伴随着身体能量的爆发，鼓舞着新得到的精神力量。</p>\n<p>在卡尔·纽波特的著作《Deep Work》中，他推荐了一种终止工作的方法来释放你的思维、让你休息和放松。这是一个结束一天工作很好的做法，但如果你想要从一天中挤出更多的工作，这也是使任务转换更有效的一个工具。你在这里寻找的是一种仪式，来告诉你的潜意识“今天我已经完成了”。还有很多方法可以做到这点。我的方法如下：</p>\n<ul>\n<li>我每天会在一张 3×5 的索引卡上写下代办事项，这是我某个时候在 Ryan Holiday 上学到的方法。</li>\n<li>在一天结束的时候，我会看那些卡片，并将没有做完的复制到我的周待办列表里，这些会存在我的 Google Docs 里。</li>\n<li>然后，我会为下一个工作日做一些大体上的准备。</li>\n<li>最终——这也是最重要的部分——我会把那些日常 3×5 的待办列表撕碎，然后说“完成啦！”。</li>\n</ul>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/07/4397ef9e57fef971bf879c4e6f146256.png\"><img class=\"alignnone size-medium wp-image-66048\" src=\"http://jbcdn2.b0.upaiyun.com/2017/07/4397ef9e57fef971bf879c4e6f146256.png\"></a></p>\n<p>纽波特建议通过自言自语的方式，大声地告诉自己任务已经完成（他的关键词是“关机完成”）。我会采纳这建议并加上撕碎一张索引卡片这种身体动作。无论是什么方法，这种“完成”的身体表现能够帮助你的大脑相信你真的完成了，这类似于睡前程序帮助睡眠质量。</p>\n<h3>启动</h3>\n<p>当你从你的日常工作中把精神垃圾清理出去之后，做一些身体恢复来获取一些能量并整理自己的思维是个绝佳的选择。这里有很多选择，但是我只打算提出我认为最有效的三个：活动身体（physical activity）、冥想和打盹。这不仅是个人爱好，它们都有减压的奖励效果，这些压力都是在全职工作和开展副业中特别常见的副作用。</p>\n<h3>活动身体</h3>\n<p>活动身体一次次地出现会提高认知和情绪。我建议一些轻有氧运动或瑜伽，不推荐像举重这类对于中枢神经系统来说超负荷的运动。基本上，任何有恢复作用的东西都是好的，任何你需要恢复的东西应该可能会被再次保存。</p>\n<p>你甚至可以做一些像散步一样简单的事情。来自密西根大学的研究表明，在自然环境下散步可以显著提高记忆力和注意力。当我感到压力时，我习惯沿着芝加哥河，穿过绿树成荫的住宅街道，从工作地点走回家。这在改善我心情这方面从来没有失败过。</p>\n<h3>冥想</h3>\n<p>来自大量科学支持，冥想是一种非常经典的清理思维的方法。你也不必出门：20分钟足够了。还有几十种app可以帮助你，我个人使用的是 Headspace。对于初学者还有很多非常好的线上资源，如 Tara Brach。</p>\n<h3>打盹</h3>\n<p>你上一次舒适的打盹是什么时候？打盹是非常棒的。大量的研究表明 20 分钟的打盹可以让你在苛刻的任务之后变得更加敏锐，并恢复一些认知功能。老实说，这是三个观点中我最喜欢的，只要确保你是真的打盹而不是听广播或者在黑暗中玩糖果消消乐。标准的睡眠保健必备——黑暗的房间、没有噪音、没有旁人等等。</p>\n<h3>在合理的时间去睡觉</h3>\n<p>一旦你执行硬复位，就可以解除困陷，做你的事。当你做事情直到凌晨 3 点才结束——你需要睡觉，而且这些额外的时间无论如何也不会变成任何有生产力的事。</p>\n<p>在第一次世界大战期间，英国政府为那些因战争行动需要而生产弹药的工厂取消了工时限制。因此也有一些关于那个时期工人的有趣研究。</p>\n<p>当看到这些数据时，你最初会看到你期望的内容：每工作一个小时，你会得到固定数量的输出。一个小时投入，一个炸弹产生，一个小时投入，一个炸弹产生，等等。这种关系一直持续到大概 49 个小时，每个小时产生的价值开始越来越少。大约 65 个小时开始，他们真的看到了这种消极的生产力——工人们犯得错误多过了生产行为，而且坏的炸弹比好的炸弹还要多。这样本的数量相当小，但即便如此，它也非常清晰地表明，大约 70 个小时后的工作价值是可以忽略不计的。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/07/3f7a507d9c3f156b772585fc7be6b16f.png\"><img class=\"alignnone size-medium wp-image-66047\" src=\"http://jbcdn2.b0.upaiyun.com/2017/07/3f7a507d9c3f156b772585fc7be6b16f.png\"></a></p>\n<p>所以：努力工作几个小时，然后停下。你将会得到相同的完成量，你会有更少的压力，也不会让自己累垮。如果你每天花 1-2 个小时干一年，比你在之后三个月里每天晚上熬到凌晨 3 点燃烧自己更高产。</p>\n<h3>祝你好运</h3>\n<p>创业很难，在全职工作种用少量的自由时间创业更难。我真心地祝福你，这不容易，但是这真的是值得的。</p>\n<p>在一段时间的工作之后来一次硬复位——这对我下班后的工作能力有很大的影响，我希望这方法也能帮助到你。甚至当你做副业的时候，来一次硬复位，这是很好的放松方式。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112705\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112705votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112705\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 3 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/wx330778213\">龚一</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/wx330778213\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2015/04/8fbdaaa5ea6d3b49c8c1c825aafeb5d9.png\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            简介还没来得及写 :）        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/wx330778213\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/wx330778213/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/wx330778213/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 10</a>        </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": 1, "praise_nums": "1", "url_object_id": "495587a925e6822916cba295db3ffbae", "front_image_url": ["http://wx3.sinaimg.cn/mw690/7cc829d3gy1fkl9k67ic4j20m80b4k04.jpg"], "front_image_path": "full/93850592982203c1c7a210266d466832985de0b8.jpg", "title": "如何在工作之余找精力做副项目？"}
{"create_date": "2017/10/24 ", "url": "http://blog.jobbole.com/112760/", "fav_nums": 1, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://www.cnblogs.com/xybaby/p/7465816.html\">xybaby</a>   </div><p>思考这个问题的初衷，是有一次给朋友转账，结果我的钱被扣了，朋友没收到钱。而我之前一直认为银行转账一定是由事务保证强一致性的，于是学习、总结了一下分布式事务的各种理论、方法。</p>\n<p>事务是一个非常广义的词汇，各行各业解读都不一样。对于程序员，事务等价于Transaction，是指一组连续的操作，这些操作组合成一个逻辑的、完整的操作。即这组操作执行前后，系统需要处于一个可预知的、一致的状态。因此，这一组操作要么都成功执行，要么都不能执行；如果部分成功，部分失败，成功的部分需要回滚（rollback）。</p>\n<h3>关系型数据库事务</h3>\n<p>大多数人可能和我一样，第一次听说事务是在学习关系型数据库（mysql、sql server、Oracle）的时候，在关系型数据库中，如果一组操作满足ACID特性，那么称之为一个事务。关于关系型数据库的<a href=\"https://en.wikipedia.org/wiki/ACID\" target=\"_blank\">ACID</a>特性，不管是教材还是网络上都有大量的资料，这里只简单介绍。</p>\n<p>A（Atomic）：原子性，构成事务的所有操作，要么都执行完成，要么全部不执行，不可能出现部分成功部分失败的情况<br>\nC（Consistency）：一致性，在事务执行前后，数据库的一致性约束没有被破坏。这里的一致性含义后面会详细解释<br>\nI（Isolation）：隔离性，数据库中的事务一般都是并发的，隔离性是指并发的两个事务的执行互不干扰，一个事务不能看到其他事务运行过程的中间状态<br>\nD（Durability）：持久性，事务完成之后，该事务对数据的更改会被持久化到数据库，且不会被回滚。</p>\n<p>我们举一个简单的转账的例子，用户A给玩家B转100块钱，那么涉及到两个操作：玩家A的账户扣100元，玩家B的账户加100元。即</p>\n<blockquote><p>UserA.account -= 100<br>\nUserB.account += 100</p></blockquote>\n<p>原子性很好理解，这两个操作要么都成功，要么都不执行（更准确的是从效果上来看等价于都没有执行）。不可能出现用户A的钱减少了而用户B的钱没增加的情况，用户是不允许的；更不可能出现用户B的钱增加 而 用户A的钱没有减少的情况，银行是绝对不干的。</p>\n<p>一致性说一起来大家都懂，但是深究起来也是似懂非懂。ACID中的一致性，网络上的介绍都很模糊，都是说要处于一致的状态，那什么是一致的状态呢，比如转账操作中，A扣钱，B加钱，AB的钱的综合是一定的，这个是否属于ACID中的Consistency呢？我觉得不是的，<a href=\"https://en.wikipedia.org/wiki/Transaction_processing\" target=\"_blank\">Wiki Transaction_processing</a>和<a href=\"https://en.wikipedia.org/wiki/ACID\" target=\"_blank\">Wiki： ACID</a>分别是这么描述的</p>\n<blockquote><p> Consistency: A transaction is a correct transformation of the state. The actions taken as a group <strong>do not violate any of the integrity constraints associated</strong> with the state.</p>\n<p>The consistency property ensures that any transaction will bring the database from one valid state to another. Any data written to the database must be valid according to all defined rules, including constraints, cascades, triggers, and any combination thereof. <strong>This does not guarantee correctness of the transaction in all ways the application programmer might have wanted</strong> (that is the responsibility of application-level code), but merely that any programming errors cannot result in the violation of any defined rules.</p></blockquote>\n<p>上面黑色加粗的部分指出，ACID中的一致性是指完整性约束不被破坏，完整性包含实体完整性（主属性不为空）、参照完整性（外键必须存在原表中）、用户自定义的完整性。用户自定义的完整性比如列值非空（not null）、列值唯一（unique）、列值是否满足一个bool表达式（check语句，如性别只能有两个值、岁数是一定范围内的整数等），例如age smallint CHECK (age &gt;=0 AND age &lt;= 120).数据库保证age的值在[0, 120]的范围，如果不在这个范文，那么更新操作失败，事务也会失败。另外，向mysql中的cascade，以及触发器（trigger）都属于用户自定义的完整性约束。在MongoDB3.2中<a href=\"//docs.mongodb.com/manual/core/document-validation/\" target=\"_blank\">document validation</a>就是用户自定义的完整性约束，在插入或者更新docuemnt的时候检查，不过用户可以自行设定validationAction，确定当数据不符合约束时的表现，默认为error，即拒绝数据写操作。</p>\n<p>因此，用户A，B在这次事务操作前后，账户的总和一定，是应用层面的一致性，而不是数据库保证的一致性，应用层面的一致性事实上是由原子性来保证的。</p>\n<p>隔离性说起来简单，但事实上背后的事情很复杂，数据库的隔离性依赖于加锁或者多版本控制。简单来说，如果UserA.account初始值为500，执行完第一条指令（即减去100），但事务还没有提交，其他的事务是不能读到这个中间结果（UserA.account的值为400）的。这就是避免了脏读（Drity Read），对应的隔离级别就是READ_COMMITTED。在SQL标准中，定义了四个隔离级别：</p>\n<blockquote><p>　　READ_UNCOMMITTED<br>\nREAD_COMMITTED<br>\nREPEATABLE_READ<br>\nSERIALIZABLE</p></blockquote>\n<p>来解决事务并发中带来的一下几个问题脏读（Dirty Read)、不可重复读（Non-repeatable Read）、幻读（Phantom Read）</p>\n<p>不同的数据库或者说存储引擎默认支持不同的隔离级别，比如InnoDB存储引擎默认支持REPEATABLE_READ，而Mongodb只支持READ_UNCOMMITTED</p>\n<p>持久性需要考虑到一个事务在执行过程中的各种情况的异常。一个事务的流程是这样的：</p>\n<blockquote><p>开启一个事务<br>\n执行一组操作<br>\n如果都执行成功，那么提交并结束事务<br>\n如果任何操作失败，那么回滚已经执行的操作，结束事务</p></blockquote>\n<p>在事务执行过程中，如果出现故障，比如断电、宕机，这个时候就要利用日志（redo log或者undo log） 加上 checkpoint来保证事务的完整结束。</p>\n<h3>分布式事务</h3>\n<p>当数据的规模越来越大，超出了单个关系型数据库的处理能力，这个时候就出现了关系型数据的垂直分表或者分表，也出现了天然支持水平扩展（sharding）的NoSql。另外，大型网站的服务化（SOA）以及这两年非常火的微服务，往往将服务进行拆分，单独部署，自然也使用独立的数据库，甚至是异构的数据库。这个时候，关系型数据库保证事务的手段，比如加锁、日志就行不通了。当然，本文讨论的不仅仅是数据库，也包含分布式存储、消息队列，以及任何要保证原子性、持久性的逻辑。</p>\n<p>分布式事务的最大挑战在于CAP，在《<a href=\"http://www.cnblogs.com/xybaby/p/6871764.html\" target=\"_blank\">CAP理论与MongoDB一致性、可用性的一些思考</a>》一文中有详细介绍。简而言之，由于网络分割（P： Network Partition）的存在，用户不得不在一致性（C Consistency）与可用性（A： Avaliable）之前做权衡。如果要保证强一致性（主要是应用层面的强一致性），那么在网络分割的时候，系统就不可用；如果要保证高可用性，那么就只能提供弱一致性，保证最终一致。下面提到的各种实现分布式事务的方法、协议都需要在一致性与可用性之间权衡。</p>\n<h4>2PC</h4>\n<p>提到分布式事务，首先想到的肯定是两阶段提交（2pc， <a href=\"https://en.wikipedia.org/wiki/Two-phase_commit_protocol\" target=\"_blank\">two-phase commit protocol</a>），2pc是非常经典的<strong>强一致性</strong>、<strong>中心化</strong>的原子提交协议。中心化是指协议中有两类节点：一个中心化协调者节点（coordinator）和N个参与者节点（participant、cohort）。</p>\n<p>顾名思义，两阶段提交协议的每一次事务提交分为两个阶段：</p>\n<p>在第一阶段，协调者询问所有的参与者是否可以提交事务（请参与者投票），所有参与者向协调者投票。</p>\n<p>在第二阶段，协调者根据所有参与者的投票结果做出是否事务可以全局提交的决定，并通知所有的参与者执行该决定。在一个两阶段提交流程中，参与者不能改变自己的投票结果。两阶段提交协议的可以全局提交的前提是所有的参与者都同意提交事务，只要有一个参与者投票选择放弃(abort)事务，则事务必须被放弃。</p>\n<p>wiki上给出了简要流程：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/10/adcf4bbfed6036e8654af87e101d9254.png\" alt=\"\"></p>\n<p>注意，上图中洗下面一行也表明，两阶段提交协议也依赖与日志，只要存储介质不出问题，两阶段协议就能最终达到一致的状态（成功或者回滚）</p>\n<p>而下图（来自<a href=\"https://www.slideshare.net/sourabhdave/distributed-databases-24839617\" target=\"_blank\">slideshare</a>）详细描述了整个流程：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/10/dc09effd00629725c2a12b672bc59161.jpg\" alt=\"\"></p>\n<p>在刘杰的《分布式原理介绍中》，有非常详细的流程介绍，可以配合上图一起看，另外还介绍了在各种异常情况下（比如Coordinator、Participant宕机，网络分割导致的超时）两阶段协议的工作情况。另外，在<a href=\"http://blog.jobbole.com/95632/\" target=\"_blank\">这篇文章</a>中也有比较清晰的流程介绍。在这里只讨论2PC的优缺点：</p>\n<p>优点：强一致性，只要节点或者网络最终恢复正常，协议就能保证顺利结束；部分关系型数据库（Oracle）、框架直接支持</p>\n<p>缺点：两阶段提交协议的容错能力较差，比如在节点宕机或者超时的情况下，无法确定流程的状态，只能不断重试；两阶段提交协议的性能较差， 消息交互多，且受最慢节点影响</p>\n<p><a href=\"//blog.csdn.net/m0_38031406/article/details/76474800\" target=\"_blank\">这篇文章</a>描述了为什么两阶段提交协议在分布式系统中不适用：</p>\n<blockquote><p>　　系统“水平”伸缩的死敌。基于两阶段提交的分布式事务在提交事务时需要在多个节点之间进行协调,最大限度地推后了提交事务的时间点，客观上延长了事务的执行时间，这会<strong>导致事务在访问共享资源时发生冲突和死锁的概率增高</strong>，随着数据库节点的增多，这种趋势会越来越严重，从而成为系统在数据库层面上水平伸缩的”枷锁”， 这是很多Sharding系统不采用分布式事务的主要原因。</p></blockquote>\n<p>所言甚是！</p>\n<h4>3PC</h4>\n<p>三阶段提交协议（3pc <a href=\"https://en.wikipedia.org/wiki/Three-phase_commit_protocol\" target=\"_blank\">Three-phase_commit_protocol</a>）主要是为了解决两阶段提交协议的阻塞问题，从原来的两个阶段扩展为三个阶段，并且增加了超时机制。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/10/d7ff9cc44c99e8aab1b1bdbb80f20cd4.png\" alt=\"\"></p>\n<p>3PC只是解决了在异常情况下2PC的阻塞问题，但导致一次提交要传递6条消息，延时很大。具体流程描述可参见《<a href=\"https://en.wikipedia.org/wiki/ACID\" target=\"_blank\">关于分布式事务、两阶段提交协议、三阶提交</a><a href=\"http://blog.jobbole.com/95632/\" target=\"_blank\">协议 </a>》一文。</p>\n<h4>TCC</h4>\n<p>TCC是Try、Commit、Cancel的缩写，在国内由于<a href=\"http://www.sohu.com/a/124709543_468650%20\" target=\"_blank\">支付宝的布道</a>而广为人知，<strong>TCC在保证强一致性的同时，最大限度提高系统的可伸缩性与可用性</strong>。</p>\n<p>我们假设一个完整的为业务包含一组子业务，Try操作完成所有的子业务检查，预留必要的业务资源，实现与其他事务的隔离；Confirm使用Try阶段预留的业务资源真正执行业务，而且Confirm操作满足幂等性，以遍支持重试；Cancel操作释放Try阶段预留的业务资源，同样也满足幂等性。“一次完整的交易由一系列微交易的Try 操作组成，如果所有的Try 操作都成功，最终由微交易框架来统一Confirm，否则统一Cancel，从而实现了类似经典两阶段提交协议（2PC）的强一致性。”</p>\n<p>与2PC协议比较 ，TCC拥有以下特点：</p>\n<blockquote><p>　　位于业务服务层而非资源层 ，由业务层保证原子性</p>\n<p>没有单独的准备(Prepare)阶段，降低了提交协议的成本</p>\n<p>Try操作 兼备资源操作与准备能力</p>\n<p>Try操作可以灵活选择业务资源的锁定粒度，而不是锁住整个资源，提高了并发度</p></blockquote>\n<p>当然，TCC需要较的高开发成本，每个子业务都需要有响应的comfirm、Cancel操作，即实现相应的补偿逻辑。</p>\n<h4>基于消息的分布式事务</h4>\n<p>这类事务机制将分布式事务分成多个本地事务，这里称之为主事务与从事务。首先主事务本地先行提交，然后通过消息通知从事务，从事务从消息中获取信息进行本地提交。可以看出这是一种<strong>异步事务机制、只能保证最终一致性；但可用性非常高，不会因为故障而发生阻塞</strong>。另外，主事务已经先行提交，如果因为从事务无法提交，要回滚主事务还是比较麻烦，所以这种模式只适用于理论上大概率等成功的业务情况，即从事务的提交失败可能是由于故障，而不大可能是逻辑错误。</p>\n<p>基于异步消息的事务机制主要有两种方式：<strong>本地消息表与事务消息</strong>。二者的区别在于：怎么保证主事务的提交与消息发送这两个操作的原子性。</p>\n<p>如果用异步消息实现转账的例子，那么操作分为四部：用户A扣钱，发消息，用户B收消息，用户B扣钱。前两步必须保证原子性，如果A扣钱成功但是没有发出消息，那么用户A损失了；如果发消息成功，但是没有扣钱，那么用户B就多得了一笔钱，银行肯定不干。</p>\n<h5>本地消息表</h5>\n<p>基于本地消息表的方案是指将消息写入本地数据库，通过本地事务保证主事务与消息写入的原子性。例如银行转账的例子，<a href=\"http://blog.csdn.net/gaowenhui2008/article/details/53910341\" target=\"_blank\">伪码</a>如下：</p>\n<blockquote><p> begin transaction:</p>\n<p>update User set account = account – 100 where userId = ‘A’<br>\ninsert into message(userId, amount, status) values(‘A’, 100, 1)</p>\n<p>commit transaction</p></blockquote>\n<p>然后通过pull或者push模式，从业务获取消息并执行。如果是push模式，那么一般使用具有持久化功能的消息队列，从事务务订阅消息。如果是pull模式，那么从事务定时去拉取消息，然后执行。</p>\n<p>mongodb的写入就很像本地消息表，在WriteConcern为w:1的情况下，更新操作只要写到oplog以及primary就可以向客户端返回。secondary异步拉取oplog并本地记录执行。</p>\n<h5>事务消息：</h5>\n<p>事务消息依赖于支持“事务消息”的消息队列，其基本思想是 利用消息中间间实施两阶段提交，将本地事务和发消息放在了一个分布式事务里，保证要么本地操作成功成功并且对外发消息成功，要么两者都失败。流程如下：</p>\n<blockquote><p>主事务向消息队列发送预备消息</p>\n<p>主事务收到ACK之后本地执行主事务</p>\n<p>根据执行的结果（成功或失败）向消息队列发送提交或者回滚消息</p></blockquote>\n<p>详细的流程如下图（图片<a href=\"http://blog.csdn.net/mine_song/article/details/64118963\" target=\"_blank\">来源见水印</a>）所示：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/10/f6cbba9d1e08621af696d4e93da9aa81.png\" alt=\"\"></p>\n<p>不难看到，相比本地消息表的方式，事务消息由消息中间件保证本地事务与消息的原子性，不依赖于本地数据库存储消息。但实现了“事务消息”的消息队列比较少，还不够通用。</p>\n<p>不管是本地消息表还是事务消息，都需要保证从事务执行且仅仅执行一次，exact once。如果失败，需要重试，但也不可能无限次的重试，当从事务最终失败的情况下，需要通知主业务回滚吗？但是此时，主事务已经提交，因此只能通过补偿，实现逻辑上的回滚，而当前时间点距主事务的提交已经有一定时间，回滚也可能失败。因此，最好是保证从事务逻辑上不会失败，万一失败，记录log并报警，人工介入。</p>\n<h4>1PC</h4>\n<p>1PC（one phase commit）这个概念，我是在《<a href=\"http://book.mixu.net/distsys/\" target=\"_blank\">Distributed systems for fun and profit</a>》一文中看到的，应该是对标2PC，3PC。在wiki中并没有正式的词条，在google上的文章也不是很多。在我的理解中，1PC适用于分布式存储系统的复制集，即复制集中多个节点的数据提交，。一般来说，这些节点存储同样的数据，只要单个节点能提交，其他节点理论上也应该可以提交。 在《<a href=\"http://book.mixu.net/distsys/\" target=\"_blank\">Distributed systems for fun and profit</a>》中是这么描述的：</p>\n<blockquote><p> Having a second phase in place before the commit is considered permanent is useful, because it allows the system to roll back an update when a node fails. In contrast, in primary/backup (“1PC”), t<strong>here is no step for rolling back</strong> an operation that has failed on some nodes and succeeded on others, and hence the replicas could diverge.</p></blockquote>\n<p>即对于分布式存储中使用非常广泛的中心化复制集协议Primary Secondary，在部分节点失败、部分节点成功的情况下没有回滚操作，可能会导致不一致。不过这些分布式存储系统都竭力保证，这些不一致是暂时的，会通过重试等手段保证最终的一致。</p>\n<p>1PC的优点是性能非常好，而且只有在出现物理故障的时候才会出现不一致。</p>\n<p>比如在MongoDB中，更新操作会写入Primary节点以及oplog collection，Secondary节点从Primary节点的oplog collection拉取操作日志并执行，这是一个异步的过程。及时Secondary节点因为故障执行oplog失败，Promary节点的数据也不会回滚。在《<a href=\"http://www.cnblogs.com/xybaby/p/7153755.html\" target=\"_blank\">带着问题学习分布式系统之中心化复制集</a>》中也提到过，为了提高数据可靠性（避免极端情况下数据被回滚），设定WriteConcern为w:Majority，（shard有一个Primary 一个Secondary 一个Arbiter组成）。如果这个时候由于其中一个secondary挂掉，写入操作是不可能成功的。因此，在超时时间到达之后，会向客户端返回出错信息。但是在这个时候数据是持久化到了primary节点，不会被回滚。如果此时Secondary重启，那么是会从Primary拉取日志并执行。所以当客户端返回的出错信息包含<a href=\"https://docs.mongodb.com/manual/reference/method/WriteResult/#WriteResult.writeConcernError\">WriteResult.writeConcernError</a>  时，应该谨慎处理</p>\n<p>对于分布式文件系统GFS、haystack，如果Secondary节点失败，也会采取简单粗暴的重试，并通过一些机制（cheksum，offset）来保证最终能读到正确的数据</p>\n<h3>思考与总结</h3>\n<p>更多的时候，分布式事务只需要保证原子性，这个原子性也保证了应用层面上的一致性，而由本地事务来保证隔离性、持久性。</p>\n<p>原子性这个东西，即使不是分布式，仅仅是单进程单线程也是需要考虑的，这就是C++中的RAII，python中的with statement，以及各种语言的try…finally…。当涉及到跨进程、异步通信的时候，就很难通过语言层面的机制保证原子性了。</p>\n<p>在分布式领域，由于网络或者机器故障，经常需要重试，因此幂等性非常重要</p>\n<p>很多场景，比如电商、网络购票，首先要保证的是高可用，不大可能采用强一致性，因此我们也会看到‘正在处理中…‘这种中间状态，后台很可能是异步处理的，在12306买过票的话都知道，下单成功到最后是否能出票由很长一段时间。</p>\n<p>在笔者的业务领域，并没有涉及到强一致性的场景，只要最终一致性就行了。上面的提到的各种办法，不管是2PC、TCC、本地消息表、事务消息，都需要引入额外的框架或者组件。所以更多的时候是采取业务补偿的方式，比如一个涉及两个进程的操作需要保证原子性，进程间RPC通信，那么一般是A进程先执行，然后RPC调用B进程接口，根据B进程的返回结果，绝对是否回滚（补偿）；但如果涉及到异步RPC、或者多线程、或者两个以上进程的串联时，那么就不一定能补偿、甚至很难补偿了，这个时候只记录一个error log，然后通知人工排查。因此，事务补偿只适合业务比较简单的常见，而且很难形成通用的框架，或者说实用性不强。</p>\n<p>之前一直以为像银行转账这种场景，一定是强一致性的。后来自己遇到这么一回事，我给朋友转账，我这边显示转账成功，但朋友并没有收到钱。我以为是需要一定时间，结果24小时之后还没有收到。我自己重新比对转账单，才发现是把对方的开户银行写错了。因此可见，转账这个操作肯定不是强一致性，具体怎么搞的在网上也没有查到。更坑爹的是，转账失败，我的钱被扣了，朋友也没有收到钱，但是我没有收到任何消息，也没有给我把钱退回来，在我打电话到银行去咨询之后才退回来。这个体验真的很差，但银行是大爷，没办法！</p>\n<h3>references</h3>\n<p><a href=\"https://en.wikipedia.org/wiki/Transaction_processing\" target=\"_blank\">Wiki Transaction_processing</a></p>\n<p><a href=\"https://en.wikipedia.org/wiki/ACID\" target=\"_blank\">Wiki： ACID</a></p>\n<p><a href=\"https://en.wikipedia.org/wiki/Two-phase_commit_protocol\" target=\"_blank\">Wiki：two-phase commit protocol</a></p>\n<p><a href=\"https://en.wikipedia.org/wiki/ACID\" target=\"_blank\">关于分布式事务、两阶段提交协议、三阶提交</a><a href=\"http://blog.jobbole.com/95632/\" target=\"_blank\">协议<em id=\"__mceDel\"> </em></a></p>\n<p>刘杰：分布式原理介绍</p>\n<p><a href=\"http://book.mixu.net/distsys/\" target=\"_blank\">Distributed systems for fun and profit</a></p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112760\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112760votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112760\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": "  评论", "praise_nums": "1", "url_object_id": "0975d26f2e429051a027a8bbb24006c0", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2015/11/0320c1acf91edcafcab3cfa218486cfa.jpg"], "front_image_path": "full/6be559ca13bab9c662992cfdc486acd6d42b61a5.jpg", "title": "从银行转账失败到分布式事务：总结与思考"}
{"create_date": "2017/10/11 ", "url": "http://blog.jobbole.com/112594/", "fav_nums": 4, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://my.oschina.net/editorial-story/blog/1548766\">开源中国编辑部</a>   </div><p>在这篇文章中，将会列出让一些令 Linux 用户印象最深刻且精美的 Linux 发行版，包括对初学者友好和流行的发行版。</p>\n<p> </p>\n<h2><strong><a href=\"https://elementary.io/\" target=\"_blank\" rel=\"nofollow\">1. elementary OS</a></strong></h2>\n<p><strong><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/10/6edd33865348a5e1e0301d44c93cf113.png\" alt=\"\" width=\"650\" height=\"361\"></strong></p>\n<p>elementary OS 是一款基于 Ubuntu 精心打磨美化的桌面 Linux 发行版，号称是最漂亮的 Linux 发行版。事实上，Elementary 起初是 Ubuntu 的一个主题美化项目，后来因太受欢迎演变成了独立的发行版。在其官网上，elementary OS 对自己的介绍是快速、开源的 Windows/macOS 替代方案。</p>\n<p>elementary OS 是 Ubuntu 的衍生产品，因此它可以完全兼容所有的 Ubuntu 软件包。虽然基于 Ubuntu，但它放弃了许多默认的 Ubuntu 应用程序，使用了许多轻量级的替代方案。例如邮件程序用的是 Geary Mail 而非 ThunderBird，终端用的是 Pantheon Terminal，文本编辑器用的是 Scratch，音乐播放器使用的是 noise，文件管理器是 Pantheon Files 等等。</p>\n<p>这款漂亮的 Linux 发行版参考了不少 macOS 的设计元素，为用户提供了更简洁的体验。elementary OS 从界面外观到系统的各种设计元素都十分精美，逼格甚高！如果想体验 Linux 与漂亮的界面设计，不妨考虑一下它。</p>\n<p>为什么选择 elementary OS？</p>\n<ul>\n<li>与 macOS 相似的外观</li>\n<li>轻量高效的桌面环境</li>\n<li>精心挑选的一系列应用程序</li>\n</ul>\n<p><em><strong><a href=\"https://elementary.io/\" target=\"_blank\" rel=\"nofollow\">查看 elementary OS 网站</a></strong></em></p>\n<p> </p>\n<h2><strong><a href=\"https://www.deepin.org/en/\" target=\"_blank\" rel=\"nofollow\">2. Deepin</a></strong></h2>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/10/65288224c0ebefd958dc87ee4fae6d87.png\" alt=\"\" width=\"650\" height=\"406\"></p>\n<p>Deepin，即大家熟知也是口碑极高的深度操作系统，是一款国产的 Linux 发行版。深度操作系统为用户提供了一份美观易用、安全可靠的 Linux 发行版。它不仅仅对最优秀的开源产品进行了集成和配置，还基于 Qt 技术开发了深度桌面环境和深度控制中心。</p>\n<p>深度操作系统有着易用的体验和美观的设计，对于大多数用户来说，它易于安装和使用，能够很好的代替 Windows 系统进行工作与娱乐。此外，它的 Deepin Store 也提供了大量的应用程序。</p>\n<p>深度操作系统的历史可以追溯到 2004 年，其前身 Hiweed Linux 是中国第一个基于 Debian 的本地化版本。在 2008 年更名为深度操作系统。</p>\n<p>Deepin 默认使用的桌面环境经过许多变化，Deepin 早期曾使用过 IceWM、xfce、LXDE 和 GNOME，最终确定使用自行开发的深度桌面环境 (Deepin Desktop Environment)。关于基于的底层系统方面，也经历了 Morphix、Debian 和 Ubuntu 的多次变化。</p>\n<p>为什么选择 Deepin？</p>\n<ul>\n<li>创新的功能</li>\n<li>美观的设计</li>\n<li>Deepin Store</li>\n<li>简单易用的安装程序</li>\n</ul>\n<p><em><strong><a href=\"https://www.deepin.org/en/\" target=\"_blank\" rel=\"nofollow\">查看 Deepin 网站</a></strong></em></p>\n<p> </p>\n<h2><strong><a href=\"https://solus-project.com/\" target=\"_blank\" rel=\"nofollow\">3. Solus OS</a></strong></h2>\n<p><strong><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/10/e43eb4380b52fd78ed5b8c3091ae537a.jpg\" alt=\"\" width=\"650\" height=\"366\"></strong></p>\n<p>Solus OS 基于 Debian，是一款从无到有创建的桌面 Linux 发行版。在极短的时间内，Solus OS 成为发展最快、最酷的 Linux 发行版之一。它遵循极简主义的风格，拥有扁平和现代化的外观，Solus OS 默认安装了一系列软件，包括 LibreofficeSuite、Firefox、Thunderbird、XChat、OpenShotVideoEditor 等。</p>\n<p>Budgie 基于 GNOME，但 Solus 自身开发的 Budgie 并没有使用 GNOME Shell，用于 Solus 的 Budgie 有一个可以访问可用应用程序的主菜单。也是在 Budgie 桌面环境的帮助下，Solus 成为了引人注目的 Linux 发行版。此外，Solus 最近添加了对来自 Ubuntu Snappy Store 的 Snaps 的支持，这使得它更加易用。</p>\n<p>为什么选择 Solus？</p>\n<ul>\n<li>发展最快的新发行版之一</li>\n<li>使用 Budgie 桌面环境</li>\n<li>支持 Snap</li>\n<li>开箱即用</li>\n</ul>\n<p><em><strong><a href=\"https://solus-project.com/\" target=\"_blank\" rel=\"nofollow\">查看 Solus 网站</a></strong></em></p>\n<p> </p>\n<h2><strong><a href=\"https://nxos.org/\" target=\"_blank\" rel=\"nofollow\">4. Nitrux</a></strong></h2>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/10/283a7fc36bcea4c11de8f65128ec5e39.jpg\" alt=\"\" width=\"650\" height=\"365\"></p>\n<p>Nitrux 也是一份美观的 Linux 发行版，它是以设计为基础的。值得注意的是，Nitrux 基于 Ubuntu unstable dev 分支，采用基于 KDE Plasma 5 和 Qt 的 Nomad 桌面环境。Nitrux 的特色软件有 Babe 音乐播放器及 Nomad 防火墙实用工具。</p>\n<p>Nitrux 的核心思想包括便于移植的通用应用程序格式，也附带了定制的软件，它采用滚动发布模式，仅提供 64 位系统。</p>\n<p>为什么选择 Nitrux OS？</p>\n<ul>\n<li>自主定制的应用程序</li>\n<li>美观的桌面 UI</li>\n<li>极简的设计</li>\n</ul>\n<p><em><strong><a href=\"https://nxos.org/\" target=\"_blank\" rel=\"nofollow\">查看 Nitrux OS 网站</a></strong></em></p>\n<p> </p>\n<h2><strong><a href=\"https://neon.kde.org/\" target=\"_blank\" rel=\"nofollow\">5. KDE Neon</a></strong></h2>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/10/aded704033143a63b4b0d4914992457c.jpg\" alt=\"\" width=\"650\" height=\"360\"></p>\n<p>如果你追求美观和轻量级的 Linux 使用体验，并且还是 KDE 的忠实拥趸，那不妨考虑一下 KDE Neon 吧。Neon 提供一个当最新的 KDE 软件一发布就可以获得的途径（快速的软件更新仓库），它让 KDE 粉丝可以用上最新的 KDE 软件。</p>\n<p>KDE Neon 基于 LTS 版的 Ubuntu，关于外观方面，KDE Neon 的主要特色是它美观的扁平主题，可轻松添加到桌面的小部件，还有直观和对用户友好的菜单。使用这个美观的 Linux 发行版，不仅可以获得 LTS 版 Ubuntu 带来的稳定性，还能享受流畅的体验。</p>\n<p>为什么选择 KDE Neon？</p>\n<ul>\n<li>最新的 KDE 软件</li>\n<li>基于坚实的 Ubuntu LTS</li>\n<li>自由使用、美观、扁平化主题</li>\n</ul>\n<p><em><strong><a href=\"https://neon.kde.org/\" target=\"_blank\" rel=\"nofollow\">查看 KDE Neon 网站</a></strong></em></p>\n<p> </p>\n<h2><strong><a href=\"http://ferenos.weebly.com/\" target=\"_blank\" rel=\"nofollow\">6. feren OS</a></strong></h2>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/10/a0b0772747131c92fccad968e29149a0.png\" alt=\"\" width=\"650\" height=\"520\"></p>\n<p>feren OS 是基于 Linux Mint 的桌面 Linux 发行，它定制开发的 Cinnamon 桌面环境使得它成为最具视觉吸引力的 Linux 发行版。此外，它还提供了与 macOS 和 Windows 操作系统相似的使用体验。</p>\n<p>feren OS 的外观初看起来会感觉十分熟悉，因为它有一个类似 Windows 的“开始”按钮和任务栏，不仅仅外观相似，feren OS 还包含可运行 Windows 应用程序的 WINE 兼容层。所以 feren OS 是给用户的体验是既熟悉又创新的。</p>\n<p>为什么选择 feren OS？</p>\n<ul>\n<li>熟悉的桌面和开始菜单</li>\n<li>简洁、扁平化的设计</li>\n<li>现代化的风格，对初学者友好</li>\n</ul>\n<p><em><strong><a href=\"http://ferenos.weebly.com/\" rel=\"nofollow\">查看 feren OS 网站</a></strong></em></p>\n<p> </p>\n<h2><strong><a href=\"https://system76.com/pop\" target=\"_blank\" rel=\"nofollow\">7. Pop!_OS</a></strong></h2>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/10/773927e7840ca929c3a50e0e29613f0f.jpg\" alt=\"\" width=\"650\" height=\"366\"></p>\n<p>Pop!_OS 是知名 Linux 笔记本厂商 System76 最近推出的 Linux 发行版，基于 Ubuntu 和 GNOME 桌面环境，希望能为用户提供个性化且新鲜的使用体验。</p>\n<p>虽然基于 GNOME 桌面环境，但 System76 会对用户界面、驱动等内容进行个性化定制，具有现代化和简洁的外观，更好地控制用户体验。</p>\n<p>Pop!_OS 的创意和功能重点是针对专业用户，让 Linux 桌面变得更具生产力，成为工程师、开发人员以及计算机科研领域的好帮手。</p>\n<p>为什么选择 Pop!_OS?</p>\n<ul>\n<li>舒缓的色彩主题</li>\n<li>新鲜的外观和极简主义的风格</li>\n<li>专为计算机科学领域的创意而设计</li>\n</ul>\n<p><em><strong><a href=\"https://system76.com/pop\" target=\"_blank\" rel=\"nofollow\">查看 Pop!_OS 网站</a></strong></em></p>\n<p> </p>\n<h2><strong><a href=\"https://zorinos.com/\" target=\"_blank\" rel=\"nofollow\">8. Zorin OS</a></strong></h2>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/10/a7ab31009716c4e134c9df4166337873.png\" alt=\"\" width=\"650\" height=\"520\"></p>\n<p>Zorin OS 被大众最为熟知的特色就是拥有与 Windows 高度相似的图形界面，默认配置了不少桌面特效。用户对其的第一印象基本上是漂亮、符合传统 Windows 的使用习惯。</p>\n<p>Zorin OS 是一款基于 Ubuntu 的 Linux 发行版，特别为 Linux 新手而设计。因为内置了 WINE，所以能支持很多 Windows 下的应用软件，还自带了常用的办公娱乐应用。该发行版的终极目标是提供一份可作为 Windows 替代的 Linux 选择，并让 Windows 用户在避免烦琐的同时享受 Linux 的所有特性。</p>\n<p>为什么选择 Zorin OS？</p>\n<ul>\n<li>符合 Windows 的使用习惯</li>\n<li>热门的发行版，有很好的支持</li>\n<li>精美稳定的 Linux 桌面体验</li>\n</ul>\n<p><strong><em><a href=\"https://zorinos.com/\" target=\"_blank\" rel=\"nofollow\">查看 Zorin OS 网站</a></em></strong></p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112594\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112594votetotal\">3</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112594\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 4 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": "  评论", "praise_nums": "3", "url_object_id": "b8c991ba6492623366372bdc5704ea5d", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2014/04/e260ae4f5d153b25be87819b25ff0577.jpg"], "front_image_path": "full/6085acc0af4696f5d49164561c6bc4f9b590fc26.jpg", "title": "八款值得尝试的精美的 Linux 发行版（2017 版）"}
{"create_date": "2017/10/11 ", "url": "http://blog.jobbole.com/112597/", "fav_nums": 2, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://www.cnblogs.com/kismetv/p/7615738.html\">编程迷思</a>   </div><h2>前言</h2>\n<p>作为一名后台开发，对数据库进行基准测试，以掌握数据库的性能情况是非常必要的。本文介绍了MySQL基准测试的基本概念，以及使用sysbench对MySQL进行基准测试的详细方法。</p>\n<p><strong>文章有疏漏之处，欢迎批评指正。</strong></p>\n<h1>一、基准测试简介</h1>\n<h2>1、什么是基准测试</h2>\n<p>数据库的基准测试是对数据库的性能指标进行定量的、可复现的、可对比的测试。</p>\n<p><strong>基准测试与压力测试</strong></p>\n<p>基准测试可以理解为针对系统的一种压力测试。但基准测试不关心业务逻辑，更加简单、直接、易于测试，数据可以由工具生成，不要求真实；而压力测试一般考虑业务逻辑(如购物车业务)，要求真实的数据。</p>\n<h2>2、基准测试的作用</h2>\n<p>对于多数Web应用，整个系统的瓶颈在于数据库；原因很简单：Web应用中的其他因素，例如网络带宽、负载均衡节点、应用服务器（包括CPU、内存、硬盘灯、连接数等）、缓存，都很容易通过水平的扩展（俗称加机器）来实现性能的提高。而对于MySQL，由于数据一致性的要求，无法通过增加机器来分散向数据库写数据带来的压力；虽然可以通过前置缓存（Redis等）、读写分离、分库分表来减轻压力，但是与系统其它组件的水平扩展相比，受到了太多的限制。</p>\n<p>而对数据库的基准测试的作用，就是分析在当前的配置下（包括硬件配置、OS、数据库设置等），数据库的性能表现，从而找出MySQL的性能阈值，并根据实际系统的要求调整配置。</p>\n<h2>3、基准测试的指标</h2>\n<p>常见的数据库指标包括：</p>\n<ul>\n<li>TPS/QPS：衡量吞吐量。</li>\n<li>响应时间：包括平均响应时间、最小响应时间、最大响应时间、时间百分比等，其中时间百分比参考意义较大，如前95%的请求的最大响应时间。。</li>\n<li>并发量：同时处理的查询请求的数量。</li>\n</ul>\n<h2>4、基准测试的分类</h2>\n<p>对MySQL的基准测试，有如下两种思路：</p>\n<p>（1）针对整个系统的基准测试：通过http请求进行测试，如通过浏览器、APP或postman等测试工具。该方案的优点是能够更好的针对整个系统，测试结果更加准确；缺点是设计复杂实现困难。</p>\n<p>（2）只针对MySQL的基准测试：优点和缺点与针对整个系统的测试恰好相反。</p>\n<p>在针对MySQL进行基准测试时，一般使用专门的工具进行，例如mysqlslap、sysbench等。其中，sysbench比mysqlslap更通用、更强大，且更适合Innodb（因为模拟了许多Innodb的IO特性），下面介绍使用sysbench进行基准测试的方法。</p>\n<h1>二、sysbench</h1>\n<h2>1、sysbench简介</h2>\n<p>sysbench是跨平台的基准测试工具，支持多线程，支持多种数据库；主要包括以下几种测试：</p>\n<ul>\n<li>cpu性能</li>\n<li>磁盘io性能</li>\n<li>调度程序性能</li>\n<li>内存分配及传输速度</li>\n<li>POSIX线程性能</li>\n<li>数据库性能(OLTP基准测试)</li>\n</ul>\n<p>本文主要介绍对数据库性能的测试。</p>\n<h2>2、sysbench安装</h2>\n<p>本文使用的环境时CentOS 6.5；在其他Linux系统上的安装方法大同小异。MySQL版本是5.6。</p>\n<p>（1）下载解压</p>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f26bb5c919b639337562\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nwget https://github.com/akopytov/sysbench/archive/1.0.zip -O \"sysbench-1.0.zip\"\r\nunzip sysbench-1.0.zip\r\ncd sysbench-1.0</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f26bb5c919b639337562-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f26bb5c919b639337562-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f26bb5c919b639337562-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f26bb5c919b639337562-1\"><span class=\"crayon-e\">wget </span><span class=\"crayon-v\">https</span><span class=\"crayon-o\">:</span><span class=\"crayon-c\">//github.com/akopytov/sysbench/archive/1.0.zip -O \"sysbench-1.0.zip\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f26bb5c919b639337562-2\"><span class=\"crayon-e\">unzip </span><span class=\"crayon-v\">sysbench</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.0.zip</span></div><div class=\"crayon-line\" id=\"crayon-59f26bb5c919b639337562-3\"><span class=\"crayon-e\">cd </span><span class=\"crayon-v\">sysbench</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.0</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n\n</div>\n<p>（2）安装依赖</p>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f26bb5c91a8900492453\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nyum install automake libtool –y</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f26bb5c91a8900492453-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f26bb5c91a8900492453-1\"><span class=\"crayon-e\">yum </span><span class=\"crayon-e\">install </span><span class=\"crayon-e\">automake </span><span class=\"crayon-i\">libtool</span><span class=\"crayon-h\"> </span>–<span class=\"crayon-v\">y</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n\n</div>\n<p>（3）安装</p>\n<p>安装之前，确保位于之前解压的sysbench目录中。</p>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f26bb5c91ac013611457\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n./autogen.sh\r\n./configure\r\nexport LD_LIBRARY_PATH=/usr/local/mysql/include #这里换成机器中mysql路径下的include\r\nmake\r\nmake install</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f26bb5c91ac013611457-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f26bb5c91ac013611457-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f26bb5c91ac013611457-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f26bb5c91ac013611457-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f26bb5c91ac013611457-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f26bb5c91ac013611457-1\"><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">autogen</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">sh</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f26bb5c91ac013611457-2\"><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">configure</span></div><div class=\"crayon-line\" id=\"crayon-59f26bb5c91ac013611457-3\"><span class=\"crayon-e\">export </span><span class=\"crayon-v\">LD_LIBRARY_PATH</span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">local</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">include</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\">#这里换成机器中mysql路径下的include</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f26bb5c91ac013611457-4\"><span class=\"crayon-e\">make</span></div><div class=\"crayon-line\" id=\"crayon-59f26bb5c91ac013611457-5\"><span class=\"crayon-e\">make </span><span class=\"crayon-v\">install</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n\n</div>\n<p>（4）安装成功</p>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f26bb5c91b0393241571\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n[root&lt;a href=\"http://www.jobbole.com/members/q1531454480\"&gt;@test&lt;/a&gt; sysbench-1.0]# sysbench --version\r\nsysbench 1.0.9</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f26bb5c91b0393241571-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f26bb5c91b0393241571-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f26bb5c91b0393241571-1\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-i\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">href</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"http://www.jobbole.com/members/q1531454480\"</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">test</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">a</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sysbench</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># sysbench --version</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f26bb5c91b0393241571-2\"><span class=\"crayon-i\">sysbench</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.0.9</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n\n</div>\n<h2>3、sysbench语法</h2>\n<p>执行sysbench –help，可以看到sysbench的详细使用方法。</p>\n<p>sysbench的基本语法如下：</p>\n<p><strong>sysbench [options]… [testname] [command]</strong></p>\n<p>下面说明实际使用中，常用的参数和命令。</p>\n<h3>（1）command</h3>\n<p>command是sysbench要执行的命令，包括prepare、run和cleanup，顾名思义，prepare是为测试提前准备数据，run是执行正式的测试，cleanup是在测试完成后对数据库进行清理。</p>\n<h3>（2）testname</h3>\n<p>testname指定了要进行的测试，在老版本的sysbench中，可以通过–test参数指定测试的脚本；而在新版本中，–test参数已经声明为废弃，可以不使用–test，而是直接指定脚本。</p>\n<p>例如，如下两种方法效果是一样的：</p>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f26bb5c91b5304316842\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsysbench --test=./tests/include/oltp_legacy/oltp.lua\r\nsysbench ./tests/include/oltp_legacy/oltp.lua</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f26bb5c91b5304316842-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f26bb5c91b5304316842-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f26bb5c91b5304316842-1\"><span class=\"crayon-v\">sysbench</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">test</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">tests</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">include</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">oltp_legacy</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">oltp</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">lua</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f26bb5c91b5304316842-2\"><span class=\"crayon-i\">sysbench</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">tests</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">include</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">oltp_legacy</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">oltp</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">lua</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n\n</div>\n<p>测试时使用的脚本为lua脚本，可以使用sysbench自带脚本，也可以自己开发。对于大多数应用，使用sysbench自带的脚本就足够了。不同版本的sysbench中，lua脚本的位置可能不同，可以自己在sysbench路径下使用find命令搜索oltp.lua。P.S.：大多数数据服务都是oltp类型的，如果你不了解什么是oltp，那么大概率你的数据服务就是oltp类型的。</p>\n<h3>（3）options</h3>\n<p>sysbench的参数有很多，其中比较常用的包括：</p>\n<p><strong>MySQL</strong><strong>连接信息参数</strong></p>\n<ul>\n<li>–mysql-host：MySQL服务器主机名，默认localhost；如果在本机上使用localhost报错，提示无法连接MySQL服务器，改成本机的IP地址应该就可以了。</li>\n<li>–mysql-port：MySQL服务器端口，默认3306</li>\n<li>–mysql-user：用户名</li>\n<li>–mysql-password：密码</li>\n</ul>\n<p><strong>MySQL</strong><strong>执行参数</strong></p>\n<ul>\n<li>–oltp-test-mode：执行模式，包括simple、nontrx和complex，默认是complex。simple模式下只测试简单的查询；nontrx不仅测试查询，还测试插入更新等，但是不使用事务；complex模式下测试最全面，会测试增删改查，而且会使用事务。可以根据自己的需要选择测试模式。</li>\n<li>–oltp-tables-count：测试的表数量，根据实际情况选择</li>\n<li>–oltp-table-size：测试的表的大小，根据实际情况选择</li>\n<li>–threads：客户端的并发连接数</li>\n<li>–time：测试执行的时间，单位是秒，该值不要太短，可以选择120</li>\n<li>–report-interval：生成报告的时间间隔，单位是秒，如10</li>\n</ul>\n<h2>4、sysbench使用举例</h2>\n<p>在执行sysbench时，应该注意：</p>\n<p>（1）尽量不要在MySQL服务器运行的机器上进行测试，一方面可能无法体现网络（哪怕是局域网）的影响，另一方面，sysbench的运行（尤其是设置的并发数较高时）会影响MySQL服务器的表现。</p>\n<p>（2）可以逐步增加客户端的并发连接数（–thread参数），观察在连接数不同情况下，MySQL服务器的表现；如分别设置为10,20,50,100等。</p>\n<p>（3）一般执行模式选择complex即可，如果需要特别测试服务器只读性能，或不使用事务时的性能，可以选择simple模式或nontrx模式。</p>\n<p>（4）如果连续进行多次测试，注意确保之前测试的数据已经被清理干净。</p>\n<p>下面是sysbench使用的一个例子：</p>\n<h3>（1）准备数据</h3>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f26bb5c91bc284745666\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsysbench ./tests/include/oltp_legacy/oltp.lua --mysql-host=192.168.65.66 --mysql-port=3306 --mysql-user=root --mysql-password=123456 --oltp-test-mode=complex --oltp-tables-count=10 --oltp-table-size=100000 --threads=10 --time=120 --report-interval=10 prepare</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f26bb5c91bc284745666-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f26bb5c91bc284745666-1\"><span class=\"crayon-i\">sysbench</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">tests</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">include</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">oltp_legacy</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">oltp</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">lua</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">host</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">192.168.65.66</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">port</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">3306</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">user</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">root</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">password</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">123456</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">oltp</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">test</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mode</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">complex</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">oltp</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">tables</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">count</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">10</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">oltp</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">table</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">size</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">100000</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">threads</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">10</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">time</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">120</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">report</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">interval</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">10</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">prepare</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0019 seconds] -->\r\n\n</div>\n<p>其中，执行模式为complex，使用了10个表，每个表有10万条数据，客户端的并发线程数为10，执行时间为120秒，每10秒生成一次报告。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/10/82a41dd113faf12511a4a9eeb23eb804.png\" alt=\"\"></p>\n<h3>（2）执行测试</h3>\n<p>将测试结果导出到文件中，便于后续分析。</p>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f26bb5c91c0821271808\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsysbench ./tests/include/oltp_legacy/oltp.lua --mysql-host=192.168.65.66 --mysql-port=3306 --mysql-user=root --mysql-password=123456 --oltp-test-mode=complex --oltp-tables-count=10 --oltp-table-size=100000 --threads=10 --time=120 --report-interval=10 run &gt;&gt; /home/test/mysysbench.log</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f26bb5c91c0821271808-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f26bb5c91c0821271808-1\"><span class=\"crayon-i\">sysbench</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">tests</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">include</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">oltp_legacy</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">oltp</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">lua</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">host</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">192.168.65.66</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">port</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">3306</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">user</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">root</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">password</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">123456</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">oltp</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">test</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mode</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">complex</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">oltp</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">tables</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">count</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">10</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">oltp</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">table</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">size</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">100000</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">threads</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">10</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">time</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">120</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">report</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">interval</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">10</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">run</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">home</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">test</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">mysysbench</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">log</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0023 seconds] -->\r\n\n</div>\n<h3>（3）清理数据</h3>\n<p>执行完测试后，清理数据，否则后面的测试会受到影响。</p>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f26bb5c91c9194966132\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsysbench ./tests/include/oltp_legacy/oltp.lua --mysql-host=192.168.65.66 --mysql-port=3306 --mysql-user=root --mysql-password=123456 cleanup</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f26bb5c91c9194966132-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f26bb5c91c9194966132-1\"><span class=\"crayon-i\">sysbench</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">tests</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">include</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">oltp_legacy</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">oltp</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">lua</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">host</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">192.168.65.66</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">port</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">3306</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">user</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">root</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">password</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">123456</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cleanup</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n\n</div>\n<h2>5、测试结果</h2>\n<p>测试结束后，查看输出文件，如下所示：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/10/bc2d91443c26b403618e0378598e0f0d.png\" alt=\"\"></p>\n<p>其中，对于我们比较重要的信息包括：</p>\n<p>queries：查询总数及qps</p>\n<p>transactions：事务总数及tps</p>\n<p>Latency-95th percentile：前95%的请求的最大响应时间，本例中是344毫秒，这个延迟非常大，是因为我用的MySQL服务器性能很差；在正式环境中这个数值是绝对不能接受的。</p>\n<h1>三、建议</h1>\n<p>下面是使用sysbench的一些建议。</p>\n<p>1、在开始测试之前，应该首先明确：应采用针对整个系统的基准测试，还是针对MySQL的基准测试，还是二者都需要。</p>\n<p>2、如果需要针对MySQL的基准测试，那么还需要明确精度方面的要求：是否需要使用生产环境的真实数据，还是使用工具生成也可以；前者实施起来更加繁琐。如果要使用真实数据，尽量使用全部数据，而不是部分数据。</p>\n<p>3、基准测试要进行多次才有意义。</p>\n<p>4、测试时需要注意主从同步的状态。</p>\n<p>5、测试必须模拟多线程的情况，单线程情况不但无法模拟真实的效率，也无法模拟阻塞甚至死锁情况。</p>\n<h1>参考文献</h1>\n<p>http://blog.csdn.net/oahz4699092zhao/article/details/53332105</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112597\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112597votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112597\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": "  评论", "praise_nums": "1", "url_object_id": "4983acc210c6e8069653ffd465293cd6", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2015/11/e78e36715813f49e9e62fe0c6050075c.png"], "front_image_path": "full/35011d6168be00e949624c665041dc724e3ad786.jpg", "title": "详解 MySQL 基准测试和 sysbench 工具"}
{"create_date": "2017/10/12 ", "url": "http://blog.jobbole.com/112588/", "fav_nums": 2, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/q1857502771\">暖日生烟</a> 翻译，<a href=\"http://www.jobbole.com/members/hanxiaomax\">艾凌风</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://techcrunch.com/2017/08/27/one-morning-when-gregor-samsa-woke-from-troubled-reams-he-found-himself-transformed-in-his-bed-into-a-manager/?\">Jon Evans</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>我正在一点一点的从一个工程师转型为管理者。别弄错了，虽然我在转管理，但我仍然在每天写代码。不过我发现自己在会议和电话中会花越来越多的时间去分析讨论，试着去组织团队，并且为全局部署而不是具体战术而烦恼。</p>\n<p>当然这不是一件坏事。高层次的决策往往比单个的类和函数的细节更有影响。让一个团队更有效率，比仅仅让自己更有生产力有更高的杠杆作用。但我想我已经从我多年来的编程中吸取到了一些经验。我希望大部分经验可以应用于管理方面。</p>\n<p><img class=\"alignnone\" src=\"http://wx2.sinaimg.cn/mw690/7cc829d3gy1fkf7mv1sa4j20x30im0vd.jpg\" width=\"690\" height=\"388\"></p>\n<h3>1、没有规定（rules），只有公案（koans）</h3>\n<blockquote><p>译注：公案（Koan）有五种重要的涵义： 作悟禅的工具； 作考验的方法； 作权威的法范； 作印证的符信； 作究竟的指点。）</p></blockquote>\n<p>举个例子：DRY，意思是「不要重复你自己」。作为软件的基本规则这很好理解，因为很多话可以证明：“我做 X 是因为它没有重复。”这说得通，不是吗？如果你有两个或者两个以上部分的代码在做相同的事情，说明你正在浪费。而且如果当你需要改变它们其中一个的时候，你可能也需要改变其他的，并且你很可能会忘记这么做。当它们不同步时，你会得到一个怪异的 bug。因此很显然你不能重复你自己。</p>\n<p>然而，在使用了几年之后，人们开始怀疑它的普遍适用性。假如你的两个方法中包含相同的代码块，所以你将其拿出来形成一个单独的函数。通常那些方法会开始朝不同的方向发展…接着你发现自己要在函数中加入更多的参数，很可能为结果立了更多 flags……然后下一个接手的程序员会因为分离出来的函数以及它所带的特定的参数和结果，而出现认知负载。你会意识到如果当初允许自己重复，并让两块代码自然的发展为不同的个体，你生成的代码将会更简单直观。</p>\n<p>这意味着 DRY 不好吗？当然不是！通常在合适的环境下使用 DRY 是正确的…好吧，也许。我个人的经验是：“重复一次是可以的，超过一次就不太好了…当然这取决于所处的环境。”因为所有事都取决于环境。DRY 的目的并不是为了 DRY。如果你迷信于此，小孩儿，那你还有太多要学。DRY 的目的为了让你了解 DRY。那当然不是规定，仅仅是公案。</p>\n<p>（让我重申一遍：我在讨论的是软件。在我的经验中，硬件规定的确更倾向于是我们所理解中的规定。这就是我为什么要从电气工程转到软件的原因）</p>\n<p>细想我最喜欢的两个计算机科学“定律”。第一：“计算机科学中没有一个问题是不能通过添加另一层抽象来解决的！”这句话完全正确吗？当然不。这在现象学上是正确的吗？实际上，的确是。这是否意味着抽象是解决任何问题的正确途径？不，不是。它是一个公案，可以启发思想。</p>\n<p>还有我历来最喜欢的：“第一优化定律：不要这样做。第二优化定律（对专家而言）：不要又这样做。”这显然是一个公案，却称自己为法规。是时候让你的代码运行的更快吗？不。是时候让你的代码运行的更快吗？还不是。什么意思？意思是要考虑到时间，复杂性，认知负载，具体结果，生活意义，人类存在的意义。并且三思而后行，小孩儿。但不要花太长时间，我们还有工作要做。</p>\n<h3>2、要想得到他人的信任，先信任他人</h3>\n<p>这不仅仅针对于管理者。虽然它对管理者尤其重要。信任是你真正拥有的唯一价值。如果你的公正、判断、理解、诚实不被信任。接下来你组织的成员将把你视为祸害并绕着你走。然而，如果你是个有能力但不被信赖的开发者，你可能还有一些价值。虽然你在每个决定上做的努力都会被大大消减。</p>\n<p><strong>不过更重要的一点是：一个团队的成员需要互相信任。</strong>当 Natascia 说：“我来解决那个问题单（ticket）”，你必须相信她会去做。当你说：“Peter 能在截止时间前完成的。”，你必须相信那会实现。当某人说，“我有一个疯狂的点子”，他们必须信任他们会被尊重和认真对待，尽管那点子的确很疯狂。</p>\n<p><strong>你是如何建立和得到信任的？答案很简单：你去信任他人。</strong>你相信那个说他可以学会这个新库并且在周一前会整合完的人。你相信那个说他需要提前离开，因为家里有事而会错过明天工作的人。你相信那些想在截止日期前一个月休假的人，因为他们觉得自己已经开始筋疲力尽了。你相信说想要解决难题的初级程序员。</p>\n<p><strong>但你不总是正确的。有些时候人在工作上存了坏心。</strong>你需要揭露这些人的真面目，让他们尽早离开。有时候你要信任那些真心想成功的人，虽然他们会失败。但违反常识的是，长远来看这通常是个胜利。因为那些人会记住你的信任，他们会尽一切努力来报答你。</p>\n<h3>3、简单比优雅重要的多</h3>\n<p>我也喜欢紧凑优雅的代码。我喜欢灵活的框架，有如此多抽象层次随时待命，无论抛出什么改变的需求都能解决。我喜欢使用位向量、位位移、略微复杂的数据结构和不太流行且古怪的小语言特性，但在特定环境下十分实用。</p>\n<p>然而你并不只是为了你自己写代码。即使它只是个“原型”。（我已经记不清我有多少“原型”在多次对层操作和润色的过程中出现问题。）而且你不仅仅是为了解决当前的问题编写它。你正在为了下一个接手的开发者可以使用它来解决下一个问题而编写。把你写到那五行代码扩充为十行可以增强其可读性，你知道吗，也许扩展为十五行效果会更好。</p>\n<p>你可以提前尝试并用灵活且充满抽象的框架解决它们。但是也许预言不是你的强项，也许你关于下一个问题的概念的想法完全是错误的。也许仅仅编写足够简单的代码才是最佳选择。有一个命名约定和一个编码风格，让它读起来像英语一样。也许不是添加一个类，而是下一个开发者在试图跟随你的控制流程时必须保持另一个文件的开放。你应该用愚蠢的方式，不雅的方式，简单的方式。</p>\n<h3>4、动力比大多数事都重要</h3>\n<p>我们都曾见过这种情况。一周里每个人都在检查代码，构建显而易见的雏形，每天不断增加特性，测试覆盖率越来越高。疏忽也随着生产的想法和解决方案而出现。不知怎么的下一周所有事都变得缓慢起来。关于 A 的决定，会影响到 B、C和 D。当人们可以运行D、E 和 F 时，它们不是逻辑序列发展上的一部分。于是需要做更多的假设，认知负载加重，你不得不模拟出一堆东西来写出非模仿代码。一些人需要做这个决定。</p>\n<p>或许不是决定会瘫痪，是你上周所做的一切都在错误的基础上，是一个“地震多发区”的技术负债。你需要停止所有事返回并重构它。而且你必须马上开始，因为等的时间越长，事情会变得越糟糕。没人想看到这种事发生 。但他们宁愿现在面对也比下个月知道的好。让暴风雨来的更猛烈些吧。</p>\n<p>也许上周每个人都拼劲全力，现在实在撑不住了。你知道该怎样吗？得让他们休息一下，每个人，休息一整天。我保证，这会给你接下来的“长跑”节省时间。</p>\n<p>I我们很难定义、衡量以及说明动力。但它在软件开发中是真实存在的东西。而且它的缺失会成为造成首要影响，导致我们需要去解决很多根本问题。别忽略它，也别期望或假装它会神奇地回来。察觉警报并迅速采取行动。</p>\n<h3>5、与和你互补而不是像你一样的人一起工作</h3>\n<p>每当我看到人们根据“文化契合度”来找人的时候，我就会拼命翻白眼。你知道大多单一栽培会发生什么吗？他们遭遇了他们不知如何解决的病原体，然后嗝屁死翘翘了。</p>\n<p>你不会希望你的所有开发者、设计者、 QA人员、产品人员、销售人员和执行官是彼此的克隆人。你肯定不想。每个人都有自己的长处和短处、优点和缺点。你想要雇佣的是他们的长处，让其他人的长处弥补他们的短处。</p>\n<p>比如说我，写代码非常快，擅于沟通，读写文章都奇快。我在任何时候都能熟悉很多编程语言和框架。我理解东西透彻且迅速，有丰富的经验。然而我还是一个在特定领域、框架和语言缺乏深刻专研、精通掌握的全才。我是一个真正从别人身上获益的建筑师，跟踪所有需要，在骨骼构建好之后添加肉体和润色。我还是个 UX 盲（等一下，你说那些还没对齐？），这一直被当作同事之间的玩笑。</p>\n<p>像我这样的人非常难找到也是及其被需要的。但一个由我和九个像我一样的克隆人组成的公司是从一开始就注定要失败的。唔，我们会把很多事情做好，但只需要一个集中的盲点，一个灾难性的空隙就足以毁灭公司。大多数人承认有些事情他们做不好，另一些人可能需要照应。这些人往往是寻找“文化契合度”的人，并试图雇佣和他们一样的人。真令人哭笑不得。</p>\n<h3>6、任何决定都比没决定强</h3>\n<p>别犹豫，当你拿不准主意时，去做就好了。当然，这可能不适用在生产代码的时候。但它可以应用于除此之外在软件开发里的任何方面。我们在历史上发展最快的行业里工作。我们生活在以指数形式发展的世界里。时间不等人，别浪费它。</p>\n<p>这与低级决策的高级讨论一样真实。在高水平的讨论里，比如“我们应该实现特性 A 还会说 B？我们要用哪种方式实现呢，X 还是 Y？“，常常会产生这样的对话，”让我们先跳过这个…下周再对它进行讨论…“，或者更阴险的，”让我们先研究一下其他人做了什么再来讨论一次。“这样的问题极少情况下会有正确答案。大多时候，像这么说才是正确的，”我会在今天之前决定尝试哪一个，这样我们就可以明天开始行动了。</p>\n<p>甚至 A 选项基本上是错误选择，开始进行 A 大概也比啥都不做强。这和直觉是相悖的，但它通常也是正确的。以实际上手的方式去理解 A 的本质是一个更好的办法，这个道理始终是正确的。这样的理解可能会引导你做出更好的决定。</p>\n<p>对于低级决策，那就更应该如此了。“规范没有说明我们应该如何处理错误条件 X，或者错误信息应该是什么。”(规范似乎是为一个有抱负的乌托邦写的，在这种乌托邦中，错误条件和独角兽一样罕见。)“我知道，我只是想插一句，回去问问他们在这种情况下想做什么!”</p>\n<p>这非常诱人。如果你这么做，没人能指责你哪里做错了。但这么做是错误的。宁愿继续自己做决定，尽管有些鲁莽，也不要什么都不做等着问别人。让它们在你做已经写好的程序和你学到的教训里迭代，虽然你知道这并不完美，也好过从头开始错误认知。它们和项目将会变得更好。快速尝试，快速改变方向。</p>\n<h3>7、保持谦虚，但要自信</h3>\n<p>你不需要所有的答案。甚至是我也不得不勉强承认我不会有全部的答案。可恶，我甚至连它们的大多数也没有，不过我有自信，只要给我足够的时间和精力，我能弄清楚大部分。并且你也可以。</p>\n<p>我们无法都成为 <a href=\"http://blog.jobbole.com/tag/jeff-dean/\" target=\"_blank\">Jeff Dean（谷歌大牛）</a>、中本聪（比特币创始人） 或是 Margaret Hamilton（<a href=\"http://blog.jobbole.com/97936/\" target=\"_blank\">登月计划中的女程序员</a>）。我们在一个充斥着真正的天才和自称天才的地方工作。没人知道所有的事情，每个人都敏锐地意识到他们所不知道的一切。幸运的是，大多数情况下，我们不是科学家。我们的工作不是去寻找新突破。我们的工作是实践他人的发现，使东西运转，希望服务于人们真正想要的东西。也许你永远不会发明任何东西，像是布隆过滤器或默克尔树。不过大多与你共事的人们也不会。而且这不是重点，重点是使用布隆过滤器和默克尔树，亦或是在它们之上建个抽象层，来实际的完成它们。</p>\n<p>所以假设你懂的会比在座的人都多是错误的，就算你觉得他们违背直觉的想法很疯狂，他们的语言选择很糟糕。假设人家比你懂的多也是错误的，即使真是那样，也没关系。世界上多的是聪明人因为一些不可思议的原因什么实际东西也没做出来。（开个廉价的玩笑╮(╯▽╰)╭：这就是为什么我们有学术界的原因。）</p>\n<p>如果你真的做出了一些东西，在面对那些令人眼花缭乱的理论知识，或是和你相似甚至比你做的更糟糕的人时大可不必谦虚。在一天结束之时，正是那些在战壕中的开发者——构建、测试和开发了代码的人，真正做了事情。话说那些发现自己远离战壕的人，那些没有和你一起并肩作战的逃兵，你有权利鄙视他们。并且向你的伙伴致敬，而不是上司。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112588\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112588votetotal\">4</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112588\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/q1857502771\">暖日生烟</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/q1857502771\">\r\n\t\t\t<img src=\"http://q.qlogo.cn/qqapp/208656/06EB1B2C5C7835017E628CFB8E25D68F/100\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            简介还没来得及写 :）        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/q1857502771\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/q1857502771/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/q1857502771/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 14</a> · <a title=\"QQ：826672619\" target=\"_blank\" href=\"#\"><i class=\"fa fa-qq\"></i></a> <a title=\"个人微信：xzs826672619\" target=\"_blank\" href=\"#\"><i class=\"fa fa-weixin\"></i></a> <a title=\"GitHub主页\" target=\"_blank\" href=\"https://github.com/NinoMiao\"><i class=\"fa fa-github\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": "  评论", "praise_nums": "4", "url_object_id": "e709e9a89b7140ade9b9b5822de56153", "front_image_url": ["http://wx2.sinaimg.cn/mw690/7cc829d3gy1fkf7mv1sa4j20x30im0vd.jpg"], "front_image_path": "full/9af8182da5eb58dea9f9ddc5102a9dcd7697ad07.jpg", "title": "我从编程写软件学到的 7 件事"}
{"create_date": "2017/10/13 ", "url": "http://blog.jobbole.com/112617/", "fav_nums": 5, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://opensource.com/article/17/7/brewing-beer-python-and-raspberry-pi\">Christopher Aedo</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-8942-1.html\">Linux中国/hwlife</a>   </div><blockquote><p>怎样在家用 Python 和树莓派搭建一个家用便携的自制酿啤酒装置</p></blockquote>\n<p>大约十年前我开始酿制自制啤酒，和许多自己酿酒的人一样，我开始在厨房制造提纯啤酒。这需要一些设备并且做出来后确实是好的啤酒，最终，我用一个放入了所有大麦的大贮藏罐作为我的麦芽浆桶。几年之后我一次酿制过 5 加仑啤酒，但是酿制 10 加仑时也会花费同样的时间和效用（只是容器比之前大些），之前我就是这么做的。容量提升到 10 加仑之后，我偶然看到了 <a href=\"http://dougedey.github.io/SB_Elsinore_Server/\">StrangeBrew Elsinore</a> ，我意识到我真正需要的是将整个酿酒过程转换成全电子化的，用树莓派来运行它。</p>\n<p>建造自己的家用电动化酿酒系统需要大量这方面的技术信息，许多学习酿酒的人是在 <a href=\"http://theelectricbrewery.com/\">TheElectricBrewery.com</a> 这个网站起步的，只不过将那些控制版搭建在一起是十分复杂的，尽管最简单的办法在这个网站上总结的很好。当然你也能用<a href=\"http://www.instructables.com/id/Electric-Brewery-Control-Panel-on-the-Cheap/\">一个小成本的方法</a>并且依旧可以得到相同的结果 —— 用一个热水壶和热酒容器通过一个 PID 控制器来加热你的酿酒原料。但是我认为这有点太无聊（这也意味着你不能体验到完整的酿酒过程）。</p>\n<h3 id=\"toc_1\">需要用到的硬件</h3>\n<p>在我开始我的这个项目之前, 我决定开始买零件，我最基础的设计是一个可以将液体加热到 5500 瓦的热酒容器（HLT）和开水壶，加一个活底的麦芽浆桶，我通过一个 50 英尺的不锈钢线圈在热酒容器里让泵来再循环麦芽浆（<a href=\"https://byo.com/hops/item/1325-rims-and-herms-brewing-advanced-homebrewing\">“热量交换再循环麦芽浆系统, 也叫 HERMS</a>）。同时我需要另一个泵来在热酒容器里循环水，并且把水传输到麦芽浆桶里，整个电子部件全部是用树莓派来控制的。</p>\n<p>建立我的电子酿酒系统并且尽可能的自动化意味着我需要以下的组件：</p>\n<ul>\n<li>一个 5500 瓦的电子加热酒精容器（HLT）</li>\n<li>能够放入加热酒精容器里的 50 英尺（0.5 英寸）的不锈钢线圈（热量交换再循环麦芽浆系统）</li>\n<li>一个 5500 瓦的电子加热水壶</li>\n<li>多个固态继电器加热开关</li>\n<li>2 个高温食品级泵</li>\n<li>泵的开关用继电器</li>\n<li>可拆除装置和一个硅管</li>\n<li>不锈钢球阀</li>\n<li>一个测量温度的探针</li>\n<li>很多线</li>\n<li>一个来容纳这些配件的电路盒子</li>\n</ul>\n<p><img class=\"aligncenter\" title=\"Brew system\" src=\"http://jbcdn2.b0.upaiyun.com/2017/10/321648670d5fb1fe559a6b86b4c1c557.png\" alt=\"Brew system\"></p>\n<p style=\"text-align: center\"><em>酿酒系统 (photo by Christopher Aedo. <a href=\"https://creativecommons.org/licenses/by-sa/4.0/\">CC BY-SA 4.0)</a></em></p>\n<p>建立酿酒系统的电气化方面的细节 <a href=\"http://theelectricbrewery.com/\">The Electric Brewery</a> 这个网站概括的很好，这里我不再重复，当你计划用树莓派代替这个 PID 控制器的话，你可以读以下的建议。</p>\n<p>一个重要的事情需要注意，固态继电器（SSR）信号电压，许多教程建议使用一个 12 伏的固态继电器来关闭电路，树莓派的 GPIO 针插口只支持 3 伏输出电压，然而，必须购买继电器将电压变为 3 伏。</p>\n<p style=\"text-align: center\"><img title=\"Inkbird SSR\" src=\"http://jbcdn2.b0.upaiyun.com/2017/10/f0d9beae7a48846d36fdd52d50e8770b.png\" alt=\"Inkbird SSR\"></p>\n<p style=\"text-align: center\"><em>Inkbird SSR (photo by Christopher Aedo. <a href=\"https://creativecommons.org/licenses/by-sa/4.0/\">CC BY-SA 4.0)</a></em></p>\n<p>要运行酿酒系统，你的树莓派必须做两个关键事情：测量来自几个不同位置的温度，用继电器开关来控制加热元件，树莓派很容易来处理这些任务。</p>\n<p>这里有一些不同的方法来将温度传感器连到树莓派上，但是我找到了最方便的方法用<a href=\"https://en.wikipedia.org/wiki/1-Wire\">单总线</a>。这就可以让多个传感器分享相同的线路（实际上是三根线），这三根线可以使酿酒系统的多个设备更方便的工作，如果你要从网上找一个防水的 DS18B20 温度传感器，你可以会找到很多选择。我用的是<a href=\"https://smile.amazon.com/gp/product/B018KFX5X0/\">日立 DS18B20 防水温度传感器</a>。</p>\n<p>要控制加热元件，树莓派包括了几个用来软件寻址的总线扩展器（GPIO），它会通过在某个文件写入 0 或者 1 让你发送3.3v 的电压到一个继电器，在我第一次了解树莓派是怎样工作的时候，这个<a href=\"http://www.susa.net/wordpress/2012/06/raspberry-pi-relay-using-gpio/\">用 GPIO 驱动继电器的树莓派教程</a>对我来说是最有帮助的，总线扩展器控制着多个固态继电器，通过酿酒软件来直接控制加热元件的开关。</p>\n<p>我首先将所有部件放到这个电路盒子，因为这将成为一个滚动的小车，我要让它便于移动，而不是固定不动的，如果我有一个店（比如说在车库、工具房、或者地下室），我需要要用一个装在墙上的更大的电路盒，而现在我找到一个大小正好的<a href=\"http://amzn.to/2hupFCr\">防水工程盒子</a>，能放进每件东西，最后它成为小巧紧凑工具盒，并且能够工作。在左下角是和树莓派连接的为总线扩展器到单总线温度探针和<a href=\"http://amzn.to/2hL8JDS\">固态继电器</a>的扩展板。</p>\n<p>要保持 240v 的固态继电器温度不高，我在盒子上切了个洞，在盒子的外面用 CPU 降温凝胶把<a href=\"http://amzn.to/2i4DYwy\">铜片散热片</a>安装到盒子外面的热槽之间。它工作的很好，盒子里没有温度上的问题了，在盒子盖上我放了两个开关为 120v 的插座，加两个240v 的 led 来显示加热元件是否通电。我用干燥器的插座和插头，所以可以很容易的断开电热水壶的连接。首次尝试每件事情都工作正常。（第一次绘制电路图必有回报）</p>\n<p>这个照片来自“概念”版，最终生产系统应该有两个以上的固态继电器，以便 240v 的电路两个针脚能够切换，另外我将通过软件来切换泵的开关。现在通过盒子前面的物理开关控制它们，但是也很容易用继电器控制它们。</p>\n<p style=\"text-align: center\"><img title=\"Control box\" src=\"http://jbcdn2.b0.upaiyun.com/2017/10/05a735d6ed711e79d3186afe8665529a.png\" alt=\"Control box\"></p>\n<p style=\"text-align: center\"><em>控制盒子 (photo by Christopher Aedo. <a href=\"https://creativecommons.org/licenses/by-sa/4.0/\">CC BY-SA 4.0)</a></em></p>\n<p>唯一剩下有点棘手的事情是温度探针的压合接头，这个探针安装在加热酒精容器和麦芽浆桶球形的最底部阀门前的 T 字型接头上。当液体流过温度传感器，温度可以准确显示。我考虑加一个套管到热水壶里，但是对于我的酿造工艺没有什么用。最后，我买到了<a href=\"https://www.brewershardware.com/CF1412.html\">四分之一英寸的压合接头</a>，它们工作完美。</p>\n<h3 id=\"toc_2\">软件</h3>\n<p>一旦硬件整理好，我就有时间来处理软件了，我在树莓派上跑了最新的 <a href=\"https://www.raspberrypi.org/downloads/raspbian/\">Raspbian 发行版</a>，操作系统方面没有什么特别的。</p>\n<p>我开始使用 <a href=\"https://github.com/DougEdey/SB_Elsinore_Server\">Strangebrew Elsinore</a> 酿酒软件，当我的朋友问我是否我听说过 <a href=\"https://brewtronix.com/\">Hosehead</a>（一个基于树莓派的酿酒控制器），我找到了 <a href=\"https://github.com/DougEdey/SB_Elsinore_Server\">Strangebrew Elsinore</a> 。我认为 <a href=\"https://brewtronix.com/\">Hosehead</a> 很棒，但我并不是要买一个酿酒控制器，而是要挑战自己，搭建一个自己的。</p>\n<p>设置 <a href=\"https://github.com/DougEdey/SB_Elsinore_Server\">Strangebrew Elsinore</a> 很简单，其<a href=\"http://dougedey.github.io/SB_Elsinore_Server/\">文档</a>直白，没有遇到任何的问题。尽管 Strangebrew Elsinore 工作的很好，但在我的一代树莓派上运行 java 有时是费力的，不止崩溃一次。我看到这个软件开发停顿也很伤心，似乎他们也没有更多贡献者的大型社区（尽管有很多人还在用它）。</p>\n<h4 id=\"toc_3\">CraftBeerPi</h4>\n<p>之后我偶然遇到了一个用 Python 写的 <a href=\"http://www.craftbeerpi.com/\">CraftbeerPI</a>，它有活跃的贡献者支持的开发社区。原作者（也是当前维护者） Manuel Fritsch 在贡献和反馈问题处理方面做的很好。克隆<a href=\"https://github.com/manuel83/craftbeerpi\">这个仓库</a>然后开始只用了我一点时间。其 README 文档也是一个连接 DS1820 温度传感器的好例子，同时也有关于硬件接口到树莓派或者<a href=\"https://www.nextthing.co/pages/chip\">芯片电脑</a> 的注意事项。</p>\n<p>在启动的时候，CraftbeerPI 引导用户通过一个设置过程来发现温度探针是否可用，并且让你指定哪个 GPIO 总线扩展器指针来管理树莓派上哪个配件。</p>\n<p style=\"text-align: center\"><img title=\"CraftBeerPi\" src=\"http://jbcdn2.b0.upaiyun.com/2017/10/f8a03ee6fc9b1756098dc00077f89a6e.png\" alt=\"CraftBeerPi\"></p>\n<p style=\"text-align: center\"><em>CraftBeerPi (photo by Christopher Aedo. <a href=\"https://creativecommons.org/licenses/by-sa/4.0/\">CC BY-SA 4.0)</a></em></p>\n<p>用这个系统进行自制酿酒是容易的，我能够依靠它掌握可靠的温度，我能输入多个温度段来控制麦芽浆温度，用CraftbeerPi 酿酒的日子有一点点累，但是我很高兴用传统的手工管理丙烷燃烧器的“兴奋”来换取这个系统的有效性和持续性。</p>\n<p>CraftBeerPI 的用户友好性鼓舞我设置了另一个控制器来运行“发酵室”。就我来说，那是一个二手冰箱，我用了 50 美元加上放在里面的 25 美元的加热器。CraftBeerPI 很容易控制电器元件的冷热，你也能够设置多个温度阶段。举个例子，这个图表显示我最近做的 IPA 进程的发酵温度。发酵室发酵麦芽汁在 67F° 的温度下需要 4 天，然后每 12 小时上升一度直到温度到达 72F°。剩下两天温度保持不变是为了双乙酰生成。之后 5 天温度降到 65F°，这段时间是让啤酒变“干”，最后啤酒发酵温度直接降到 38F°。CraftBeerPI 可以加入各个阶段，让软件管理发酵更加容易。</p>\n<p style=\"text-align: center\"><img title=\"SIPA fermentation profile\" src=\"http://jbcdn2.b0.upaiyun.com/2017/10/8d7c5fbb9698918300bfb2f9fa06f4a9.png\" alt=\"SIPA fermentation profile\"></p>\n<p style=\"text-align: center\"><em>SIPA 发酵设置 (photo by Christopher Aedo. <a href=\"https://creativecommons.org/licenses/by-sa/4.0/\">CC BY-SA 4.0)</a></em></p>\n<p>我也试验过用<a href=\"https://tilthydrometer.com/\">液体比重计</a>来对酵啤酒的比重进行监测，通过蓝牙连接的浮动传感器可以达到。有一个整合的计划能让 CraftbeerPi 很好工作，现在它记录这些比重数据到谷歌的电子表格里。一旦这个液体比重计能连接到发酵控制器，设置的自动发酵设置会基于酵母的活动性直接运行且更加容易，而不是在 4 天内完成主要发酵，可以在比重稳定 24 小时后设定温度。</p>\n<p>像这样的一些项目，构想并计划改进和增加组件是很容易，不过，我很高兴今天经历过的事情。我用这种装置酿造了很多啤酒，每次都能达到预期的麦芽汁比率，而且啤酒一直都很美味。我的最重要的消费者 —— 就是我！很高兴我可以随时饮用。</p>\n<p style=\"text-align: center\"><img title=\"Homebrew on tap\" src=\"http://jbcdn2.b0.upaiyun.com/2017/10/0d180cf46d1a47410f56355cb4bf490b.png\" alt=\"Homebrew on tap\"></p>\n<p style=\"text-align: center\"><em>随时饮用 (photo by Christopher Aedo. <a href=\"https://creativecommons.org/licenses/by-sa/4.0/\">CC BY-SA 4.0)</a></em></p>\n<p>这篇文章基于 Christopher 的开放的西部的讲话《用Linux、Python 和树莓派酿制啤酒》。</p>\n<p><strong>作者简介</strong></p>\n<p>Christopher Aedo 从他的学生时代就从事并且贡献于开源软件事业。最近他在 IBM 领导一个极棒的上游开发者团队，同时他也是开发者拥护者。当他不再工作或者实在会议室演讲的时候，他可能在波特兰市俄勒冈州用树莓派酿制和发酵一杯美味的啤酒。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112617\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112617votetotal\">3</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112617\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 5 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": "  评论", "praise_nums": "3", "url_object_id": "ba818803dbcf536ccfb4c3dad025e02d", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/10/321648670d5fb1fe559a6b86b4c1c557.png"], "front_image_path": "full/83d9155a881b52f5a7e8ab8999c0407f73b4bcea.jpg", "title": "用 Linux、Python 和树莓派酿制啤酒"}
{"create_date": "2017/10/13 ", "url": "http://blog.jobbole.com/112606/", "fav_nums": 2, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/zhj318\">飞哥的咖啡</a> 翻译。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://ruby-on-wheels.github.io/blog/the-first-150-days-of-van-life/\">Jakob Class</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>我的房车编程生活今天已经到了第 150 天。自今年 5 月离开柏林以来，我访问了 6 个国家，行程超过了 1.2 万公里，收集了 18 万瓦时(Wh）太阳能，并沿途遇到了许多有趣的人。</p>\n<p>房车编程生活无疑是我人生中值得纪念的一次经历。</p>\n<h2>接受想法驱动，不必遵循计划</h2>\n<p>作为一名可远程工作的软件工程师，我的作息基本看大脑的状态：兴奋时工作，疲倦时休息；我的生活以前完全围绕着灵活的工作时间进行安排。通常，我会对下周有一个详细的计划，比如周一和前同事共进午餐，周二参加生日晚宴，周三看电影，周四发表演讲，周五去听音乐会，周六来次（自行车）骑行等等。</p>\n<blockquote><p>编注：小编从这位程序员小哥的 GitHub 资料中发现，原来他是 GitHub 职员。在伯乐在线之前的编译文章《<a href=\"http://mp.weixin.qq.com/s?__biz=MjM5MzA0OTkwMA==&amp;mid=2651196256&amp;idx=1&amp;sn=ec8000f5a4d24650b307079b0909dbdc&amp;chksm=bd6e57238a19de351524cbd7b2328f973322949fbbfe1660afd4d608a2dbe70dd90c70357a4e&amp;scene=21#wechat_redirect\" target=\"_blank\">为什么招不到最好的程序员？StackOverflow 创始人有些建议</a>》中就提到「GitHub 至少三分之二是远程工作者」，WordPress 绝大多数员工都是可远程工作的，Stack Overflow 也有非常高的比例。</p>\n<p><img class=\"alignnone\" src=\"http://wx2.sinaimg.cn/mw690/7cc829d3gy1fkgdp0pa77j20f70fun1m.jpg\" width=\"547\" height=\"570\"></p></blockquote>\n<p>我很少躺在吊床上放松休息，或在拐角的公园里享受阳光，放飞思绪。尽管我的工作很棒，我经常觉得需要休息一下：放个假或只是换个地方工作几周。</p>\n<p>但如今生活在房车中，我不再有这样的想法。我不再遵循固定的计划，而是接受随机想法的驱动：海浪很大的时候去冲浪；天冷空气好的时候就工作；天气炎热的时候去游泳；困倦的时候补个觉；当我喜欢一个地方，我就呆在那里；当我遇到一个很酷的人，我就加入其中；当我的房车坏了，我试着把它修好。</p>\n<p>你看，我的房车（编程）生活，如同<span style=\"color: #000000;\">源源不断的不可控事件</span>：没有太多的计划，事情都自然而然地发生。甚至有时，我什么都不做，只是躺在吊床上放松休息。</p>\n<p><img class=\"img-responsive\" src=\"https://ruby-on-wheels.github.io/assets/images/IMG_8728.JPG\" alt=\"Relaxing in my hammock\"></p>\n<h2>更健康的生活</h2>\n<p>柏林为人们提供了各种美味可口的食物。如果我能在街角买到一顿大餐，为什么要把宝贵的时间花在购物和烹饪上呢？尽管在大城市里上馆子吃饭很容易，但是坚持健康的饮食则更具挑战性。我过去经常吃沙瓦玛（ shawarma）、汉堡、烤肉串、炸肉排或披萨等各种垃圾食物。</p>\n<p>自从搬进房车后，我经常下厨。原料是各种各样的蔬菜和<strong>大量</strong>橄榄油，有时我还用肉或鱼来增添花样，烹饪不再是一种负担。我的人生不再匆忙，因为我再也不必在 20 分钟内赶往某处；相反地，时间由我支配，我很享受它。在准备一顿健康饭菜的同时，我还放松了心情，实现了双赢。</p>\n<p><img class=\"img-responsive\" src=\"https://ruby-on-wheels.github.io/assets/images/IMG_8473.JPG\" alt=\"Preparing a meal in my van\"></p>\n<p>我尽可能把车停在开阔的绿色自然环境中。打开窗户，这样一整天都能呼吸到新鲜空气。</p>\n<p><img class=\"img-responsive\" src=\"https://ruby-on-wheels.github.io/assets/images/IMG_9161.JPG\" alt=\"Working in the van right next to the sea\"></p>\n<p>我有时甚至在车外的野营桌上工作（见下图）。</p>\n<p><img class=\"img-responsive\" src=\"https://ruby-on-wheels.github.io/assets/images/IMG_8258.JPG\" alt=\"Working outside of the van right next to the sea\"></p>\n<p>我如今在自然环境中工作，而不再是“臭哄哄”的办公室内，那里充斥着空调制造的“人造假空气”。当我回头远眺，我看到的是树木、群山、大海或河流。离开桌子，只需一秒，我便能光脚步入草地、沙滩或水中。我不再需要大清早骑车或坐地铁，赶往污染严重的拥挤都市。</p>\n<p>在柏林的时候，我经常会有轻微的感冒。大概每隔三个月，我会感到有点恶心或疲惫。但自从我住进房车以来，五个月都<strong>没有</strong>生过病！</p>\n<p><img class=\"alignnone aligncenter\" src=\"https://ruby-on-wheels.github.io/assets/images/IMG_7719.JPG\" width=\"750\" height=\"563\"></p>\n<p style=\"text-align: center;\">（Jakob 改装后房车，车头顶部加上了太阳能板）</p>\n<h2>生活更加可持续</h2>\n<p>当你住在柏林的普通公寓时，你会觉得资源是无限的。打开水龙头，会有无尽的淡水；设备插入插座后，你可以让它一直工作；用 2000 瓦的吹风机吹干头发，或者晚上洗个 20 分钟的热水澡，这些都完全没有问题！</p>\n<p>但当你住进一辆房车时，一切都变了。突然之间，所有的资源都是有限的，你必须以可持续的方式来利用它们。当我的水箱空了，我必须去寻找水源，将水带回车内。天黑后，车内的电池还留有 200 Ah，充电必须等到第二天天亮。我在柏林刷牙时的用水量，可能足够让现在的我支撑整整一天。而当时 80% 的水可能从水龙头流出后，就直接流入了下水道，甚至都没有接触到我的身体！</p>\n<p>房车具有的局限性并不一定会导致生活质量的下降。我仍然可以做想做的一切，只是，我不再浪费那么多资源，因为我更清楚它们是有限、不可再生的。这一点我们经常会忘记，特别是住在西部（发达）城市的时候。</p>\n<h2>变得更加外向</h2>\n<p>在柏林，我通常不会在街上随便找一个陌生人搭讪。我会和朋友们在一起制订计划，通常会忽略身边的陌生人。即使注意到他们，他们大多看起来很忙碌，或者倦容满面。</p>\n<p>如今，工作结束后，当我离开房车前往海滩，我通常会遇到放松和开放的人，他们是来度假、旅行者、冲浪的，或者是自由自在的嬉皮士。他们似乎都没有压力，每个人都有自己有趣的故事。如果我突然接近并向他们打招呼，没有人会感到惊讶，大家都已经习以为常了。与之前的旅行相比，我更能接触到新的朋友。</p>\n<p><img class=\"img-responsive\" src=\"https://ruby-on-wheels.github.io/assets/images/IMG_9413.JPG\" alt=\"Eating together with together travelers\"></p>\n<h2>一个更加简单、快乐的生活?</h2>\n<p>在过去的 150 天里，我的生活变得更加简单。我感到更加舒适自在，因为我不必再多做计划。今天做不完的事情，我大可不必担心，可以放到明天继续做。正如一位西班牙旅行者曾对我说的：</p>\n<blockquote><p>太阳每日照常升起，生活仍在继续。</p></blockquote>\n<p>我现在整个人感到身心平衡，并憧憬着前方未知的冒险旅程！</p>\n<p>译注：在“国际化大都市”工作的单身狗受到了成吨的暴击，一边翻一边留下 130 滴“羡慕的”眼泪 (;´༎ຶД༎ຶ`) 😭</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112606\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112606votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112606\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 7 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/zhj318\">飞哥的咖啡</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/zhj318\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2016/09/9667abaa540914200edd449974fb5538.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            我见青山多妩媚，料青山见我应如是        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/zhj318\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/zhj318/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/zhj318/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 41</a> · <a title=\"QQ：574375911\" target=\"_blank\" href=\"#\"><i class=\"fa fa-qq\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": 7, "praise_nums": "2", "url_object_id": "3e1c1959a27ac7a0987efd85517a6f29", "front_image_url": ["http://wx1.sinaimg.cn/mw690/7cc829d3gy1fkgdqomc4yj20ku0d1ad9.jpg"], "front_image_path": "full/79d64de6f0b671c661012e01ecb710c7bbfc064d.jpg", "title": "Hello, World！我的房车编程生活，已经 150 天了"}
{"create_date": "2017/10/13 ", "url": "http://blog.jobbole.com/112614/", "fav_nums": 5, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://blog.timescale.com/why-sql-beating-nosql-what-this-means-for-future-of-data-time-series-database-348b777b847a\">Ajay Kulkarni</a>   译文出处：<a target=\"_blank\" href=\"http://geek.csdn.net/news/detail/238939\">Vincent</a>   </div><p><img class=\"aligncenter\" title=\"\" src=\"http://jbcdn2.b0.upaiyun.com/2017/10/22f63f78e9c9f35b288f0634be3a89f5.gif\" alt=\"\"></p>\n<p>自从可以利用计算机做事以来，我们一直在收集的数据以指数级的速度在增长，因此对于数据存储、处理和分析技术的要求也越来越高。在过去的十年里，由于SQL无法满足这些要求，软件开发人员就抛弃了它，NoSQL也就因此而渐渐发展起来：MapReduce，Bigtable，Cassandra，MongoDB等等。</p>\n<p>然而，如今SQL正在重新复出。云端的主要供应商们现在都提供了广受大众欢迎的托管关系型数据库服务：例如<a href=\"https://aws.amazon.com/rds/\">Amazon RDS</a>，<a href=\"https://cloud.google.com/sql/docs/\">谷歌Cloud SQL</a>，<a href=\"https://azure.microsoft.com/en-us/services/postgresql/\">Azure的PostgreSQL数据库</a>(Azure将于今年发布)。用亚马逊自己的话来说就是Aurora数据库结合了PostgreSQL和mysql数据库，因此该产品一直是“<a href=\"http://www.businesswire.com/news/home/20161130006131/en/AWS-Extends-Amazon-Aurora-PostgreSQL-Compatibility\">AWS历史上增长最快的服务</a>”。在Hadoop和Spark之上的SQL接口继续蓬勃发展。就在上个月，<a href=\"https://www.confluent.io/blog/ksql-open-source-streaming-sql-for-apache-kafka/\">Kafka推出了SQL支持</a>。</p>\n<p>在这篇文章中，我们将研究SQL现在为什么会复出的原因，以及这对未来的数据社区工程和分析意味着什么。</p>\n<h1>第一章：新希望</h1>\n<p>为了理解为什么SQL会卷土重来，让我们先了解一下最初设计它的原因。<br>\n<img class=\"aligncenter\" title=\"\" src=\"http://jbcdn2.b0.upaiyun.com/2017/10/72951783ccb91647b0b1ebee30d50620.gif\" alt=\"\"></p>\n<p>好的故事都是起源于20世纪70年代</p>\n<p>我们的故事始于20世纪70年代早期的IBM研究，那时关系型数据库就诞生了。当时的查询语言依赖于复杂的数学逻辑和符号。Donald Chamberlin和Raymond Boyce两个人刚刚完成哲学博士学位，对关系型数据模型印象深刻，但是发现查询语言将成为其发展的一个主要瓶颈。于是他们便开始设计一种新的查询语言(用他们自己的话说)：“<a href=\"http://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=6359709\">让那些没有接受过数学和计算机编程方面正规训练的用户更容易使用</a>”。<br>\n<img class=\"aligncenter\" title=\"\" src=\"http://jbcdn2.b0.upaiyun.com/2017/10/05572bb1723acf75c70333b932d338c1.png\" alt=\"\"></p>\n<p style=\"text-align: center\">两个查询语言的比较 © (<a href=\"http://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=6359709\">source</a>)</p>\n<p>仔细想想这件事。在互联网出现之前，在个人电脑出现之前，当编程语言C首次被引入世界时，两位年轻的计算机科学家意识到，“<a href=\"http://www.almaden.ibm.com/cs/people/chamberlin/sequel-1974.pdf\">计算机行业的成功很大程度上依赖于培养一种除了训练有素的计算机专家以外的用户</a>。”他们想要的是一种像英语一样易于阅读的查询语言，这也将包括数据库管理和操作。</p>\n<p>其结果就是在1974年首次将SQL引入世界。在接下来的几十年里，SQL将被证明是非常受欢迎的。随着诸如System R、Ingres、DB2、Oracle、SQL Server、PostgreSQL、MySQL(等等)关系型数据库接管了软件行业，SQL也成为了与数据库交互的卓越语言，成为了一个日益拥挤、竞争激烈的生态系统的通用语言。</p>\n<p>（遗憾的是，Raymond Boyce从来没有机会见证SQL的成功。1个月后<a href=\"https://en.wikipedia.org/wiki/Raymond_F._Boyce\">他便死于脑动脉瘤</a>，只做了一个最早的SQL演讲，当时他只有26岁，留下了一个妻子和一个年轻的女儿。）</p>\n<p>有一段时间，似乎SQL成功地完成了它的任务。但后来互联网发生了。</p>\n<h1>第二章：NoSQL的反击</h1>\n<p>在Chamberlin和Boyce都在开发SQL的同时，令他们没有想到的是在加州的第二组工程师正在研究另一个正在萌芽的项目，该项目后来会广泛扩散并威胁到SQL的存在。这个项目就是<a href=\"https://en.wikipedia.org/wiki/ARPANET\">阿帕网</a>，1969年10月29日，<a href=\"http://all-that-is-interesting.com/internet-history\">它诞生了</a>。<br>\n<img class=\"aligncenter\" title=\"\" src=\"http://jbcdn2.b0.upaiyun.com/2017/10/b027676ce3d4e5a5566c55927e1a77fc.png\" alt=\"\"></p>\n<p style=\"text-align: center\">ARPANET的一些创造者，最终演变成今天的互联网(<a href=\"http://all-that-is-interesting.com/internet-history\">来源</a>)</p>\n<p>SQL一直发展的都很好，但是直到1989年，另一个工程师出现并发明了<a href=\"https://en.wikipedia.org/wiki/World_Wide_Web\">万维网</a>。<br>\n<img class=\"aligncenter\" title=\"\" src=\"http://jbcdn2.b0.upaiyun.com/2017/10/e0df1de91fb9ad4f9bbcf503b2a2aa30.png\" alt=\"\"></p>\n<p style=\"text-align: center\">发明网络的物理学家(<a href=\"https://webfoundation.org/about/vision/history-of-the-web/\">来源</a>)</p>\n<p>像那些茂密的野草一样，互联网和网络蓬勃发展，极大地扰乱了我们的世界，但对于数据社区来说，它还造成了一个特别的麻烦:跟以前相比，新的数据源以更高的数量和速度生成数据。</p>\n<p>随着互联网的不断发展，软件社区发现，当时的关系型数据库无法处理这一新的负载。<em>因此出现了一阵骚动的力量，就好像一百万个数据库突然过载了。</em></p>\n<p>然后，两个新的互联网巨人取得了突破，并开发了他们自己的非关系型分布式系统来帮助解决这一新的数据冲击：由谷歌发布的<strong>MapReduce</strong>(<a href=\"https://static.googleusercontent.com/media/research.google.com/en//archive/mapreduce-osdi04.pdf\">2004年出版</a>)和<strong>Bigtable</strong>(<a href=\"https://static.googleusercontent.com/media/research.google.com/en//archive/bigtable-osdi06.pdf\">2006年出版</a>)，以及亚马逊(Amazon)发布的 <strong>Dynamo</strong> (<a href=\"http://www.allthingsdistributed.com/files/amazon-dynamo-sosp2007.pdf\">2007出版</a>)。这些开创性的论文导致出现了更多的非关系数据库，包括<strong>Hadoop</strong>(基于MapReduce文件，<a href=\"https://en.wikipedia.org/wiki/Apache_Hadoop\">2006</a>)，<strong>Cassandra</strong>(受Bigtable和Dynamo文件的启发，<a href=\"https://en.wikipedia.org/wiki/Apache_Cassandra\">2008年</a>)和<strong>MongoDB</strong>(<a href=\"https://en.wikipedia.org/wiki/MongoDB\">2009</a>)。因为这些新系统基本上都是从零开始编写的，所以它们也没有使用SQL，导致了NoSQL运动的兴起。</p>\n<p>开发者社区的软件工程师们也接受了NoSQL，而且跟SQL当时的出现相比，接受的群众范围更广了。这个原因很容易理解：NoSQL是现在流行的；它承诺了规模和权力；这似乎是项目通往成功的捷径。但后来出现了问题。<br>\n<img class=\"aligncenter\" title=\"\" src=\"http://jbcdn2.b0.upaiyun.com/2017/10/40e1f5a569b1cb3e45d9c9d56bf25653.gif\" alt=\"\"></p>\n<p style=\"text-align: center\">典型的被NoSQL诱惑的软件开发人员。不要学这家伙。</p>\n<p>开发人员很快发现，没有SQL实际上是非常有限的。。每个NoSQL数据库都提供了自己独特的查询语言，这意味着：学习更多的语言(并在同事之间传播知识);增加了将数据库连接到应用程序的难度，导致代码之间有很强的耦合性;缺乏第三方生态系统，需要公司开发自己的操作和可视化工具。</p>\n<p>这些NoSQL语言是新的，但也没有完全开发出来。例如，关系型数据库已经运行很多年了，像为SQL添加必要的特性(例如JOIN)这些工作早都已经完成了;NoSQL语言的不成熟意味着在应用程序级别就会有更多的复杂性。缺乏JOIN也导致了反规格化，从而又导致数据膨胀和僵化。</p>\n<p>一些NoSQL数据库添加了自己的“类sql”查询语言，比如Cassandra的CQL。但这常常会使问题变得更糟。如果使用跟别的东西完全一样的界面，如果越常见，实际上会导致心理产生更多的疑问：工程师压根就不知道支持什么，不支持什么。<br>\n<img class=\"aligncenter\" title=\"\" src=\"http://jbcdn2.b0.upaiyun.com/2017/10/788e6f314d2276358ead9cef3281be6f.gif\" alt=\"\"></p>\n<p style=\"text-align: center\">类sql的查询语言就像<a href=\"https://www.youtube.com/watch?v=ZX0x-I06Fpc\">《星球大战》假日特别节目</a>。接受不模仿。</p>\n<p style=\"text-align: center\">(<a href=\"https://xkcd.com/653/\">而且总是避免《星球大战》的特别节目</a>)</p>\n<p>社区中的一些人在早期就看到了NoSQL的问题（<a href=\"https://homes.cs.washington.edu/~billhowe/mapreduce_a_major_step_backwards.html\">例如德维特和斯通布雷克在2008年就发现了</a>）。随着时间的推移，通过使用过程中个人经验的辛苦积累，越来越多的软件开发人员也同意了这一点。</p>\n<h1>第三章：SQL的回归</h1>\n<p>最初被黑暗势力所诱惑的软件社区开始看到了光明，SQL也上演了英雄回归的一幕。</p>\n<p>首先是Hadoop上的SQL接口(Spark之后也是)，导致该行业兴起了NoSQL，NoSQL表示“不只是SQL”(Not Only SQL)。</p>\n<p>紧接着NewSQL兴起了：完全接纳了SQL的新的可扩展数据库。来自于麻省理工学院(MIT)和布朗大学(Brown)研究人员的<strong>H-Store</strong>(<a href=\"http://hstore.cs.brown.edu/papers/hstore-demo.pdf\">2008年出版</a>)是最早的扩展OLTP数据库之一。谷歌再次引领了风向标，根据他们的<strong>Spanner</strong> 论文（<a href=\"https://static.googleusercontent.com/media/research.google.com/en//archive/spanner-osdi2012.pdf\">出版于2012年</a>）（其作者包括原始的MapReduce作者）开创了地缘重复的SQL界面的数据库，其次再是<strong>CockroachDB</strong>（<a href=\"https://en.wikipedia.org/wiki/Cockroach_Labs\">2014</a>）这样的其他先驱者。</p>\n<p>与此同时，PostgreSQL社区开始复苏，添加了一些关键的改进，比如JSON数据类型(2012)，以及<a href=\"https://wiki.postgresql.org/wiki/New_in_postgres_10\">PostgreSQL 10</a>中的新特性的potpourri：对分区和复制更好的本地支持，支持对JSON的全文搜索，以及其它更多的特性(定于今年晚些时候发布的版本)。其他如<strong>CitusDB</strong>(<a href=\"https://www.citusdata.com/blog/2016/03/24/citus-unforks-goes-open-source/\">2016</a>)以及其他的公司(<a href=\"https://www.citusdata.com/blog/2016/03/24/citus-unforks-goes-open-source/\">今年发布</a>的<strong><a href=\"https://www.citusdata.com/blog/2016/03/24/citus-unforks-goes-open-source/\">TimescaleDB</a></strong>)找到了新方法从而针对特定数据工作负载的扩展PostgreSQL。<br>\n<img title=\"\" src=\"http://jbcdn2.b0.upaiyun.com/2017/10/e1263fac9bef0ad66e743bcedef06752.png\" alt=\"\"></p>\n<p>事实上，我们开发<strong><a href=\"https://github.com/timescale/timescaledb\">TimescaleDB</a></strong>的过程与这个行业的发展轨迹是密切相关。早期的TimescaleDB内部版本使用了我们自己的类sql查询语言“ioQL”。是的，我们也没能抵挡住黑暗一面的诱惑:我们感觉能够构建自己的查询语言应该会非常强大。然而，尽管这似乎是一条简单的道路，但我们很快意识到其实需要做更多的工作。我们还发现自己需要不断地去查找合适的语法，去查询那些已经可以用SQL进行查询的内容。</p>\n<p>有一天，我们意识到构建自己的查询语言毫无意义。最关键的还是要接受SQL。这是我们做出的最好的设计决定之一。顿时，一个全新的世界出现了。现在尽管我们的数据库才问世5个月,但是用户却可以在生产环境上使用我们的数据库，还有很多其他的美好事物:可视化工具(Tableau),与常见的ORM的连接器,各种工具和备份选项,丰富的在线教程和语法解释等等。</p>\n<h1>信谷歌，得永生</h1>\n<p><img class=\"aligncenter\" title=\"\" src=\"http://jbcdn2.b0.upaiyun.com/2017/10/b27ea29357f08bd86515851503e79123.png\" alt=\"\"></p>\n<p>谷歌已经在数据工程和基础架构领域领先了十多年了。我们应该密切关注他们正在做的事情。</p>\n<p>看看谷歌的第二大<strong>Spanner</strong>论文，就在四个月前发布的(<a href=\"https://static.googleusercontent.com/media/research.google.com/en//pubs/archive/46103.pdf\">Spanner:成为一个SQL系统</a>，2017年5月)，你会发现它支持我们的发现成果。</p>\n<p>例如，谷歌开始的时候是在Bigtable上面构建，但后来发现不用SQL会造成很多问题(强调了我们下面的所有引用):</p>\n<blockquote><p>虽然这些系统提供了数据库系统的某些优点，但它们缺少许多应用程序开发人员经常依赖的传统数据库特性。<strong>举一个关键的例子就是一个健壮的查询语言</strong>，这意味着开发人员必须编写复杂的代码来处理和聚合应用程序中的数据。<strong>因此，我们决定将Spanner变成一个完整的SQL系统</strong>，查询执行与Spanner的其他架构特性紧密集成(例如强一致性和全局复制)。</p></blockquote>\n<p>在论文的后面，他们进一步抓住了从NoSQL过渡到SQL的基本原理:</p>\n<blockquote><p>Spanner的原始API提供了对单个和交叉表的点查找和范围扫描的NoSQL方法。虽然NoSQL方法提供了一个简单的启动扳手的方法，并且在简单的检索场景中继续有用，但是SQL在表达更复杂的数据访问模式和将计算推到数据上提供了重要的附加价值。</p></blockquote>\n<p>本文还描述了SQL的采用是如何在扳手上不停止的，但实际上扩展到了谷歌的其余部分，这里的多个系统现在共享一个通用的SQL方言:</p>\n<blockquote><p>扳手的SQL引擎共享一个共同的SQL方言,称为“标准SQL”,与其他几个系统在谷歌上钻包括内部系统如F1和小孔(等)和外部系统如BigQuery…</p>\n<p>对于谷歌的用户来说，这降低了跨系统工作的障碍。一个开发人员或数据分析人员编写了针对Spanner数据库的SQL，可以将他们对该语言的理解转移到Dremel，而不必担心语法、空处理等细微的差异。</p></blockquote>\n<p>这种方法的成功不言自明。Spanner已经成为主要谷歌系统的“真相之源”，包括AdWords和谷歌游戏，而“潜在的云客户对使用SQL非常感兴趣”。</p>\n<p>考虑到谷歌首先帮助发起了NoSQL运动，很值得注意的是，它现在正在接受SQL。(导致一些人最近想:“谷歌在10年的假时间里发送了大数据产业吗?”)</p>\n<h1>这对数据的未来意味着什么:SQL将变成细腰</h1>\n<p>在计算机网络中，有一个概念叫做“细腰结构”。</p>\n<p>这个想法的出现解决了一个关键问题:在任何给定的网络设备上，想象一个堆栈，底层的硬件层和顶部的软件层。中间可能会存在各种网络硬件;同样，也存在存在各种各样的软件和应用程序。需要某种可以确保无论硬件发生了什么情况，软件仍然可以连接到网络的方法;同样的也能确保无论软件发生什么，网络硬件都知道如何处理网络请求。<br>\n<img class=\"aligncenter\" title=\"\" src=\"http://jbcdn2.b0.upaiyun.com/2017/10/c10ce6a68e20e57c787edd1f6341e7b2.png\" alt=\"\"></p>\n<p>在网络中，细腰的角色由<a href=\"https://en.wikipedia.org/wiki/Internet_Protocol\">互联网协议(IP)</a>扮演，它是为局域网设计的底层联网协议和更高级别的应用程序和传输协议的公共接口。(<a href=\"https://www.youtube.com/watch?v=uXumm52oBMo\">这是一个很好的解释</a>。)而且(在一个广泛的简化中)，这个公共接口成为了计算机的通用语言，使网络能够相互连接，设备可以通信，而这种“网络网络”可以发展成为今天丰富多样的互联网。</p>\n<p><strong>我们认为SQL已经成为数据分析的细腰。</strong></p>\n<p>我们生活的时代，数据正在成为“世界上最有价值的资源”(<a href=\"https://www.economist.com/news/leaders/21721656-data-economy-demands-new-approach-antitrust-rules-worlds-most-valuable-resource\">《经济学人》，2017年5月</a>)。因此,我们看到了专业数据库(OLAP、时间序列、文档、图表等)，数据处理工具(Hadoop,Spark,Flink),数据总线(Kafka,RabbitMQ)等呈现出了寒武纪大爆发式的情形。我们也有了更多需要依靠这些数据基础设施的应用程序,无论是第三方数据可视化工具(Tableau,Grafana PowerBI,Superset),web框架(Rails,Django)或定制的数据驱动的应用程序。<br>\n<img class=\"aligncenter\" title=\"\" src=\"http://jbcdn2.b0.upaiyun.com/2017/10/ffffebb9ec5cbd41d7c66b3f39209ffc.png\" alt=\"\"></p>\n<p>像网络一样，我们也有一个复杂的堆栈，底层的基础设施和顶部的应用程序。通常，我们最终会编写大量的胶水代码来完成这个堆栈工作。但是胶水代码可能很脆弱:需要精心的运维。</p>\n<p>我们需要的是一个公共接口，允许堆栈的各个部分彼此通信。理想情况下，这个行业已经标准化了。它能让不同层之间的通信阻碍能够降到最小。</p>\n<p>这就是SQL的力量。和IP一样，SQL也是一个公共接口。</p>\n<p>但SQL实际上比IP复杂得多。因为数据还需要支持人类分析。而且，SQL创建者最初给它设定的目标之一就是可读性要高。</p>\n<p>SQL是完美的吗?不，但社区中的大多数人都已经了解了这门语言。虽然已经有工程师在开发更自然的语言界面，但是这些系统最终会连接到哪里?还是SQL。</p>\n<p>所以在堆栈的顶部还有一层。那一层就是我们人类。</p>\n<h1>SQL回归</h1>\n<p>SQL回来了。不只是因为在组装NoSQL工具时编写胶水代码的做法十分令人反感。不仅仅是因为学习各种各样的新语言是困难的。也不只是因为标准会带来各种优点。</p>\n<p>也因为这个世界充满了数据。它包围着我们，束缚着我们。起初，我们依靠人类的感觉神经系统来处理它。现在，软件和硬件系统也变得足够智能，可以帮助我们。随着收集的数据越来越多，我们也可以更好地认识这个世界，系统的复杂性、存储、处理、分析以及对这些数据可视化的需求只会继续增长。<br>\n<img class=\"aligncenter\" title=\"\" src=\"http://jbcdn2.b0.upaiyun.com/2017/10/067cfbb7c99c2c08bee927e5e293beea.gif\" alt=\"\"></p>\n<p style=\"text-align: center\"><em>数据科学家尤达大师</em></p>\n<p>我们可以生活在满大街的系统都是如纸一般脆弱，接口量达到数百万个的世界里。 或者我们可以再次选择SQL，这样我们生活的世界也可能会变得越来越强大。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112614\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112614votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112614\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 5 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": "  评论", "praise_nums": "2", "url_object_id": "b18b989eea213ef86d7e7c511524388d", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/10/22f63f78e9c9f35b288f0634be3a89f5.gif"], "front_image_path": "full/2ec6535412daa2cec5d9b2d0b3f0ebbab16ae266.jpg", "title": "为什么 SQL 正在击败 NoSQL，数据的未来是什么？"}
{"create_date": "2017/10/09 ", "url": "http://blog.jobbole.com/112585/", "fav_nums": 5, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://hackernoon.com/programming-isnt-easy-coding-is-a1efcf97a264\">Hackernoon</a>   译文出处：<a target=\"_blank\" href=\"https://www.oschina.net/translate/programming-isnt-easy-coding-is\">开源中国</a>   </div><p>当我的编程生涯开始的时候，我认为“编程很简单……怎么会需要去学校学习呢？”但经过学习和实践，我了解到编程很难。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/10/28eca50ca0450d717356b11a96f9935c.jpeg\"></p>\n<p style=\"text-align: center\"><a href=\"https://memegenerator.net/instance/78362391/futurama-fry-not-sure-if-programming-is-easy-or-if-i-know-nothing\" target=\"_blank\" rel=\"nofollow\">不知道是编程不难还是我什么都不懂</a>。 ~MemeGenerator.net</p>\n<p>自我评价对我自己来说一直都很重要，因为在一天结束的时候，不管别人怎么想，自己的想法都很重要。我会在评价中思考强项、弱项、学习、训练和个人成长。这个过程让我反思、理解并思考成为一个程序员究竟意味着什么。</p>\n<h3>教育：编码？编程？关键性的抨击？</h3>\n<p>我在技术领域的第一份工作主要是通过 HTML、CSS 和 JavaScript 操作一些元素并创建视觉效果。在这段时间里，我没有真正想到自己是一个程序员，对于这个问题，我从来没有想要成为一个真正的程序员。不久以后我想使用 NodeJS、PHP 和 MySQL 做更多事情，这时候我开始考虑这个问题。把我作为程序员的所有宏伟想法加起在一起，我在第一份工作中把自己当作一个小小的“软件工程师”，一直都在积极地制定方案。</p>\n<blockquote><p>“经验告诉我，我会颇具气势地拍、打和敲击键盘，但那并不是编程。”</p></blockquote>\n<p>编程需要思考和理解各种数据类型、结构，并理解编程语言赖以构建服务的技术。差异主要在于完成特定任务时所使用的流程。重点不在于数据类型、设计模式、算法类型、性能或任何与代码和应用程序质量相关的内容。相反，它被纳入了实际的工作机制和技艺之中，这往往需要耗费大量的时间，最终变成一只难以维护的巨兽。一直运行输出到不同地方，并积极地测试输出，直到它非常类似于一个功能。如果有什么事情给我一种编程的感觉，但我在实际操作中并没有做到将想法付诸行动。</p>\n<h3>思考数据</h3>\n<p>数据结构是我感受到教育不足的一个方面。数据结构背后的想法是，你有不同的方法去存储、提取、排序和搜索数据。最初当我开始编程，我从来没有想过各种数据的任务与数据类型的性能。对需要存储、排序或遍历的任何事物，通常默认使用数组（<em>包括哈希、json、字典，以及键-值数据集的其他术语</em>）。</p>\n<p>从计算机科学的角度看，集合、堆栈和队列对我来说是很有趣的，但在 Ruby 编程语言中看到一些实际操作之后，对我来说并不那么吸引人。在我看来，堆栈和队列是一样的，它们允许你从数据的末端获取信息，队列的例外情况是，你只能按照它们加入的顺序获得这些项。当我开始想象这一点时，我想把东西放在一个列表中，等待处理，减少可在后台运行的任务的开销。事实上在高层次的编程语言如 Ruby 中对此付诸实践，并没有多大意义，因为它基本上是在往数组中 push（后追加）或 unshift（前添加）元素。</p>\n<p>比如，Ruby 中的栈可以像下面的代码一样简单。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f25ccf5e3e0099531814\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nclass Stack\r\n  # init stack \r\n  def initialize\r\n     = Array.new() \r\n  end\r\n  # put a new item at the end of the stack \r\n  def push(x)\r\n    .push x\r\n  end\r\n  # get the last item in the stack\r\n  def grab\r\n    .pop\r\n  end\r\n  # is the set empty true false bool \r\n  def empty?\r\n    .empty?\r\n  end\r\nend\r\n# implemented stack\r\ns = Stack.new&lt;Stack:0x48b66454 =[\"a\", \"b\", \"c\"]&gt; \r\nputs s.grab # \"c\" \r\nputs s.grab # \"b\" \r\nputs s.grab # \"a\" \r\ns.grab.inspect # nil</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f25ccf5e3e0099531814-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25ccf5e3e0099531814-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f25ccf5e3e0099531814-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25ccf5e3e0099531814-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f25ccf5e3e0099531814-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25ccf5e3e0099531814-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f25ccf5e3e0099531814-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25ccf5e3e0099531814-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f25ccf5e3e0099531814-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25ccf5e3e0099531814-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f25ccf5e3e0099531814-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25ccf5e3e0099531814-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59f25ccf5e3e0099531814-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25ccf5e3e0099531814-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59f25ccf5e3e0099531814-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25ccf5e3e0099531814-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-59f25ccf5e3e0099531814-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25ccf5e3e0099531814-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-59f25ccf5e3e0099531814-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25ccf5e3e0099531814-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-59f25ccf5e3e0099531814-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25ccf5e3e0099531814-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-59f25ccf5e3e0099531814-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25ccf5e3e0099531814-24\">24</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f25ccf5e3e0099531814-1\"><span class=\"crayon-t\">class</span> <span class=\"crayon-i\">Stack</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25ccf5e3e0099531814-2\">  <span class=\"crayon-p\"># init stack </span></div><div class=\"crayon-line\" id=\"crayon-59f25ccf5e3e0099531814-3\">  <span class=\"crayon-i\">def</span> <span class=\"crayon-i\">initialize</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25ccf5e3e0099531814-4\">     <span class=\"crayon-o\">=</span> <span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">new</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span> </div><div class=\"crayon-line\" id=\"crayon-59f25ccf5e3e0099531814-5\">  <span class=\"crayon-st\">end</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25ccf5e3e0099531814-6\">  <span class=\"crayon-p\"># put a new item at the end of the stack </span></div><div class=\"crayon-line\" id=\"crayon-59f25ccf5e3e0099531814-7\">  <span class=\"crayon-i\">def</span> <span class=\"crayon-e\">push</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25ccf5e3e0099531814-8\">    <span class=\"crayon-sy\">.</span><span class=\"crayon-i\">push</span> <span class=\"crayon-i\">x</span></div><div class=\"crayon-line\" id=\"crayon-59f25ccf5e3e0099531814-9\">  <span class=\"crayon-st\">end</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25ccf5e3e0099531814-10\">  <span class=\"crayon-p\"># get the last item in the stack</span></div><div class=\"crayon-line\" id=\"crayon-59f25ccf5e3e0099531814-11\">  <span class=\"crayon-i\">def</span> <span class=\"crayon-i\">grab</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25ccf5e3e0099531814-12\">    <span class=\"crayon-sy\">.</span><span class=\"crayon-i\">pop</span></div><div class=\"crayon-line\" id=\"crayon-59f25ccf5e3e0099531814-13\">  <span class=\"crayon-st\">end</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25ccf5e3e0099531814-14\">  <span class=\"crayon-p\"># is the set empty true false bool </span></div><div class=\"crayon-line\" id=\"crayon-59f25ccf5e3e0099531814-15\">  <span class=\"crayon-i\">def</span> <span class=\"crayon-v\">empty</span><span class=\"crayon-sy\">?</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25ccf5e3e0099531814-16\">    <span class=\"crayon-sy\">.</span><span class=\"crayon-v\">empty</span><span class=\"crayon-sy\">?</span></div><div class=\"crayon-line\" id=\"crayon-59f25ccf5e3e0099531814-17\">  <span class=\"crayon-st\">end</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25ccf5e3e0099531814-18\"><span class=\"crayon-st\">end</span></div><div class=\"crayon-line\" id=\"crayon-59f25ccf5e3e0099531814-19\"><span class=\"crayon-p\"># implemented stack</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25ccf5e3e0099531814-20\"><span class=\"crayon-i\">s</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-v\">Stack</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">new</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">Stack</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">0x48b66454</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">\"a\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"b\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"c\"</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-59f25ccf5e3e0099531814-21\"><span class=\"crayon-i\">puts</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">grab</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\"># \"c\" </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25ccf5e3e0099531814-22\"><span class=\"crayon-i\">puts</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">grab</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\"># \"b\" </span></div><div class=\"crayon-line\" id=\"crayon-59f25ccf5e3e0099531814-23\"><span class=\"crayon-i\">puts</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">grab</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\"># \"a\" </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25ccf5e3e0099531814-24\"><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">grab</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">inspect</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\"># nil</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0023 seconds] -->\r\n<p>队列和上面创建的数据类型基本上是一样的，<a href=\"http://ruby-doc.org/stdlib-2.0.0/libdoc/thread/rdoc/Queue.html\" target=\"_blank\" rel=\"nofollow\">Ruby 已经有一个类</a>了。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f25ccf5e3ec243085087\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# ruby Queue Class\r\nq = Queue.new\r\nq &lt;&lt; 'a' \r\nq &lt;&lt; 'b'\r\n# Tests Examples using Queue\r\nputs q.length  # prints 2 \r\nputs q.pop # prints a\r\nputs q.length # prints 1 \r\nputs q.pop # prints b \r\nputs q.length #prints 0</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f25ccf5e3ec243085087-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25ccf5e3ec243085087-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f25ccf5e3ec243085087-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25ccf5e3ec243085087-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f25ccf5e3ec243085087-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25ccf5e3ec243085087-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f25ccf5e3ec243085087-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25ccf5e3ec243085087-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f25ccf5e3ec243085087-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25ccf5e3ec243085087-10\">10</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f25ccf5e3ec243085087-1\"><span class=\"crayon-p\"># ruby Queue Class</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25ccf5e3ec243085087-2\"><span class=\"crayon-v\">q</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Queue</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">new</span></div><div class=\"crayon-line\" id=\"crayon-59f25ccf5e3ec243085087-3\"><span class=\"crayon-v\">q</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'a'</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25ccf5e3ec243085087-4\"><span class=\"crayon-v\">q</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'b'</span></div><div class=\"crayon-line\" id=\"crayon-59f25ccf5e3ec243085087-5\"><span class=\"crayon-p\"># Tests Examples using Queue</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25ccf5e3ec243085087-6\"><span class=\"crayon-i\">puts</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">q</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">length</span><span class=\"crayon-h\">  </span><span class=\"crayon-p\"># prints 2 </span></div><div class=\"crayon-line\" id=\"crayon-59f25ccf5e3ec243085087-7\"><span class=\"crayon-i\">puts</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">q</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">pop</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\"># prints a</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25ccf5e3ec243085087-8\"><span class=\"crayon-i\">puts</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">q</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">length</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\"># prints 1 </span></div><div class=\"crayon-line\" id=\"crayon-59f25ccf5e3ec243085087-9\"><span class=\"crayon-i\">puts</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">q</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">pop</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\"># prints b </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25ccf5e3ec243085087-10\"><span class=\"crayon-i\">puts</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">q</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">length</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\">#prints 0</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p>它的简单性是基于一个非常简单的数组，这本身就体现了它的美。我看到自己在命令行脚本中使用栈或队列，但我不确定还可以在别的什么地方使用它们。</p>\n<p>二叉搜索树在处理搜索数据的时间和速度上吸引了我。我经常发现从数据中获取数据非常容易，但在数组中搜索需要花大量时间。<a href=\"http://cs50.tv/2012/fall/shorts/binary_search/binary_search-720p.mp4\" target=\"_blank\" rel=\"nofollow\">这就是为什么需要二叉搜索树，我非常喜欢哈佛的这段视频</a>。虽然我并没有使用这些东西来做过什么，但是非常想用它们来实现点东西，然后将之与原生 Ruby 的数组方法进行比较，看看二叉树比普通的数组或哈希快多少。我在关于二叉权势的研究中试图找到实际的用例，于是发现了这些有意思的文章。</p>\n<ul>\n<li><a href=\"https://gist.github.com/yuya-takeyama/812489\" target=\"_blank\" rel=\"nofollow\">搜索字符串</a> — 来源于 <a href=\"https://gist.github.com/yuya-takeyama/812489\" target=\"_blank\" rel=\"nofollow\">yuya-takeyama</a> 的 Gist</li>\n<li><a href=\"http://zvkemp.github.io/blog/2014/04/25/binary-search-trees-in-ruby/\" target=\"_blank\" rel=\"nofollow\">数值搜索</a> — 来源于 Zach Kemp</li>\n</ul>\n<h3>可维护性</h3>\n<p>我的第一个 Web 应用在可维护性方面可笑极了。没有编码规范，没有设计模式，没有对定义的方法进行整理，没有使用命名空间，也没有对象和模型。如果一定要我去修复缺陷(肯定会有)，与其去找实际导致缺陷的方法，还不如重写来得快些。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/10/dbcfae515d1c76063b8b77d42033fcfe.jpeg\"></p>\n<p>设计拙劣导致乱糟糟的代码。</p>\n<p>我难以处理的问题之一是条件嵌套和循环嵌套。这些循环中存在大量的 if 语句和验证，但这个问题本身来源于一个系统性的问题，即不清楚怎样恰当地组织和拆分程序的不同部分。我曾尝试着在一个巨大的方法中处理所有事情，不关心哪些代码可以重用，也没创建一个模块来扩展对象和方法的功能。为了节省篇幅，下面的代码截取自真实的代码。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f25ccf5e3f2406552171\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nprint \" &lt;h3&gt; Display Weekdays: &lt;/h3&gt; \";\r\n// Looping in a view ... should have been factored diff\r\nforeach($imageRecords[\"display\"] as $ =&gt; $displayRecords) {         \r\n     // WTF is this a nested foreach \r\n     foreach($displayRecords as $value =&gt; $dispRecord){\r\n       $tempWeekdayValuesArray = array();\r\n          if($value === \"weekdays\" &amp;&amp; !isnull($dispRecord)) {\r\n             // 3rd nested foreach WTF!\r\n             foreach($dispRecord as $weekday =&gt; $weekbool) {\r\n                 // :( condition foreach day ::SHAME::\r\n                 if($weekday == \"monday\" &amp;&amp; $weekbool == 1) {\r\n                    // logic removed \r\n                  }\r\n              }\r\n              \r\n           }\r\n      }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f25ccf5e3f2406552171-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25ccf5e3f2406552171-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f25ccf5e3f2406552171-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25ccf5e3f2406552171-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f25ccf5e3f2406552171-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25ccf5e3f2406552171-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f25ccf5e3f2406552171-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25ccf5e3f2406552171-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f25ccf5e3f2406552171-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25ccf5e3f2406552171-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f25ccf5e3f2406552171-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25ccf5e3f2406552171-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59f25ccf5e3f2406552171-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25ccf5e3f2406552171-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59f25ccf5e3f2406552171-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25ccf5e3f2406552171-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-59f25ccf5e3f2406552171-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25ccf5e3f2406552171-18\">18</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f25ccf5e3f2406552171-1\"><span class=\"crayon-i\">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\" &lt;h3&gt; Display Weekdays: &lt;/h3&gt; \"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25ccf5e3f2406552171-2\"><span class=\"crayon-c\">// Looping in a view ... should have been factored diff</span></div><div class=\"crayon-line\" id=\"crayon-59f25ccf5e3f2406552171-3\"><span class=\"crayon-st\">foreach</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">imageRecords</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">\"display\"</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">displayRecords</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\">         </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25ccf5e3f2406552171-4\"><span class=\"crayon-h\">     </span><span class=\"crayon-c\">// WTF is this a nested foreach </span></div><div class=\"crayon-line\" id=\"crayon-59f25ccf5e3f2406552171-5\"><span class=\"crayon-h\">     </span><span class=\"crayon-st\">foreach</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">$</span><span class=\"crayon-e\">displayRecords </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">value</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">dispRecord</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25ccf5e3f2406552171-6\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">tempWeekdayValuesArray</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f25ccf5e3f2406552171-7\"><span class=\"crayon-h\">          </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">value</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">===</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"weekdays\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!</span><span class=\"crayon-e\">isnull</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">dispRecord</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25ccf5e3f2406552171-8\"><span class=\"crayon-h\">             </span><span class=\"crayon-c\">// 3rd nested foreach WTF!</span></div><div class=\"crayon-line\" id=\"crayon-59f25ccf5e3f2406552171-9\"><span class=\"crayon-h\">             </span><span class=\"crayon-st\">foreach</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">$</span><span class=\"crayon-e\">dispRecord </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">weekday</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">weekbool</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25ccf5e3f2406552171-10\"><span class=\"crayon-h\">                 </span><span class=\"crayon-c\">// :( condition foreach day ::SHAME::</span></div><div class=\"crayon-line\" id=\"crayon-59f25ccf5e3f2406552171-11\"><span class=\"crayon-h\">                 </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">weekday</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"monday\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">weekbool</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25ccf5e3f2406552171-12\"><span class=\"crayon-h\">                    </span><span class=\"crayon-c\">// logic removed </span></div><div class=\"crayon-line\" id=\"crayon-59f25ccf5e3f2406552171-13\"><span class=\"crayon-h\">                  </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25ccf5e3f2406552171-14\"><span class=\"crayon-h\">              </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-59f25ccf5e3f2406552171-15\"><span class=\"crayon-h\">              </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25ccf5e3f2406552171-16\"><span class=\"crayon-h\">           </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-59f25ccf5e3f2406552171-17\"><span class=\"crayon-h\">      </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25ccf5e3f2406552171-18\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0028 seconds] -->\r\n<p>我不会把责任推到别人身上，这段坏代码是我写的，我会承认这一点，然而其中一些本来可以通过代码导师、或者通过代码审查和“拉”请求来加以缓解。回顾这段代码，我感到惭愧，但这是一件好事，因为它表明了我作为一个开发人员的成长程度。自由在某些意义上是一个问题，但不是在其他方面。例如，对这个项目我被限制于使用 LAMP 技术栈，这是不容协商的，但与此同时，这真的是唯一的限制。我没有使用设计模式，遵循任何风格指南， 使用代码分析器，或遵循代码公约的任何政策。这就创建了一个系统，你可以自由地使用自己的设备，并且如果你还没有了解应用程序的长期性和错误修复，那么它会损害你的最终结果。</p>\n<p>我已经真正体会到了文本编辑器的好处，在你编写代码时它会给出提示（指出潜在的错误）从而为你节省很多时间，同时我也开始欣赏与编程相关的一些美好细节。一个写得很好的代码库，会遵循文档标准、清晰的约定和风格指南，阅读起来就像一封电子邮件或一篇网文那样流畅。（当然，有时候使用的编程语言本身就更好）总地来说，我也发现我很喜欢这本书中的许多原则， <em><a href=\"https://www.amazon.com/Clean-Code-Handbook-Software-Craftsmanship/dp/0132350882\" target=\"_blank\" rel=\"nofollow\">Robert C。 Martin 和其他作者的《敏捷软件匠人的整洁代码手册》</a></em><em> 。</em></p>\n<h3>测试驱动开发</h3>\n<p>在我看来，测试驱动开发的好处足以证明其优点，但我明白，并不是每个人都同意测试为代码库提供任何价值。我不会争论测试的有效性，但我确实想分享它如何帮到我。在实际创建代码之前，为代码编写集成测试和单元测试已经在很多方面帮到我。它帮助我编写更整洁的代码，高效地编写代码，并帮助我解决了我遇到麻烦的问题。</p>\n<p>编写更整洁、更高效的代码与编程中的许多事情有交叉。可读性、性能和编码时间是 TDD 帮到我的主要方面。我发现我能编写代码，不必重构（多次）使其可以上生产线或进入版本控制库。它不仅帮助我减少了 bug，而且帮助我减少了跟踪和修复 bug 所花费的时间。修复 bug 时，我发现我可以接受预期的输入或输出，编写一个与之匹配的测试，然后努力使该测试和所有其他测试通过。这样可以消除 bug，并确保代码实现其预期的目的。</p>\n<p>在开始编写实际的方法或对象之前，TDD 可以帮助我组织思路。在更复杂的功能中，它可以帮助我将功能分解成其需要正常工作的集。也就是说，边界条件就是边界条件，并且在最初创建代码时往往更难于考虑到边界情况。最终我觉得测试驱动开发有助于使我成为更好的程序员。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112585\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112585votetotal\">3</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112585\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 5 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": 1, "praise_nums": "3", "url_object_id": "834c214f46c9c6176a4e3a3de0972b2a", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/10/28eca50ca0450d717356b11a96f9935c.jpeg"], "front_image_path": "full/75353131f53da0611d042f008efd8e428d12ec14.jpg", "title": "写代码容易，编程并不容易"}
{"create_date": "2017/10/10 ", "url": "http://blog.jobbole.com/112589/", "fav_nums": 5, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://www.maketecheasier.com/adobe-alternatives-for-linux/\">Toni Matthews-el</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-8928-1.html\">Linux中国/geekpi</a>   </div><p>你是一名正在寻找 Adobe 的替代品的 Linux 用户吗？那你不是一个人。如果你是一个狂热的平面设计师，那么你可能很擅长避开昂贵的 Adobe 产品。不过，对于 Adobe 来说，Linux 用户通常是其支持最不利的。因此，Adobe 的替代品是必须的 —— 但是最好的选择是什么？</p>\n<p>这最终要看具体的 Adobe 程序和你希望完成的事情。幸运的是，由于需求是所有发明之母，有人响应了这些号召。其结果是出现了一系列高效的 Adobe 替代品。</p>\n<h3 id=\"toc_1\">Evince (Adobe Acrobat Reader)</h3>\n<p><img class=\"aligncenter\" title=\"Evince_AdobeReaderSubstitute\" src=\"http://jbcdn2.b0.upaiyun.com/2017/10/02f8cb35080c751b3ae2d27bf7843287.jpg\" alt=\"Evince_AdobeReaderSubstitute\"></p>\n<p>就像 Adobe Acrobat Reader 一样，<a href=\"https://wiki.gnome.org/Apps/Evince\">Evince</a> 是一个“支持多种文档格式的文档查看器”。例如，用户可以使用 Evince 作为 PDF 查看器。它还支持各种漫画书格式（cbr、cbz、cb7 和 cbt）。你可以在 Evince 网站上找到<a href=\"https://wiki.gnome.org/Apps/Evince/SupportedDocumentFormats\">支持格式的完整列表</a>。</p>\n<p>对于 Evince ，Linux 用户不用高估，也不用贬低，它就是个标准的查看器。你可以在需要时前往官方网站进行更新。</p>\n<h3 id=\"toc_2\">Pixlr (Adobe Photoshop)</h3>\n<p><img class=\"aligncenter\" title=\"Pixlr_Photoshopsubstitute\" src=\"http://jbcdn2.b0.upaiyun.com/2017/10/368e5c3d6ee1d12ff97840c95c35d372.jpg\" alt=\"Pixlr_Photoshopsubstitute\"></p>\n<p>关于 <a href=\"https://pixlr.com/\">Pixlr</a> 的很棒的一点是这个 Adobe 替代品的各种工具可以在线获得。如果你有一个互联网连接，那么你就有一个强大的图像编辑工作区。</p>\n<p><a href=\"https://pixlr.com/editor/\">Pixlr Editor</a> 是 Photoshop 的一个功能强大的替代品，你可以使用图层和相关效果。它还有一些漂亮的绘图和颜色编辑工具。<a href=\"https://pixlr.com/express/\">Pixlr Express</a> 没有这么多功能，因为它主要用于图像增强、调整颜色和清晰度，并增加一些 Instagram 适用的效果！</p>\n<p>你可以通过 Pixlr 完成的任务简直不可置信，而且完全免费的。</p>\n<h3 id=\"toc_3\">Inkscape (Adobe Illustrator)</h3>\n<p><img class=\"aligncenter\" title=\"Inkscape_Illustratorsubstitute\" src=\"http://jbcdn2.b0.upaiyun.com/2017/10/42a9a8d70f0d2685aeece355411a4def.jpg\" alt=\"Inkscape_Illustratorsubstitute\"></p>\n<p><a href=\"https://inkscape.org/en/\">Inkscape</a>是另一个值得推荐的免费 Adobe 替代品。它主要作为一个“专业的矢量图形编辑器”。除了 Illustrator，Inkscape 也与 Corel Draw、Freehand 和 Xara X 的功能差不多。</p>\n<p>它的矢量设计工具可用于制作 logo 和“高可伸缩性”艺术品。Inkscape 包含绘图、形状和文本工具。图层工具允许你锁定、分组或隐藏单个图层。</p>\n<h3 id=\"toc_4\">Pinegrow Web Editor (Adobe Dreamweaver)</h3>\n<p><img class=\"aligncenter\" title=\"Pinegrow_Dreamweaversubstitute\" src=\"http://jbcdn2.b0.upaiyun.com/2017/10/29f3b3c6087f20365d8dea875bd655e5.jpg\" alt=\"Pinegrow_Dreamweaversubstitute\"></p>\n<p><a href=\"http://pinegrow.com/\">Pinegrow Web Editor</a> 是 Dreamweaver 在 Linux 上的绝佳替代品。该程序可让你在桌面上直接制作 HTML 网站。</p>\n<p>不仅是使用代码创建（而且需要稍后预览），Pinegrow 可以提供详细的可视化编辑体验。你可以直接查看和测试你的 HTML 项目，实时了解链接是否正常工作，或者图片是否在它该在的地方。Pinegrow 还附带了 WordPress 主题构建器。</p>\n<p>免费试用 30 天。如果你喜欢，你可以一次性支付 $49 购买。</p>\n<h3 id=\"toc_5\">Scribus (Adobe InDesign)</h3>\n<p><img class=\"aligncenter\" title=\"Scribus_InDesignsubstitute\" src=\"http://jbcdn2.b0.upaiyun.com/2017/10/49e60536c002546f459886d676d23ebe.jpg\" alt=\"Scribus_InDesignsubstitute\"></p>\n<p><a href=\"https://www.scribus.net/\">Scribus</a> 可能是最接近 Adobe InDesign 的替代品。根据开发者的说法，你应该<a href=\"https://www.scribus.net/why-on-earth-should-i-use-scribus-2/\">认真考虑使用</a> Scribus，因为它是可靠和免费的。</p>\n<p>实际上，Scribus 不仅仅是一个出色的桌面出版工具，也是一个很好的自出版工具。当你可以自己做高质量的杂志和书籍时，为什么要依靠昂贵的商业软件来创建？Scribus 目前允许设计师使用一个 200 色的调色板，下一个稳定版中<a href=\"https://www.scribus.net/because-color-matters/\">承诺将会加倍颜色数</a>。</p>\n<h3 id=\"toc_6\">digiKam (Adobe Lightroom)</h3>\n<p><img class=\"aligncenter\" title=\"digiKam_Lightroomsubstitute\" src=\"http://jbcdn2.b0.upaiyun.com/2017/10/75e5d570b76f8502b3ac02f2696ec0c6.jpg\" alt=\"digiKam_Lightroomsubstitute\"></p>\n<p><a href=\"http://digikam.org/\">digiKam</a> 也许是目前 Linux 用户最好的 Lightroom 替代品。功能包括导入照片、整理图片集、图像增强、创建幻灯片等功能。</p>\n<p>它的时尚设计和先进的功能是真正用心之作。实际上，digiKam 背后的人是摄影师们。不仅如此，他们希望在 Linux 中完成在 Lightroom 能做的任何工作。</p>\n<h3 id=\"toc_7\">Webflow (Adobe Muse)</h3>\n<p><img class=\"aligncenter\" title=\"Webflow_Museubstitute\" src=\"http://jbcdn2.b0.upaiyun.com/2017/10/fb9b3754aebcc39c1da964700fe8e766.jpg\" alt=\"Webflow_Museubstitute\"></p>\n<p><a href=\"https://webflow.com/\">Webflow</a> 是另一个可以证明你无需下载软件而可以完成很多事的网站。这是一个非常方便的 Adobe Muse 替代品，Webflow 是创建高响应式网站设计的理想选择。</p>\n<p>Webflow 的最好的一方面是你不需要自己编写代码。你只需拖放图像并写入文本。Webflow 为你做了所有杂事。你可以从头开始构建网站，也可以使用各种模板。虽然是免费的，但是其高级版本还提供了额外的功能，如能够轻松地导出 HTML 和 CSS 以在其他地方使用。</p>\n<h3 id=\"toc_8\">Tupi (Adobe Animate)</h3>\n<p><img class=\"aligncenter\" title=\"Tupi_Animatesubstitute\" src=\"http://jbcdn2.b0.upaiyun.com/2017/10/f51344b7a7d54f504851a9c5fa71a2ff.jpg\" alt=\"Tupi_Animatesubstitute\"></p>\n<p><a href=\"http://www.maefloresta.com/portal/\">Tupi</a> 是 Adobe Animate 的替代品，或者也可以用于那些<a href=\"https://www.maketecheasier.com/sites-moving-away-flash/\">不太热衷于 Flash 的人</a>。当然，Tupi 的作者说这并不是与 Flash 竞争。然而，其使用 HTML5 的能力使其成为了理想的替代品。</p>\n<p>在 PC 或平板电脑上绘制 2D 动画。不确定如何开始？使用网站的 <a href=\"https://www.youtube.com/user/maefloresta\">YouTube 教程</a>了解如何制作剪贴画动画以及更多。</p>\n<h3 id=\"toc_9\">Black Magic Fusion (Adobe After Effects)</h3>\n<p><img class=\"aligncenter\" title=\"Fusion_AFterEffectssubstitute\" src=\"http://jbcdn2.b0.upaiyun.com/2017/10/66943ddefdc61c992d8c204666324759.jpg\" alt=\"Fusion_AFterEffectssubstitute\"></p>\n<p><a href=\"https://www.blackmagicdesign.com/\">Black Magic Fusion</a> 注定是 Adobe After Effects 的替代者。这个视觉效果软件历经了大约 25 年的开发！Fusion 通常用于在好莱坞电影和电视节目中制造令人印象深刻的效果 —— 这靠的是其丰富而时尚的功能。</p>\n<p>Fusion 通过使用节点，即那些“代表效果、过滤器和其他处理的小图标”工作。将这些节点连接在一起，创建一系列复杂的视觉效果。该程序包括许多功能，如图片修饰、对象跟踪和令人兴奋的 3D 效果。</p>\n<p>你可以选择免费版或者 $995 的 Fusion Studio。为了帮助你决定，<a href=\"https://www.blackmagicdesign.com/products/fusion/compare\">你可以比较</a>免费和高级版的 Fusion 功能。</p>\n<h3 id=\"toc_10\">总结</h3>\n<p>如你所见，这些远不止于是 Adobe 替代品。由于开源的缘故，显著提升的替代品的不断地发布。我们很快就会看到一个仅为 Linux 用户创建的完整套件。在此之前，你可以随意选择这些替代品。</p>\n<p>知道这里没有提到的其它有用的 Adobe 替代品吗？在下面的评论区分享软件建议。</p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112589\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112589votetotal\">5</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112589\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 5 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 2 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": 2, "praise_nums": "5", "url_object_id": "b2b4f5cd38ef5798d885749ba5917116", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/10/02f8cb35080c751b3ae2d27bf7843287.jpg"], "front_image_path": "full/4439e403a2c28b82101fcf6605f36f3d3a79f7f2.jpg", "title": "Adobe 软件的最佳 Linux 替代品"}
{"create_date": "2017/10/16 ", "url": "http://blog.jobbole.com/112707/", "fav_nums": 1, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://itsfoss.com/multiple-linux-one-usb/\">Ambarish Kumar</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-8957-1.html\">Linux中国/geekpi</a>   </div><blockquote><p>本教程介绍如何在一个 U 盘上安装多个 Linux 发行版。这样，你可以在单个 U 盘上享受多个现场版live Linux 发行版了。</p></blockquote>\n<p>我喜欢通过 U 盘尝试不同的 Linux 发行版。它让我可以在真实的硬件上测试操作系统，而不是虚拟化的环境中。此外，我可以将 USB 插入任何系统（比如 Windows 系统），做任何我想要的事情，以及享受相同的 Linux 体验。而且，如果我的系统出现问题，我可以使用 U 盘恢复！</p>\n<p>创建单个<a href=\"https://itsfoss.com/create-live-usb-of-ubuntu-in-windows/\">可启动的现场版 Linux USB</a> 很简单，你只需下载一个 ISO 文件并将其刻录到 U 盘。但是，如果你想尝试多个 Linux 发行版呢？你可以使用多个 U 盘，也可以覆盖同一个 U 盘以尝试其他 Linux 发行版。但这两种方法都不是很方便。</p>\n<p>那么，有没有在单个 U 盘上安装多个 Linux 发行版的方式呢？我们将在本教程中看到如何做到这一点。</p>\n<h3 id=\"toc_1\">如何创建有多个 Linux 发行版的可启动 USB</h3>\n<p>我们有一个工具正好可以做到<em>在单个 U 盘上保留多个 Linux 发行版</em>。你所需要做的只是选择要安装的发行版。在本教程中，我们将介绍<em>如何在 U 盘中安装多个 Linux 发行版</em>用于现场会话live session。</p>\n<p>要确保你有一个足够大的 U 盘，以便在它上面安装多个 Linux 发行版，一个 8 GB 的 U 盘应该足够用于三四个 Linux 发行版。</p>\n<h4 id=\"toc_2\">步骤 1</h4>\n<p><a href=\"http://multibootusb.org/\">MultiBootUSB</a> 是一个自由、开源的跨平台应用程序，允许你创建具有多个 Linux 发行版的 U 盘。它还支持在任何时候卸载任何发行版，以便你回收驱动器上的空间用于另一个发行版。</p>\n<p>下载 .deb 包并双击安装。</p>\n<p><a href=\"https://github.com/mbusb/multibootusb/releases/download/v8.8.0/python3-multibootusb_8.8.0-1_all.deb\">下载 MultiBootUSB</a></p>\n<h4 id=\"toc_3\">步骤 2</h4>\n<p>推荐的文件系统是 FAT32，因此在创建多引导 U 盘之前，请确保格式化 U 盘。</p>\n<h4 id=\"toc_4\">步骤 3</h4>\n<p>下载要安装的 Linux 发行版的 ISO 镜像。</p>\n<h4 id=\"toc_5\">步骤 4</h4>\n<p>完成这些后，启动 MultiBootUSB。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/10/59bb31afe67fed96bf8544aa03d90b62.png\" alt=\"MultiBootUSB\"></p>\n<p>主屏幕要求你选择 U 盘和你打算放到 U 盘上的 Linux 发行版镜像文件。</p>\n<p>MultiBootUSB 支持 Ubuntu、Fedora 和 Debian 发行版的持久化，这意味着对 Linux 发行版的现场版本所做的更改将保存到 USB 上。</p>\n<p>你可以通过拖动 MultiBootUSB 选项卡下的滑块来选择持久化大小。持久化为你提供了在运行时将更改保存到 U 盘的选项。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/10/1445361a61e458b7f7c0bee4ee389da3.png\" alt=\"MultiBootUSB persistence storage\"></p>\n<h4 id=\"toc_6\">步骤 5</h4>\n<p>单击“安装发行版”选项并继续安装。在显示成功的安装消息之前，需要一些时间才能完成。</p>\n<p>你现在可以在已安装部分中看到发行版了。对于另外的操作系统，重复该过程。这是我安装 Ubuntu 16.10 和 Fedora 24 后的样子。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/10/04299cb6ee0226e024c35f1a0445bc49.png\" alt=\"MultiBootSystem with Ubuntu and Fedora\"></p>\n<h4 id=\"toc_7\">步骤 6</h4>\n<p>下次通过 USB 启动时，我可以选择任何一个发行版。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/10/67d16917c3bce3f95bc67691edcb45c7.png\" alt=\"Boot Menu\"></p>\n<p>只要你的 U 盘允许，你可以添加任意数量的发行版。要删除发行版，请从列表中选择它，然后单击卸载发行版。</p>\n<h3 id=\"toc_8\">最后的话</h3>\n<p>MultiBootUSB 真的很便于在 U 盘上安装多个 Linux 发行版。只需点击几下，我就有两个我最喜欢的操作系统的工作盘了，我可以在任何系统上启动它们。</p>\n<p>如果你在安装或使用 MultiBootUSB 时遇到任何问题，请在评论中告诉我们。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112707\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112707votetotal\">3</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112707\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": "  评论", "praise_nums": "3", "url_object_id": "0e2c4297cf8c32b12e9fe1756453f8f0", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2016/08/2e327580770370cc02c696e176d4cb77.jpg"], "front_image_path": "full/dd1cc9aabc819ded578b6acfe94b7f995ee5ea2d.jpg", "title": "如何在一个 U 盘上安装多个 Linux 发行版"}
{"create_date": "2017/10/16 ", "url": "http://blog.jobbole.com/112710/", "fav_nums": 6, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://blog.philipphauer.de/restful-api-design-best-practices/\">Philipp Hauer</a>   译文出处：<a target=\"_blank\" href=\"http://www.zcfy.cc/article/restful-api-design-best-practices-in-a-nutshell-4388.html\">slane</a>   </div><p>项目资源的URL应该如何设计？用名词复数还是用名词单数？一个资源需要多少个URL？用哪种HTTP方法来创建一个新的资源？可选参数应该放在哪里？那些不涉及资源操作的URL呢？实现分页和版本控制的最好方法是什么？因为有太多的疑问，设计RESTful API变得很棘手。在这篇文章中，我们来看一下RESTful API设计，并给出一个最佳实践方案。</p>\n<h3 id=\"-url\">每个资源使用两个URL</h3>\n<p>资源集合用一个URL，具体某个资源用一个URL：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f2de9faeca8738232241\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n/employees         #资源集合的URL\r\n/employees/56      #具体某个资源的URL\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f2de9faeca8738232241-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2de9faeca8738232241-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f2de9faeca8738232241-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f2de9faeca8738232241-1\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">employees</span><span class=\"crayon-h\">         </span><span class=\"crayon-p\">#资源集合的URL</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2de9faeca8738232241-2\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">employees</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">56</span><span class=\"crayon-h\">      </span><span class=\"crayon-p\">#具体某个资源的URL</span></div><div class=\"crayon-line\" id=\"crayon-59f2de9faeca8738232241-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p></p>\n<h3 id=\"-\">用名词代替动词表示资源</h3>\n<p>这让你的API更简洁，URL数目更少。不要这么设计：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f2de9faecb1936985183\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n/getAllEmployees\r\n/getAllExternalEmployees\r\n/createEmployee\r\n/updateEmployee\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f2de9faecb1936985183-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2de9faecb1936985183-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f2de9faecb1936985183-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2de9faecb1936985183-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f2de9faecb1936985183-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f2de9faecb1936985183-1\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">getAllEmployees</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2de9faecb1936985183-2\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">getAllExternalEmployees</span></div><div class=\"crayon-line\" id=\"crayon-59f2de9faecb1936985183-3\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">createEmployee</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2de9faecb1936985183-4\"><span class=\"crayon-o\">/</span><span class=\"crayon-i\">updateEmployee</span></div><div class=\"crayon-line\" id=\"crayon-59f2de9faecb1936985183-5\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>更好的设计：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f2de9faecb5286998056\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nGET /employees\r\nGET /employees?state=external\r\nPOST /employees\r\nPUT /employees/56\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f2de9faecb5286998056-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2de9faecb5286998056-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f2de9faecb5286998056-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2de9faecb5286998056-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f2de9faecb5286998056-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f2de9faecb5286998056-1\"><span class=\"crayon-v\">GET</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">employees</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2de9faecb5286998056-2\"><span class=\"crayon-v\">GET</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">employees</span><span class=\"crayon-sy\">?</span><span class=\"crayon-v\">state</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">external</span></div><div class=\"crayon-line\" id=\"crayon-59f2de9faecb5286998056-3\"><span class=\"crayon-v\">POST</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">employees</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2de9faecb5286998056-4\"><span class=\"crayon-v\">PUT</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">employees</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">56</span></div><div class=\"crayon-line\" id=\"crayon-59f2de9faecb5286998056-5\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p></p>\n<h3 id=\"-http-\">用HTTP方法操作资源</h3>\n<p>使用URL指定你要用的资源。使用HTTP方法来指定怎么处理这个资源。使用四种HTTP方法POST，GET，PUT，DELETE可以提供CRUD功能（创建，获取，更新，删除）。</p>\n<ul>\n<li><strong>获取</strong>：使用GET方法获取资源。GET请求从不改变资源的状态。无副作用。GET方法是幂等的。GET方法具有只读的含义。因此，你可以完美的使用缓存。</li>\n<li><strong>创建</strong>：使用POST创建新的资源。</li>\n<li><strong>更新</strong>：使用PUT更新现有资源。</li>\n<li><strong>删除</strong>：使用DELETE删除现有资源。</li>\n</ul>\n<p>2个URL乘以4个HTTP方法就是一组很好的功能。看看这个表格：</p>\n<p>POST（创建）GET（读取）PUT（更新）DELETE（删除）</p>\n<table>\n<thead></thead>\n<tbody>\n<tr>\n<td>/employees</td>\n<td>创建一个新员工</td>\n<td>列出所有员工</td>\n<td>批量更新员工信息</td>\n<td>删除所有员工</td>\n</tr>\n<tr>\n<td>/employees/56</td>\n<td>（错误）</td>\n<td>获取56号员工的信息</td>\n<td>更新56号员工的信息</td>\n<td>删除56号员工</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"-url-post-\">对资源集合的URL使用POST方法，创建新资源</h3>\n<p>创建一个新资源的时，客户端与服务器是怎么交互的呢？ <img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/10/111c86eac0b74ede93ae079af7a44289.png\" alt=\"\"></p>\n<p style=\"text-align: center\">在资源集合URL上使用POST来创建新的资源过程</p>\n<ol>\n<li>客户端向资源集合URL<code>/employees</code>发送POST请求。HTTP body 包含新资源的属性 “Albert Stark”。</li>\n<li>RESTful Web服务器为新员工生成ID，在其内部模型中创建员工，并向客户端发送响应。这个响应的HTTP头部包含一个Location字段，指示创建资源可访问的URL。</li>\n</ol>\n<h3 id=\"-url-put-\">对具体资源的URL使用PUT方法，来更新资源</h3>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/10/5c019a4c307827b6235fd0c13da17421.png\" alt=\"\"></p>\n<p style=\"text-align: center\">使用PUT更新已有资源</p>\n<ol>\n<li>客户端向具体资源的URL发送PUT请求<code>/employee/21</code>。请求的HTTP body中包含要更新的属性值（21号员工的新名称“Bruce Wayne”）。</li>\n<li>REST服务器更新ID为21的员工名称，并使用HTTP状态码200表示更改成功。</li>\n</ol>\n<h3 id=\"-\">推荐用复数名词</h3>\n<p>推荐：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f2de9faecba638664018\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n/employees\r\n/employees/21\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f2de9faecba638664018-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2de9faecba638664018-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f2de9faecba638664018-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f2de9faecba638664018-1\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">employees</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2de9faecba638664018-2\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">employees</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">21</span></div><div class=\"crayon-line\" id=\"crayon-59f2de9faecba638664018-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>不推荐：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f2de9faecbe350659426\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n/employee\r\n/employee/21\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f2de9faecbe350659426-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2de9faecbe350659426-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f2de9faecbe350659426-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f2de9faecbe350659426-1\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">employee</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2de9faecbe350659426-2\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">employee</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">21</span></div><div class=\"crayon-line\" id=\"crayon-59f2de9faecbe350659426-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>事实上，这是个人爱好问题，但复数形式更为常见。此外，在资源集合URL上用GET方法，它更直观，特别是<code>GET /employees?state=external</code>、<code>POST /employees</code>、<code>PUT /employees/56</code>。但最重要的是：避免复数和单数名词混合使用，这显得非常混乱且容易出错。</p>\n<h3 id=\"-\">对可选的、复杂的参数，使用查询字符串（？）。</h3>\n<p>不推荐做法：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f2de9faecc1706946881\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nGET /employees\r\nGET /externalEmployees\r\nGET /internalEmployees\r\nGET /internalAndSeniorEmployees\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f2de9faecc1706946881-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2de9faecc1706946881-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f2de9faecc1706946881-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2de9faecc1706946881-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f2de9faecc1706946881-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f2de9faecc1706946881-1\"><span class=\"crayon-v\">GET</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">employees</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2de9faecc1706946881-2\"><span class=\"crayon-v\">GET</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">externalEmployees</span></div><div class=\"crayon-line\" id=\"crayon-59f2de9faecc1706946881-3\"><span class=\"crayon-v\">GET</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">internalEmployees</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2de9faecc1706946881-4\"><span class=\"crayon-v\">GET</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">internalAndSeniorEmployees</span></div><div class=\"crayon-line\" id=\"crayon-59f2de9faecc1706946881-5\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>为了让你的URL更小、更简洁。为资源设置一个基本URL，将可选的、复杂的参数用查询字符串表示。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f2de9faecc4012915596\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nGET /employees?state=internal&amp;maturity=senior\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f2de9faecc4012915596-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2de9faecc4012915596-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f2de9faecc4012915596-1\"><span class=\"crayon-v\">GET</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">employees</span><span class=\"crayon-sy\">?</span><span class=\"crayon-v\">state</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">internal</span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">maturity</span><span class=\"crayon-o\">=</span><span class=\"crayon-i\">senior</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2de9faecc4012915596-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p></p>\n<h3 id=\"-http-\">使用HTTP状态码</h3>\n<p>RESTful Web服务应使用合适的HTTP状态码来响应客户端请求</p>\n<ul>\n<li>2xx – 成功 – 一切都很好</li>\n<li>4xx – 客户端错误 – 如果客户端发生错误（例如客户端发送无效请求或未被授权）</li>\n<li>5xx – 服务器错误 – 如果服务器发生错误（例如，尝试处理请求时出错） 参考<a href=\"https://en.wikipedia.org/wiki/List_of_HTTP_status_codes\">维基百科上的HTTP状态代码</a>。但是，其中的大部分HTTP状态码都不会被用到，只会用其中的一小部分。通常会用到一下几个：2xx：成功3xx：重定向4xx：客户端错误5xx：服务器错误<br>\n<table>\n<thead></thead>\n<tbody>\n<tr>\n<td>200 成功</td>\n<td>301 永久重定向</td>\n<td>400 错误请求</td>\n<td>500 内部服务器错误</td>\n</tr>\n<tr>\n<td>201 创建</td>\n<td>304 资源未修改</td>\n<td>401未授权</td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td></td>\n<td>403 禁止</td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td></td>\n<td>404 未找到</td>\n<td></td>\n</tr>\n</tbody>\n</table>\n</li>\n</ul>\n<h3 id=\"-\">返回有用的错误提示</h3>\n<p>除了合适的状态码之外，还应该在HTTP响应正文中提供有用的错误提示和详细的描述。这是一个例子。 请求：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f2de9faecc8160134079\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nGET /employees?state=super\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f2de9faecc8160134079-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2de9faecc8160134079-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f2de9faecc8160134079-1\"><span class=\"crayon-v\">GET</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">employees</span><span class=\"crayon-sy\">?</span><span class=\"crayon-v\">state</span><span class=\"crayon-o\">=</span><span class=\"crayon-r\">super</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2de9faecc8160134079-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>响应：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f2de9faeccc928659438\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n// 400 Bad Request\r\n{\r\n    \"message\": \"You submitted an invalid state. Valid state values are 'internal' or 'external'\",\r\n    \"errorCode\": 352,\r\n    \"additionalInformation\" : \r\n    \"http://www.domain.com/rest/errorcode/352\"\r\n}\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f2de9faeccc928659438-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2de9faeccc928659438-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f2de9faeccc928659438-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2de9faeccc928659438-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f2de9faeccc928659438-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2de9faeccc928659438-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f2de9faeccc928659438-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2de9faeccc928659438-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f2de9faeccc928659438-1\"><span class=\"crayon-c\">// 400 Bad Request</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2de9faeccc928659438-2\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f2de9faeccc928659438-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">\"message\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"You submitted an invalid state. Valid state values are 'internal' or 'external'\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2de9faeccc928659438-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">\"errorCode\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">352</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f2de9faeccc928659438-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">\"additionalInformation\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2de9faeccc928659438-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">\"http://www.domain.com/rest/errorcode/352\"</span></div><div class=\"crayon-line\" id=\"crayon-59f2de9faeccc928659438-7\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2de9faeccc928659438-8\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p></p>\n<h3 id=\"-\">使用小驼峰命名法</h3>\n<p>使用小驼峰命名法作为属性标识符。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f2de9faeccf289606303\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n{ \"yearOfBirth\": 1982 }\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f2de9faeccf289606303-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2de9faeccf289606303-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f2de9faeccf289606303-1\"><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"yearOfBirth\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1982</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2de9faeccf289606303-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>不要使用下划线（<code>year_of_birth</code>）或大驼峰命名法（<code>YearOfBirth</code>）。通常，RESTful Web服务将被JavaScript编写的客户端使用。客户端会将JSON响应转换为JavaScript对象（通过调用<code>var person = JSON.parse(response)</code>），然后调用其属性。因此，最好遵循JavaScript代码通用规范。<br>\n对比：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f2de9faecd2988138758\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nperson.year_of_birth // 不推荐，违反JavaScript代码通用规范\r\nperson.YearOfBirth // 不推荐，JavaScript构造方法命名\r\nperson.yearOfBirth // 推荐\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f2de9faecd2988138758-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2de9faecd2988138758-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f2de9faecd2988138758-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2de9faecd2988138758-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f2de9faecd2988138758-1\"><span class=\"crayon-v\">person</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">year_of_birth</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 不推荐，违反JavaScript代码通用规范</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2de9faecd2988138758-2\"><span class=\"crayon-v\">person</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">YearOfBirth</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 不推荐，JavaScript构造方法命名</span></div><div class=\"crayon-line\" id=\"crayon-59f2de9faecd2988138758-3\"><span class=\"crayon-v\">person</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">yearOfBirth</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 推荐</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2de9faecd2988138758-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p></p>\n<h3 id=\"-url-\">在URL中强制加入版本号</h3>\n<p>从始至终，都使用版本号发布您的RESTful API。将版本号放在URL中以是必需的。如果您有不兼容和破坏性的更改，版本号将让你能更容易的发布API。发布新API时，只需在增加版本号中的数字。这样的话，客户端可以自如的迁移到新API，不会因调用完全不同的新API而陷入困境。<br>\n使用直观的 “v” 前缀来表示后面的数字是版本号。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f2de9faecd5952521166\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n/v1/employees\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f2de9faecd5952521166-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2de9faecd5952521166-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f2de9faecd5952521166-1\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">v1</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">employees</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2de9faecd5952521166-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>你不需要使用次级版本号（“v1.2”），因为你不应该频繁的去发布API版本。</p>\n<h3 id=\"-\">提供分页信息</h3>\n<p>一次性返回数据库所有资源不是一个好主意。因此，需要提供分页机制。通常使用数据库中众所周知的参数offset和limit。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f2de9faecd9443481627\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n/employees?offset=30&amp;limit=15       #返回30 到 45的员工\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f2de9faecd9443481627-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2de9faecd9443481627-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f2de9faecd9443481627-1\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">employees</span><span class=\"crayon-sy\">?</span><span class=\"crayon-v\">offset</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">30</span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">limit</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\">       </span><span class=\"crayon-p\">#返回30 到 45的员工</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2de9faecd9443481627-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>如果客户端没有传这些参数，则应使用默认值。通常默认值是<code>offset = 0</code>和<code>limit = 10</code>。如果数据库检索很慢，应当减小<code>limit</code>值。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f2de9faecdc940099204\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n/employees       #返回0 到 10的员工\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f2de9faecdc940099204-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2de9faecdc940099204-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f2de9faecdc940099204-1\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">employees</span><span class=\"crayon-h\">       </span><span class=\"crayon-p\">#返回0 到 10的员工</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2de9faecdc940099204-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>此外，如果您使用分页，客户端需要知道资源总数。例： 请求：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f2de9faecdf191466601\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nGET /employees\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f2de9faecdf191466601-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2de9faecdf191466601-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f2de9faecdf191466601-1\"><span class=\"crayon-v\">GET</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">employees</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2de9faecdf191466601-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>响应：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f2de9faece2940337325\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n{\r\n  \"offset\": 0,\r\n  \"limit\": 10,\r\n  \"total\": 3465,\r\n  \"employees\": [\r\n    //...\r\n  ]\r\n}\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f2de9faece2940337325-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2de9faece2940337325-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f2de9faece2940337325-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2de9faece2940337325-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f2de9faece2940337325-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2de9faece2940337325-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f2de9faece2940337325-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2de9faece2940337325-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f2de9faece2940337325-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f2de9faece2940337325-1\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2de9faece2940337325-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">\"offset\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f2de9faece2940337325-3\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">\"limit\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2de9faece2940337325-4\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">\"total\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3465</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f2de9faece2940337325-5\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">\"employees\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2de9faece2940337325-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">//...</span></div><div class=\"crayon-line\" id=\"crayon-59f2de9faece2940337325-7\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2de9faece2940337325-8\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-59f2de9faece2940337325-9\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p></p>\n<h3 id=\"-\">非资源请求用动词</h3>\n<p>有时API调用并不涉及资源（如计算，翻译或转换）。例：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f2de9faece5869741424\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nGET /translate?from=de_DE&amp;to=en_US&amp;text=Hallo\r\nGET /calculate?para2=23&amp;para2=432\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f2de9faece5869741424-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2de9faece5869741424-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f2de9faece5869741424-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f2de9faece5869741424-1\"><span class=\"crayon-v\">GET</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">translate</span><span class=\"crayon-sy\">?</span><span class=\"crayon-v\">from</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">de_DE</span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-st\">to</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">en_US</span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">text</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">Hallo</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2de9faece5869741424-2\"><span class=\"crayon-v\">GET</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">calculate</span><span class=\"crayon-sy\">?</span><span class=\"crayon-v\">para2</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">23</span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">para2</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">432</span></div><div class=\"crayon-line\" id=\"crayon-59f2de9faece5869741424-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>在这种情况下，API响应不会返回任何资源。而是执行一个操作并将结果返回给客户端。因此，您应该在URL中使用动词而不是名词，来清楚的区分资源请求和非资源请求。</p>\n<h3 id=\"-\">考虑特定资源搜索和跨资源搜索</h3>\n<p>提供对特定资源的搜索很容易。只需使用相应的资源集合URL，并将搜索字符串附加到查询参数中即可。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f2de9faece9074353497\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nGET /employees?query=Paul\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f2de9faece9074353497-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2de9faece9074353497-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f2de9faece9074353497-1\"><span class=\"crayon-v\">GET</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">employees</span><span class=\"crayon-sy\">?</span><span class=\"crayon-v\">query</span><span class=\"crayon-o\">=</span><span class=\"crayon-i\">Paul</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2de9faece9074353497-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>如果要对所有资源提供全局搜索，则需要用其他方法。前文提到，对于非资源请求URL，使用动词而不是名词。因此，您的搜索网址可能如下所示：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f2de9faecec197797336\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nGET /search?query=Paul   //返回 employees, customers, suppliers 等等.\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f2de9faecec197797336-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2de9faecec197797336-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f2de9faecec197797336-1\"><span class=\"crayon-v\">GET</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">search</span><span class=\"crayon-sy\">?</span><span class=\"crayon-v\">query</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">Paul</span><span class=\"crayon-h\">   </span><span class=\"crayon-c\">//返回 employees, customers, suppliers 等等.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2de9faecec197797336-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p></p>\n<h3 id=\"-api-\">在响应参数中添加浏览其它API的链接</h3>\n<p>理想情况下，不会让客户端自己构造使用REST API的URL。让我们思考一个例子。 客户端想要访问员工的薪酬表。为此，他必须知道他可以通过在员工URL（例如<code>/employees/21/salaryStatements</code>）中附加字符串“salaryStatements”来访问薪酬表。这个字符串连接很容易出错，且难以维护。如果你更改了访问薪水表的REST API的方式（例如变成了<code>/employees/21/salary-statement</code>或<code>/employees/21/paySlips</code>），所有客户端都将中断。 更好的方案是在响应参数中添加一个<code>links</code>字段，让客户端可以自动变更。<br>\n请求：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f2de9faecef517468834\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nGET /employees/\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f2de9faecef517468834-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2de9faecef517468834-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f2de9faecef517468834-1\"><span class=\"crayon-v\">GET</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">employees</span><span class=\"crayon-o\">/</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2de9faecef517468834-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>响应：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f2de9faecf2027304522\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n//...\r\n   {\r\n      \"id\":1,\r\n      \"name\":\"Paul\",\r\n      \"links\": [\r\n         {\r\n            \"rel\": \"salary\",\r\n            \"href\": \"/employees/1/salaryStatements\"\r\n         }\r\n      ]\r\n   },\r\n//...\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f2de9faecf2027304522-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2de9faecf2027304522-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f2de9faecf2027304522-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2de9faecf2027304522-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f2de9faecf2027304522-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2de9faecf2027304522-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f2de9faecf2027304522-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2de9faecf2027304522-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f2de9faecf2027304522-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2de9faecf2027304522-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f2de9faecf2027304522-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2de9faecf2027304522-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59f2de9faecf2027304522-13\">13</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f2de9faecf2027304522-1\"><span class=\"crayon-c\">//...</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2de9faecf2027304522-2\"><span class=\"crayon-h\">   </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f2de9faecf2027304522-3\"><span class=\"crayon-h\">      </span><span class=\"crayon-s\">\"id\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2de9faecf2027304522-4\"><span class=\"crayon-h\">      </span><span class=\"crayon-s\">\"name\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-s\">\"Paul\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f2de9faecf2027304522-5\"><span class=\"crayon-h\">      </span><span class=\"crayon-s\">\"links\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2de9faecf2027304522-6\"><span class=\"crayon-h\">         </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f2de9faecf2027304522-7\"><span class=\"crayon-h\">            </span><span class=\"crayon-s\">\"rel\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"salary\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2de9faecf2027304522-8\"><span class=\"crayon-h\">            </span><span class=\"crayon-s\">\"href\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"/employees/1/salaryStatements\"</span></div><div class=\"crayon-line\" id=\"crayon-59f2de9faecf2027304522-9\"><span class=\"crayon-h\">         </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2de9faecf2027304522-10\"><span class=\"crayon-h\">      </span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-59f2de9faecf2027304522-11\"><span class=\"crayon-h\">   </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2de9faecf2027304522-12\"><span class=\"crayon-c\">//...</span></div><div class=\"crayon-line\" id=\"crayon-59f2de9faecf2027304522-13\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p>如果客户端完全依靠<code>links</code>中的字段获得薪资表，你更改了API，客户端将始终获得一个有效的URL（只要你更改了<code>link</code>字段，请求的URL会自动更改），不会中断。另一个好处是，你的API变得可以自我描述，需要写的文档更少。<br>\n在分页时，您还可以添加获取下一页或上一页的链接示例。只需提供适当的偏移和限制的链接示例。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f2de9faecf6848310316\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nGET /employees?offset=20&amp;limit=10\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f2de9faecf6848310316-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2de9faecf6848310316-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f2de9faecf6848310316-1\"><span class=\"crayon-v\">GET</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">employees</span><span class=\"crayon-sy\">?</span><span class=\"crayon-v\">offset</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">20</span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">limit</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">10</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2de9faecf6848310316-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f2de9faecf9956167243\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n{\r\n  \"offset\": 20,\r\n  \"limit\": 10,\r\n  \"total\": 3465,\r\n  \"employees\": [\r\n    //...\r\n  ],\r\n  \"links\": [\r\n     {\r\n        \"rel\": \"nextPage\",\r\n        \"href\": \"/employees?offset=30&amp;limit=10\"\r\n     },\r\n     {\r\n        \"rel\": \"previousPage\",\r\n        \"href\": \"/employees?offset=10&amp;limit=10\"\r\n     }\r\n  ]\r\n}\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f2de9faecf9956167243-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2de9faecf9956167243-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f2de9faecf9956167243-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2de9faecf9956167243-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f2de9faecf9956167243-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2de9faecf9956167243-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f2de9faecf9956167243-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2de9faecf9956167243-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f2de9faecf9956167243-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2de9faecf9956167243-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f2de9faecf9956167243-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2de9faecf9956167243-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59f2de9faecf9956167243-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2de9faecf9956167243-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59f2de9faecf9956167243-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2de9faecf9956167243-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-59f2de9faecf9956167243-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2de9faecf9956167243-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-59f2de9faecf9956167243-19\">19</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f2de9faecf9956167243-1\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2de9faecf9956167243-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">\"offset\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f2de9faecf9956167243-3\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">\"limit\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2de9faecf9956167243-4\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">\"total\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3465</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f2de9faecf9956167243-5\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">\"employees\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2de9faecf9956167243-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">//...</span></div><div class=\"crayon-line\" id=\"crayon-59f2de9faecf9956167243-7\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2de9faecf9956167243-8\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">\"links\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span></div><div class=\"crayon-line\" id=\"crayon-59f2de9faecf9956167243-9\"><span class=\"crayon-h\">     </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2de9faecf9956167243-10\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"rel\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"nextPage\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f2de9faecf9956167243-11\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"href\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"/employees?offset=30&amp;limit=10\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2de9faecf9956167243-12\"><span class=\"crayon-h\">     </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f2de9faecf9956167243-13\"><span class=\"crayon-h\">     </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2de9faecf9956167243-14\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"rel\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"previousPage\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f2de9faecf9956167243-15\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"href\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"/employees?offset=10&amp;limit=10\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2de9faecf9956167243-16\"><span class=\"crayon-h\">     </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-59f2de9faecf9956167243-17\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2de9faecf9956167243-18\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-59f2de9faecf9956167243-19\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0017 seconds] -->\r\n<p></p>\n<h3 id=\"-\">相关阅读</h3>\n<ul>\n<li>作者写的一篇关于在<a href=\"https://blog.philipphauer.de/testing-restful-services-java-best-practices/\">Java中测试RESTful服务的最佳实践</a>的文章。</li>\n<li>作者强烈推荐一本书<a href=\"https://pages.apigee.com/rs/apigee/images/api-design-ebook-2012-03.pdf\">Brain Mulloy’s nice paper</a>，作为这篇文章的基础。</li>\n</ul>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112710\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112710votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112710\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 6 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": 1, "praise_nums": "1", "url_object_id": "f3de22799cae4329ae85b31dc708a396", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2015/08/544851c6c17d5b59f6fe22f223db85aa.png"], "front_image_path": "full/947d74929f5809c543dc9539bb00815a461c9e7c.jpg", "title": "RESTful API 设计最佳实践"}
{"create_date": "2017/10/24 ", "url": "http://blog.jobbole.com/112753/", "fav_nums": 1, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://www.61mon.com/index.php/archives/175/\">刘毅</a>   </div><h3>一：背景介绍</h3>\n<p>在一堆数中求其前k大或前k小的问题，简称TOP-K问题。而目前解决TOP-K问题最有效的算法即是”BFPRT算法”，又称为”中位数的中位数算法”，该算法由Blum、Floyd、Pratt、Rivest、Tarjan提出，最坏时间复杂度为$O(n)$。</p>\n<p>在首次接触TOP-K问题时，我们的第一反应就是可以先对所有数据进行一次排序，然后取其前k即可，但是这么做有两个问题：</p>\n<ul>\n<li>快速排序的平均复杂度为$O(nlogn)$，但最坏时间复杂度为$O(n^2)$，不能始终保证较好的复杂度。</li>\n<li>我们只需要前k大的，而对其余不需要的数也进行了排序，浪费了大量排序时间。</li>\n</ul>\n<p>除这种方法之外，堆排序也是一个比较好的选择，可以维护一个大小为k的堆，时间复杂度为$O(nlogk)$。</p>\n<p>那是否还存在更有效的方法呢？受到快速排序的启发，通过<strong>修改快速排序中主元的选取方法</strong>可以降低快速排序在<strong>最坏情况下的时间复杂度</strong>，并且我们的目的只是求出前k，故递归的规模变小，速度也随之提高。下面来简单回顾下快速排序的过程，以升序为例：</p>\n<p>（1）：选取主元（数组中随机一个元素）；<br>\n（2）：以选取的主元为分界点，把小于主元的放在左边，大于主元的放在右边；<br>\n（3）：分别对左边和右边进行递归，重复上述过程。</p>\n<p><span id=\"more-112753\"></span> <span id=\"menu_index_2\"></span></p>\n<h3>二：BFPRT算法过程及代码</h3>\n<p>BFPRT算法步骤如下：</p>\n<p>（1）：选取主元；<br>\n（1.1）：将n个元素划分为$⌊frac n5⌋$个组，每组5个元素，若有剩余，舍去；<br>\n（1.2）：使用插入排序找到$⌊frac n5⌋$个组中每一组的中位数；<br>\n（1.3）：对于（1.2）中找到的所有中位数，调用BFPRT算法求出它们的中位数，作为主元；<br>\n（2）：以（1.3）选取的主元为分界点，把小于主元的放在左边，大于主元的放在右边；<br>\n（3）：判断主元的位置与k的大小，有选择的对左边或右边递归。</p>\n<p>上面的描述可能并不易理解，先看下面这幅图：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/10/5bbd9517fcc7829ce1a5689afa13c379.png\" alt=\"\"></p>\n<p>BFPRT()调用GetPivotIndex()和Partition()来求解第k小，在这过程中，GetPivotIndex()也调用了BFPRT()，即GetPivotIndex)和BFPRT()为互递归的关系。</p>\n<p>下面为代码实现，其所求为<strong>前K小的数</strong>：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33410278d3972302696\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n/**\r\n * BFPRT算法（前K小数问题）\r\n *\r\n * author : 刘毅（Limer）\r\n * date   : 2017-01-25\r\n * mode   : C++\r\n */\r\n\r\n#include &lt;iostream&gt;\r\n#include &lt;algorithm&gt;\r\n\r\nusing namespace std;\r\n\r\n/* 插入排序，返回中位数下标 */\r\nint InsertSort(int array[], int left, int right)\r\n{\r\n    int temp;\r\n    int j;\r\n\r\n    for (int i = left + 1; i &lt;= right; i++)\r\n    {\r\n        temp = array[i];\r\n        j = i - 1;\r\n        while (j &gt;= left &amp;&amp; array[j] &gt; temp)\r\n            array[j + 1] = array[j--];\r\n        array[j + 1] = temp;\r\n    }\r\n\r\n    return ((right - left) &gt;&gt; 1) + left;\r\n}\r\n\r\n/* 返回中位数的中位数下标 */\r\n\r\nint BFPRT(int array[], int left, int right, const int &amp; k);\r\n\r\nint GetPivotIndex(int array[], int left, int right)\r\n{\r\n    if (right - left &lt; 5)\r\n        return InsertSort(array, left, right);\r\n\r\n    int sub_right = left - 1;\r\n\r\n    for (int i = left; i + 4 &lt;= right; i += 5)\r\n    {\r\n        int index = InsertSort(array, i, i + 4);  // 找到五个元素的中位数的下标\r\n        swap(array[++sub_right], array[index]);   // 依次放在左侧\r\n    }\r\n\r\n    return BFPRT(array, left, sub_right, ((sub_right - left + 1) &gt;&gt; 1) + 1);\r\n}\r\n\r\n/* 利用中位数的中位数的下标进行划分，返回分界线下标 */\r\nint Partition(int array[], int left, int right, int pivot_index)\r\n{\r\n    swap(array[pivot_index], array[right]);  // 把主元放置于末尾\r\n    int divide_index = left;                 // 跟踪划分的分界线\r\n\r\n    for (int i = left; i &lt; right; i++)\r\n    {\r\n        if (array[i] &lt; array[right])\r\n            swap(array[divide_index++], array[i]);  // 比主元小的都放在左侧\r\n    }\r\n\r\n    swap(array[divide_index], array[right]);  // 最后把主元换回来\r\n\r\n    return divide_index;\r\n}\r\n\r\nint BFPRT(int array[], int left, int right, const int &amp; k)\r\n{\r\n    int pivot_index = GetPivotIndex(array, left, right);            // 得到中位数的中位数下标\r\n    int divide_index = Partition(array, left, right, pivot_index);  // 进行划分，返回划分边界\r\n    int num = divide_index - left + 1;\r\n\r\n    if (num == k)\r\n        return divide_index;\r\n    else if (num &gt; k)\r\n        return BFPRT(array, left, divide_index - 1, k);\r\n    else\r\n        return BFPRT(array, divide_index + 1, right, k - num);\r\n}\r\n\r\nint main()\r\n{\r\n    int k = 5;\r\n    int array[10] = { 1,1,2,3,1,5,-1,7,8,-10 };\r\n\r\n    cout &lt;&lt; \"原数组：\";\r\n    for (int i = 0; i &lt; 10; i++)\r\n        cout &lt;&lt; array[i] &lt;&lt; \" \";\r\n    cout &lt;&lt; endl;\r\n\r\n    cout &lt;&lt; \"第\" &lt;&lt; k &lt;&lt; \"小值为：\" &lt;&lt; array[BFPRT(array, 0, 9, k)] &lt;&lt; endl;\r\n\r\n    cout &lt;&lt; \"变换后的数组：\";\r\n    for (int i = 0; i &lt; 10; i++)\r\n        cout &lt;&lt; array[i] &lt;&lt; \" \";\r\n    cout &lt;&lt; endl;\r\n\r\n    return 0;\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33410278d3972302696-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33410278d3972302696-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f33410278d3972302696-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33410278d3972302696-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f33410278d3972302696-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33410278d3972302696-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f33410278d3972302696-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33410278d3972302696-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f33410278d3972302696-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33410278d3972302696-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f33410278d3972302696-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33410278d3972302696-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59f33410278d3972302696-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33410278d3972302696-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59f33410278d3972302696-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33410278d3972302696-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-59f33410278d3972302696-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33410278d3972302696-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-59f33410278d3972302696-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33410278d3972302696-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-59f33410278d3972302696-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33410278d3972302696-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-59f33410278d3972302696-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33410278d3972302696-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-59f33410278d3972302696-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33410278d3972302696-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-59f33410278d3972302696-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33410278d3972302696-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-59f33410278d3972302696-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33410278d3972302696-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-59f33410278d3972302696-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33410278d3972302696-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-59f33410278d3972302696-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33410278d3972302696-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-59f33410278d3972302696-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33410278d3972302696-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-59f33410278d3972302696-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33410278d3972302696-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-59f33410278d3972302696-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33410278d3972302696-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-59f33410278d3972302696-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33410278d3972302696-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-59f33410278d3972302696-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33410278d3972302696-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-59f33410278d3972302696-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33410278d3972302696-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-59f33410278d3972302696-47\">47</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33410278d3972302696-48\">48</div><div class=\"crayon-num\" data-line=\"crayon-59f33410278d3972302696-49\">49</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33410278d3972302696-50\">50</div><div class=\"crayon-num\" data-line=\"crayon-59f33410278d3972302696-51\">51</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33410278d3972302696-52\">52</div><div class=\"crayon-num\" data-line=\"crayon-59f33410278d3972302696-53\">53</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33410278d3972302696-54\">54</div><div class=\"crayon-num\" data-line=\"crayon-59f33410278d3972302696-55\">55</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33410278d3972302696-56\">56</div><div class=\"crayon-num\" data-line=\"crayon-59f33410278d3972302696-57\">57</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33410278d3972302696-58\">58</div><div class=\"crayon-num\" data-line=\"crayon-59f33410278d3972302696-59\">59</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33410278d3972302696-60\">60</div><div class=\"crayon-num\" data-line=\"crayon-59f33410278d3972302696-61\">61</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33410278d3972302696-62\">62</div><div class=\"crayon-num\" data-line=\"crayon-59f33410278d3972302696-63\">63</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33410278d3972302696-64\">64</div><div class=\"crayon-num\" data-line=\"crayon-59f33410278d3972302696-65\">65</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33410278d3972302696-66\">66</div><div class=\"crayon-num\" data-line=\"crayon-59f33410278d3972302696-67\">67</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33410278d3972302696-68\">68</div><div class=\"crayon-num\" data-line=\"crayon-59f33410278d3972302696-69\">69</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33410278d3972302696-70\">70</div><div class=\"crayon-num\" data-line=\"crayon-59f33410278d3972302696-71\">71</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33410278d3972302696-72\">72</div><div class=\"crayon-num\" data-line=\"crayon-59f33410278d3972302696-73\">73</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33410278d3972302696-74\">74</div><div class=\"crayon-num\" data-line=\"crayon-59f33410278d3972302696-75\">75</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33410278d3972302696-76\">76</div><div class=\"crayon-num\" data-line=\"crayon-59f33410278d3972302696-77\">77</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33410278d3972302696-78\">78</div><div class=\"crayon-num\" data-line=\"crayon-59f33410278d3972302696-79\">79</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33410278d3972302696-80\">80</div><div class=\"crayon-num\" data-line=\"crayon-59f33410278d3972302696-81\">81</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33410278d3972302696-82\">82</div><div class=\"crayon-num\" data-line=\"crayon-59f33410278d3972302696-83\">83</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33410278d3972302696-84\">84</div><div class=\"crayon-num\" data-line=\"crayon-59f33410278d3972302696-85\">85</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33410278d3972302696-86\">86</div><div class=\"crayon-num\" data-line=\"crayon-59f33410278d3972302696-87\">87</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33410278d3972302696-88\">88</div><div class=\"crayon-num\" data-line=\"crayon-59f33410278d3972302696-89\">89</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33410278d3972302696-90\">90</div><div class=\"crayon-num\" data-line=\"crayon-59f33410278d3972302696-91\">91</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33410278d3972302696-92\">92</div><div class=\"crayon-num\" data-line=\"crayon-59f33410278d3972302696-93\">93</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33410278d3972302696-94\">94</div><div class=\"crayon-num\" data-line=\"crayon-59f33410278d3972302696-95\">95</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33410278d3972302696-96\">96</div><div class=\"crayon-num\" data-line=\"crayon-59f33410278d3972302696-97\">97</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33410278d3972302696-98\">98</div><div class=\"crayon-num\" data-line=\"crayon-59f33410278d3972302696-99\">99</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33410278d3972302696-100\">100</div><div class=\"crayon-num\" data-line=\"crayon-59f33410278d3972302696-101\">101</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33410278d3972302696-1\"><span class=\"crayon-c\">/**</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33410278d3972302696-2\"><span class=\"crayon-c\"> * BFPRT算法（前K小数问题）</span></div><div class=\"crayon-line\" id=\"crayon-59f33410278d3972302696-3\"><span class=\"crayon-c\"> *</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33410278d3972302696-4\"><span class=\"crayon-c\"> * author : 刘毅（Limer）</span></div><div class=\"crayon-line\" id=\"crayon-59f33410278d3972302696-5\"><span class=\"crayon-c\"> * date   : 2017-01-25</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33410278d3972302696-6\"><span class=\"crayon-c\"> * mode   : C++</span></div><div class=\"crayon-line\" id=\"crayon-59f33410278d3972302696-7\"><span class=\"crayon-c\"> */</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33410278d3972302696-8\"> </div><div class=\"crayon-line\" id=\"crayon-59f33410278d3972302696-9\"><span class=\"crayon-p\">#include &lt;iostream&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33410278d3972302696-10\"><span class=\"crayon-p\">#include &lt;algorithm&gt;</span></div><div class=\"crayon-line\" id=\"crayon-59f33410278d3972302696-11\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33410278d3972302696-12\"><span class=\"crayon-e\">using </span><span class=\"crayon-t\">namespace</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">std</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33410278d3972302696-13\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33410278d3972302696-14\"><span class=\"crayon-c\">/* 插入排序，返回中位数下标 */</span></div><div class=\"crayon-line\" id=\"crayon-59f33410278d3972302696-15\"><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">InsertSort</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">left</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">right</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33410278d3972302696-16\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f33410278d3972302696-17\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">temp</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33410278d3972302696-18\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33410278d3972302696-19\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33410278d3972302696-20\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">left</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">right</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f33410278d3972302696-21\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33410278d3972302696-22\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">temp</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33410278d3972302696-23\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33410278d3972302696-24\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">while</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">left</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">temp</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f33410278d3972302696-25\"><span class=\"crayon-h\">            </span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">--</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33410278d3972302696-26\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">temp</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33410278d3972302696-27\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33410278d3972302696-28\"> </div><div class=\"crayon-line\" id=\"crayon-59f33410278d3972302696-29\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">right</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">left</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">left</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33410278d3972302696-30\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-59f33410278d3972302696-31\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33410278d3972302696-32\"><span class=\"crayon-c\">/* 返回中位数的中位数下标 */</span></div><div class=\"crayon-line\" id=\"crayon-59f33410278d3972302696-33\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33410278d3972302696-34\"><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">BFPRT</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">left</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">right</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">k</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33410278d3972302696-35\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33410278d3972302696-36\"><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">GetPivotIndex</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">left</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">right</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f33410278d3972302696-37\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33410278d3972302696-38\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">right</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">left</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f33410278d3972302696-39\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">InsertSort</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">left</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">right</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33410278d3972302696-40\"> </div><div class=\"crayon-line\" id=\"crayon-59f33410278d3972302696-41\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sub_right</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">left</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33410278d3972302696-42\"> </div><div class=\"crayon-line\" id=\"crayon-59f33410278d3972302696-43\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">left</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">right</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33410278d3972302696-44\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f33410278d3972302696-45\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">index</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">InsertSort</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span><span class=\"crayon-c\">// 找到五个元素的中位数的下标</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33410278d3972302696-46\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">swap</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">++</span><span class=\"crayon-v\">sub_right</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">index</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">   </span><span class=\"crayon-c\">// 依次放在左侧</span></div><div class=\"crayon-line\" id=\"crayon-59f33410278d3972302696-47\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33410278d3972302696-48\"> </div><div class=\"crayon-line\" id=\"crayon-59f33410278d3972302696-49\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">BFPRT</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">left</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sub_right</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">sub_right</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">left</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33410278d3972302696-50\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-59f33410278d3972302696-51\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33410278d3972302696-52\"><span class=\"crayon-c\">/* 利用中位数的中位数的下标进行划分，返回分界线下标 */</span></div><div class=\"crayon-line\" id=\"crayon-59f33410278d3972302696-53\"><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Partition</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">left</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">right</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pivot_index</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33410278d3972302696-54\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f33410278d3972302696-55\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">swap</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">pivot_index</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">right</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span><span class=\"crayon-c\">// 把主元放置于末尾</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33410278d3972302696-56\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">divide_index</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">left</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">                 </span><span class=\"crayon-c\">// 跟踪划分的分界线</span></div><div class=\"crayon-line\" id=\"crayon-59f33410278d3972302696-57\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33410278d3972302696-58\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">left</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">right</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f33410278d3972302696-59\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33410278d3972302696-60\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">right</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f33410278d3972302696-61\"><span class=\"crayon-h\">            </span><span class=\"crayon-e\">swap</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">divide_index</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span><span class=\"crayon-c\">// 比主元小的都放在左侧</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33410278d3972302696-62\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-59f33410278d3972302696-63\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33410278d3972302696-64\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">swap</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">divide_index</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">right</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span><span class=\"crayon-c\">// 最后把主元换回来</span></div><div class=\"crayon-line\" id=\"crayon-59f33410278d3972302696-65\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33410278d3972302696-66\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">divide_index</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33410278d3972302696-67\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33410278d3972302696-68\"> </div><div class=\"crayon-line\" id=\"crayon-59f33410278d3972302696-69\"><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">BFPRT</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">left</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">right</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">k</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33410278d3972302696-70\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f33410278d3972302696-71\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pivot_index</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">GetPivotIndex</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">left</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">right</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">            </span><span class=\"crayon-c\">// 得到中位数的中位数下标</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33410278d3972302696-72\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">divide_index</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Partition</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">left</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">right</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pivot_index</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span><span class=\"crayon-c\">// 进行划分，返回划分边界</span></div><div class=\"crayon-line\" id=\"crayon-59f33410278d3972302696-73\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">num</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">divide_index</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">left</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33410278d3972302696-74\"> </div><div class=\"crayon-line\" id=\"crayon-59f33410278d3972302696-75\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">num</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">k</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33410278d3972302696-76\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">divide_index</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33410278d3972302696-77\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">num</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">k</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33410278d3972302696-78\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">BFPRT</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">left</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">divide_index</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">k</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33410278d3972302696-79\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">else</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33410278d3972302696-80\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">BFPRT</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">divide_index</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">right</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">k</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">num</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33410278d3972302696-81\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33410278d3972302696-82\"> </div><div class=\"crayon-line\" id=\"crayon-59f33410278d3972302696-83\"><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">main</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33410278d3972302696-84\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f33410278d3972302696-85\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">k</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33410278d3972302696-86\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">,</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">10</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33410278d3972302696-87\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33410278d3972302696-88\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">cout</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"原数组：\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33410278d3972302696-89\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33410278d3972302696-90\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">cout</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\" \"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33410278d3972302696-91\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">cout</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">endl</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33410278d3972302696-92\"> </div><div class=\"crayon-line\" id=\"crayon-59f33410278d3972302696-93\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">cout</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"第\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">k</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"小值为：\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-e\">BFPRT</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">k</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">endl</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33410278d3972302696-94\"> </div><div class=\"crayon-line\" id=\"crayon-59f33410278d3972302696-95\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">cout</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"变换后的数组：\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33410278d3972302696-96\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f33410278d3972302696-97\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">cout</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\" \"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33410278d3972302696-98\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">cout</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">endl</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33410278d3972302696-99\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33410278d3972302696-100\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33410278d3972302696-101\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0170 seconds] -->\r\n<p><code></code>运行如下：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/10/7f4233b03fbad0d9b681860edf4a1bc3.png\" alt=\"\"></p>\n<h3>三：时间复杂度分析</h3>\n<p> </p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/10/d206bda7b56cbfee9973074ed8eac16b.png\"><img class=\"alignnone size-full wp-image-112756\" src=\"http://jbcdn2.b0.upaiyun.com/2017/10/d206bda7b56cbfee9973074ed8eac16b.png\" alt=\"QQ截图20171024111911\"></a></p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/10/e4022c9658a1f141e7c9a66c6b4d1626.png\"><img class=\"alignnone size-full wp-image-112757\" src=\"http://jbcdn2.b0.upaiyun.com/2017/10/e4022c9658a1f141e7c9a66c6b4d1626.png\" alt=\"QQ截图20171024112045\"></a></p>\n<h3>四：参考文献</h3>\n<ul>\n<li>算法导论（第3版）. Page 120.</li>\n</ul>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112753\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112753votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112753\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": 1, "praise_nums": "1", "url_object_id": "27bf36e3e84699824cd884b8b80ea7f6", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2014/10/a1a4de99de0c75eab712542a7dac876f.png"], "front_image_path": "full/30fcdf79d0b901a9dde107f5e6e10f11fd95d574.jpg", "title": "BFPRT 算法（TOP-K问题）"}
{"create_date": "2017/09/30 ", "url": "http://blog.jobbole.com/112567/", "fav_nums": "  收藏", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://opensource.com/article/17/9/9-open-source-software-rules-startups\">Heather Meeker</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-8917-1.html\">Linux中国/薛亮</a>   </div><p><img class=\"image-full-size\" title=\"9 open source license rules for startups\" src=\"https://opensource.com/sites/default/files/styles/image-full-size/public/lead-images/law_legal_gavel_court.jpg?itok=tc27pzjI\" alt=\"9 open source license rules for startups\" width=\"520\" height=\"292\"></p>\n<blockquote><p>开源软件虽然可以免费使用，但就如同饲养一条<a href=\"https://linux.cn/article-8680-1.html\">幼犬一样</a>（开始虽然花钱不多，后边越养越费钱）。在采用开源之前，确保能够了解其隐藏的成本和陷阱。</p></blockquote>\n<p>对于初创公司来说，开源软件是一把双刃剑。它可以成为一家创业公司的生命线，因为开源软件可以帮助初创企业快速创新，而不必从头开始。不过，正如<a href=\"http://www.zdnet.com/article/open-source-is-free-like-a-puppy-is-free-says-sun-boss-3039202713/\">有些人所说的</a>，开源软件虽然可以免费使用，但就如同饲养一条<a href=\"https://linux.cn/article-8680-1.html\">幼犬</a>一样，开始虽然花钱不多，后边越养越费钱。开源软件的真正代价是开源许可证合规成本。</p>\n<p>滥用开源软件可能会造成获得投资的机遇被延迟或破坏。但是，如果遵守这些简单的法则，初创企业可以轻松地实现开源许可证合规。</p>\n<h3>法则一：不使用没有许可条款的软件</h3>\n<p>互联网上的一些软件不包含许可证通知，但这不意味它们可以自由使用。发布软件的人可能没有遵守上游许可条款。或者软件的作者可能尚未为其软件指定许可协议——无论是以开源方式亦或是其他方式。“没有许可条款”是指没有许可证：您应该避免使用该软件或要求作者为其该软件指定许可证。</p>\n<h3>法则二：不要违反开源许可证</h3>\n<p>开源软件的使用可能难以让其作者进行追踪，但并不意味着该软件的使用和不合规行为会被忽视。违反开源许可证可能会使初创公司面临法律责任和公众谴责，甚至可能会影响其被投资或收购。也可能导致潜在客户由于担心下游责任而拒绝购买您的产品。软件开发人员为实现其软件开源付出了巨大的努力，其中也包括上述的许可费用。滥用开源软件对这些开发人员是不公平的，并且损害了他们希望促成的创新。</p>\n<h3>法则三：跟踪您正在使用的软件</h3>\n<p>将来有一天您将必须提供您正在使用的开源软件的列表。及时维护该列表将会为您节约大量的时间和精力，因为潜在的投资者和收购方将会要求您提供该列表。大多数开源软件下载包中都包括一个 “license.txt” 或 “copy.txt” 文件。保留该许可证的副本，并记录其涵盖的软件。大多数创业公司都使用简单的电子表格跟踪软件许可情况。</p>\n<h3>法则四：了解宽松（permissive）许可证和左版（copyleft）许可证</h3>\n<p>开源许可证大致分为两种类型：宽松许可证（BSD、MIT 和 Apache）和左版许可证（GPL、LGPL、Eclipse 公共许可证、Mozilla 公共许可证以及通用开发和分发许可证（Common Development and Distribution License））。大多数公司及其客户对于使用遵循宽松许可证的软件没有什么法律上的担心。不过，遵循左版许可证需要更加谨慎，将软件保留为专有可能会与某些特定计划不一致。</p>\n<h3>法则五：遵守许可证通知（notice）要求</h3>\n<p>无论是宽松许可证还是左版许可证，所有开源许可都有通知要求。通常，这意味着在分发开源软件时，您需要包含其所适用的许可证的副本，仅仅包括许可证的链接或缩略形式通常是不完备的。为了避免混淆或疏离您的客户，开发一个符合大多数开源许可证的通知传送策略非常重要。</p>\n<h3>法则六：了解哪些开源许可证与分布式软件兼容</h3>\n<p>除了 Affero GPL 之外，大多数开源许可证都没有涉及软件即服务（SaaS）的情境。对于 SaaS 和云系统的分布式组件（如 JavaScript）或分布式软件（包括移动 APP 和测试版），您可以使用遵循宽松许可证的软件，但在使用遵循左版许可证的软件之前，您需要特别小心。仅在其完全在自己的进程中执行并且没有链接的代码时才去使用遵循 GPL 的软件，而不要相信以下如何让 GPL 合规的谣传：动态链接至 GPL 代码或让客户下载 GPL 软件。仅将 LGPL 软件作为动态链接库进行使用。在不修改 API 的前提下使用遵循其它左版许可证的软件。遵循移动 APP 市场的分发规定也许与遵循某些特定的左版许可证有冲突（例如 GPL 或者 LGPL）。</p>\n<h3>法则七：在咨询律师之前不要贡献或发布开源软件</h3>\n<p>贡献和发布开源软件可能是公众的福音，但它可能不是您业务上的正确选择。一旦作出贡献或发布，您在软件中拥有的任何知识产权将不大可能构成您公司估值的依据。您的律师可以帮助您更好地理解在专有和开源软件之间如何选择，并对这一重要业务决策提供指导。</p>\n<h3>法则八：确保您的员工和第三方开发人员遵守这些规则</h3>\n<p>不管是由于您的员工或第三方承包商造成的开源违规行为，所引起的法律和宣传问题都将砸在您的头上。您可以通过适当的培训和跟踪开源软件来避免这些问题。</p>\n<h3>法则九：规划未来</h3>\n<p>初创公司业务模式可以快速变化。SaaS 模式可以快速转变为分布式软件模式。无论您当前的模式是什么，遵守分布式软件的规则将为您转变为分布式软件模式提供更大的灵活性，而无需删除某些开源软件并更改相关功能。</p>\n<p>采用这些法则将有助于初创企业利用开源软件的优势，降低您在获取投资或收购时遇到的风险。对您的初创企业感兴趣的第三方想知道您如何应对开源软件问题，确保您做好准备，并能够为他们提供积极和专业的答案。</p>\n<p>（题图：Beth Cortez-Neavel on <a href=\"https://www.flickr.com/photos/bethcortez-neavel/20699620022/in/photolist-xx9XSo-J67oFV-HgKMCn-HgzdGJ-bkUna-2wRkRj-7YyQVU-3qh3b-4NfW6z-hSgKH-4ptqkF-94f4rj-BTiPf-6xefv-HgzeVW-HgzfsC-Hgzhu3-HgKKZ2-HgKLfT-HgKKL6-HgKKt2-HgKMgv-HM7Aay-HgKN2D-J67umH-HM7AZE-J3NbSo-njSSUk-iR9Qu-5rL5ir-diemDY-8Z9WVL-p7WG5N-qzaAGY-CpEMP-8dfgUR-79XouB-nyeBRi-amefJV-skzdFQ-dC2WNi-JBvYCS-tiNzYh-rr4bkB-s6gMPL-dnJpcc-p1xZmV-4emQku-9SpCY6-e4wRz6\" target=\"_blank\" rel=\"noopener noreferrer\">Flickr</a>. Public Domain. Modified by Opensource.com）</p>\n<hr>\n<p>作者简介：Heather Meeker 是 O’Melveny &amp; Myers 硅谷办公室的合伙人，为客户提供技术交易和知识产权方面的建议，是国际知名的开源软件许可专家。Heather 于 2016 年获得加州律师协会知识产权先锋奖。《最佳律师》（Best Lawyers）将她提名为 2018 年年度 IT 律师。</p>\n<p>译者简介：薛亮，集慧智佳知识产权咨询公司高级咨询师，擅长专利检索、专利分析、竞争对手跟踪、FTO 分析、开源软件知识产权风险分析，致力于为互联网企业、高科技公司提供知识产权咨询服务。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112567\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112567votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112567\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": "  评论", "praise_nums": "1", "url_object_id": "d660eece21c1e9d06cda92a498ad48d4", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2013/04/open-source-copyright-01.jpg"], "front_image_path": "full/462d1b674719cc4cdca20e0d66fd634b8a57124f.jpg", "title": "初创企业开源许可证管理九大法则"}
{"create_date": "2017/09/22 ", "url": "http://blog.jobbole.com/112535/", "fav_nums": 2, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"http://mylinuxbook.com/di-a-disk-information-utility/\">MyLinuxBook</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-2187-1.html\">Linux中国/Luoxcat</a>   </div><p>如果你是个Linux命令行用户，你肯定会使用df命令检查文件系统的磁盘使用情况。尽管df是一个受欢迎的命令，但仍然不能提供一些高级的功能，如一个用户实际的磁盘可用空间，以及各种有用的显示格式等。还有另一个命令行实用工具可用，不仅提供了这些高级功能也提供了df的所有特性。在本文中,我们将讨论磁盘信息工具 — <strong>di</strong></p>\n<p><strong><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/6651cf008d33392633d7cfe2a111763f.png\" alt=\"\" width=\"256\" height=\"256\"><br>\n</strong></p>\n<p><strong>注释</strong> – 如果你想了解 df 更多信息, 查看 <a href=\"http://www.expertslogin.com/linux-command/linux-df-command/\" target=\"_blank\" rel=\"external nofollow\">df命令教程</a>.</p>\n<h3><strong>di – 磁盘信息工具</strong></h3>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/09/84daa200e90a8eb835d9c00156abcc85.png\" alt=\"\" width=\"535\" height=\"211\"></p>\n<p>从这个di帮助手册页很明显的发现 di 提供了一些很有价值的特性，值得一试。让我们看一些这个工具实际使用的例子。</p>\n<h3><strong>测试环境</strong></h3>\n<ul>\n<li>OS – Ubuntu 13.04</li>\n<li>Shell – Bash 4.2.45</li>\n<li>Application – di 4.30</li>\n</ul>\n<h2><strong>一个简短的教程</strong></h2>\n<p>下面是一些 di 工具的示例:</p>\n<h3><strong>1. 默认的输出</strong></h3>\n<p>默认情况下di命令生成人们易读的输出格式</p>\n<p>这里有个示例:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33c74b1d5e847258705\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ di\r\nFilesystem         Mount               Size     Used    Avail %Used  fs Type \r\n/dev/sda6          /                  28.1G    20.2G     6.5G   77%  ext4    \r\nudev               /dev                1.5G     0.0G     1.5G    0%  devtmpfs\r\ntmpfs              /run              300.2M     0.9M   299.3M    0%  tmpfs</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33c74b1d5e847258705-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c74b1d5e847258705-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f33c74b1d5e847258705-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c74b1d5e847258705-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f33c74b1d5e847258705-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33c74b1d5e847258705-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">di</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c74b1d5e847258705-2\"><span class=\"crayon-e\">Filesystem         </span><span class=\"crayon-e\">Mount               </span><span class=\"crayon-e\">Size     </span><span class=\"crayon-e\">Used    </span><span class=\"crayon-v\">Avail</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-e\">Used  </span><span class=\"crayon-e\">fs </span><span class=\"crayon-v\">Type</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-59f33c74b1d5e847258705-3\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">dev</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sda6</span><span class=\"crayon-h\">          </span><span class=\"crayon-o\">/</span><span class=\"crayon-h\">                  </span><span class=\"crayon-cn\">28.1G</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">20.2G</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">6.5G</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">77</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">ext4    </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c74b1d5e847258705-4\"><span class=\"crayon-v\">udev</span><span class=\"crayon-h\">               </span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">dev</span><span class=\"crayon-h\">                </span><span class=\"crayon-cn\">1.5G</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0.0G</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">1.5G</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">devtmpfs</span></div><div class=\"crayon-line\" id=\"crayon-59f33c74b1d5e847258705-5\"><span class=\"crayon-v\">tmpfs</span><span class=\"crayon-h\">              </span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">run</span><span class=\"crayon-h\">              </span><span class=\"crayon-cn\">300.2M</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0.9M</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">299.3M</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">tmpfs</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0015 seconds] -->\r\n<p>所以你能发现用千兆字节(G)和兆字节(M)做磁盘使用情况的数据单位。这绝对是比 df 默认的输出产生的效果好。（译注：df也可以输出带类似单位的显示，只是需要额外加参数 -h）</p>\n<h3><strong>2. 用 -A 选项打印类似挂载点、特殊设备名称等全部字段</strong></h3>\n<p>选项 -A可以用来极详细的打印挂载点，特殊设备名称等。</p>\n<p>这里有个示例:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33c74b1d68290695030\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ di -A\r\nMount fs Type  Filesystem \r\n     Options                             \r\n        Size     Used     Free %Used  %Free \r\n        Size     Used    Avail %Used  %Free \r\n        Size     Used    Avail %Used  \r\n       Inodes     Iused     Ifree %Iused\r\n/     ext4     /dev/sda6  \r\n    rw,errors=remount-ro                \r\n       28.1G    20.2G     8.0G   72%    28%  \r\n       28.1G    21.6G     6.5G   77%    23%  \r\n       26.7G    20.2G     6.5G   75%  \r\n      1884160    389881   1494279   21% \r\n/dev  devtmpfs udev       \r\n    rw,mode=0755                        \r\n        1.5G     0.0G     1.5G    0%   100%  \r\n        1.5G     0.0G     1.5G    0%   100%  \r\n        1.5G     0.0G     1.5G    0%  \r\n       381805       571    381234    0% \r\n/run  tmpfs    tmpfs      \r\n    rw,noexec,nosuid,size=10%,mode=0755 \r\n      300.2M     0.9M   299.3M    0%   100%  \r\n      300.2M     0.9M   299.3M    0%   100%  \r\n      300.2M     0.9M   299.3M    0%  \r\n       384191       549    383642    0%</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33c74b1d68290695030-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c74b1d68290695030-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f33c74b1d68290695030-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c74b1d68290695030-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f33c74b1d68290695030-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c74b1d68290695030-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f33c74b1d68290695030-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c74b1d68290695030-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f33c74b1d68290695030-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c74b1d68290695030-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f33c74b1d68290695030-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c74b1d68290695030-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59f33c74b1d68290695030-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c74b1d68290695030-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59f33c74b1d68290695030-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c74b1d68290695030-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-59f33c74b1d68290695030-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c74b1d68290695030-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-59f33c74b1d68290695030-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c74b1d68290695030-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-59f33c74b1d68290695030-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c74b1d68290695030-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-59f33c74b1d68290695030-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c74b1d68290695030-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-59f33c74b1d68290695030-25\">25</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33c74b1d68290695030-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">di</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">A</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c74b1d68290695030-2\"><span class=\"crayon-e\">Mount </span><span class=\"crayon-e\">fs </span><span class=\"crayon-e\">Type  </span><span class=\"crayon-e\">Filesystem </span></div><div class=\"crayon-line\" id=\"crayon-59f33c74b1d68290695030-3\"><span class=\"crayon-e\">     </span><span class=\"crayon-e\">Options                             </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c74b1d68290695030-4\"><span class=\"crayon-e\">        </span><span class=\"crayon-e\">Size     </span><span class=\"crayon-e\">Used     </span><span class=\"crayon-v\">Free</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-v\">Used</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">%</span><span class=\"crayon-e\">Free </span></div><div class=\"crayon-line\" id=\"crayon-59f33c74b1d68290695030-5\"><span class=\"crayon-e\">        </span><span class=\"crayon-e\">Size     </span><span class=\"crayon-e\">Used    </span><span class=\"crayon-v\">Avail</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-v\">Used</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">%</span><span class=\"crayon-e\">Free </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c74b1d68290695030-6\"><span class=\"crayon-e\">        </span><span class=\"crayon-e\">Size     </span><span class=\"crayon-e\">Used    </span><span class=\"crayon-v\">Avail</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-e\">Used  </span></div><div class=\"crayon-line\" id=\"crayon-59f33c74b1d68290695030-7\"><span class=\"crayon-e\">       </span><span class=\"crayon-e\">Inodes     </span><span class=\"crayon-e\">Iused     </span><span class=\"crayon-v\">Ifree</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-v\">Iused</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c74b1d68290695030-8\"><span class=\"crayon-o\">/</span><span class=\"crayon-h\">     </span><span class=\"crayon-v\">ext4</span><span class=\"crayon-h\">     </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">dev</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">sda6  </span></div><div class=\"crayon-line\" id=\"crayon-59f33c74b1d68290695030-9\"><span class=\"crayon-e\">    </span><span class=\"crayon-v\">rw</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">errors</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">remount</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">ro</span><span class=\"crayon-h\">                </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c74b1d68290695030-10\"><span class=\"crayon-h\">       </span><span class=\"crayon-cn\">28.1G</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">20.2G</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">8.0G</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">72</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">28</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-59f33c74b1d68290695030-11\"><span class=\"crayon-h\">       </span><span class=\"crayon-cn\">28.1G</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">21.6G</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">6.5G</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">77</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">23</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c74b1d68290695030-12\"><span class=\"crayon-h\">       </span><span class=\"crayon-cn\">26.7G</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">20.2G</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">6.5G</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">75</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-59f33c74b1d68290695030-13\"><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">1884160</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">389881</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">1494279</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">21</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c74b1d68290695030-14\"><span class=\"crayon-o\">/</span><span class=\"crayon-e\">dev  </span><span class=\"crayon-e\">devtmpfs </span><span class=\"crayon-e\">udev       </span></div><div class=\"crayon-line\" id=\"crayon-59f33c74b1d68290695030-15\"><span class=\"crayon-e\">    </span><span class=\"crayon-v\">rw</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">mode</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0755</span><span class=\"crayon-h\">                        </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c74b1d68290695030-16\"><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">1.5G</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0.0G</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">1.5G</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">100</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-59f33c74b1d68290695030-17\"><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">1.5G</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0.0G</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">1.5G</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">100</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c74b1d68290695030-18\"><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">1.5G</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0.0G</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">1.5G</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-59f33c74b1d68290695030-19\"><span class=\"crayon-h\">       </span><span class=\"crayon-cn\">381805</span><span class=\"crayon-h\">       </span><span class=\"crayon-cn\">571</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">381234</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c74b1d68290695030-20\"><span class=\"crayon-o\">/</span><span class=\"crayon-e\">run  </span><span class=\"crayon-e\">tmpfs    </span><span class=\"crayon-e\">tmpfs      </span></div><div class=\"crayon-line\" id=\"crayon-59f33c74b1d68290695030-21\"><span class=\"crayon-e\">    </span><span class=\"crayon-v\">rw</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">noexec</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">nosuid</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">size</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">10</span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">mode</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0755</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c74b1d68290695030-22\"><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">300.2M</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0.9M</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">299.3M</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">100</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-59f33c74b1d68290695030-23\"><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">300.2M</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0.9M</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">299.3M</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">100</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c74b1d68290695030-24\"><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">300.2M</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0.9M</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">299.3M</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-59f33c74b1d68290695030-25\"><span class=\"crayon-h\">       </span><span class=\"crayon-cn\">384191</span><span class=\"crayon-h\">       </span><span class=\"crayon-cn\">549</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">383642</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">%</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0046 seconds] -->\r\n<p>所以你可以看到所有的字段，可以用于调试目的时打印输出。</p>\n<h3><strong>3. 用 -a选项打印所有挂载设备</strong></h3>\n<p>这里是个示例:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33c74b1d6d668718201\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ di -a\r\nFilesystem         Mount               Size     Used    Avail %Used  fs Type        \r\n/dev/sda6          /                  28.1G    20.2G     6.5G   77%  ext4           \r\nudev               /dev                1.5G     0.0G     1.5G    0%  devtmpfs       \r\ndevpts             /dev/pts            0.0M     0.0M     0.0M    0%  devpts         \r\nproc               /proc               0.0M     0.0M     0.0M    0%  proc           \r\nbinfmt_misc        /proc/sys/fs/bi     0.0M     0.0M     0.0M    0%  binfmt_misc    \r\ntmpfs              /run              300.2M     0.9M   299.3M    0%  tmpfs          \r\nnone               /run/lock           0.0M     0.0M     0.0M    0%  tmpfs          \r\nnone               /run/shm            0.0M     0.0M     0.0M    0%  tmpfs          \r\nnone               /run/user           0.0M     0.0M     0.0M    0%  tmpfs          \r\ngvfsd-fuse         /run/user/himan     0.0M     0.0M     0.0M    0%  fuse.gvfsd-fuse\r\nsysfs              /sys                0.0M     0.0M     0.0M    0%  sysfs          \r\nnone               /sys/fs/cgroup      0.0M     0.0M     0.0M    0%  tmpfs          \r\nnone               /sys/fs/fuse/co     0.0M     0.0M     0.0M    0%  fusectl        \r\nnone               /sys/kernel/deb     0.0M     0.0M     0.0M    0%  debugfs        \r\nnone               /sys/kernel/sec     0.0M     0.0M     0.0M    0%  securityfs</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33c74b1d6d668718201-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c74b1d6d668718201-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f33c74b1d6d668718201-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c74b1d6d668718201-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f33c74b1d6d668718201-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c74b1d6d668718201-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f33c74b1d6d668718201-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c74b1d6d668718201-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f33c74b1d6d668718201-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c74b1d6d668718201-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f33c74b1d6d668718201-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c74b1d6d668718201-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59f33c74b1d6d668718201-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c74b1d6d668718201-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59f33c74b1d6d668718201-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c74b1d6d668718201-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-59f33c74b1d6d668718201-17\">17</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33c74b1d6d668718201-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">di</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">a</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c74b1d6d668718201-2\"><span class=\"crayon-e\">Filesystem         </span><span class=\"crayon-e\">Mount               </span><span class=\"crayon-e\">Size     </span><span class=\"crayon-e\">Used    </span><span class=\"crayon-v\">Avail</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-e\">Used  </span><span class=\"crayon-e\">fs </span><span class=\"crayon-v\">Type</span><span class=\"crayon-h\">        </span></div><div class=\"crayon-line\" id=\"crayon-59f33c74b1d6d668718201-3\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">dev</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sda6</span><span class=\"crayon-h\">          </span><span class=\"crayon-o\">/</span><span class=\"crayon-h\">                  </span><span class=\"crayon-cn\">28.1G</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">20.2G</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">6.5G</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">77</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">ext4           </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c74b1d6d668718201-4\"><span class=\"crayon-v\">udev</span><span class=\"crayon-h\">               </span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">dev</span><span class=\"crayon-h\">                </span><span class=\"crayon-cn\">1.5G</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0.0G</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">1.5G</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">devtmpfs       </span></div><div class=\"crayon-line\" id=\"crayon-59f33c74b1d6d668718201-5\"><span class=\"crayon-v\">devpts</span><span class=\"crayon-h\">             </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">dev</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">pts</span><span class=\"crayon-h\">            </span><span class=\"crayon-cn\">0.0M</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0.0M</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0.0M</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">devpts         </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c74b1d6d668718201-6\"><span class=\"crayon-v\">proc</span><span class=\"crayon-h\">               </span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">proc</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">0.0M</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0.0M</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0.0M</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">proc           </span></div><div class=\"crayon-line\" id=\"crayon-59f33c74b1d6d668718201-7\"><span class=\"crayon-v\">binfmt_misc</span><span class=\"crayon-h\">        </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">proc</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sys</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">fs</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">bi</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0.0M</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0.0M</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0.0M</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">binfmt_misc    </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c74b1d6d668718201-8\"><span class=\"crayon-v\">tmpfs</span><span class=\"crayon-h\">              </span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">run</span><span class=\"crayon-h\">              </span><span class=\"crayon-cn\">300.2M</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0.9M</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">299.3M</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">tmpfs          </span></div><div class=\"crayon-line\" id=\"crayon-59f33c74b1d6d668718201-9\"><span class=\"crayon-v\">none</span><span class=\"crayon-h\">               </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">run</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">lock</span><span class=\"crayon-h\">           </span><span class=\"crayon-cn\">0.0M</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0.0M</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0.0M</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">tmpfs          </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c74b1d6d668718201-10\"><span class=\"crayon-v\">none</span><span class=\"crayon-h\">               </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">run</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">shm</span><span class=\"crayon-h\">            </span><span class=\"crayon-cn\">0.0M</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0.0M</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0.0M</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">tmpfs          </span></div><div class=\"crayon-line\" id=\"crayon-59f33c74b1d6d668718201-11\"><span class=\"crayon-v\">none</span><span class=\"crayon-h\">               </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">run</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">user</span><span class=\"crayon-h\">           </span><span class=\"crayon-cn\">0.0M</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0.0M</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0.0M</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">tmpfs          </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c74b1d6d668718201-12\"><span class=\"crayon-v\">gvfsd</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">fuse</span><span class=\"crayon-h\">         </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">run</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">user</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">himan</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0.0M</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0.0M</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0.0M</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">fuse</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">gvfsd</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">fuse</span></div><div class=\"crayon-line\" id=\"crayon-59f33c74b1d6d668718201-13\"><span class=\"crayon-v\">sysfs</span><span class=\"crayon-h\">              </span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">sys</span><span class=\"crayon-h\">                </span><span class=\"crayon-cn\">0.0M</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0.0M</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0.0M</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">sysfs          </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c74b1d6d668718201-14\"><span class=\"crayon-v\">none</span><span class=\"crayon-h\">               </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sys</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">fs</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">cgroup</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">0.0M</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0.0M</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0.0M</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">tmpfs          </span></div><div class=\"crayon-line\" id=\"crayon-59f33c74b1d6d668718201-15\"><span class=\"crayon-v\">none</span><span class=\"crayon-h\">               </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sys</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">fs</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">fuse</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">co</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0.0M</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0.0M</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0.0M</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">fusectl        </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c74b1d6d668718201-16\"><span class=\"crayon-v\">none</span><span class=\"crayon-h\">               </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sys</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">kernel</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">deb</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0.0M</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0.0M</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0.0M</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">debugfs        </span></div><div class=\"crayon-line\" id=\"crayon-59f33c74b1d6d668718201-17\"><span class=\"crayon-v\">none</span><span class=\"crayon-h\">               </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sys</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">kernel</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">sec</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0.0M</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0.0M</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0.0M</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">securityfs</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0066 seconds] -->\r\n<p>所以你能看到与所有设备相关的所有信息，被打印出来了。</p>\n<h3><strong>4. 用 -c 选项用逗号作为值的分隔符</strong></h3>\n<p>选项 -c 用命令分隔的值将附上双引号</p>\n<p>这里是个示例:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33c74b1d73448552996\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ di -c\r\ns,m,b,u,v,p,T\r\n/dev/sda6,/,28.1G,20.2G,6.5G,77%,ext4\r\nudev,/dev,1.5G,0.0G,1.5G,0%,devtmpfs\r\ntmpfs,/run,300.2M,0.9M,299.3M,0%,tmpfs</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33c74b1d73448552996-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c74b1d73448552996-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f33c74b1d73448552996-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c74b1d73448552996-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f33c74b1d73448552996-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33c74b1d73448552996-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">di</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">c</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c74b1d73448552996-2\"><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">m</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">u</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">v</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">p</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">T</span></div><div class=\"crayon-line\" id=\"crayon-59f33c74b1d73448552996-3\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">dev</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sda6</span><span class=\"crayon-sy\">,</span><span class=\"crayon-o\">/</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">28.1G</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">20.2G</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">6.5G</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">77</span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">,</span><span class=\"crayon-e\">ext4</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c74b1d73448552996-4\"><span class=\"crayon-v\">udev</span><span class=\"crayon-sy\">,</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">dev</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">1.5G</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">0.0G</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">1.5G</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">,</span><span class=\"crayon-e\">devtmpfs</span></div><div class=\"crayon-line\" id=\"crayon-59f33c74b1d73448552996-5\"><span class=\"crayon-v\">tmpfs</span><span class=\"crayon-sy\">,</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">run</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">300.2M</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">0.9M</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">299.3M</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">tmpfs</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p>如上,你可以看到打印了用逗号分隔符输出的值。（译注：这种输出便于作为其他程序的输入解析）</p>\n<h3><strong>5. 用 -g 选项通过千兆字节(G)打印大小</strong></h3>\n<p>下面是个示例:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33c74b1d77134464632\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ di -g\r\nFilesystem         Mount              Gibis     Used    Avail %Used  fs Type \r\n/dev/sda6          /                   28.1     20.2      6.5   77%  ext4    \r\nudev               /dev                 1.5      0.0      1.5    0%  devtmpfs\r\ntmpfs              /run                 0.3      0.0      0.3    0%  tmpfs</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33c74b1d77134464632-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c74b1d77134464632-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f33c74b1d77134464632-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c74b1d77134464632-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f33c74b1d77134464632-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33c74b1d77134464632-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">di</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">g</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c74b1d77134464632-2\"><span class=\"crayon-e\">Filesystem         </span><span class=\"crayon-e\">Mount              </span><span class=\"crayon-e\">Gibis     </span><span class=\"crayon-e\">Used    </span><span class=\"crayon-v\">Avail</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-e\">Used  </span><span class=\"crayon-e\">fs </span><span class=\"crayon-v\">Type</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-59f33c74b1d77134464632-3\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">dev</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sda6</span><span class=\"crayon-h\">          </span><span class=\"crayon-o\">/</span><span class=\"crayon-h\">                   </span><span class=\"crayon-cn\">28.1</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">20.2</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">6.5</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">77</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">ext4    </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c74b1d77134464632-4\"><span class=\"crayon-v\">udev</span><span class=\"crayon-h\">               </span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">dev</span><span class=\"crayon-h\">                 </span><span class=\"crayon-cn\">1.5</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">0.0</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">1.5</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">devtmpfs</span></div><div class=\"crayon-line\" id=\"crayon-59f33c74b1d77134464632-5\"><span class=\"crayon-v\">tmpfs</span><span class=\"crayon-h\">              </span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">run</span><span class=\"crayon-h\">                 </span><span class=\"crayon-cn\">0.3</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">0.0</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">0.3</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">tmpfs</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0017 seconds] -->\r\n<p>当然,你能看到所有与大小有关的值都用千兆字节(G)打印出来。</p>\n<p>同样的你可以用 -k 和 -m 选项来分别的显示千字节(K)大小和兆字节(M)大小。</p>\n<h3><strong>6. 通过 -I 选项显示特定的文件系统类型的相关信息</strong></h3>\n<p>假设你想显示只跟tmpfs文件系统相关的信息。下面将告诉你如何用 -I 选项完成任务。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33c74b1d7a018837714\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ di -I tmpfs\r\nFilesystem         Mount               Size     Used    Avail %Used  fs Type\r\ntmpfs              /run              300.2M     0.9M   299.3M    0%  tmpfs  \r\nnone               /run/lock           5.0M     0.0M     5.0M    0%  tmpfs  \r\nnone               /run/shm            1.5G     0.0G     1.5G    0%  tmpfs  \r\nnone               /run/user         100.0M     0.0M   100.0M    0%  tmpfs  \r\nnone               /sys/fs/cgroup      0.0M     0.0M     0.0M    0%  tmpfs</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33c74b1d7a018837714-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c74b1d7a018837714-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f33c74b1d7a018837714-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c74b1d7a018837714-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f33c74b1d7a018837714-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c74b1d7a018837714-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f33c74b1d7a018837714-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33c74b1d7a018837714-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">di</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">I</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">tmpfs</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c74b1d7a018837714-2\"><span class=\"crayon-e\">Filesystem         </span><span class=\"crayon-e\">Mount               </span><span class=\"crayon-e\">Size     </span><span class=\"crayon-e\">Used    </span><span class=\"crayon-v\">Avail</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-e\">Used  </span><span class=\"crayon-e\">fs </span><span class=\"crayon-e\">Type</span></div><div class=\"crayon-line\" id=\"crayon-59f33c74b1d7a018837714-3\"><span class=\"crayon-v\">tmpfs</span><span class=\"crayon-h\">              </span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">run</span><span class=\"crayon-h\">              </span><span class=\"crayon-cn\">300.2M</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0.9M</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">299.3M</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">tmpfs  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c74b1d7a018837714-4\"><span class=\"crayon-v\">none</span><span class=\"crayon-h\">               </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">run</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">lock</span><span class=\"crayon-h\">           </span><span class=\"crayon-cn\">5.0M</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0.0M</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">5.0M</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">tmpfs  </span></div><div class=\"crayon-line\" id=\"crayon-59f33c74b1d7a018837714-5\"><span class=\"crayon-v\">none</span><span class=\"crayon-h\">               </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">run</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">shm</span><span class=\"crayon-h\">            </span><span class=\"crayon-cn\">1.5G</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0.0G</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">1.5G</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">tmpfs  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c74b1d7a018837714-6\"><span class=\"crayon-v\">none</span><span class=\"crayon-h\">               </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">run</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">user</span><span class=\"crayon-h\">         </span><span class=\"crayon-cn\">100.0M</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0.0M</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">100.0M</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">tmpfs  </span></div><div class=\"crayon-line\" id=\"crayon-59f33c74b1d7a018837714-7\"><span class=\"crayon-v\">none</span><span class=\"crayon-h\">               </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sys</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">fs</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">cgroup</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">0.0M</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0.0M</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0.0M</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">tmpfs</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0023 seconds] -->\r\n<p>Ok 你能看到只有tmpfs类型相关文件系统信息被输出并显示出来了。</p>\n<h3><strong>7. 用 -n 选项跳过标题行的输出</strong></h3>\n<p>如果你正试图通过一个脚本(或程序)解析该命令的输出结果并希望 di 命令跳过显示的标题行，那么用 -n 选项是绝佳的方法。</p>\n<p>下面是个示例:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33c74b1d7e904712894\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ di -n\r\n/dev/sda6          /                  28.1G    20.2G     6.5G   77%  ext4    \r\nudev               /dev                1.5G     0.0G     1.5G    0%  devtmpfs\r\ntmpfs              /run              300.2M     0.9M   299.3M    0%  tmpfs</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33c74b1d7e904712894-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c74b1d7e904712894-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f33c74b1d7e904712894-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c74b1d7e904712894-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33c74b1d7e904712894-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">di</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">n</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c74b1d7e904712894-2\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">dev</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sda6</span><span class=\"crayon-h\">          </span><span class=\"crayon-o\">/</span><span class=\"crayon-h\">                  </span><span class=\"crayon-cn\">28.1G</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">20.2G</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">6.5G</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">77</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">ext4    </span></div><div class=\"crayon-line\" id=\"crayon-59f33c74b1d7e904712894-3\"><span class=\"crayon-v\">udev</span><span class=\"crayon-h\">               </span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">dev</span><span class=\"crayon-h\">                </span><span class=\"crayon-cn\">1.5G</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0.0G</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">1.5G</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">devtmpfs</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c74b1d7e904712894-4\"><span class=\"crayon-v\">tmpfs</span><span class=\"crayon-h\">              </span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">run</span><span class=\"crayon-h\">              </span><span class=\"crayon-cn\">300.2M</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0.9M</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">299.3M</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">tmpfs</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p>如上，你能发现输出中并没有显示标题行。</p>\n<h3><strong>8. 通过 -t 选项在文件系统列表底下再打印一行总计行</strong></h3>\n<p>如果想要显示所有相关列的总数，用 -t 选项。</p>\n<p>示例:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33c74b1d81650780148\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ di -t\r\nFilesystem         Mount               Size     Used    Avail %Used  fs Type \r\n/dev/sda6          /                  28.1G    20.2G     6.5G   77%  ext4    \r\nudev               /dev                1.5G     0.0G     1.5G    0%  devtmpfs\r\ntmpfs              /run              300.2M     0.9M   299.3M    0%  tmpfs   \r\n                   Total              29.9G    20.2G     8.3G   72%</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33c74b1d81650780148-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c74b1d81650780148-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f33c74b1d81650780148-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c74b1d81650780148-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f33c74b1d81650780148-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c74b1d81650780148-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33c74b1d81650780148-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">di</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">t</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c74b1d81650780148-2\"><span class=\"crayon-e\">Filesystem         </span><span class=\"crayon-e\">Mount               </span><span class=\"crayon-e\">Size     </span><span class=\"crayon-e\">Used    </span><span class=\"crayon-v\">Avail</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-e\">Used  </span><span class=\"crayon-e\">fs </span><span class=\"crayon-v\">Type</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-59f33c74b1d81650780148-3\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">dev</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sda6</span><span class=\"crayon-h\">          </span><span class=\"crayon-o\">/</span><span class=\"crayon-h\">                  </span><span class=\"crayon-cn\">28.1G</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">20.2G</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">6.5G</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">77</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">ext4    </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c74b1d81650780148-4\"><span class=\"crayon-v\">udev</span><span class=\"crayon-h\">               </span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">dev</span><span class=\"crayon-h\">                </span><span class=\"crayon-cn\">1.5G</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0.0G</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">1.5G</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">devtmpfs</span></div><div class=\"crayon-line\" id=\"crayon-59f33c74b1d81650780148-5\"><span class=\"crayon-v\">tmpfs</span><span class=\"crayon-h\">              </span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">run</span><span class=\"crayon-h\">              </span><span class=\"crayon-cn\">300.2M</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0.9M</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">299.3M</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">tmpfs   </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c74b1d81650780148-6\"><span class=\"crayon-e\">                   </span><span class=\"crayon-i\">Total</span><span class=\"crayon-h\">              </span><span class=\"crayon-cn\">29.9G</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">20.2G</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">8.3G</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">72</span><span class=\"crayon-o\">%</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0018 seconds] -->\r\n<p>观察到最后一行的值为所有文件系统的统计数据。</p>\n<h3><strong>9. 通过 -s 选项 排序输出</strong></h3>\n<p>-s选项可用于排序该命令的输出结果（译注：默认按照挂载点名称排序）</p>\n<p>下面告诉你如何反向排序输出:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33c74b1d87056664783\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ di -sr\r\nFilesystem         Mount               Size     Used    Avail %Used  fs Type\r\ntmpfs              /run              300.2M     0.9M   299.3M    0%  tmpfs\r\nudev               /dev                1.5G     0.0G     1.5G    0%  devtmpfs\r\n/dev/sda6          /                  28.1G    20.2G     6.5G   77%  ext4</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33c74b1d87056664783-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c74b1d87056664783-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f33c74b1d87056664783-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c74b1d87056664783-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f33c74b1d87056664783-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33c74b1d87056664783-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">di</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">sr</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c74b1d87056664783-2\"><span class=\"crayon-e\">Filesystem         </span><span class=\"crayon-e\">Mount               </span><span class=\"crayon-e\">Size     </span><span class=\"crayon-e\">Used    </span><span class=\"crayon-v\">Avail</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-e\">Used  </span><span class=\"crayon-e\">fs </span><span class=\"crayon-e\">Type</span></div><div class=\"crayon-line\" id=\"crayon-59f33c74b1d87056664783-3\"><span class=\"crayon-v\">tmpfs</span><span class=\"crayon-h\">              </span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">run</span><span class=\"crayon-h\">              </span><span class=\"crayon-cn\">300.2M</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0.9M</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">299.3M</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">tmpfs</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c74b1d87056664783-4\"><span class=\"crayon-v\">udev</span><span class=\"crayon-h\">               </span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">dev</span><span class=\"crayon-h\">                </span><span class=\"crayon-cn\">1.5G</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0.0G</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">1.5G</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">devtmpfs</span></div><div class=\"crayon-line\" id=\"crayon-59f33c74b1d87056664783-5\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">dev</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sda6</span><span class=\"crayon-h\">          </span><span class=\"crayon-o\">/</span><span class=\"crayon-h\">                  </span><span class=\"crayon-cn\">28.1G</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">20.2G</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">6.5G</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">77</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">ext4</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0015 seconds] -->\r\n<p>你也可以在-s后添加子选项’r’逆序排序输出。</p>\n<p>类似的,你可以使用 -s 选项做一些其他类型的排序.以下是摘自man手册供您参考:</p>\n<blockquote><p>    -s 排序方式</p>\n<p>可以指定排序方式。默认排序方式的按照挂载点的名称进行排序。支持如下的排序方式：</p>\n<p>m ：按照挂载点名称排序（默认）</p>\n<p>n  ：不排序（即按照在挂载表/etc/fstab中的顺序）</p>\n<p>s   ：按照特殊设备名称</p>\n<p>t   ：按照文件系统类型</p>\n<p>r   ：逆序排序</p>\n<p>排序方式可以组合使用，如：  di –stsrm ：按照类型、设备、挂载点逆序排序。di –strsrm ：按照类型、设备逆序、挂载点逆序排序。</p></blockquote>\n<h3><strong>10. 通过 -f 选项指定输出格式</strong></h3>\n<p>你可以通过结合-f选项和其子选项指定输出格式字符串。</p>\n<p>例如，用 -fm，打印挂载点的名称。</p>\n<p>示例:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33c74b1d8b398636975\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ di -fm\r\nMount          \r\n/              \r\n/dev          \r\n/run</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33c74b1d8b398636975-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c74b1d8b398636975-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f33c74b1d8b398636975-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c74b1d8b398636975-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f33c74b1d8b398636975-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33c74b1d8b398636975-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">di</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">fm</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c74b1d8b398636975-2\"><span class=\"crayon-v\">Mount</span><span class=\"crayon-h\">          </span></div><div class=\"crayon-line\" id=\"crayon-59f33c74b1d8b398636975-3\"><span class=\"crayon-o\">/</span><span class=\"crayon-h\">              </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c74b1d8b398636975-4\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">dev</span><span class=\"crayon-h\">          </span></div><div class=\"crayon-line\" id=\"crayon-59f33c74b1d8b398636975-5\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">run</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>如上你可以看到只有挂载点的名字被打印出来。</p>\n<p>同样的，打印文件系统的类型，用 -ft</p>\n<p>示例:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33c74b1d8e366760235\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ di -ft\r\nfsType \r\next4   \r\ndevtmpf\r\ntmpfs</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33c74b1d8e366760235-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c74b1d8e366760235-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f33c74b1d8e366760235-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c74b1d8e366760235-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f33c74b1d8e366760235-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33c74b1d8e366760235-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">di</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">ft</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c74b1d8e366760235-2\"><span class=\"crayon-e\">fsType </span></div><div class=\"crayon-line\" id=\"crayon-59f33c74b1d8e366760235-3\"><span class=\"crayon-e\">ext4   </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c74b1d8e366760235-4\"><span class=\"crayon-e\">devtmpf</span></div><div class=\"crayon-line\" id=\"crayon-59f33c74b1d8e366760235-5\"><span class=\"crayon-v\">tmpfs</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>如果你想快速查找,这里有个其他可用的格式选项截图.</p>\n<p>更完整的选项,参考<a href=\"http://www.manpagez.com/man/1/di/\" target=\"_blank\" rel=\"external nofollow\">di命令man文档</a></p>\n<h3><strong>下载/安装</strong></h3>\n<p>这里有一些关于di命令的重要链接:</p>\n<ul>\n<li><a href=\"http://www.gentoo.com/di/\" target=\"_blank\" rel=\"external nofollow\">主页</a></li>\n<li><a href=\"http://freecode.com/projects/diskinfo\" target=\"_blank\" rel=\"external nofollow\">下载链接</a></li>\n</ul>\n<p>命令行工具 di 也能通过apt、yum等命令在命令行下载和安装。Ubuntu用户也可以从Ubuntu 软件中心下载这个命令。</p>\n<h3><strong>优点</strong></h3>\n<ul>\n<li>提供了许多高级功能</li>\n<li>跨平台</li>\n</ul>\n<h3><strong>缺点</strong></h3>\n<ul>\n<li>在大多数的Linux发行版没有预装</li>\n<li>大量选项需要学习</li>\n</ul>\n<h3><strong>结论</strong></h3>\n<p>最后，di命令提供了一些非常有用的特性，比df命令更强大。如果你正在寻找一个类似df，但比df更强大的关于磁盘信息的命令行工具，那么di是最理想的选择。试试吧，包你满意!!!</p>\n<p><strong>你试过di或任何其他类似df工具？请跟我们分享你的经验！</strong></p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112535\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112535votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112535\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": "  评论", "praise_nums": "1", "url_object_id": "8c8333cdbf8c72e503ae404f3d818996", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/09/6651cf008d33392633d7cfe2a111763f.png"], "front_image_path": "full/9819c29e9cf0bb7cf1eb78bc95a001af09a1e6ce.jpg", "title": "di：比 df 更有用的磁盘信息工具"}
{"create_date": "2017/09/30 ", "url": "http://blog.jobbole.com/112569/", "fav_nums": 22, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://medium.freecodecamp.org/how-machines-learn-a-practical-guide-203aae23cafb\">Karlijn Willems</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-8907-1.html\">Linux中国/Flowsnow</a>   </div><p>你可能在各种应用中听说过机器学习machine learning（ML），比如垃圾邮件过滤、光学字符识别（OCR）和计算机视觉。</p>\n<p>开启机器学习之旅是一个涉及多方面的漫长旅途。对于新手，有很多的书籍，有学术论文，有指导练习，有独立项目。在这些众多的选择里面，很容易迷失你最初想学习的目标。</p>\n<p>所以在今天的文章中，我会列出 7 个步骤（和 50 多个资源）帮助你开启这个令人兴奋的计算机科学领域的大门，并逐渐成为一个机器学习高手。</p>\n<p>请注意，这个资源列表并不详尽，只是为了让你入门。 除此之外，还有更多的资源。</p>\n<h3 id=\"toc_1\">1、 学习必要的背景知识</h3>\n<p>你可能还记得 DataCamp 网站上的<a href=\"https://www.datacamp.com/community/tutorials/learn-data-science-infographic\">学习数据科学</a>这篇文章里面的信息图：数学和统计学是开始机器学习（ML）的关键。 基础可能看起来很容易，因为它只有三个主题。 但不要忘记这些实际上是三个广泛的话题。</p>\n<p>在这里需要记住两件非常重要的事情：</p>\n<ul>\n<li>首先，你一定会需要一些进一步的指导，以了解开始机器学习需要覆盖哪些知识点。</li>\n<li>其次，这些是你进一步学习的基础。 不要害怕花时间，有了这些知识你才能构建一切。</li>\n</ul>\n<p>第一点很简单：学习线性代数和统计学是个好主意。这两门知识是必须要理解的。但是在你学习的同时，也应该尝试学习诸如最优化和高等微积分等主题。当你越来越深入 ML 的时候，它们就能派上用场。</p>\n<p>如果是从零开始的，这里有一些入门指南可供参考：</p>\n<ul>\n<li><a href=\"http://www.khanacademy.org/\">Khan 学院</a> 对于初学者是非常好的资源，可以考虑学习他们的线性代数和微积分课程。</li>\n<li>在 <a href=\"https://ocw.mit.edu/index.htm\">麻省理工学院 OpenCourseWare</a> 网站上学习<a href=\"https://ocw.mit.edu/courses/mathematics/18-06-linear-algebra-spring-2010/\">线性代数</a> 课程。</li>\n<li><a href=\"https://www.coursera.org/learn/basic-statistics\">Coursera course</a> 网站上对描述统计学、概率论和推论统计学的介绍内容。</li>\n</ul>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/1613a11241dee760421ab9fb9c050153.png\" alt=\"\"></p>\n<p style=\"text-align: center\"><em>统计学是学习 ML 的关键之一</em></p>\n<p>如果你更多喜欢阅读书籍，请参考以下内容：</p>\n<ul>\n<li><a href=\"https://www.amazon.com/Linear-Algebra-Its-Applications-4th/dp/0030105676\">线性代数及其应用</a>Linear Algebra and Its Applications</li>\n<li><a href=\"https://www.amazon.com/Applied-Linear-Algebra-3rd-Noble/dp/0130412600\">应用线性代数</a>Applied Linear Algebra</li>\n<li><a href=\"https://www.amazon.de/Solved-Problems-Linear-Algebra-Schaums/dp/0070380236\">线性代数解决的 3000 个问题</a>3,000 Solved Problems in Linear Algebra</li>\n<li><a href=\"https://ocw.mit.edu/courses/online-textbooks/\">麻省理工学院在线教材</a></li>\n</ul>\n<p>然而，在大多数情况下，你已经对统计学和数学有了一个初步的了解。很有可能你已经浏览过上面列举的的那些资源。</p>\n<p>在这种情况下，诚实地回顾和评价你的知识是一个好主意，是否有一些领域是需要复习的，或者现在掌握的比较好的？</p>\n<p>如果你一切都准备好了，那么现在是时候使用 R 或者 Python 应用这些知识了。作为一个通用的指导方针，选择一门语言开始是个好主意。另外，你仍然可以将另一门语言加入到你的技能池里。</p>\n<p>为什么这些编程知识是必需的？</p>\n<p>嗯，你会看到上面列出的课程（或你在学校或大学学习的课程）将为你提供关于数学和统计学主题的更理论性的介绍（而不是应用性的）。 然而，ML 非常便于应用，你需要能够应用你所学到的所有主题。 所以最好再次复习一遍之前的材料，但是这次需要付诸应用。</p>\n<p>如果你想掌握 R 和 Python 的基础，可以看以下课程：</p>\n<ul>\n<li>DataCamp 上关于 Python 或者 R 的介绍性课程： <a href=\"https://www.datacamp.com/courses/intro-to-python-for-data-science\">Python 语言数据科学介绍</a> 或者 <a href=\"https://www.datacamp.com/courses/free-introduction-to-r\">R 语言编程介绍</a>。</li>\n<li>Edx 上关于 Python 或者 R 的介绍性课程： <a href=\"https://www.edx.org/course/introduction-python-data-science-microsoft-dat208x-5\">Python 语言数据科学介绍</a> 和 <a href=\"https://www.edx.org/course/introduction-r-data-science-microsoft-dat204x-4\">R 语言数据科学介绍</a>。</li>\n<li>还有很多其他免费的课程。查看 <a href=\"http://www.coursera.org/\">Coursera</a> 或者 <a href=\"https://www.codecademy.com/\">Codeacademy</a> 了解更多。</li>\n</ul>\n<p>当你打牢基础知识后，请查看 DataCamp 上的博客 <a href=\"https://www.datacamp.com/community/tutorials/python-statistics-data-science\">Python 统计学：40+ 数据科学资源</a>。 这篇文章提供了统计学方面的 40 多个资源，这些资源都是你开始数据科学（以及 ML）需要学习的。</p>\n<p>还要确保你查看了关于向量和数组的 <a href=\"https://www.datacamp.com/community/tutorials/python-scipy-tutorial\">这篇 SciPy 教程</a>文章，以及使用 Python 进行科学计算的<a href=\"http://www.math.pitt.edu/%7Esiam/workshops/python10/python.pdf\">研讨会</a>。</p>\n<p>要使用 Python 和微积分进行实践，你可以了解下 <a href=\"http://docs.sympy.org/latest/tutorial/calculus.html\">SymPy 软件包</a>。</p>\n<h3 id=\"toc_2\">2、 不要害怕在 ML 的“理论”上浪费时间</h3>\n<p>很多人并不会花很多精力去浏览理论材料，因为理论是枯燥的、无聊的。但从长远来看，在理论知识上投入时间是至关重要的、非常值得的。 你将会更好地了解机器学习的新进展，也能和背景知识结合起来。 这将有助于你保持学习积极性。</p>\n<p>此外，理论并不会多无聊。 正如你在介绍中所看到的，你可以借助非常多的资料深入学习。</p>\n<p>书籍是吸收理论知识的最佳途径之一。 它们可以让你停下来想一会儿。 当然，看书是一件非常平静的事情，可能不符合你的学习风格。 不过，请尝试阅读下列书籍，看看它是否适合你：</p>\n<ul>\n<li><a href=\"http://www.cs.cmu.edu/%7Etom/mlbook.html\">机器学习教程</a>Machine Learning textbook， Tom Mitchell 著，书可能比较旧，但是却很经典。这本书很好的解释介绍了机器学习中最重要的课题，步骤详尽，逐层深入。</li>\n<li>机器学习: 使数据有意义的算法艺术和科学Machine Learning: The Art and Science of Algorithms that Make Sense of Data（你可以在<a href=\"http://www.cs.bris.ac.uk/%7Eflach/mlbook/materials/mlbook-beamer.pdf\">这里</a>看到这本书的幻灯片版本）：这本书对初学者来说非常棒。 里面讨论了许多实践中的应用程序，其中有一些是在 Tom Mitchell 的书中缺少的。</li>\n<li><a href=\"http://www.mlyearning.org/\">机器学习之向往</a>Machine Learning Yearning ：这本书由吴恩达Andrew Ng编写的，仍未完本，但对于那些正在学习 ML 的学生来说，这一定是很好的参考资料。</li>\n<li><a href=\"https://www.amazon.com/Algorithms-Data-Structures-Applications-Practitioner/dp/0134894286\">算法与数据结构</a>Algorithms and Data Structures  由 Jurg Nievergelt 和 Klaus Hinrichs 著。</li>\n<li>也可以参阅 Matthew North 的<a href=\"https://www.amazon.com/Data-Mining-Masses-Matthew-North/dp/0615684378\">面向大众的数据挖掘</a>Data Mining for the Masses。 你会发现这本书引导你完成一些最困难的主题。</li>\n<li><a href=\"http://alex.smola.org/drafts/thebook.pdf\">机器学习介绍</a>Introduction to Machine Learning  由 Alex Smola 和 S.V.N. Vishwanathan 著。</li>\n</ul>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/c3ddf500c003b146e36267bb508e6149.png\" alt=\"\"></p>\n<p style=\"text-align: center\"><em>花些时间看书并研究其中涵盖的资料</em></p>\n<p>视频和慕课对于喜欢边听边看来学习的人来说非常棒。 慕课和视频非常的多，多到可能你都很难找到适合你的。 下面列出了最知名的几个：</p>\n<ul>\n<li><a href=\"https://www.coursera.org/learn/machine-learning\">这个著名的机器学习慕课</a>，是吴恩达Andrew Ng讲的，介绍了机器学习及其理论。 别担心，这个慕课讲的非常好，一步一步深入，所以对初学者来说非常适用。</li>\n<li><a href=\"https://youtu.be/TjZBTDzGeGg?list=PLnvKubj2-I2LhIibS8TOGC42xsD3-liux\">麻省理工学院 Open Courseware 的 6034 课程的节目清单</a>，已经有点前沿了。 在你开始本系列之前，你需要做一些 ML 理论方面的准备工作，但是你不会后悔的。</li>\n</ul>\n<p>在这一点上，重要的是要将各种独立的技术融会贯通，形成整体的结构图。 首先了解关键的概念：监督学习supervised learning和无监督学习unsupervised learning的区别、分类和回归等。 手动（书面）练习可以派上用场，能帮你了解算法是如何工作的以及如何应用这些算法。 在大学课程里你经常会找到一些书面练习，可以看看波特兰州立大学的 <a href=\"http://web.cecs.pdx.edu/%7Emm/MachineLearningSpring2017/\">ML 课程</a>。</p>\n<h3 id=\"toc_3\">3、 开始动手</h3>\n<p>通过看书和看视频了解理论和算法都非常好，但是需要超越这一阶段，就要开始做一些练习。你要学着去实现这些算法，应用学到的理论。</p>\n<p>首先，有很多介绍 Python 和 R 方面的机器学习的基础知识。当然最好的方法就是使用交互式教程：</p>\n<ul>\n<li><a href=\"https://www.datacamp.com/community/tutorials/machine-learning-python\">Python 机器学习：Scikit-Learn 教程</a>，在这篇教程里面，你可以学到使用 Scikit-Learn 构建模型的 KMeans 和支持向量机（SVM）相关的知名算法。</li>\n<li><a href=\"https://www.datacamp.com/community/tutorials/machine-learning-in-r\">给初学者的 R 语言机器学习教程</a> 用 R 中的类和 caret 包介绍机器学习。</li>\n<li>[Keras 教程：Python 深度学习<a href=\"https://www.datacamp.com/community/tutorials/deep-learning-python\">25</a> 涵盖了如何一步一步的为分类和回归任务构建多层感知器（MLP）。</li>\n</ul>\n<p>还请查看以下静态的（非互动的）教程，这些需要你在 IDE 中操作：</p>\n<ul>\n<li><a href=\"http://machinelearningmastery.com/machine-learning-in-python-step-by-step/\">循序渐进：Python 机器学习</a>： 一步一步地学习 Scikit-Learn。</li>\n<li><a href=\"http://machinelearningmastery.com/tutorial-first-neural-network-python-keras/\">循序渐进：使用 Keras 开发你的第一个神经网络</a>： 按这个教程一步一步地使用 Keras 开发你的第一个神经网络。</li>\n<li>你可以考虑看更多的教程，但是<a href=\"http://www.machinelearningmastery.com/\">机器学习精要</a>这篇教程是非常好的。</li>\n</ul>\n<p>除了教程之外，还有一些课程。参加课程可以帮助你系统性地应用学到的概念。 经验丰富的导师很有帮助。 以下是 Python 和机器学习的一些互动课程：</p>\n<ul>\n<li><a href=\"https://www.datacamp.com/courses/supervised-learning-with-scikit-learn\">用 scikit-learn 做监督学习</a>： 学习如何构建预测模型，调整参数，并预测在未知数据上执行的效果。你将使用 Scikit-Learn 操作真实世界的数据集。</li>\n<li><a href=\"https://www.datacamp.com/courses/unsupervised-learning-in-python\">用 Python 做无监督学习</a>： 展示给你如何从未标记的数据集进行聚类、转换、可视化和提取关键信息。 在课程结束时，还会构建一个推荐系统。</li>\n<li><a href=\"https://www.datacamp.com/courses/deep-learning-in-python\">Python 深度学习</a>： 你将获得如何使用 Keras 2.0 进行深度学习的实践知识，Keras 2.0 是前沿的 Python 深度学习库 Keras 的最新版本。</li>\n<li><a href=\"https://www.coursera.org/learn/python-machine-learning\">在 Python 中应用机器学习</a>： 将学习者引入到机器学习实践中，更多地关注技术和方法，而不是这些方法背后的统计学知识。</li>\n</ul>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/88043a6e10e58b566bd30cd3ed95af95.png\" alt=\"\"></p>\n<p style=\"text-align: center\"><em>理论学习之后，花点时间来应用你所学到的知识。</em></p>\n<p>对于那些正在学习 R 语言机器学习的人，还有这些互动课程：</p>\n<ul>\n<li><a href=\"https://www.datacamp.com/courses/introduction-to-machine-learning-with-r\">机器学习介绍</a> 可以让你宏观了解机器学习学科最常见的技术和应用，还可以更多地了解不同机器学习模型的评估和训练。这门课程剩下的部分重点介绍三个最基本的机器学习任务： 分类、回归和聚类。</li>\n<li><a href=\"https://www.datacamp.com/courses/unsupervised-learning-in-r\">R 语言无监督学习</a> ，用 R 语言从 ML 角度提供聚类和降维的基本介绍。 可以让你尽快获得数据的关键信息。</li>\n<li><a href=\"https://www.coursera.org/learn/practical-machine-learning\">实操机器学习</a>涵盖了构建和应用预测功能的基本组成部分，其重点是实际应用。</li>\n</ul>\n<p>最后，还有很多书籍以偏向实践的方式介绍了 ML 主题。 如果你想借助书籍内容和 IDE 来学习，请查看这些书籍：</p>\n<ul>\n<li><a href=\"https://github.com/rasbt/python-machine-learning-book\">Python 机器学习</a>Python Machine Learning Book，Sebastian Raschka 著。</li>\n<li><a href=\"https://github.com/rasbt/deep-learning-book\">人工神经网络与深度学习导论：Python 应用实用指南</a>Introduction to Artificial Neural Networks and Deep Learning: A Practical Guide with Applications in Python，Sebastian Raschka 著。</li>\n<li><a href=\"https://books.google.be/books/about/Machine_Learning_with_R.html?id=ZQu8AQAAQBAJ&amp;amp;amp;amp;amp;amp;source=kp_cover&amp;amp;amp;amp;amp;amp;redir_esc=y\">R 语言机器学习</a>Machine Learning with R，Brett Lantz 著。</li>\n</ul>\n<h3 id=\"toc_4\">4、 练习</h3>\n<p>实践比使用 Python 进行练习和修改材料更重要。 这一步对我来说可能是最难的。 在做了一些练习后看看其他人是如何实现 ML 算法的。 然后，开始你自己的项目，阐述你对 ML 算法和理论的理解。</p>\n<p>最直接的方法之一就是将练习的规模做得更大些。 要做一个更大的练习，就需要你做更多的数据清理和功能工程。</p>\n<ul>\n<li>从 <a href=\"http://www.kaggle.com/\">Kaggle</a> 开始。 如果你需要额外的帮助来征服所谓的“数据恐惧”，请查看 <a href=\"https://www.datacamp.com/community/open-courses/kaggle-python-tutorial-on-machine-learning\">Kaggle 的 Python 机器学习教程</a> 和 <a href=\"https://www.datacamp.com/community/open-courses/kaggle-tutorial-on-machine-learing-the-sinking-of-the-titanic\">Kaggle 的 R 语言机器学习教程</a>。 这些将带给您快速的提升。</li>\n<li>此后，你也可以自己开始挑战。 查看这些网站，您可以在其中找到大量的 ML 数据集：<a href=\"http://archive.ics.uci.edu/ml/\">UCI 机器学习仓库</a>，<a href=\"http://homepages.inf.ed.ac.uk/rbf/IAPR/researchers/MLPAGES/mldat.htm\">用于机器学习的公开数据集</a> 和 <a href=\"https://data.world/\">data.world</a>。</li>\n</ul>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/aea26287f76464871872479603efc1be.png\" alt=\"\"></p>\n<p style=\"text-align: center\"><em>熟能生巧。</em></p>\n<h3 id=\"toc_5\">5、 项目</h3>\n<p>虽然做一些小的练习也不错，但是在最后，您需要做一个项目，可以在其中展示您对使用到的 ML 算法的理解。</p>\n<p>最好的练习是实现你自己的 ML 算法。 您可以在以下页面中阅读更多关于为什么您应该做这样的练习，以及您可以从中学到什么内容：</p>\n<ul>\n<li><a href=\"https://www.quora.com/Why-is-there-a-need-to-manually-implement-machine-learning-algorithms-when-there-are-many-advanced-APIs-like-tensorflow-available\">为什么有许多先进的 API，比如 tensorflow，还需要自己手动实现机器学习的算法？</a></li>\n<li><a href=\"http://www.kdnuggets.com/2016/05/implement-machine-learning-algorithms-scratch.html\">为什么要从头开始实现机器学习算法？</a></li>\n<li><a href=\"http://www.jeannicholashould.com/what-i-learned-implementing-a-classifier-from-scratch.html\">使用 Python 从头开始实现一个分类器，我能从中学到什么？</a></li>\n</ul>\n<p>接下来，您可以查看以下文章和仓库。 可以从中获得一些灵感，并且了解他们是如何实现 ML 算法的。</p>\n<ul>\n<li><a href=\"http://machinelearningmastery.com/how-to-implement-a-machine-learning-algorithm/\">如何实现机器学习算法</a></li>\n<li><a href=\"https://github.com/eriklindernoren/ML-From-Scratch\">从头开始学习机器学习</a></li>\n<li><a href=\"https://github.com/madhug-nadig/Machine-Learning-Algorithms-from-Scratch\">从头开始学习机器学习算法</a></li>\n</ul>\n<p style=\"text-align: center\"><img src=\"http://jbcdn2.b0.upaiyun.com/2017/09/b81034f198a5925fd387316d82a037f0.png\" alt=\"\"></p>\n<p style=\"text-align: center\"><em>开始时项目可能会很难，但是可以极大增加你的理解。</em></p>\n<h3 id=\"toc_6\">6、 不要停止</h3>\n<p>对 ML 的学习永远不能停止，即使你在这个领域工作了十年，总是有新的东西要学习，许多人都将会证实这一点。</p>\n<p>例如，ML 趋势，比如深度学习deep learning现在就很受欢迎。你也可以专注于那些现在不怎么火，但是将来会火的话题上。如果你想了解更多，可以看看<a href=\"https://www.quora.com/Should-I-quit-machine-learning\">这个有趣的问题和答案</a>。</p>\n<p>当你苦恼于掌握基础知识时，你最先想到的可能不是论文。 但是它们是你紧跟最新研究的一个途径。 论文并不适合刚刚开始学习的人，但是绝对适合高级人员。</p>\n<ul>\n<li><a href=\"http://www.kdnuggets.com/2017/04/top-20-papers-machine-learning.html\">20 篇最新的机器学习和深度学习领域的顶级研究论文</a></li>\n<li><a href=\"http://www.jmlr.org/\">机器学习研究杂志</a></li>\n<li><a href=\"https://github.com/terryum/awesome-deep-learning-papers\">优秀的深度学习论文</a></li>\n<li><a href=\"https://www.quora.com/What-are-some-of-the-best-research-papers-books-for-Machine-learning\">机器学习的一些最好的研究论文和书籍</a></li>\n</ul>\n<p>其他技术也是需要考虑的。 但是当你刚开始学习时，不要担心这些。 例如，您可以专注于 Python 或 R 语言 （取决于你已经知道哪一个），并把它到你的技能池里。 你可以通过这篇文章来查找一些感兴趣的资源。</p>\n<p>如果您还想转向大数据，您可以考虑研究 Spark。 这里有一些有趣的资源：</p>\n<ul>\n<li><a href=\"https://www.datacamp.com/courses/introduction-to-spark-in-r-using-sparklyr\">在 R 语言中使用 sparklyr 来了解 Spark</a></li>\n<li><a href=\"https://www.edx.org/xseries/data-science-engineering-apache-spark\">Spark 数据科学与工程</a></li>\n<li><a href=\"https://www.edx.org/course/introduction-apache-spark-uc-berkeleyx-cs105x\">介绍 Apache Spark</a></li>\n<li><a href=\"https://www.edx.org/course/distributed-machine-learning-apache-uc-berkeleyx-cs120x\">Apache Spark 分布式机器学习</a></li>\n<li><a href=\"https://www.edx.org/course/big-data-analysis-apache-spark-uc-berkeleyx-cs110x\">用 Apache Spark 进行大数据分析</a></li>\n<li><a href=\"https://www.datacamp.com/community/tutorials/apache-spark-python\">初学者指南：用 Python 操作 Apache Spark</a></li>\n<li><a href=\"https://www.datacamp.com/community/blog/pyspark-cheat-sheet-python\">PySpark RDD 速查表</a></li>\n<li><a href=\"https://www.datacamp.com/community/blog/pyspark-sql-cheat-sheet\">PySpark SQL 速查表</a></li>\n</ul>\n<p>其他编程语言，比如 Java、JavaScript、C 和 C++ 在 ML 中越来越重要。 从长远来看，您可以考虑将其中一种语言添加到学习列表中。 你可以使用这些博客文章来指导你选择：</p>\n<ul>\n<li><a href=\"https://fossbytes.com/popular-top-programming-languages-machine-learning-data-science/\">机器学习和数据科学最流行的编程语言</a></li>\n<li><a href=\"http://www.kdnuggets.com/2017/01/most-popular-language-machine-learning-data-science.html\">机器学习和数据科学最流行的语言是…</a></li>\n</ul>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/03203ed1a9385202599d4bbe28db50ff.png\" alt=\"\"></p>\n<p style=\"text-align: center\"><em>学无止境。</em></p>\n<h3 id=\"toc_7\">7、 利用一切可以利用的资源</h3>\n<p>机器学习是一个充满难度的话题，有时候可能会让你失去动力。 或者也许你觉得你需要点改变。 在这种情况下，请记住，有很多资源可以让你打消掉这种想法。 查看以下资源：</p>\n<p><strong>播客</strong>是可以让你继续你的 ML 旅程，紧跟这个领域最新的发展的伟大资源：</p>\n<ul>\n<li><a href=\"http://www.thetalkingmachines.com/\">谈论机器</a></li>\n<li><a href=\"https://dataskeptic.com/\">数据怀疑论者</a></li>\n<li><a href=\"http://lineardigressions.com/\">线性化</a></li>\n<li><a href=\"https://twimlai.com/\">本周的机器学习及 AI</a></li>\n<li><a href=\"http://www.learningmachines101.com/\">机器学习 101</a></li>\n</ul>\n<p>当然，还有更多的播客。</p>\n<p><strong>文档和软件包源代码</strong>是深入了解 ML 算法的实现的两种方法。 查看这些仓库：</p>\n<ul>\n<li><a href=\"https://github.com/scikit-learn/scikit-learn\">Scikit-Learn</a>：知名的 Python ML 软件包</li>\n<li><a href=\"http://www.github.com/fchollet/keras\">Keras</a>： Python 深度学习软件包</li>\n<li><a href=\"http://topepo/caret\">caret</a>： 非常受欢迎的用于分类和回归训练 R 软件包</li>\n</ul>\n<p><strong>可视化</strong>是深入 ML 理论的最新也是最流行的方式之一。 它们对初学者来说非常棒，但对于更高级的学习者来说也是非常有趣的。 你肯定会被下面这些可视化资源所吸引，它们能让你更加了解 ML 的工作原理：</p>\n<ul>\n<li><a href=\"http://www.r2d3.us/visual-intro-to-machine-learning-part-1/\">机器学习的可视化介绍</a></li>\n<li><a href=\"http://distill.pub/\">Distill</a> 使 ML 研究清晰，动态和生动。</li>\n<li>如果你想玩下神经网络架构，可以看下 <a href=\"http://playground.tensorflow.org/\">Tensorflow – 神经网络游乐场</a>。</li>\n<li>更多的看这里：<a href=\"https://www.quora.com/What-are-the-best-visualizations-of-machine-learning-algorithms\">机器学习算法最佳的可视化方法是什么？</a></li>\n</ul>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/8371b5943e4d785d05df4ebd4b7b3dd3.png\" alt=\"\"></p>\n<p style=\"text-align: center\"><em>学习中的一些变化更加能激励你。</em></p>\n<h3 id=\"toc_8\">现在你可以开始了</h3>\n<p>现在一切都取决于你自己了。学习机器学习是一个持续的过程，所以开始的越早就会越好。 运用你手边的一切工具开始吧。 祝你好运，并确保让我们知道你的进步。</p>\n<p><em>这篇文章是我基于 Quora 问题（<a href=\"https://www.quora.com/How-does-a-total-beginner-start-to-learn-machine-learning/answer/Karlijn-Willems-1\">小白该如何开始机器学习</a>）给出的答案。</em></p>\n<hr>\n<p>作者简介：</p>\n<p>Karlijn Willems，数据科学记者</p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112569\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112569votetotal\">3</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112569\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 22 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": 1, "praise_nums": "3", "url_object_id": "5762074758e1412d28705f60648d14f1", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/04/ff247977ac3e5237654ad324e8c880ed.jpg"], "front_image_path": "full/eadb28355fab57e9672e5c965147ef4caca04ac4.jpg", "title": "机器学习实践指南"}
{"create_date": "2017/10/03 ", "url": "http://blog.jobbole.com/112576/", "fav_nums": "  收藏", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://www.percona.com/blog/2017/09/19/proxysql-improves-mysql-ssl-connections/\">Percona</a>   译文出处：<a target=\"_blank\" href=\"https://www.oschina.net/translate/proxysql-improves-mysql-ssl-connections\">开源中国</a>   </div><p>在这篇博文里，我们准备来看一下 ProxySQL 是如何提高 MySQL 的 SSL 连接性能的。</p>\n<p>当用 SSL 部署 MySQL 时，主要的问题是如果没有使用连接池（例如：PHP 中的 mysqlnd-mux，python中 的 mysql.connector.pooling 等等），初始握手会造成大量的开销。不断的关闭连接、创建新的连接会对你的查询时间造成很大的影响。客户和同事最近让我知道了，虽然你可以用现代的英特尔处理器 AES-NI 硬件扩展来提升 SSL 加密/解密性能，但实际上，建立 SSL 连接时的开销来自于多次服务器和客户端建立连接时需要的握手。</p>\n<p>使用 ProxySQL 支持 SSL 的后端连接和连接池，我们可以将它应用在任何应用程序上、同一个服务器（说明如下）：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/10/0ff1c84684fcf49df0e2098f6d674cb8.png\"></p>\n<p>在这种情况下，ProxySQL 运行在同一台服务器上的一个应用下，并且通过本地套接字与 MySQL 连接。MySQL 数据就不需要通过不安全的 TCP 流进行传输了。</p>\n<p>我使用一个 PHP 脚本简单地在一个单线程中创建了 1 万个连接，来看看性能表现如何：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f28b44e82b9076973120\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-mixed-highlight\" title=\"含多种语言\"></span><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&lt;?php $i = 10000;\r\n$user = 'percona';\r\n$pass = 'percona';\r\nwhile($i&gt;=0) {\r\n$mysqli = mysqli_init();\r\n// Use SSL\r\n//$link = mysqli_real_connect($mysqli, \"192.168.56.110\", $user, $pass, \"\", 3306, \"\", MYSQL_CLIENT_SSL)\r\n// No SSL\r\n//$link = mysqli_real_connect($mysqli, \"192.168.56.110\", $user, $pass, \"\", 3306 )\r\n// OpenVPN\r\n//$link = mysqli_real_connect($mysqli, \"10.8.99.1\",      $user, $pass, \"\", 3306 )\r\n// ProxySQL\r\n$link = mysqli_real_connect($mysqli, \"localhost\",      $user, $pass, \"\", 6033, \"/tmp/proxysql.sock\")\r\nor die(mysqli_connect_error());\r\n$info = mysqli_get_host_info($mysqli);\r\n$i--;\r\nmysqli_close($mysqli);\r\nunset($mysqli);\r\n}\r\n?&gt;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f28b44e82b9076973120-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f28b44e82b9076973120-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f28b44e82b9076973120-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f28b44e82b9076973120-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f28b44e82b9076973120-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f28b44e82b9076973120-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f28b44e82b9076973120-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f28b44e82b9076973120-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f28b44e82b9076973120-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f28b44e82b9076973120-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f28b44e82b9076973120-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f28b44e82b9076973120-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59f28b44e82b9076973120-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f28b44e82b9076973120-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59f28b44e82b9076973120-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f28b44e82b9076973120-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-59f28b44e82b9076973120-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f28b44e82b9076973120-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-59f28b44e82b9076973120-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f28b44e82b9076973120-20\">20</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f28b44e82b9076973120-1\"><span class=\"crayon-ta\">&lt;?php</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">$i</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-cn\">10000</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f28b44e82b9076973120-2\"><span class=\"crayon-v\">$user</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-s\">'percona'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f28b44e82b9076973120-3\"><span class=\"crayon-v\">$pass</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-s\">'percona'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f28b44e82b9076973120-4\"><span class=\"crayon-st\">while</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">$i</span><span class=\"crayon-o\">&gt;=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span> <span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f28b44e82b9076973120-5\"><span class=\"crayon-v\">$mysqli</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-e\">mysqli_init</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f28b44e82b9076973120-6\"><span class=\"crayon-c\">// Use SSL</span></div><div class=\"crayon-line\" id=\"crayon-59f28b44e82b9076973120-7\"><span class=\"crayon-c\">//$link = mysqli_real_connect($mysqli, \"192.168.56.110\", $user, $pass, \"\", 3306, \"\", MYSQL_CLIENT_SSL)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f28b44e82b9076973120-8\"><span class=\"crayon-c\">// No SSL</span></div><div class=\"crayon-line\" id=\"crayon-59f28b44e82b9076973120-9\"><span class=\"crayon-c\">//$link = mysqli_real_connect($mysqli, \"192.168.56.110\", $user, $pass, \"\", 3306 )</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f28b44e82b9076973120-10\"><span class=\"crayon-c\">// OpenVPN</span></div><div class=\"crayon-line\" id=\"crayon-59f28b44e82b9076973120-11\"><span class=\"crayon-c\">//$link = mysqli_real_connect($mysqli, \"10.8.99.1\",      $user, $pass, \"\", 3306 )</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f28b44e82b9076973120-12\"><span class=\"crayon-c\">// ProxySQL</span></div><div class=\"crayon-line\" id=\"crayon-59f28b44e82b9076973120-13\"><span class=\"crayon-v\">$link</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-e\">mysqli_real_connect</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">$mysqli</span><span class=\"crayon-sy\">,</span> <span class=\"crayon-s\">\"localhost\"</span><span class=\"crayon-sy\">,</span>      <span class=\"crayon-v\">$user</span><span class=\"crayon-sy\">,</span> <span class=\"crayon-v\">$pass</span><span class=\"crayon-sy\">,</span> <span class=\"crayon-s\">\"\"</span><span class=\"crayon-sy\">,</span> <span class=\"crayon-cn\">6033</span><span class=\"crayon-sy\">,</span> <span class=\"crayon-s\">\"/tmp/proxysql.sock\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f28b44e82b9076973120-14\"><span class=\"crayon-st\">or</span> <span class=\"crayon-k \">die</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">mysqli_connect_error</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f28b44e82b9076973120-15\"><span class=\"crayon-v\">$info</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-e\">mysqli_get_host_info</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">$mysqli</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f28b44e82b9076973120-16\"><span class=\"crayon-v\">$i</span><span class=\"crayon-o\">--</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f28b44e82b9076973120-17\"><span class=\"crayon-e\">mysqli_close</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">$mysqli</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f28b44e82b9076973120-18\"><span class=\"crayon-k \">unset</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">$mysqli</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f28b44e82b9076973120-19\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f28b44e82b9076973120-20\"><span class=\"crayon-ta\">?&gt;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0050 seconds] -->\r\n<p>没有使用 SSL 直接连接 MySQL：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f28b44e82c4684714094\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n[root@ad ~]# time php php-test.php\r\nreal 0m20.417s\r\nuser 0m0.201s\r\nsys 0m3.396s</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f28b44e82c4684714094-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f28b44e82c4684714094-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f28b44e82c4684714094-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f28b44e82c4684714094-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f28b44e82c4684714094-1\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-i\">ad</span> <span class=\"crayon-o\">~</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># time php php-test.php</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f28b44e82c4684714094-2\"><span class=\"crayon-i\">real</span> <span class=\"crayon-cn\">0m20.417s</span></div><div class=\"crayon-line\" id=\"crayon-59f28b44e82c4684714094-3\"><span class=\"crayon-i\">user</span> <span class=\"crayon-cn\">0m0.201s</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f28b44e82c4684714094-4\"><span class=\"crayon-i\">sys</span> <span class=\"crayon-cn\">0m3.396s</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p>使用 SSL 直接连接 MySQL：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f28b44e82c8188578612\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n[root@ad ~]# time php php-test.php\r\nreal1m19.922s\r\nuser0m29.933s\r\nsys0m9.550s</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f28b44e82c8188578612-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f28b44e82c8188578612-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f28b44e82c8188578612-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f28b44e82c8188578612-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f28b44e82c8188578612-1\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-i\">ad</span> <span class=\"crayon-o\">~</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># time php php-test.php</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f28b44e82c8188578612-2\"><span class=\"crayon-v\">real1m19</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">922s</span></div><div class=\"crayon-line\" id=\"crayon-59f28b44e82c8188578612-3\"><span class=\"crayon-v\">user0m29</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">933s</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f28b44e82c8188578612-4\"><span class=\"crayon-v\">sys0m9</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">550s</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>在 OpenVPN 隧道下没有使用 SSL 直接连接 MySQL：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f28b44e82cb160718620\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n[root@ad ~]# time php php-test.php\r\nreal 0m15.161s\r\nuser 0m0.493s\r\nsys 0m0.803s</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f28b44e82cb160718620-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f28b44e82cb160718620-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f28b44e82cb160718620-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f28b44e82cb160718620-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f28b44e82cb160718620-1\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-i\">ad</span> <span class=\"crayon-o\">~</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># time php php-test.php</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f28b44e82cb160718620-2\"><span class=\"crayon-i\">real</span> <span class=\"crayon-cn\">0m15.161s</span></div><div class=\"crayon-line\" id=\"crayon-59f28b44e82cb160718620-3\"><span class=\"crayon-i\">user</span> <span class=\"crayon-cn\">0m0.493s</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f28b44e82cb160718620-4\"><span class=\"crayon-i\">sys</span> <span class=\"crayon-cn\">0m0.803s</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>接下来，使用 ProxySQL 通过本地套接字文件连接：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f28b44e82cf588236258\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n[root@ad ~]# time php php-test.php\r\nreal0m2.791s\r\nuser0m0.402s\r\nsys0m0.436s</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f28b44e82cf588236258-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f28b44e82cf588236258-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f28b44e82cf588236258-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f28b44e82cf588236258-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f28b44e82cf588236258-1\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-i\">ad</span> <span class=\"crayon-o\">~</span><span class=\"crayon-sy\">]</span><span class=\"crayon-p\"># time php php-test.php</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f28b44e82cf588236258-2\"><span class=\"crayon-v\">real0m2</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">791s</span></div><div class=\"crayon-line\" id=\"crayon-59f28b44e82cf588236258-3\"><span class=\"crayon-v\">user0m0</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">402s</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f28b44e82cf588236258-4\"><span class=\"crayon-v\">sys0m0</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">436s</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>下面是这些数据的对比图:</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/10/5d3dfb8dfe9f1d74d109dc32e17dea5c.png\"></p>\n<p>如你所见，使用 SSL 和不使用 SSL 情况下的开销差距大约是 400% —— 对某些负载来说还是很可怕的。</p>\n<p>通过 OpenVPN 连接大体上都比 SSL 好。有趣的是，OpenVPN 服务器需要部署在另一台服务器上，与 MySQL 服务器和应用分开。</p>\n<p>这种方法允许应用服务器和 MySQL 服务器（包括副本/集群节点）在同一个安全网络上进行通信，但会创建一个单一的故障点。另外，当有一个新的远程 master 的时候，在 MySQL 服务器上部署 OpenVPN 意味着如果你要新增一个额外的高可用性能的扩展会变得相当复杂。总之，OpenVPN 增加了许多额外的部件。</p>\n<p>ProxySQL 的漂亮之处在于，你可以在所有应用程序服务器运行它，只要将其指向到正确的 MySQL 服务器（主服务器）即可正常工作，或者使用复制组功能来识别权威主机。</p>\n<p>最后，需要注意的是，这些测试都是在 CentOS 7.3 + OpenSSL 1.0.1e + <a href=\"https://www.percona.com/software/mysql-database/percona-server\" target=\"_blank\" rel=\"nofollow\">Percona Server for MySQL 5.7.19</a> + ProxySQL 1.4.1 + PHP 5.4 + OpenVPN 2.4.3 上面进行的。</p>\n<p>祝您使用愉快。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112576\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112576votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112576\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": "  评论", "praise_nums": "1", "url_object_id": "94e7b98beb7395fd8eef07a86373c9f9", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2015/11/e78e36715813f49e9e62fe0c6050075c.png"], "front_image_path": "full/35011d6168be00e949624c665041dc724e3ad786.jpg", "title": "使用 ProxySQL 改进 MySQL SSL 的连接性能"}
{"create_date": "2017/10/07 ", "url": "http://blog.jobbole.com/112580/", "fav_nums": 8, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://www.tecmint.com/12-practical-examples-of-linux-grep-command/\">tecmint</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-2250-1.html\">Linux中国/Linux-pdz</a>   </div><p>你是否遇到过需要在文件中查找一个特定的字符串或者样式，但是不知道从哪儿开始？那么,就请<strong>grep</strong>来帮你吧。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/10/5d48fbc415ad93a43ccc4e6f9f2fd95e.png\" alt=\"\"></p>\n<p><strong>grep</strong>是每个<strong>Linux</strong>发行版都预装的一个强有力的文件模式搜索工具。无论何种原因，如果你的系统没有预装它的话，你可以很容易的通过系统的包管理器来安装它（<strong>Debian/Ubuntu</strong>系中的<strong>apt-get</strong>和<strong>RHEl/CentOS/Fedora</strong>系中的<strong>yum</strong>）。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33c72d3f18113399020\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n $ sudo apt-get install grep #Debian/Ubuntu $ sudo yum install grep #RHEL/CentOS/Fedora</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33c72d3f18113399020-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33c72d3f18113399020-1\"><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">apt</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">get </span><span class=\"crayon-e\">install </span><span class=\"crayon-v\">grep</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\">#Debian/Ubuntu $ sudo yum install grep #RHEL/CentOS/Fedora</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>我发现使用现实世界中的真实例子让你投身其中是让你接触<strong>grep</strong>命令的最容易方式。</p>\n<h3>1.搜索和寻找文件</h3>\n<p>假设你已经在你的电脑上安装了一个全新的<strong>Ubuntu</strong>，然后你打算卸载<strong>Python</strong>。你浏览网页寻找教程，但是你发现存在两个不同版本的<strong>Python</strong>在使用，而你不知道你的<strong>Ubuntu</strong>安装器到底在你的系统中安装了哪个版本的Python，也不知道它安装了哪些模块。解决这个烦恼只需简单的运行以下命令：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33c72d3f23899323531\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n $ sudo dpkg -l | grep -i python</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33c72d3f23899323531-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33c72d3f23899323531-1\"><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">dpkg</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">l</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">grep</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">python</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p></p>\n<h4>输出例子</h4>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33c72d3f27684126276\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n   ii  python2.7         2.7.3-0ubuntu3.4 Interactive high-level object-oriented language (version 2.7)\r\n   ii  python2.7-minimal 2.7.3-0ubuntu3.4 Minimal subset of the Python language (version 2.7)\r\n   ii  python-openssl    0.12-1ubuntu2.1  Python wrapper around the OpenSSL library\r\n   ii  python-pam        0.4.2-12.2ubuntu4 A Python interface to the PAM library</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33c72d3f27684126276-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c72d3f27684126276-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f33c72d3f27684126276-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c72d3f27684126276-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33c72d3f27684126276-1\"><span class=\"crayon-h\">   </span><span class=\"crayon-e\">ii  </span><span class=\"crayon-v\">python2</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">7</span><span class=\"crayon-h\">         </span><span class=\"crayon-cn\">2.7.3</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0ubuntu3.4</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Interactive </span><span class=\"crayon-v\">high</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">level </span><span class=\"crayon-t\">object</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">oriented </span><span class=\"crayon-e\">language</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">version</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2.7</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c72d3f27684126276-2\"><span class=\"crayon-h\">   </span><span class=\"crayon-e\">ii  </span><span class=\"crayon-v\">python2</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">7</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">minimal</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2.7.3</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0ubuntu3.4</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Minimal </span><span class=\"crayon-e\">subset </span><span class=\"crayon-e\">of </span><span class=\"crayon-e\">the </span><span class=\"crayon-e\">Python </span><span class=\"crayon-e\">language</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">version</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2.7</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f33c72d3f27684126276-3\"><span class=\"crayon-h\">   </span><span class=\"crayon-e\">ii  </span><span class=\"crayon-v\">python</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">openssl</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">0.12</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1ubuntu2.1</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">Python </span><span class=\"crayon-e\">wrapper </span><span class=\"crayon-e\">around </span><span class=\"crayon-e\">the </span><span class=\"crayon-e\">OpenSSL </span><span class=\"crayon-e\">library</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c72d3f27684126276-4\"><span class=\"crayon-e\">   </span><span class=\"crayon-e\">ii  </span><span class=\"crayon-v\">python</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">pam</span><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">0.4.2</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">12.2ubuntu4</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">A</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Python </span><span class=\"crayon-t\">interface</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">the </span><span class=\"crayon-e\">PAM </span><span class=\"crayon-v\">library</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0019 seconds] -->\r\n<p>首先，我们运行<strong>dpkg -l</strong>列出你系统上安装的<strong>.deb</strong>包。接着，我们使用管道将输出结果传输给命令<strong>grep -i</strong> python，这一步可以简单解释为把结果传输给grep然后过滤出所有含有python的项，并返回结果。–i选项用于忽略大小写,因为 grep 是大小写敏感的。使用选项<strong>-i</strong>是个好习惯，除非你打算进行更细节的搜索。</p>\n<h3>2.搜索和过滤文件</h3>\n<p>grep还可以在一个或多个文件里用于搜索和过滤。让我们来看一个这样的情景：</p>\n<p>你的<strong>Apache网页服务器</strong>出现了问题，你不得不从许多专业网站里找一个发帖询问。好心回复你的人让你粘贴上来你的<strong>/etc/apache2/sites-available/default-ssl</strong>文件内容。假如你能移除掉所有的注释行，那么对你，对帮你的人，以及所有阅读该文件的人，不是更容易发现问题吗？你当然可以很容易的做到！只需这样做就可以了：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33c72d3f2b059461072\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n $ sudo grep -v \"#\" /etc/apache2/sites-available/default-ssl</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33c72d3f2b059461072-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33c72d3f2b059461072-1\"><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">grep</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">v</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"#\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">etc</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">apache2</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sites</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">available</span><span class=\"crayon-o\">/</span><span class=\"crayon-st\">default</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">ssl</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>选项<strong>-v</strong>是告诉<strong>grep</strong>命令反转它的输出结果，意思就是不输出匹配的项，做相反的事，打印出所有不匹配的项。这个例子中，有<strong>#</strong>的是注释行（译注：其实这个命令并不准确，包含“#”的行不全是注释行。关于如何精确匹配注释行，可以了解更多的关于正则表达式的内容。）。</p>\n<h3>3.找出所有的mp3文件</h3>\n<p><strong>grep</strong>命令对于过滤来自于<strong>标准输出</strong>的结果非常有用。例如，假设你的一个文件夹里面全是各种格式的音乐文件。你要找出艺术家<strong>jayZ</strong>的所有<strong>mp3</strong>格式的音乐文件，里面也不要有任何混合音轨。使用<strong>find命令</strong>再结合管道使用<strong>grep</strong>就可以完成这个魔法：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33c72d3f2f402445989\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n $ sudo find . -name \".mp3\" | grep -i JayZ | grep -vi \"remix\"\"</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33c72d3f2f402445989-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33c72d3f2f402445989-1\"><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-i\">find</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">name</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\".mp3\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">grep</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">JayZ</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">grep</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">vi</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"remix\"</span>\"</div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>在这个例子中，我们使用find命令打印出所有以<strong>.mp3</strong>为后缀名的文件，接着将其使用管道传递给<strong>grep -i</strong>过滤和打印出名字为“<strong>JayZ</strong>”的文件,再使用管道传送给<strong>grep -vi</strong>以便过滤掉含有“<strong>remix</strong>”的项。</p>\n<ul>\n<li><a href=\"http://www.tecmint.com/35-practical-examples-of-linux-find-command/\" target=\"_blank\" rel=\"external nofollow\">35个Linux中find命令的实践例子</a></li>\n</ul>\n<h3>4.在搜索字符串前面或者后面显示行号</h3>\n<p>另外两个选项是-A和-B之间的切换，是用以显示匹配的行以及行号，分别控制在字符串前或字符串后显示的行数。Man页给出了更加详细的解释，我发现一个记忆的小窍门：-A=after、-B=before。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33c72d3f33654748713\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n $ sudo ifconfig | grep -A 4 etho $ sudo ifconfig | grep -B 2 UP</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33c72d3f33654748713-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33c72d3f33654748713-1\"><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">ifconfig</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">grep</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">A</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">etho</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">ifconfig</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">grep</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">B</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">UP</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p></p>\n<h3>5.在匹配字符串周围打印出行号</h3>\n<p>grep命令的<strong>-C</strong>选项和例4中的很相似，不过打印的并不是在匹配字符串的前面或后面的行，而是打印出两个方向都匹配的行（译注：同上面的记忆窍门一样：-C=center，以此为中心）： $ sudo ifconfig | grep -C 2 lo</p>\n<h3>6.计算匹配项的数目</h3>\n<p>这个功能类似于将<strong>grep</strong>输出的结果用管道传送给计数器（<strong>wc</strong>程序），grep内建的选项可以达到同样的目的：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33c72d3f37934357571\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ sudo ifconfig | grep -c inet6</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33c72d3f37934357571-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33c72d3f37934357571-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">ifconfig</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">grep</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">inet6</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p></p>\n<h3>7.按给定字符串搜索文件中匹配的行号</h3>\n<p>当你在编译出错时需要调试时，<strong>grep</strong>命令的<strong>-n</strong>选项是个非常有用的功能。它能告诉你所搜索的内容在文件的哪一行：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33c72d3f3a505548884\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ sudo grep -n \"main\" setup.py</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33c72d3f3a505548884-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33c72d3f3a505548884-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">grep</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"main\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">setup</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">py</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p></p>\n<h3>8.在所有目录里递归的搜索</h3>\n<p>假若你要在当前文件夹里搜索一个字符串，而当前文件夹里又有很多子目录，你可以指定一个<strong>-r</strong>选项以便于递归的搜索： $ sudo grep -r “function” *</p>\n<h3>9.进行精确匹配搜索</h3>\n<p>传递<strong>-w</strong>选项给grep命令可以在字符串中进行精确匹配搜索（译注：包含要搜索的单词，而不是通配）。例如，像下面这样输入：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33c72d3f3e920062894\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ sudo ifconfig | grep -w “RUNNING”</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33c72d3f3e920062894-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33c72d3f3e920062894-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">ifconfig</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">grep</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">w</span><span class=\"crayon-h\"> </span>“<span class=\"crayon-i\">RUNNING</span>”</div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>将打印出含有引号内匹配项的行。另外，你还可以试一下这个：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33c72d3f41639752886\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ sudo ifconfig | grep -w “RUN”</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33c72d3f41639752886-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33c72d3f41639752886-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">ifconfig</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">grep</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">w</span><span class=\"crayon-h\"> </span>“<span class=\"crayon-i\">RUN</span>”</div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>搜索这个匹配项时，若搜索的东西里面没有这样的一个单独的单词，将什么也不会返回。</p>\n<h3>10.在Gzip压缩文件中搜索</h3>\n<p>我们还要关注一下grep的衍生应用。第一个是<strong>zgrep</strong>，这个与<strong>zcat</strong>很相似，可以用于<strong>gzip</strong>压缩过的文件。它有与<strong>grep</strong>相似的命令选项，使用方式也一样：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33c72d3f44103707080\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ sudo zgrep -i error /var/log/syslog.2.gz</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33c72d3f44103707080-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33c72d3f44103707080-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">zgrep</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">error</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-t\">var</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">log</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">syslog</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">2.gz</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p></p>\n<h3>11.在文件中匹配正则表达式</h3>\n<p><strong>egrep</strong>是另一个衍生应用，代表着“<strong>扩展全局正则表达式</strong>”。它可以识别更多的正则表达式元字符，例如<strong>at + ?</strong> | 和<strong>（）</strong>。在搜索源代码文件时，egrep是一个非常有用的工具，还有其他的一些零碎代码文件的搜索需要，使得这样的搜索能力成为必需。可以在grep命令中使用选项<strong>-E</strong>来启用它。</p>\n<p>$ sudo grep -E</p>\n<h3>12.搜索一个固定匹配字符串</h3>\n<p><strong>fgrep</strong>用于在一个文件或文件列表中搜索固定样式的字符串。功能与<strong>grep -F</strong>同。<strong>fgrep</strong>的一个通常用法为传递一个含有样式的文件给它：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33c72d3f48916092586\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ sudo fgrep -f file_full_of_patterns.txt file_to_search.txt</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33c72d3f48916092586-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33c72d3f48916092586-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">fgrep</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">f</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">file_full_of_patterns</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">txt </span><span class=\"crayon-v\">file_to_search</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">txt</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>这仅仅是<strong>grep</strong>命令的开始，你可能已经注意到，它对于实现各种各样的需求简直是太有用了。除了这种我们运行的这种只有一行的命令，<strong>grep</strong>还可以写成<strong>cron</strong>任务或者自动的<strong>shell脚本</strong>去执行。保持好奇心，试验一下<strong>man页</strong>的各个选项，为实现你的目的写出一些<strong>grep表达式</strong>吧。</p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112580\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112580votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112580\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 8 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 2 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": 2, "praise_nums": "1", "url_object_id": "a864dc95a7ad9c88a278845d8f2a5e67", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/10/5d48fbc415ad93a43ccc4e6f9f2fd95e.png"], "front_image_path": "full/66f4d2455d5b49d6be19672a42543522126b6c4f.jpg", "title": "Linux 中 grep 命令的 12 个实践例子"}
{"create_date": "2017/09/25 ", "url": "http://blog.jobbole.com/112541/", "fav_nums": 10, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://medium.com/coderbyte/a-guide-to-becoming-a-full-stack-developer-in-2017-5c3c08a1600c\">medium.com</a>   译文出处：<a target=\"_blank\" href=\"https://www.oschina.net/translate/a-guide-to-becoming-a-full-stack-developer-in-2017\">oschina</a>   </div><p>据 <a href=\"http://stackoverflow.com/insights/survey/2016\" target=\"_blank\" rel=\"nofollow\">Stack Overflow 2016 Developer Survey</a> 调研，全栈网络开发是目前最受欢迎的开发职业。难怪现在有几十个在线的或者个人版程序来帮助人们成长为全栈开发员，甚至可以协助新加入的开发人员找到更高薪的编程工作。<br>\n本篇文章中，我不会谈论哪种网站或者编程训练营有最好的网络开发程序。而是给从未学习过编程的你，提供一个明确的指引，包括如何成为全栈网络开发人员最必不可少的技能以及如何找到工作。我将从以下三点讲起：</p>\n<ol>\n<li>2017年被大量用来教学给学生的程序</li>\n<li>来自过去几年我在公司中面试的开发职位以及面试潜在的全栈网络开发职位的候选人员所积累下来的经验。</li>\n<li>来自 <a href=\"https://coderbyte.com/\" target=\"_blank\" rel=\"nofollow\"><em>Coderbyte</em></a><em>  </em>中已经开始接受编程训练和之后得到编程工作的人的故事和反馈。</li>\n</ol>\n<h4>终极指南</h4>\n<p>全栈 Web 开发人员是<a href=\"https://www.sitepoint.com/full-stack-developer/\" target=\"_blank\" rel=\"nofollow\">能够工作</a>在应用程序的前端和后端的开发人员。前端通常是指应用程序中用户将看到或交互的部分，后端是应用程序中处理逻辑、数据库交互、用户认证、服务器配置的部分。全栈开发并不意味着你已经掌握了前端和后端工作所需的一切，而是意味着你可以在双端工作并理解构建应用程序时发生的情况。</p>\n<p>如果你想在 2017 年成为一个全栈 Web 开发人员，并找到你的第一份工作，下面是一个参考指南，列出了你需要学习的东西。</p>\n<h3>1. HTML/CSS</h3>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/09/d38cc3316c54cabe5ecb538af748a0f7.png\" width=\"1600\" height=\"1066\"></p>\n<p>几乎所有程序，无论是在线的还是离线的，都在说明要成为 Web 开发者需要从 HTML 和 CSS 开始，因为它们是 Web 的基石。简单地说，HTML 让你给网站添加内容，而 CSS 则为这些内容添加样式。下面的主题都是关于 HTML/CSS 的，在面试和工作中都经常遇到：</p>\n<ul>\n<li><a href=\"https://en.wikipedia.org/wiki/Semantic_HTML\" target=\"_blank\" rel=\"nofollow\">语义化的 HTML</a>。</li>\n<li>解释 <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Box_Model/Introduction_to_the_CSS_box_model\" target=\"_blank\" rel=\"nofollow\">CSS 盒模型</a>。</li>\n<li><a href=\"https://htmlmag.com/article/an-introduction-to-css-preprocessors-sass-less-stylus\" target=\"_blank\" rel=\"nofollow\">CSS 预处理器</a>的优点(你不需要深入理解，但应该知道这是什么以及它们对开发起到的辅助作用)。</li>\n<li>使用 <a href=\"https://www.w3schools.com/css/css3_mediaqueries.asp\" target=\"_blank\" rel=\"nofollow\">CSS 媒体查询</a>针对不同的设备编写响应式的 CSS。</li>\n<li><a href=\"http://getbootstrap.com/\" target=\"_blank\" rel=\"nofollow\">Bootstrap</a> (一个辅助页面设计和布局的框架，大量在线程序或学校都关注 Bootstrap 教学。实际上，深入理解基本的 CSS 比理解特定的 Bootstrap 特性和方法更为重要)。</li>\n</ul>\n<h3>2. JavaScript</h3>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/09/059fbbd729bc50c29d31645c8b1bcfab.png\" width=\"1600\" height=\"1200\"></p>\n<p>JavaScript 语言一年比一年流行，新的库、框架和工具层出不穷。<a href=\"http://stackoverflow.com/insights/survey/2016\" target=\"_blank\" rel=\"nofollow\">Stack Overflow 2016 年的开发者调查</a>指出，JavaScript 在全栈、前端和后端开发中都是最流行的语言。它是浏览器唯一支持的原生语言，同时也能作为服务器端语言(下面会看到 Node.js)。下面是一些作为全栈开发者所需要了解的主题：</p>\n<ul>\n<li>理解如何<a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Document_Object_Model/Introduction\" target=\"_blank\" rel=\"nofollow\">使用 DOM</a>。了解 <a href=\"https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Objects/JSON\" target=\"_blank\" rel=\"nofollow\">JSON</a> 并知道如何操作它。</li>\n<li>重要的<a href=\"http://javascriptissexy.com/16-javascript-concepts-you-must-know-well/\" target=\"_blank\" rel=\"nofollow\">语言特性</a>，比如函数式成分、原型继承、闭包、事件委托、作用域、高阶函数等。</li>\n<li><a href=\"https://kaye.us/javascript-async-control-flow/\" target=\"_blank\" rel=\"nofollow\">异步控制流</a>、<a href=\"http://www.datchley.name/es6-promises/\" target=\"_blank\" rel=\"nofollow\">Promise</a> 和 <a href=\"http://javascriptissexy.com/understand-javascript-callback-functions-and-use-them/\" target=\"_blank\" rel=\"nofollow\">回调</a>。</li>\n<li>了解如何正确地通过<a href=\"https://medium.freecodecamp.com/javascript-modules-a-beginner-s-guide-783f7d7a5fcc\" target=\"_blank\" rel=\"nofollow\">模块化</a>组织你的代码，像 <a href=\"https://webpack.js.org/\" target=\"_blank\" rel=\"nofollow\">webpack</a>、<a href=\"http://browserify.org/\" target=\"_blank\" rel=\"nofollow\">browserify</a> 或者 <a href=\"http://gulpjs.com/\" target=\"_blank\" rel=\"nofollow\">gulp</a> 这样的构建工具对此大有裨益。</li>\n<li>至少会使用一个<a href=\"https://medium.com/javascript-scene/top-javascript-frameworks-topics-to-learn-in-2017-700a397b711\" target=\"_blank\" rel=\"nofollow\">流行框架</a>(很多程序将重要放在教你使用像 <a href=\"https://facebook.github.io/react/\" target=\"_blank\" rel=\"nofollow\">React</a> 和 <a href=\"https://angularjs.org/\" target=\"_blank\" rel=\"nofollow\">AngularJS</a> 这样的库或框架，但实际上更重要的事情是深入理解 JavaScript 语言而不是特定的框架特性。只要你精通 JavaScript，选用一个框架将不费吹灰之力)。</li>\n<li>虽然有些人<a href=\"https://news.ycombinator.com/item?id=12969826\" target=\"_blank\" rel=\"nofollow\">可能认为</a>你应该减少使用 <a href=\"https://learn.jquery.com/\" target=\"_blank\" rel=\"nofollow\">jQuery</a>，因为它正趋于死亡。但 jQuery 代码仍然存在于大量应用中，彻底理解它会对你很有帮助。</li>\n<li>了解一些关于<a href=\"http://stateofjs.com/2016/testing/\" target=\"_blank\" rel=\"nofollow\">测试框架</a>的知识，以及明白它们的重要性(有人甚至会认为这个话题可有可无)。</li>\n<li>学习重要的 <a href=\"https://github.com/lukehoban/es6features\" target=\"_blank\" rel=\"nofollow\">ES6 新特性</a>(可选)。</li>\n</ul>\n<h3>3. 后端语言</h3>\n<p>一旦你认为已掌握好 HTML/CSS 和 JavaScript 技能，你会向一门后端编程语言进军，以便处理类似数据库操作、用户认证以及应用逻辑的任务。所有在线练习平台和代码训练营通常集中于一门特定的后端语言，而实际上你选择哪一门也并不重要，只要你<strong>理解</strong>你正在做的事情并学到了你所选语言的本质。如果你问学哪一门后端语言最好，你会得到各种各样的无数的<a href=\"https://www.quora.com/Which-backend-programming-language-should-I-learn-in-2016\" target=\"_blank\" rel=\"nofollow\">回复</a>，所以下图我给大家列出了一些受欢迎的组合。</p>\n<p>一个重要的提示：不管你决定学习哪一门，请坚持下去，并尽可能深入学习－所有下图列出的语言都有相应的工作机会。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/66820c93f4c07552a51fe67c363f9990.png\" width=\"600\" height=\"569\"></p>\n<ul>\n<li>Node.js：这是一个很好的选择，因为 Node.js 本身就是 JavaScript 环境，这意味着你不需要学习新的语言。这也是很多在线平台和训练营为什么选择教学 Node.js 的原因。这里你最有可能学习的也是最受欢迎的能帮助你开发网络应用的框架就是 <a href=\"https://expressjs.com/\" target=\"_blank\" rel=\"nofollow\">Express</a> 。</li>\n<li>Ruby：用 Ruby 开发比较受欢迎的开发框架有 Rails 和 Sinatra 。很多<a href=\"https://www.quora.com/Why-do-many-coding-bootcamps-still-teach-Ruby-on-Rails-instead-of-JavaScript-for-web-app-development-like-Hack-Reactor-and-Fullstack-Academy-Is-it-because-the-current-demand-is-ROR-and-not-the-future\" target=\"_blank\" rel=\"nofollow\">教学平台</a>把 Ruby 作为首选后端语言。</li>\n<li>Python：Python 受欢迎的开发框架有 Django 和 Flask 。</li>\n<li>Java：现在 Java 语言很少被选中作为全栈网络开发的教学语言，但是一些公司现在还是使用 Java 作为后端语言，所以现在也还是一门有相当需求量的语言（见上图）。</li>\n<li>PHP：PHP 现在也很少被这些平台教学选中，但就像 Java 一样，它也还是有一定的需求量，而且也是当今网络发展的<a href=\"https://www.quora.com/Why-should-I-learn-to-program-in-PHP-why-is-it-so-important\" target=\"_blank\" rel=\"nofollow\">基石</a>。</li>\n</ul>\n<h3>4. 数据库 &amp; Web 存储</h3>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/09/3c320cb4c0d3329e387f532b19ea745c.png\" width=\"1600\" height=\"1066\"></p>\n<p>编写 Web 应用的过程中，有时候需要保存数据，以便稍后再进行访问。那么最好掌握下面这些有关数据库和存储的主题。</p>\n<ul>\n<li>理解<a href=\"https://www.pluralsight.com/blog/software-development/relational-non-relational-databases\" target=\"_blank\" rel=\"nofollow\">关系型数据</a>，比如 <a href=\"https://en.wikipedia.org/wiki/SQL\" target=\"_blank\" rel=\"nofollow\">SQL</a>，带来的好处。</li>\n<li>学习 <a href=\"https://www.couchbase.com/nosql-resources/why-nosql\" target=\"_blank\" rel=\"nofollow\">NoSQL</a> 数据库，比如 <a href=\"https://en.wikipedia.org/wiki/MongoDB\" target=\"_blank\" rel=\"nofollow\">MongoDB</a>。</li>\n<li>知道在<a href=\"https://www.sitepoint.com/sql-vs-nosql-differences/\" target=\"_blank\" rel=\"nofollow\">某些情况下</a>，哪一种更合适。</li>\n<li>知道如何使用你的后端语言连接数据库(比如 Node.js + MongoDB)。</li>\n<li>知道像 <a href=\"https://redis.io/\" target=\"_blank\" rel=\"nofollow\">Redis</a> 或 <a href=\"https://memcached.org/\" target=\"_blank\" rel=\"nofollow\">memcached</a> 这类内存数据存储的<a href=\"http://www.computerweekly.com/feature/In-memory-databases-What-they-do-and-the-storage-they-need\" target=\"_blank\" rel=\"nofollow\">优势</a>。</li>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API\" target=\"_blank\" rel=\"nofollow\">Web 存储</a>可在浏览顺中存储会话、Cookie 以及缓存数据。</li>\n<li><a href=\"http://www.infoworld.com/article/2609739/database/scaling-and-querying-large-nosql-databases.html\" target=\"_blank\" rel=\"nofollow\">伸缩型</a>数据库、<a href=\"https://en.wikipedia.org/wiki/ACID\" target=\"_blank\" rel=\"nofollow\">ACID</a> 和 <a href=\"http://stackoverflow.com/questions/1279613/what-is-an-orm-and-where-can-i-learn-more-about-it\" target=\"_blank\" rel=\"nofollow\">ORM</a> (都是可选的)。</li>\n</ul>\n<h3>5. HTTP &amp; REST</h3>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/09/04de6506754fc15424eaabe551fc610c.png\" width=\"1600\" height=\"482\"></p>\n<p>HTTP 是应用于互联网的一项无状态应用协议 —— 它规范了客户端连接到服务器的行为(比如 JavaScript 代码通过 AJAX 请求后端服务器中运行的代码就是采用的 HTTP)。下面列出了你应该了解的重要主题：</p>\n<ul>\n<li>什么是 <a href=\"https://www.pluralsight.com/blog/tutorials/representational-state-transfer-tips\" target=\"_blank\" rel=\"nofollow\">REST</a> 以及它为什么对 HTTP 协议和 Web 应用来说<a href=\"http://stackoverflow.com/questions/671118/what-exactly-is-restful-programming\" target=\"_blank\" rel=\"nofollow\">很重要</a>。</li>\n<li><a href=\"http://www.restapitutorial.com/\" target=\"_blank\" rel=\"nofollow\">设计</a> RESTful API 的<a href=\"http://www.vinaysahni.com/best-practices-for-a-pragmatic-restful-api\" target=\"_blank\" rel=\"nofollow\">最佳实践</a>。<a href=\"http://stackoverflow.com/questions/3477333/what-is-the-difference-between-post-and-get\" target=\"_blank\" rel=\"nofollow\">POST/GET</a> 请求。</li>\n<li>学会使用 <a href=\"https://developer.chrome.com/devtools\" target=\"_blank\" rel=\"nofollow\">Chrome DevTools</a> 是极其有用的。</li>\n<li><a href=\"https://www.digicert.com/ssl.htm\" target=\"_blank\" rel=\"nofollow\">SSL 证书</a>是什么。</li>\n<li><a href=\"https://hpbn.co/http2/\" target=\"_blank\" rel=\"nofollow\">HTTP/2 &amp; SPDY</a> (可选)。</li>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API\" target=\"_blank\" rel=\"nofollow\">WebSockets</a>、Web Workers，以及 <a href=\"https://aarontgrogg.com/blog/2015/07/20/the-difference-between-service-workers-web-workers-and-websockets/\" target=\"_blank\" rel=\"nofollow\">Service Workers</a> (均可选)。</li>\n</ul>\n<h3>6. Web 应用架构</h3>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/09/aa76695d12eb06bd7a03b12707e4e49b.png\" width=\"960\" height=\"530\"></p>\n<p>当你认为已经掌握了 HTML/CSS、JavaScript、后端编程、数据库 和 HTTP/REST ，你就到了难对付的部分了。这时，如果你想创建一个稍微复杂的 web 应用，你需要了解如何组织代码，如何分割文件，往哪里保存大量媒体文件，如何结构化数据库里的数据，何处执行特定的计算任务（客户端还是服务器端），以及更多其他问题。</p>\n<p>网上你可以读到一些最佳范例，但是最好的学习应用架构的方法是自己实践一个包含<a href=\"https://www.pinterest.com/pin/266697609164793095/\" target=\"_blank\" rel=\"nofollow\">多个分散部件</a>的大型应用 —— 甚至更好的方法是：和团队合作开发一个相对大型/复杂的应用。</p>\n<p>这也是为什么，比如有个七年以上工作经验的人，也许他未必比工作两年的另一个人更懂 CSS 或 JavaScript ，但或许是多年各种不同应用和网站的工作经验，使他学习到<a href=\"http://stackoverflow.com/questions/816258/good-architecture-interview-questions\" target=\"_blank\" rel=\"nofollow\">如何</a>最有效的架构和设计应用（包括学习其他<a href=\"https://www.quora.com/When-does-a-software-developer-become-a-senior-software-developer\" target=\"_blank\" rel=\"nofollow\">重要事项</a>），并且在开发过程中能看清“全局”。以下书籍或文章可以帮助你学习如何有效架构你得网络应用：</p>\n<ul>\n<li>学习通用的<a href=\"https://en.wikipedia.org/wiki/Platform_as_a_service\" target=\"_blank\" rel=\"nofollow\">平台即服务</a>，比如 <a href=\"https://www.heroku.com/\" target=\"_blank\" rel=\"nofollow\">Heroku</a> 和 <a href=\"https://aws.amazon.com/what-is-aws/\" target=\"_blank\" rel=\"nofollow\">AWS</a> 。Heroku 允许你做很少的配置或服务器维护，即可轻松上传代码，并执行应用。AWS 提供许多产品和服务帮助解决存储、视频处理、负载均衡以及其他更多其他的问题。</li>\n<li>应用和流行浏览器的<a href=\"https://www.igvita.com/posa/high-performance-networking-in-google-chrome/\" target=\"_blank\" rel=\"nofollow\">性能优化</a>。</li>\n<li>关于网络应用架构应该考虑哪些要素的一些<a href=\"https://www.igvita.com/posa/high-performance-networking-in-google-chrome/\" target=\"_blank\" rel=\"nofollow\">观点</a>。</li>\n<li>微软文档：<a href=\"https://msdn.microsoft.com/en-us/library/ee658099.aspx\" target=\"_blank\" rel=\"nofollow\">设计网络应用</a>。</li>\n<li>模型－视图－控制器编程模式（<a href=\"http://softwareengineering.stackexchange.com/questions/127624/what-is-mvc-really\" target=\"_blank\" rel=\"nofollow\">MVC</a>）。</li>\n<li>当然，最重要的还是应该尝试与别人合作项目，阅读 Github 上受欢迎的代码，以及<a href=\"https://design.quora.com/Notification-System-Design-99+\" target=\"_blank\" rel=\"nofollow\">尽可能</a>向资深开发员<a href=\"https://www.youtube.com/watch?v=UbbXYRb-hCU\" target=\"_blank\" rel=\"nofollow\">学习</a>。</li>\n</ul>\n<h3>7. Git</h3>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/09/2311eb741a2dc8b8be890f7659f09e5f.png\" width=\"1600\" height=\"489\"></p>\n<p>Git是一套<a href=\"https://www.atlassian.com/git/tutorials/what-is-git\" target=\"_blank\" rel=\"nofollow\">版本控制系统</a>，它允许开发团队的开发人员跟踪代码库的所有更改。了解与 Git 相关的一些事项非常重要，它能让你了解如何正确获取错过的最新代码，更新部分代码，修复并修改其他人的代码，而不会发生任何意外。 你一定要学习 Git 背后的概念，并多做尝试。</p>\n<ul>\n<li>这里是一个<a href=\"https://git-scm.com/docs\" target=\"_blank\" rel=\"nofollow\">参考列表</a>，它列出了你将会使用到的 git 命令。</li>\n<li>这里是一本<a href=\"http://product.hubspot.com/blog/git-and-github-tutorial-for-beginners\" target=\"_blank\" rel=\"nofollow\">手册</a> 对 Git 和 GitHub 的初学者很有用。</li>\n</ul>\n<h3>8. 基本算法和数据结构</h3>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/09/33b534fd6b0b375b02fccf4b0ebc731a.png\" width=\"1200\" height=\"789\"></p>\n<p>这个话题在开发世界中有点两极分化，因为有些开发人员认为在 Web 开发中不应该如此重视计算机科学的主题诸如树的遍历、排序、算法分析、矩阵操纵等。然而，像谷歌这样的公司在面试中<a href=\"https://www.glassdoor.com/Interview/Google-Software-Engineer-Interview-Questions-EI_IE9079.0,6_KO7,24.htm#InterviewReview_4168541\" target=\"_blank\" rel=\"nofollow\">问</a>这些类型的问题是出了名的。 <a href=\"https://www.quora.com/What-interview-questions-does-Google-ask-their-Front-End-engineer-candidates\" target=\"_blank\" rel=\"nofollow\">有人说</a>谷歌的前端工程师面试：</p>\n<blockquote><p>也就是说，正如 <a href=\"https://www.quora.com/profile/Ryan-McGrath\" target=\"_blank\" rel=\"nofollow\">Ryan McGrath</a> 所提到的，我们的前端（FE）工程师要有一个坚实的计算机科学（CS）背景，就像我们所有的工程师一样。</p></blockquote>\n<p>虽然有些公司确实要求申请人拥有计算机科学学位或同等学历，也有很多公司愿意<a href=\"https://www.quora.com/Can-you-get-a-web-development-job-without-a-degree\" target=\"_blank\" rel=\"nofollow\">雇佣</a>没有这个技术资格的人，如果他们能够证明他们懂得如何开发应用程序和展示出对整个域的理解。但是，作为一个合格的开发人员，而不是编写低效的代码或使用错误的工具，部分要求是理解一些基本算法和数据结构，能够分析权衡。所以你一定要学会一些东西：</p>\n<ul>\n<li>研究<a href=\"http://stackoverflow.com/questions/730620/how-does-a-hash-table-work\" target=\"_blank\" rel=\"nofollow\">哈希表</a>并试着在更<a href=\"https://www.quora.com/How-do-I-create-my-own-Hash-Table-implementation-in-Python\" target=\"_blank\" rel=\"nofollow\">深</a>的层次上理解它们。这个数据结构构成了 JavaScript 中的对象（Python 中的字典，Ruby 中的哈希）的基础。</li>\n<li>理解树和图作为数据结构有何<a href=\"https://www.quora.com/Under-what-circumstances-would-a-web-developer-need-to-use-data-structures-such-as-Linked-Lists-BST-and-Graphs\" target=\"_blank\" rel=\"nofollow\">益处</a>。</li>\n<li>理解<a href=\"https://justin.abrah.ms/computer-science/big-o-notation-explained.html\" target=\"_blank\" rel=\"nofollow\">算法复杂度分析</a>的基础知识，所以你不会做<a href=\"https://medium.com/@felipernb/algorithms-data-structures-and-web-development-7772e088f1d3\" target=\"_blank\" rel=\"nofollow\">傻</a>事，像创建实际上没必要创建的3层嵌套的循环！</li>\n<li>懂得何时使用<a href=\"http://stackoverflow.com/questions/688097/objects-vs-arrays-in-javascript-for-key-value-pairs\" target=\"_blank\" rel=\"nofollow\">对象或是数组</a>，并懂得取舍。</li>\n<li>了解为何在处理大量数据时<a href=\"https://martin.kleppmann.com/2012/10/01/rethinking-caching-in-web-apps.html\" target=\"_blank\" rel=\"nofollow\">缓存</a>是如此重要。也要了解内存存储和磁盘存储各自的<a href=\"http://stackoverflow.com/questions/25802521/difference-between-in-memory-databases-and-disk-memory-database\" target=\"_blank\" rel=\"nofollow\">利与弊</a> 。</li>\n<li>了解队列和栈的<a href=\"http://stackoverflow.com/questions/2074970/stack-and-queue-why\" target=\"_blank\" rel=\"nofollow\">区别</a> 。</li>\n</ul>\n<p>学习所有这些是会很辛苦，但最终还是值得的，并且全栈开发充满乐趣！请在下面留下你的意见，并且访问<a href=\"https://coderbyte.com/\" target=\"_blank\" rel=\"nofollow\">Coderbyte</a>进行算法练习。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112541\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112541votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112541\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 10 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": "  评论", "praise_nums": "2", "url_object_id": "5a76e4b7f22e6b066b7cbfd6ecdc95fe", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/09/d38cc3316c54cabe5ecb538af748a0f7.png"], "front_image_path": "full/5601e00e0aa717b067667d0bc9aa5aba972e07fc.jpg", "title": "2017 全栈开发人员修炼指南"}
{"create_date": "2017/10/09 ", "url": "http://blog.jobbole.com/112583/", "fav_nums": 3, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"http://opensourceforu.com/2017/09/top-7-things-linux-may-not-known-far/\">PHIL ZONA</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-8934-1.html\">Linux中国/ucasFL</a>   </div><p><img class=\"aligncenter\" title=\"\" src=\"http://jbcdn2.b0.upaiyun.com/2017/10/12f08abea785eac9b96d11426703f4e1.jpg\" width=\"450\" height=\"338\" hspace=\"0\" vspace=\"0\"></p>\n<p>使用 Linux 最酷的事情之一就是随着时间的推移，你可以不断获得新的知识。每天，你都可能会遇到一个新的实用工具，或者只是一个不太熟悉的奇技淫巧，但是却非常有用。这些零碎的东西并不总是能够改变生活，但是却是专业知识的基础。</p>\n<p>即使是专家，也不可能事事皆知。无论你有多少经验，可能总会有更多的东西需要你去学习。所以，在这儿我列出了七件关于 Linux 你可能不知道的事情。</p>\n<h3>一个查找命令历史的交互模式</h3>\n<p>你可能对 <code>history</code> 命令非常熟悉，它会读取 bash 历史，然后以编号列表的方式输出到标准输出（<code>stdout</code>）。然而，如果你在 <code>curl</code> 命令的海洋里寻找一个特定的链接（URL），那么这个列表并不总是那么容易阅读的。</p>\n<p>你还可以有另一个选择，Linux 有一个交互式的反向搜索可以帮助你解决这个问题。你可以通过快捷键 <code>ctrl+r</code>启动交互模式，然后进入一个交互提示中，它将会根据你提供的字符串来向后搜索 bash 历史，你可以通过再次按下 <code>ctrl+r</code> 向后搜索更老的命令，或者按下 <code>ctrl+s</code> 向前搜索。</p>\n<p>注意，<code>ctrl+s</code> 有时会与 XON/XOFF 流控制冲突，即 XON/XOFF 流控制也会使用该快捷键。你可以通过运行 <code>stty -ixon</code> 命令来禁用该快捷键。在你的个人电脑上，这通常是有用的，但是在禁用前，确保你不需要 XON/XOFF 。</p>\n<h3>Cron 不是安排任务的唯一方式</h3>\n<p>Cron 任务对于任何水平的系统管理员，无论是毫无经验的初学者，还是经验丰富的专家来说，都是非常有用的。但是，如果你需要安排一个一次性的任务，那么 <code>at</code> 命令为你提供了一个快捷的方式来创建任务，从而你不需要接触 crontab 。</p>\n<p><code>at</code> 命令的运行方式是在后面紧跟着你想要运行任务的运行时间。时间是灵活的，因为它支持许多时间格式。包括下面这些例子：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f2a3b42299e515777104\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nat 12:00 PM September 30 2017\r\nat now + 1 hour\r\nat 9:00 AM tomorrow</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f2a3b42299e515777104-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2a3b42299e515777104-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f2a3b42299e515777104-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f2a3b42299e515777104-1\"><span class=\"crayon-i\">at</span> <span class=\"crayon-cn\">12</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span> <span class=\"crayon-i\">PM</span> <span class=\"crayon-i\">September</span> <span class=\"crayon-cn\">30</span> <span class=\"crayon-cn\">2017</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2a3b42299e515777104-2\"><span class=\"crayon-i\">at</span> <span class=\"crayon-i\">now</span> <span class=\"crayon-o\">+</span> <span class=\"crayon-cn\">1</span> <span class=\"crayon-e\">hour</span></div><div class=\"crayon-line\" id=\"crayon-59f2a3b42299e515777104-3\"><span class=\"crayon-i\">at</span> <span class=\"crayon-cn\">9</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span> <span class=\"crayon-i\">AM</span> <span class=\"crayon-v\">tomorrow</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>当你以带参数的方式输入 <code>at</code> 命令以后，将会提示你该命令将在你的 Linux 系统上运行。这可能是一个备份脚本，一套维护任务，或者甚至是一个普通的 bash 命令。如果要结束任务，可以按 <code>ctrl+d</code> 。</p>\n<p>另外，你可以使用 <code>atq</code> 命令查看当前用户的所有任务，或者使用 <code>sudo atq</code> 查看所有用户的任务。它将会展示出所有排定好的任务，并且每个任务都伴有一个 ID 。如果你想取消一个排定好的任务，可以使用 <code>atrm</code> 命令，并且以任务 ID 作为参数。</p>\n<h3>你可以按照功能搜索命令，而不仅仅是通过名字</h3>\n<p>记住命令的名字非常困难，特别是对于初学者来说。幸运的是，Linux 附带了一个通过名字和描述来搜索 man 页面的工具。</p>\n<p>下次，如果你没有记住你想要使用的工具的名称，你可以尝试使用 <code>apropos</code> 命令加上你想要干的事情的描述。比如，<code>apropos build filesystem</code> 将会返回一系列名字和描述包括了 “build” 和 “filesystem” 单词的工具。</p>\n<p><code>apropos</code> 命令接受一个或多个字符串作为参数，但同时它也有其他参数，比如你可以使用 <code>-r</code> 参数，从而通过正则表达式来搜索。</p>\n<h3>一个允许你来管理系统版本的替代系统</h3>\n<p>如果你曾进行过软件开发，你就会明白跨项目管理不同版本的语言的支持的重要性。许多 Linux 发行版都有工具可以来处理不同的内建版本。</p>\n<p>可执行文件比如 <code>java</code> 往往符号链接到目录 <code>/etc/alternatives</code> 下。反过来，该目录会将符号链接存储为二进制文件并提供一个管理这些链接的接口。Java 可能是替代系统最常管理的语言，但是，经过一些配置，它也可以作为其他应用程序替代品，比如 NVM 和 RVM （NVM 和 RVM 分别是 NodeJS 和 Ruby 的版本管理器）。</p>\n<p>在基于 Debian 的系统中，你可以使用 <code>update-alternatives</code> 命令创建和管理这些链接。在 CentOS 中，这个工具就叫做 <code>alternatives</code> 。通过更改你的 alternatives 文件中的链接，你便可以安装一个语言的多个版本，并且在不同的情况下使用不同的二进制。这个替代系统也提供了对任何你可能在命令行运行的程序的支持。</p>\n<h3><code>shred</code> 命令是更加安全的删除文件方式</h3>\n<p>我们大多数时候总是使用 <code>rm</code> 命令来删除文件。但是文件去哪儿了呢？真相是 <code>rm</code> 命令所做的事情并不是像你所想像的那样，它仅仅删除了文件系统和硬盘上的数据的硬链接。硬盘上的数据依旧存在，直到被另一个应用重写覆盖。对于非常敏感的数据来说，这会带来一个很大的安全隐患。</p>\n<p><code>shred</code> 命令是 <code>rm</code> 命令的升级版。当你使用 <code>shred</code> 命令删除一个文件之后，文件中的数据会被多次随机覆写。甚至有一个选项可以在随机覆写之后对所有的数据进行清零。</p>\n<p>如果你想安全的删除一个文件并且以零覆盖，那么可以使用下面的命令：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f2a3b4229ab366159380\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nshred -u -z [file name]</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f2a3b4229ab366159380-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f2a3b4229ab366159380-1\"><span class=\"crayon-i\">shred</span> <span class=\"crayon-o\">-</span><span class=\"crayon-i\">u</span> <span class=\"crayon-o\">-</span><span class=\"crayon-i\">z</span> <span class=\"crayon-sy\">[</span><span class=\"crayon-i\">file</span> <span class=\"crayon-v\">name</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>同时，你也可以使用 <code>-n</code> 选项和一个数字作为参数，从而指定在随机覆盖数据的时候迭代多少次。</p>\n<h3>通过自动更正来避免输入很长的无效文件路径</h3>\n<p>有多少次，你输入一个文件的绝对路径，然而却看到“没有该文件或目录”的消息。任何人都会明白输入一个很长的字符串的痛苦。幸运的是，有一个很简单的解决办法。</p>\n<p>内建的 <code>shopt</code> 命令允许你设置不同的选项来改变 shell 的行为。设置 <code>cdspell</code> 选项是避免输入文件路径时一个字母出错的头痛的一个简单方式。你可以通过运行 <code>shopt -s cdspell</code> 命令来启用该选项。启用该选项后，当你想要切换目录时，会自动更正为最匹配的目录。</p>\n<p>Shell 选项是节省时间的一个好方法（更不用说减少麻烦），此外还有许许多多的其他选项。如果想查看你的系统中所有选项的完整列表，可以运行不带参数的 <code>shopt</code> 命令。需要注意的是，这是 bash 的特性，如果你运行 zsh 或者其他可供选择的 shell，可能无法使用。</p>\n<h3>通过子 shell 返回到当前目录</h3>\n<p>如果你曾经配置过一个比较复杂的系统，那么你可能会发现你需要频繁的更换目录，从而很难跟踪你所在的位置。如果在运行完一个命令后自动返回到当前位置，不是很好吗？</p>\n<p>Linux 系统实际上提供了一个解决该问题的方法，并且非常简单。如果你想通过 <code>cd</code> 命令进入另一个目录完成一些任务，然后再返回当前工作目录，那么你可以将命令置于括号中。你可以在你的 Linux 系统上尝试下面这个命令。记住你当前的工作目录，然后运行：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f2a3b4229b0719217325\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n(cd /etc &amp;&amp; ls -a)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f2a3b4229b0719217325-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f2a3b4229b0719217325-1\"><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">cd</span> <span class=\"crayon-o\">/</span><span class=\"crayon-i\">etc</span> <span class=\"crayon-o\">&amp;&amp;</span> <span class=\"crayon-i\">ls</span> <span class=\"crayon-o\">-</span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>该命令会输出 <code>/etc</code> 目录的内容。现在，检查你的当前工作目录。它和执行该命令前的目录一样，而不是 <code>/etc</code> 目录。</p>\n<p>它是如何工作的呢？运行一个括号中的命令会创建一个子 shell 或一个当前 shell 进程的复刻副本。该子 shell 可以访问所有的父变量，反之则不行。所以请记住，你是在运行一个非常复杂的单行命令。</p>\n<p>在并行处理中经常使用子 shell ，但是在命令行中，它也能为你带来同样的力量，从而使你在浏览文件系统时更加容易。</p>\n<p>作者简介：</p>\n<p>Phil Zona 是 Linux Academy 的技术作家。他编写了 AWS、Microsoft Azure 和 Linux 系统管理的指南和教程。他同时也管理着 Cloud Assessments 博客，该博客旨在帮助个人通过技术实现他们的事业目标。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112583\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112583votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112583\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 3 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": "  评论", "praise_nums": "1", "url_object_id": "1a81ea914b36780323f60de446949c7a", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/10/12f08abea785eac9b96d11426703f4e1.jpg"], "front_image_path": "full/325ab1a9c00f3ae9cf8afee6f81fc2552f3bbe26.jpg", "title": "你懂 Linux 吗？关于 Linux 你可能不是非常了解的七件事"}
{"create_date": "2017/09/27 ", "url": "http://blog.jobbole.com/112558/", "fav_nums": 3, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文作者： <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/thoughtworkschina\">ThoughtWorks</a> 。未经作者许可，禁止转载！<br>欢迎加入伯乐在线 <a href=\"http://blog.jobbole.com/99322\" target=\"_blank\">专栏作者</a>。</div><div>\n<h3>引言</h3>\n<p><a href=\"http://insights.thoughtworks.cn/wp-content/uploads/2017/09/code-coverage1.jpg\"><img src=\"http://insights.thoughtworks.cn/wp-content/uploads/2017/09/code-coverage1.jpg\" alt=\"\" width=\"345\" height=\"247\"></a></p>\n<p>（图片来自：<a href=\"http://t.cn/R06rQHi\">http://t.cn/R06rQHi</a>）</p>\n<p>很多人看到这个标题时，都会想“你都100%代码覆盖了，怎么还会有问题呢？” 让我们看一下代码例子:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33e7238a84574580682\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\npublic class TestCalculator {\r\n\r\n       public Double add(Double a, Double b) {\r\n\r\n              return a + b;}\r\n\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33e7238a84574580682-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e7238a84574580682-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f33e7238a84574580682-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e7238a84574580682-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f33e7238a84574580682-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e7238a84574580682-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f33e7238a84574580682-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33e7238a84574580682-1\"><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">TestCalculator</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e7238a84574580682-2\"> </div><div class=\"crayon-line\" id=\"crayon-59f33e7238a84574580682-3\"><span class=\"crayon-h\">       </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Double</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">add</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">Double</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Double</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e7238a84574580682-4\"> </div><div class=\"crayon-line\" id=\"crayon-59f33e7238a84574580682-5\"><span class=\"crayon-h\">              </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">;</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e7238a84574580682-6\"> </div><div class=\"crayon-line\" id=\"crayon-59f33e7238a84574580682-7\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p>再看看用junit写出的测试代码：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33e7238a8e880171246\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n@ Test\r\npublic void testAdd() {\r\n\r\n       Double a = new Double(1);\r\n\r\n       Double b = new Double(2);\r\n\r\n       Double c = new Double(3);\r\n\r\n       assertEquals(c, testCalculator.add(a, b));\r\n\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33e7238a8e880171246-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e7238a8e880171246-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f33e7238a8e880171246-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e7238a8e880171246-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f33e7238a8e880171246-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e7238a8e880171246-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f33e7238a8e880171246-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e7238a8e880171246-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f33e7238a8e880171246-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e7238a8e880171246-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f33e7238a8e880171246-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e7238a8e880171246-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33e7238a8e880171246-1\"><span class=\"crayon-sy\">@</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Test</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e7238a8e880171246-2\"><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">testAdd</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f33e7238a8e880171246-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e7238a8e880171246-4\"><span class=\"crayon-h\">       </span><span class=\"crayon-t\">Double</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Double</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33e7238a8e880171246-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e7238a8e880171246-6\"><span class=\"crayon-h\">       </span><span class=\"crayon-t\">Double</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Double</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33e7238a8e880171246-7\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e7238a8e880171246-8\"><span class=\"crayon-h\">       </span><span class=\"crayon-t\">Double</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">c</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Double</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33e7238a8e880171246-9\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e7238a8e880171246-10\"><span class=\"crayon-h\">       </span><span class=\"crayon-e\">assertEquals</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">c</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">testCalculator</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">add</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33e7238a8e880171246-11\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e7238a8e880171246-12\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0016 seconds] -->\r\n<p>当我们使用<a href=\"http://www.eclemma.org/\">EclEmma</a>或者<a href=\"https://github.com/jacoco/jacoco\">Jacoco</a>来进行覆盖测试时，对于这个类，我们将得到100%测试覆盖率。</p>\n<p><a href=\"http://insights.thoughtworks.cn/wp-content/uploads/2017/09/test.png\"><img src=\"http://insights.thoughtworks.cn/wp-content/uploads/2017/09/test.png\" alt=\"\" width=\"975\" height=\"339\"></a></p>\n<p>一切看起来都那么的完美，真是这样的吗？</p>\n<p>好吧，让我们来来看看另一个测试，当其中一个变量为null时，返回值将会是什么？</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33e7238a92842308958\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n@ Test\r\npublic void testAddNullPointerException() {\r\n\r\n       Double a = new Double(1);\r\n\r\n       Double b = null;\r\n\r\n       Double c = new Double(3);\r\n\r\n       assertEquals(c, testCalculator.add(a, b));\r\n\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33e7238a92842308958-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e7238a92842308958-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f33e7238a92842308958-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e7238a92842308958-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f33e7238a92842308958-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e7238a92842308958-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f33e7238a92842308958-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e7238a92842308958-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f33e7238a92842308958-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e7238a92842308958-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f33e7238a92842308958-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e7238a92842308958-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33e7238a92842308958-1\"><span class=\"crayon-sy\">@</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Test</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e7238a92842308958-2\"><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">testAddNullPointerException</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f33e7238a92842308958-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e7238a92842308958-4\"><span class=\"crayon-h\">       </span><span class=\"crayon-t\">Double</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Double</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33e7238a92842308958-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e7238a92842308958-6\"><span class=\"crayon-h\">       </span><span class=\"crayon-t\">Double</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33e7238a92842308958-7\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e7238a92842308958-8\"><span class=\"crayon-h\">       </span><span class=\"crayon-t\">Double</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">c</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Double</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33e7238a92842308958-9\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e7238a92842308958-10\"><span class=\"crayon-h\">       </span><span class=\"crayon-e\">assertEquals</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">c</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">testCalculator</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">add</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33e7238a92842308958-11\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e7238a92842308958-12\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0016 seconds] -->\r\n<p>好了，你会发现尽管覆盖率为100%，但程序却抛出了NullPointerException。</p>\n<p><a href=\"http://insights.thoughtworks.cn/wp-content/uploads/2017/09/NullPointerException.png\"><img src=\"http://insights.thoughtworks.cn/wp-content/uploads/2017/09/NullPointerException.png\" alt=\"\" width=\"975\" height=\"725\"></a></p>\n<p>那么肯定有人会问，这样的话单元测试覆盖率的高低都不能作为衡量项目代码质量的指标，那么我们要单元测试还有什么用？</p>\n<p>首先，我想我们可能搞错了测试覆盖的定义。</p>\n<p>我们先听听Martin Fowler对于测试覆盖的<a href=\"https://martinfowler.com/bliki/TestCoverage.html\">定义</a>：</p>\n<blockquote><p>Test coverage is a useful tool for finding untested parts of a codebase. Test coverage is of little use as a numeric statement of how good your tests are.</p></blockquote>\n<p><a href=\"http://insights.thoughtworks.cn/wp-content/uploads/2017/09/Test-coverage.png\"><img src=\"http://insights.thoughtworks.cn/wp-content/uploads/2017/09/Test-coverage.png\" alt=\"\" width=\"844\" height=\"289\"></a></p>\n<p>（图片来自：<a href=\"https://martinfowler.com/bliki/TestCoverage.html\">https://martinfowler.com/bliki/TestCoverage.html</a>）</p>\n<p>他认为：把测试覆盖作为质量目标没有任何意义，我们应该把它作为一种发现未被测试覆盖的代码的手段。</p>\n<h3>所以100%的代码覆盖率还值得追求吗?</h3>\n<p>当然，这应该是每个程序员毕生的追求之一，但是如果从项目角度考虑ROI(投入产出比)，对于需要快速上线的短期项目，需要注重的是让测试覆盖核心功能代码。如果你的项目是一个长期项目，那么高覆盖率是非常有必要的，它意味着高可维护性，以及更少的bug。(前提是你的测试采用TDD/BDD方式编写，我见过将测试代码写的一团糟的人，看着他的代码，我宁愿重新写一遍)</p>\n<h3>那么对于一个项目来说，覆盖率应该达到多少？</h3>\n<p>其实没有适用于所有项目的数值，每个项目都应有自己的阈值，但共性是，测试必须覆盖主要业务场景，代码的逻辑分支也必须尽可能的覆盖。</p>\n<h3>如何改进你的项目代码覆盖率？</h3>\n<p><strong>首先</strong>我们要阅读和理解项目代码，找出其中需要测试并且与业务强相关的代码，结合sonar等代码质量管理平台，从代码编写规范、复杂度、重复代码等方面进行代码重构，进一步提高项目的可维护性与可读性。</p>\n<p>这也意味着重构，重构的同时，你需要更多的测试来保证你重构代码的正确性。</p>\n<p><strong>其次</strong>要对code coverage进行度量分析，那么我们应该怎么度量code coverage？</p>\n<p><a href=\"http://insights.thoughtworks.cn/wp-content/uploads/2017/09/line-coverage.png\"><img src=\"http://insights.thoughtworks.cn/wp-content/uploads/2017/09/line-coverage.png\" alt=\"\" width=\"975\" height=\"448\"></a></p>\n<p>一般来说我们从以下四个维度来度量，如上图所示:</p>\n<ol>\n<li><strong>行覆盖率</strong>（line coverage）：度量被测代码中每个可执行语句是否都被执行到，但不包括java import，空行，注释等。</li>\n<li><strong>函数覆盖率</strong>（function coverage）：度量被测代码中每个定义的函数是否都被调用。</li>\n<li><strong>分支覆盖率</strong>（branch coverage）：度量被测代码中每一个判定的分支是否都被测试到。</li>\n<li><strong>语句覆盖率</strong>（statement coverage）：度量被测代码是否每个语句都被执行。</li>\n</ol>\n<p>所以行覆盖率的高低不能说明项目的好坏，我们要从多方面进行思考，一般我们遵循的标准应是：<strong>函数覆盖率 &gt; 分支覆盖率 &gt; 语句覆盖率**</strong>。</p>\n<p><strong>代码覆盖率最重要的意义在于：</strong></p>\n<ul>\n<li>阅读分析之前项目中未覆盖部分的代码，进而反推在前期QA以及相关测试人员在进行黑盒测试设计时是否考虑充分，没有覆盖到的代码是否是测试设计的盲点，为什么没有考虑到？是需求或者UX设计不够清晰，还是测试设计的理解有误。</li>\n<li>检测出程序中的废代码，可以逆向反推代码设计中不合理的地方，提醒设计/开发人员理清代码逻辑关系，提升代码质量。</li>\n<li>代码覆盖率高不能说明代码质量高，但是反过来看，代码覆盖率低，代码质量绝对不会高到哪里去，可以作为测试自我审视的重要工具之一。</li>\n</ul>\n<h3>结束语</h3>\n<p>单元测试的覆盖率并不只是为了取悦客户或者管理层的数据，它能够实实在在反应项目中代码的健康程度，帮助我们更好的改善了代码的质量，增加了我们对所编写代码的信心。</p>\n</div>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112558\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112558votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112558\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 3 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/thoughtworkschina\">ThoughtWorks</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/thoughtworkschina\">\r\n\t\t\t<img src=\"http://tp3.sinaimg.cn/1774908135/180/0/1\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            ThoughtWorks是一家全球IT咨询公司，追求卓越软件质量，致力于科技驱动商业变革。擅长构建定制化软件产品，帮助客户快速将概念转化为价值。同时为客户提供用户体验设计、技术战略咨询、组织转型等咨询服务。        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/thoughtworkschina\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/thoughtworkschina/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/thoughtworkschina/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 72</a> · <a title=\"我的网站\" target=\"_blank\" href=\"http://insights.thoughtworkers.org/\"><i class=\"fa fa-link\"></i></a> <a title=\"微博主页\" target=\"_blank\" href=\"http://weibo.com/thoughtworkschina\"><i class=\"fa fa-weibo\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": "  评论", "praise_nums": "1", "url_object_id": "8b7e6b84fa50e4e0fcb453f5fca4ddbf", "front_image_url": ["http://insights.thoughtworks.cn/wp-content/uploads/2017/09/code-coverage1.jpg"], "front_image_path": "full/dec5425a992cec7adad5bc59a5b2195be2cf7eec.jpg", "title": "都100%代码覆盖了，还会有什么问题？"}
{"create_date": "2017/09/27 ", "url": "http://blog.jobbole.com/112559/", "fav_nums": 3, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://my.oschina.net/editorial-story/blog/1543766\">开源中国编辑部</a>   </div><p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/2fec23b02c0912d1938581f7a420f11e.jpg\" alt=\"\" width=\"650\" height=\"400\"></p>\n<p>现在看来，大家很容易会把开源软件当作是理所当然的，但事实上，我们应该知道自由和开源软件是经历了长达半个世纪的一系列漫长发展的产物。</p>\n<p>本文记录了自由和开源历史上的一些重要时刻，也称得上是 FOSS 历史上的大事件。从 UNIX 的全盛时期，到 GNU 和 Linux 的诞生，再到 GitHub 将开源“民主化”，以及在它们之间的一切。</p>\n<h3>1969：UNIX 的诞生</h3>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/34dc356da6498b3565c7c1ab3dbe0563.jpg\" alt=\"\" width=\"420\" height=\"252\"></p>\n<p>1969年，AT&amp;T 贝尔实验室的工程师开始开发 UNIX。此后的10年，UNIX 在学术机构和大型企业中得到了广泛的应用，当时的 UNIX 拥有者 AT&amp;T 公司以低廉甚至免费的许可将 UNIX 源码授权给学术机构做研究或教学之用，许多机构在此源码基础上加以扩充和改进。后来 AT&amp;T 意识到了 UNIX 的商业价值，从1979年 UNIX 的版本 V7 开始，不再将 UNIX 源码授权给学术机构，并对之前的 UNIX 及其变种声明了版权权利。事实上，UNIX 在自由或开源软件的概念存在之前就已诞生，可以说，UNIX 从来都不是一个自由或开源的操作系统。从某种意义上来说，UNIX 在促进共享源码方面起了很小的作用。</p>\n<p>然而，围绕 UNIX 而成长起来的文化在后来的自由和开源软件的意识形态和社区诞生过程中起到了奠基性的作用。UNIX 的开发者和用户把自己看成是对抗软件商业化的“反叛者”，他们自由地共享源码，以分散的方式共同合作开发 UNIX 系统。</p>\n<h3>1984：AT&amp;T 将 UNIX 商业化</h3>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/da4a236bc9facbf575c58e433188ad91.jpg\" alt=\"\" width=\"420\" height=\"284\"></p>\n<p>从 UNIX 诞生起的前十五年，UNIX 操作系统的拥有者 AT&amp;T 是被法院禁止从中获利的。起因是1958年 AT&amp;T 为避免美国司法部起诉它违反《反垄断法》而签订的和解协议。AT&amp;T 垄断了美国长途电话业务，因此它同意不进入计算机行业，不销售任何与计算机有关的产品，UNIX 是计算机操作系统，所以 AT&amp;T 不能销售它，任何要求得到源码的机构，都能免费得到。</p>\n<p>然而在1984年，事情发生了变化，当时对 AT＆T 的限制法令被解除，AT&amp;T 开始以能获利的价格销售 UNIX。UNIX 的源码依然可用，但 AT＆T 将 UNIX 从研究性质的项目转变为一个商业项目，这在 UNIX 黑客社区里产生了危机。他们开始寻找一个可替代的类 UNIX 系统，且不受商业陷阱的阻碍。</p>\n<h3>1984：GNU 的诞生</h3>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/3e7b280e5fd68179f62f44a9c9ac2928.png\" alt=\"\" width=\"420\" height=\"523\"></p>\n<p>在 AT&amp;T 将 UNIX 商业化的同一年，理查德·斯托曼（简称 RMS）发起了 GNU 项目（GNU’s Not Unix! 的递归缩写），目标是创建一个完全自由且向下兼容 UNIX 的操作系统。RMS 在1985年曾说过，GNU 是一个我正在编写的完全兼容 UNIX 的项目，所以我可以让每一个使用它的人都能自由地使用。</p>\n<p>GNU 项目刚启动时，自由软件这一现代概念也才刚刚诞生，即便是 RMS 也没能充分表达其中“自由”的含义，早期 GNU 项目的追随者轻易地认为 RMS 只是旨在开发不收任何费用的软件。</p>\n<p>然而，在接下来的几年里，由于开发者和公司越来越少地在发布程序的同时提供源码。此时，对于程序员和用户，GNU 的真正含义开始变得清晰。GNU 的重要性体现在项目承诺所有的源码都能自由使用。</p>\n<h3>1985：自由软件基金会的建立</h3>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/1b272a4b7041c011d16e8ae4302fa556.jpg\" alt=\"\" width=\"420\" height=\"539\"></p>\n<p>随着 RMS 推动自由软件发展和成熟的愿景日益强烈，他意识到仅通过编写和分享 GNU 代码是远远不够的。于是，他建立了自由软件基金会来协助该计划。</p>\n<p>自由软件基金会（简称 FSF）是一个致力于推广自由软件的美国民间非营利性组织。它于1985年10月由理查德·斯托曼建立。其主要工作是运行 GNU 计划，开发更多的自由软件。FSF 帮助创建了保护 GNU 和其他自由软件项目的法律和制度框架。</p>\n<h3>1991：Linux 内核的诞生</h3>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/28cb79b1f74619e555dfb94598891865.jpg\" alt=\"\" width=\"420\" height=\"233\"></p>\n<p>作为操作系统，GNU 最大的问题是具有完备功能的内核尚未被开发成功。虽然 GNU 项目的开发者成功编写了大量重要的程序，但他们努力创建一个类似 UNIX 的内核来完善 GNU 的工作却长期停滞不前。GNU 的内核，称为 Hurd，是自由软件基金会发展的重点，今天仍在开发中，经过近三十年的开发，它仍然不能可靠地用于生产环境。同时，BSD 项目的自由软件内核也受到法律方面问题的困扰。</p>\n<p>这为 Linux 内核创建了一个开放的机会。Linux 内核是1991年 Linus Torvalds 在其大学时期开发的一个项目，并将代码贡献了出来。最初，Linus 采用的是自己拟定的许可证，这个许可证会限制商业使用，后来他转用了 GNU 项目使用的 GPL 许可证。当时 GNU 项目仍未完成，GNU 系统软件集与 Linux 内核结合后，GNU 软件构成了这个 POSIX 兼容操作系统 GNU/Linux 的基础。</p>\n<p>所以，Linux 内核填补了 GNU 用户需要完整的且使用自由软件的类 UNIX 系统的空白。</p>\n<h3>1998：开源峰会 (Open Source Summit)</h3>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/3fae982e0158904970ade157c8b0466b.jpg\" alt=\"\" width=\"420\" height=\"250\"></p>\n<p>到了20世纪90年代后期，GNU，Linux 以及其他重要项目（如 Apache）的自由软件越来越普及。</p>\n<p>由于像 Eric S. Raymond 这样的黑客们开始担心 RMS 和 FSF 在推动自由软件的时候，受意识形态的影响太深，从而与现实脱节。Raymond 和他的追随者认为，为了自由软件尽可能大范围地取得成功，他们应该侧重于提供源代码的实用价值，而不是过多的涉及共享和道德的哲学原则。</p>\n<p>同时期，Netscape 宣布将其 Navigator 浏览器的源代码在 Internet 上公布。这一系列举动使得在1998年2月3日，资深黑客 Eric S. Raymond 邀请了大约十几个自由软件社区的著名成员一起开会（RMS 没被邀请），希望可以促使更多公司能够理解黑客社区早已行之有时的开放式软件开发流程的独特优势，使这种先进流程能够得到更广泛的应用。与会者都认为，这是一个有助于消除过去人们对“自由软件”存在误解的大好时机，除了 free（免费？自由？）这个词的含混之外，还有自由软件给公众留下的宗教化和喜对抗的印象，从实际出发，针对企业的顾虑，将自由软件中实用和有助于业务的核心理念推广出去。</p>\n<p>与会者决定使用“开源软件(open source software)”来代替“自由软件(free software)”，以推广开源这一概念，让大众更清晰地明白其与自由软件之间的差别，并以较少的意识形态方式来传递价值。</p>\n<h3>1999：Red Hat 的 IPO</h3>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/55fe827b929d7b728cfecee51b89daf3.jpg\" alt=\"\" width=\"420\" height=\"278\"></p>\n<p>1999年8月11日，红帽公司正式上市，成为第一家开始公开交易的开源公司，这是自由和开源软件具有商业意义最有力的证明。</p>\n<p>虽然在同一时期上市的其他开源公司 —— 尤其是 VA Linux，它的表现并不好，但红帽仍然是当今开源市场中的领先公司。</p>\n<h3>2004：Ubuntu 的推出</h3>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/e453478ea9a1c82bd9525d5503100eec.jpg\" alt=\"\" width=\"420\" height=\"315\"></p>\n<p>到20世纪90年代末，已经提供了许多 GNU/Linux 发行版。但因为缺少对用户友好的图形界面程序，除了极客之外，极少的用户能熟练使用。</p>\n<p>诞生于2004年10月20日的 Ubuntu 改变了这个情况。Ubuntu 由南非慈善家和企业家 Mark Shuttleworth 所创立，被称为“为人类而生的 Linux”。</p>\n<p>Ubuntu 的目标在于为一般用户提供一个最新同时又相当稳定且拥有友好的界面，主要以自由软件构建而成的操作系统。Ubuntu 目前拥有蓬勃发展的用户社区，具有庞大的社区力量支持，用户可以方便地从社区获得帮助，是目前使用最广泛的 GNU/Linux 发行版。</p>\n<h3>2007：Android 的推出</h3>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/a24fbdc040f38b35aee3fc6b4768712c.jpg\" alt=\"\" width=\"420\" height=\"280\"></p>\n<p>将自由和开源软件提供给最多人使用的软件项目无疑是 Android 移动设备操作系统。Android 是使用最广泛的移动应用平台。</p>\n<p>虽然大多数 Android 用户可能不知道 Android 部分是基于 Linux 内核的，然而，很多自由和开源软件的倡导者抱怨 Android 的许可证没有提供软件自由，而且 Android 设备往往会被专有的组件和预装软件限制着，类似这种使用的不便，更多人倾向于使用 GNU/Linux。对于这种情况，Android 的开发者认为“Android 不是 Linux”，尽管有这个平台的根源。</p>\n<h3>2008：GitHub 将开源“民主化”</h3>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/04186faf06a5e77dbdb16e736508b171.jpg\" alt=\"\" width=\"420\" height=\"304\"></p>\n<p>最初，大多数自由和开源软件项目的贡献者通过电子邮件或私有的版本控制系统（如 Subversion 或 BitKeeper）进行协作。这种做法不仅笨重（因为没有集中的、精简的位置来查找开源项目和为其贡献），而且某些版本控制系统还是专有的。</p>\n<p>诞生于2008年的 GitHub 改变了这一情况。GitHub 提供使用 Git 进行版本控制的软件源代码托管服务。Git 是一个开源的分布式版本控制系统，由 Linus Torvalds 开发，于2005年在 GPL 开源许可证下发布。最初目的是为更好地管理 Linux 内核的开发，用于替代他们曾经使用的闭源解决方案 —— BitKeeper。</p>\n<p>GitHub 的出现，使得更多开发者能更方便地参与开源项目，为开源项目贡献，任何人都可以轻松提交自己的代码，并在 GitHub 上托管自己的开源项目。</p>\n<p>因为几乎所有人都把自己的代码托管在 GitHub 上，所以更容易查找开源项目，而且协作方式的改变，开发者也不再需要获得开发者社区的权限才能参与开源项目。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112559\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112559votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112559\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 3 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": "  评论", "praise_nums": "1", "url_object_id": "247820073328d63364fc16642a256a4e", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/09/2fec23b02c0912d1938581f7a420f11e.jpg"], "front_image_path": "full/4b7ba60c487f7b95435c22313b04fa0e316d689d.jpg", "title": "从 UNIX 到 GitHub：十个关于自由和开源软件历史的重要事件"}
{"create_date": "2017/09/30 ", "url": "http://blog.jobbole.com/112564/", "fav_nums": 2, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://dzone.com/articles/dont-waste-time-writing\">Jim Bird</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-8916-1.html\">Linux中国/geekpi</a>   </div><p>系统可以持续运行 5 年、10 年甚至 20 年或者更多年。但是，特定的代码行的生命，即使是经过设计，通常要短得多：当你通过各种方式来迭代寻求解决方案时，它会有几个月、几天甚至几分钟的生命。</p>\n<h3 id=\"toc_1\">一些代码比其他代码重要</h3>\n<p>通过研究<a href=\"http://www.youtube.com/watch?v=0eAhzJ_KM-Q\">代码如何随时间变化</a>，Michael Feathers 确定了<a href=\"http://swreflections.blogspot.ca/2012/10/bad-things-happen-to-good-code.html\">一个代码库的冥曲线</a>。每个系统都有代码，通常有很多是一次性写成，永远都不会改变。但是有少量的代码，包括最重要和最有用的代码，会一次又一次地改变、会有几次重构或者从头重写。</p>\n<p>当你在一个系统、或者问题领域、体系结构方法中有更多经验时，会更容易了解并预测什么代码将一直改变，哪些代码将永远不会改变：什么代码重要，什么代码不重要。</p>\n<h3 id=\"toc_2\">我们应该尝试编写完美的代码么？</h3>\n<p>我们知道我们应该写<a href=\"http://www.amazon.com/Clean-Code-Handbook-Software-Craftsmanship/dp/0132350882\">干净的代码</a>，代码应该一致、清晰也要尽可能简单。</p>\n<p>有些人把这变成了极端，他们迫使自己写出<a href=\"http://www.makinggoodsoftware.com/2011/03/27/the-obsession-with-beautiful-code-the-refactor-syndrome/\">美丽</a>、优雅、接近<a href=\"http://stackoverflow.com/questions/1196405/how-to-keep-yourself-from-perfectionism-when-coding\">完美</a>的代码，<a href=\"http://programmers.stackexchange.com/questions/43506/is-it-bad-to-have-an-obsessive-refactoring-disorder\">痴迷于重构</a>并且纠结每个细节。</p>\n<p>但是，如果代码只写一次而从不改变，或者如果在另一个极端下，它一直在改变的话，就如同尝试去写完美的需求和尝试做完美的前期设计那样，写完美的代码难道不是既浪费又没有必要（也不可能实现）的么？</p>\n<blockquote><p>“你不能写出完美的软件。是不是收到了伤害？并不。把它作为生活的公理接受它、拥抱它、庆祝它。因为完美的软件不存在。在计算机的短暂历史中从没有人写过完美的软件。你不可能成为第一个。除非你接受这个事实，否则你最终会浪费时间和精力追逐不可能的梦想。”</p>\n<p>Andrew Hunt，<a href=\"https://pragprog.com/the-pragmatic-programmer\">务实的程序员: 从熟练工到大师</a></p></blockquote>\n<p>一次性写的代码不需要美观优雅。但它必须是正确的、可以理解的 —— 因为绝不会改变的代码在系统的整个生命周期内可能仍然被阅读很多次。它不需要干净并紧凑 —— 只要干净就够了。代码中<a href=\"http://swreflections.blogspot.com/2012/03/is-copy-and-paste-programming-really.html\">复制和粘贴</a>和其他小的裁剪是允许的，至少在某种程度上是这样的。这些是永远不需要打磨的代码。即使周围的其他代码正在更改，这些也是不需要重构的代码（除非你需要更改它）。这是不值得花费额外时间的代码。</p>\n<p>你一直在改变的代码怎么样了呢？纠结于代码风格以及提出最优雅的解决方案是浪费时间，因为这段代码可能会再次更改，甚至可能会在几天或几周内重写。因此，每当你进行更改时，都会<a href=\"http://programmers.stackexchange.com/questions/43506/is-it-bad-to-have-an-obsessive-refactoring-disorder\">痴迷重构</a>代码，或者没有重构没有改变的代码，因为它可能会更好。代码总是可以更好。但这并不重要。</p>\n<p>重要的是：代码是否做了应该做的 —— 是正确的、可用的和高效的吗？它可以<a href=\"http://swreflections.blogspot.com/2012/03/defensive-programming-being-just-enough.html\">处理错误和不良数据</a>而不会崩溃 —— 或者至少可以<a href=\"https://buildsecurityin.us-cert.gov/articles/knowledge/principles/failing-securely\">安全地失败</a>？调试容易吗？改变是否容易且安全？这些不是美的主观方面。这些是成功与失败实际措施之间的差异。</p>\n<h3 id=\"toc_3\">务实编码和重构</h3>\n<p>精益开发Lean Development的核心思想是：不要浪费时间在不重要的事情上。这应该提醒我们该如何编写代码，以及我们如何重构它、审查它、测试它。</p>\n<p>为了让工作完成，只<a href=\"http://swreflections.blogspot.com/2012/04/what-refactoring-is-and-what-it-isnt.html\">重构你需要的</a> —— <a href=\"http://martinfowler.com/articles/workflowsOfRefactoring/\">Martin Fowler</a> 称之为机会主义重构opportunistic refactoring（理解、清理、<a href=\"http://programmer.97things.oreilly.com/wiki/index.php/The_Boy_Scout_Rule\">童子军规则</a> ）和准备重构preparatory refactoring。足够使改变更加容易和安全，而不是更多。如果你不改变那些代码，那么它并不会如看起来的那么重要。</p>\n<p>在代码审查中，只聚焦在<a href=\"http://randomthoughtsonjavaprogramming.blogspot.com/2014/08/building-real-software-dont-waste-time.html\">重要的事上</a>。代码是否正确？有防御机制吗？是否安全？你能理解么？改变是否安全？</p>\n<p>忘记代码风格（除非代码风格变成无法理解）。让你的 IDE 处理代码格式化。不要争议代码是否应该是“更多的 OO”。只要它有意义，它是否适当地遵循这种或那种模式并不重要。无论你喜欢还是不喜欢都没关系。你是否有更好的方式做到这一点并不重要 —— 除非你在教新接触这个平台或者语言的人，而且需要在做代码审查时做一部分指导。</p>\n<p>写测试很重要。测试涵盖主要流程和重要的意外情况。测试让你用最少的工作获得最多的信息和最大的信心。<a href=\"http://swreflections.blogspot.com/2012/08/whats-better-big-fat-tests-or-little.html\">大面积覆盖测试，或小型针对性测试</a> —— 都没关系，只要一直在做这个工作，在编写代码之前或之后编写测试并不重要。</p>\n<h3 id=\"toc_4\">（不只是）代码无关</h3>\n<p>建筑和工程方面的隐喻对软件从未有效过。我们不是设计和建造几年或几代将保持基本不变的桥梁或摩天大楼。我们构建的是更加弹性和抽象、更加短暂的东西。代码写来是被修改的 —— 这就是为什么它被称为“软件”。</p>\n<blockquote><p>“经过五年的使用和修改，成功的软件程序的源码通常完全认不出它原来的样子，而一个成功建筑五年后几乎没有变化。”</p>\n<p>Kevin Tate，<a href=\"http://www.amazon.com/Sustainable-Software-Development-Agile-Perspective/dp/0321286081\">可持续软件开发</a></p></blockquote>\n<p>我们需要将代码看作是我们工作的一个暂时的手工制品：</p>\n<blockquote><p>有时候面对更重要的事情时，我们会迷信代码。我们经常有一个错觉，让卖出的产品有价值的是代码，然而实际上可能是对该问题领域的了解、设计难题的进展甚至是客户反馈。</p>\n<p>Dan Grover，<a href=\"http://dangrover.com/2013/07/16/code-and-creative-destruction/\">Code and Creative Destruction</a></p></blockquote>\n<p>迭代开发教会我们来体验和检验我们工作的结果 —— 我们是否解决了这个问题，如果没有，我们学到了什么，我们如何改进？软件构建从没有止境。即使设计和代码是正确的，它们也可能只是一段时间内正确，直到环境要求再次更改或替换为更好的东西。</p>\n<p>我们需要编写好的代码：代码可以理解、正确、安全和可靠。我们需要重构和审查它，并写出好的有用的测试，同时知道这其中一些或者所有的代码，可能会很快被抛弃，或者它可能永远不会被再被查看，或者它可能根本不会用到。我们需要认识到，我们的一些工作必然会被浪费，并为此而进行优化。做需要做的，没有别的了。不要浪费时间尝试编写完美的代码。</p>\n<hr>\n<p>作者简介：</p>\n<p>Jim Bird</p>\n<p>我是一名经验丰富的软件开发经理、项目经理和 CTO，专注于软件开发和维护、软件质量和安全性方面的困难问题。在过去 15 年中，我一直在管理建立全球证券交易所和投资银行电子交易平台的团队。我特别感兴趣的是，小团队在构建真正的软件中如何有效率：在可靠性，性能和适应性极限限制下的高质量，安全系统。</p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112564\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112564votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112564\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": 1, "praise_nums": "2", "url_object_id": "dee5f0f6ab099f2a22ce6f9774d45647", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2011/12/good-code-or-good-product.jpg"], "front_image_path": "full/9521d7edc82d7251124d105ee9af71e23dabe6c5.jpg", "title": "不要浪费时间写完美的代码"}
{"create_date": "2017/09/25 ", "url": "http://blog.jobbole.com/112539/", "fav_nums": 2, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/wx2803614675\">枫轻</a> 翻译，<a href=\"http://www.jobbole.com/members/huanglimin\">黄利民</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"http://firstround.com/review/Heres-Why-Youre-Not-Hiring-the-Best-and-the-Brightest/\">Jeff Atwood</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>【导读】：Jeff Atwood 是一名程序员、Coding Horror 的博主和企业家（创办了 Stack Overflow 和 Discourse）。</p>\n<p>作为一名创业者，你最常听到的建议是什么？</p>\n<blockquote><p><span style=\"color: #ff0000;\"><strong>永远只招最优秀的人。</strong>无论公司规模多大，永远不要在你的招聘标准上妥协。</span></p></blockquote>\n<p>确实如此。优秀的团队能萌发好的创意，并将其转化成不可思议的，举世无双的产品。</p>\n<p>但是有些事总困扰着我，让我对此建议深感迷惑。有个事情虽然没人说出来但是大家都心知肚明：永远只招最好的人……<strong>可是谁愿意住在旧金山啊。</strong></p>\n<p>不仅是旧金山，山景城、纽约、波士顿、芝加哥或其他城市面临的问题都一样。我们嘴里说着招聘世界上最好的人才，但事实上我们只是在招聘碰巧住附近的最好人才。</p>\n<p>你可以说我疯了，但如果我们真的想吸引更多的优秀人才为我们工作，那么我们就必须要真的把他们“雇”来。也就是说，（至少在 IT 行业）不要再死板地认为人们只有亲身前来上班才能产生有意义的工作。因为还有更好的方式。</p>\n<p>2008 年我与联合创始人 Joel Spolsky 着手创立 Stack Overflow（现在的 Stack Exchange）时，我所在的公司办公点在加州的伯克利，Joel Spolsky 在纽约，一东一西，我们每周保持一次电话沟通。然后团队扩展了，北卡罗莱纳州有一名开发人员，其他人都在俄勒冈和德克萨斯州。后来一个住在佛罗里达州的社区经理加入了。接着团队又签了两个分别在英国和德国的开发者。虽然我现在已经不在 Stack Overflow工作了，但记得我最后一次统计员工人数时，公司已经有高达约 150 名了。</p>\n<p><img class=\"alignnone aligncenter\" src=\"http://wx1.sinaimg.cn/mw690/7cc829d3gy1fjvmq1aacgj20hv0ajwf6.jpg\" width=\"643\" height=\"379\"></p>\n<p style=\"text-align: center;\">（Stack Overflow 的两位创始人，左 Joel Spolsky，右 Jeff Atwood）</p>\n<p>从 Stack Overflow 的经历中，我学到的最有价值的经验是，许多杰出的软件开发者其实没有住在硅谷附近。真正的招聘应该是全球范围的，而不是局限在人才拥挤的湾区，那些打算从湾区搬家的人也在招聘范围之内。你说你只招聘最好最杰出的人，只有做到这样才能让这句话有意义。</p>\n<p>Discourse 是我目前的创业公司/产品，致力于让用户、粉丝和热衷于某一特定话题的听众之间能够对话，无论他们住在世界的哪个角落。我相信公司内部的结构应该反映听众的诉求。如果想让全球社区使用你的软件，那么做这个软件的人才也应该来自于全世界。</p>\n<h3>实践</h3>\n<p>把远程工作者集成到你的公司，这想法看似太超前，难以持续。也许是这样。但正如 William Gibson 曾经所说，未来已经在这里了，只是没有均匀分布。想想 GitHub，至少三分之二是远程工作者。看看 WordPress，目前 225 多位的员工中，绝大多数是远程工作。这些公司已经改变了网络的格局，我认为远程工作很大程度上成为这些公司 DNA 的一部分。</p>\n<p>理想情况下，你开始把远程工作视为公司的核心哲学。即便如此，要形成远程工作的文化还是具有挑战性的。不过有几个重要的方法你可以尝试一下：</p>\n<h3>“展示你的工作” VS. “仅仅是露面”</h3>\n<p>有的人每天准时上下班，但着不意味着他们的工作也很到位。在企业上班不是在高中上体育课，光靠完美的出勤率是没法及格的。</p>\n<p><strong>通过产出来评判工作更加合理：</strong></p>\n<ul>\n<li><span style=\"color: #ff9900;\">员工这周实现了多少个功能？</span></li>\n<li><span style=\"color: #ff9900;\">他们修复了多少个 bug</span></li>\n<li><span style=\"color: #ff9900;\">他们与客户进行了多少次交流？</span></li>\n<li><span style=\"color: #ff9900;\">代码速度提高多少？精简了多少？可维护性提高多少？</span></li>\n</ul>\n<p>在 Discourse，我们一般把 GitHub 上的提交日志作为工作好坏的证据。当然这不是说员工提交的日志数量有指标或者其他什么的，而仅仅作为员工出色工作的一种可追溯的依据。不管是公共项目或是私人项目，都算数。</p>\n<p>也许你用 <a href=\"https://asana.com/\">Asana</a> 或 <a href=\"https://basecamp.com/%E2%80%8E\">Basecamp</a> （或同类产品）来进行管理。我本身不太在乎进度管理工具。重点是这些工具：</p>\n<blockquote style=\"border-left: 6px solid #62dcad;\"><p><strong>让人们能够记录下他们所做的有用的事。不是“待办”列表，而是“已完成”列表。</strong></p></blockquote>\n<p>我不关心员工何时来上班，或者他们的时间表。不关心他们住在世界上的哪个地方（前提是他们网络畅通）。不关心他们怎么工作。我也不打算微管理。如果你确实招聘到了最好的人，他们应该用产出来证明这点，然后展示他们的工作。</p>\n<p>怎么知道这有效呢？当你招来的人发现了什么问题（或者局面完全崩溃了），他们会主动自己调整。你很放心地给他们权限，无论是改变策略，甚至是犯错误，都是靠他们自己来负责，这时事情就能走上正轨了。</p>\n<h3>通过试用项目招聘</h3>\n<p>假设一位求职者轻松通过基本测试，有出色的履历，文化高度契合，也顺利通过电话视频。是时候面试了，对吗？</p>\n<p>我见过很多求职者，上面说的所有环节面试都很棒，但是加入公司后，一旦到岗后却完全无法胜任。即使你亲自见过一个人，要评判他的职业道德和能力也是非常难的。</p>\n<p>如果你想摆脱对面试的质疑，确定一个人到底能不能胜任，那就给他们一个试用项目（audition project）吧！在他们与你团队中其他员工交谈之前就让他们做。我不是在说那种宽泛抽象的测试项目。<strong>而是现实世界中，今天在你实际产品中马上要做的真实工作。</strong>这些测试项目就是你在平时要分给正式员工做的工作，这样做也能减轻正式员工的压力。</p>\n<p>理想情况下，试用项目的评估应该是一个很小的临时咨询任务，最多耗时个把小时，并具有明确的任务说明。选择一个几天内能完成的小项目，或者最多一两周。让求职者选择来办公地点还是远程工作。</p>\n<p>我知道不是每个业务都可以分成小块的工作单元，来分配给公司外面的人。但如果你不这么做的话：</p>\n<blockquote style=\"border-left: 6px solid #62dcad;\"><p><strong>如果你没法给厉害的求职者找到一个小型试用项目，也许你也没有为现有员工合理规划工作。</strong></p></blockquote>\n<p>在 Stack Overflow，有我们的一些开源组件，我们经常给求职者机会，让他们基于这些组件做开发，以实现我们预先想好的很多功能。那些能够独立工作，与我们清晰交流，并非常及时地发布所需功能的人，显然就是我们要找的人才。</p>\n<p>如果试用项目进展良好，非常棒，那你现在有了一位高度符合条件的候选人，他明显有能力完成任务，也完成了需要做的事。到目前为止，我见过的能胜任试用项目的求职者，全部都能胜任工作。我非常看重试用项目中的表现；这是求职者拿到 offer 之前接触到的最接近现实的工作。如果谁都无法搞定试用项目，那么仅仅会造成这个很小的咨询工作失败，相比于让四五个人参与的全套面试流程付出的成本，孰优孰劣就非常明显了。再不济，你可以把这个项目传给下一位厉害的求职者去做。</p>\n<h3>从你的社区中招聘</h3>\n<p>通过多次的经验我发现，文化契合度比技能更能预示着成功。但是当团队都不在同一个地方办公，你如何才能创建这种文化呢？（注意这里还远远谈不上加深文化）</p>\n<p>我意识到，并不是每个企业都有相应的社区，但<strong>如果你有更广泛的用户圈、开发群体或粉丝，无论何时，你应该拼命从这些群体中招聘。</strong>他们自然地倾向你这边，由于与公司文化契合，完全拉到你公司的重力井。这些候选人与公司文化契合的机率出奇的高，这正是你想要的。</p>\n<p>你的一些用户为你的游戏做过令人惊叹的改造吗？在你们论坛中，有资深用户每天回答别人的问题吗？有工程师发现隐晦的安全漏洞并提醒你注意吗？这些就是你应该致力去招聘的人。为了增加机会，你们可以早早开始培养新起之星，比如增加交流，提供特殊 offer，在他们当中培养名声。</p>\n<p>在 Discourse，我们的首位工程师就是按着招聘计划，根据他在 GitHub 上面强大的开源贡献。在 Stack Overflow，我们有一个长条的“受欢迎人”列表，这些人高度活跃在我们管理的站群。</p>\n<p><strong>如果你的创业公司很小，或者产品和市场契合，你仍然有选择。</strong>有很多社区，就人们的类型和他们的交流方式而言，与你希望构建的相似。追随他们吧。来一次令人信服的讨论，关于你是如何开展工作的，他们如何能够有机会帮助你塑造它。</p>\n<p>有点反其道而行之，也可以尝试看看你的领域或行业中，那些热衷于吐槽现状的社区。这可能有点难以说明你的情况，但如果你接触到合适的人，你可以解释，你的产品正是他们在市场中期待的。他们会立马来帮助你让产品做到极致。</p>\n<h3>每天使用公共通讯工具</h3>\n<p>当你有远程工作者，沟通工具不该是仅仅他们参与的时候你才用，而应该一直使用，作为工作中很自然的部分。</p>\n<blockquote style=\"border-left: 6px solid #62dcad;\"><p><strong>不要在茶水间或者走廊会议中谈重要信息，除了现场偶尔听到的人，没人会受益。</strong></p></blockquote>\n<p>每个拥有远程工作者的公司会需要满足这些基本要素：</p>\n<h3>实时通话</h3>\n<p>当你的团队成员住在南美洲，你不可能走到他桌前，问他一个快速问题，或者在他最近的 checkin 中发现错误。 你需要一种方式能随时联系到远程团队成员，可以很快得到回复。对于所有的远程开发者一直保持这样，可能会有点冲突，<a href=\"https://www.hipchat.com/\" target=\"_blank\">Hipchat</a>、 <a href=\"https://slack.com/\" target=\"_blank\">Slack</a>、IM、IRC、一些基于 Web 的工具。重要的是每个人都持续使用，作为领导者你可能需要不断地强化这个意识。</p>\n<p>在 Discourse，目前我们是用 Slack 试验，大家都很喜欢，但它发挥作用是因为我们全天都在 Slack 上面，交流想法，开创新的对话途径，读他人的评论等等。<strong>当人们远程工作时，聊天是最重要的无处不在的沟通方式</strong>，所以在进一步合作前，你需要非常确定它运作顺畅。</p>\n<h3>在线公告板</h3>\n<p>当然，你的远程团队可能知道项目细节，但所有其他的工作呢？他们如何找到这些东西，甚至知道它摆在第一位？你需要一个虚拟公告板，它不像对话那么短暂：可以显示公告、团队周报和会议总结的地方。<a href=\"http://www.discourse.org/\" target=\"_blank\">Discourse</a> 正好提供这个服务，其他很多网站也拥有类似的功能。</p>\n<p>你想要一些事能占据邮件列表和在线讨论区之间的空区。你应该能够订阅每个帖子到来时的邮件通知，或者通过 Web 查看在线对话。每个人应该能获得每周或每日的自动摘要。</p>\n<p><strong>有句话要注意：</strong>每次你收到类似这样的邮件，最好发自内心地相信它包含着有用的信息。一旦那些邮件仅仅沦为另一个“我有时间再读那些东西”……你让他人谎发警报多次，也毁了它。所以这里请谨慎行事。在公共讨论区分享的东西，应该是大家需要知道的。</p>\n<p>它可以看起来像这样：</p>\n<p><img class=\"alignnone\" src=\"http://wx4.sinaimg.cn/mw690/7cc829d3gy1fjvrskomayj20hs0t0ti6.jpg\" width=\"640\" height=\"1044\"></p>\n<h3>语音和视频通话</h3>\n<p>正如我喜欢 ASCII 一样，有时见不着面的字符不足以捕捉文字背后人们的专注和感觉。当你发现自己来来回回发送数 KB 的文字，仍然不满意交流的清晰度，这时就应该灌输一种“投靠语音”的反射性习惯。</p>\n<p>永远不要低估与其他人实际交谈的作用。我知道，我知道，很多人投身编程的原因完全是想避免与其他人交谈，但是忍受下我。没有六小时以上的飞行，你压根见不到你的远程团队，并且谁有那个时间呢？我现在有工作马上要完成！</p>\n<p>另一件比跳上飞机更好的事是使用 Skype 或者谷歌 Hangout 或同类产品，这样能够看到对方的肢体语言和脸部表情。如果你计划定期语音和视频通话，电话或邮件丢失的那些细微差别会蜂拥而来。我<strong>建议至少一周一次，这是最低限制</strong>；不一定要冗长的会议，但能帮助理解那些 checkin 背后的人们。</p>\n<p>没人比我还讨厌会议和流程场面话，但你需要保持一定量的流程，同步维续着一帮松散连接的远程团队。看到人们实时互动是让这成为可能的关键。</p>\n<h3>周一团队状态报告</h3>\n<p>每周一，你公司的每个团队（即使只有一个）应该产生出一份简明，总结性的概要：</p>\n<blockquote style=\"border-left: 6px solid #DEE4E5; background-color: #f7f7f7;\"><p>上周我们做了什么。</p></blockquote>\n<blockquote style=\"border-left: 6px solid #DEE4E5; background-color: #f7f7f7;\"><p>这周我们计划做什么。</p></blockquote>\n<blockquote style=\"border-left: 6px solid #DEE4E5; background-color: #f7f7f7;\"><p>阻塞我们的事情，或者我们所关注的事情。</p></blockquote>\n<p>这不一定非要是一份冗长的报告，事实上也不应该是。越简明越好，但尽量列出所有关键点。每周一雷打不动地发布在电子公告板上。现在，你有多少个“团队”取决于你；我不认为这需要每个开发者去完成，但如果公司还很小，你可以这样。</p>\n<blockquote style=\"border-left: 6px solid #62dcad;\"><p><strong>渐渐地，随着机构扩大，人们断开联系了。大家不知道其他人从事的工作，或他们的工作细节。</strong></p></blockquote>\n<p>一份非常简洁，高水准的关于上周团队工作的概要让问题迎刃而解。周一状态报告对于小团队充其量是一个 issue，然而这有助于非常简练地覆盖上周工作的点，即使只是五人团队口头上的报告。</p>\n<h3>会议记录</h3>\n<p>任何时候你主导的可以认为是与他人的一次“会议”，做记录！也就是说，以公告点的形式记录下发生的事，那些不在场的远程团队成员就能从中受益 – 或至少了解到 – 接下来会发生的事。</p>\n<p>再次强调，那些记录不需要很长，如果你发现做会议记录很累，那八成做错了。几句简单的列项就足够了。不需要记录每个小细节，仅是大概的轮廓：谁参与？讨论的话题？做的决定？下一步和工作项？</p>\n<p>上述的都应该，当然，发帖到你的讨论区，这样每个人都会收到邮件自动通知。<br>\n<strong>除了这些，我见过一些特殊情景，让远程工作变得没那么理想：</strong></p>\n<h3>头脑风暴</h3>\n<p>这是大头。如果你正在进行天马行空的即兴会议，很难实现远程。人们实际到场，见到面，听到声音，看到他们的肢体语言，这更有利于快速反弹的想法，并找出广泛的点子。你需要带宽非常高、延迟非常低的个人连接，才能有效进行头脑风暴。</p>\n<p>好消息是，至少以我在 Stack Overflow 和 Discourse 的经验看，这种会议相当少见。你需要他们的时候，会在每年一度的线下活动，每个人为着来年更大的梦想，飞聚一起。</p>\n<p>例如，在 Stack Overflow 的年会上，我们偏重投票多的公司价值，并建立我们称之为“艰苦卓绝的目标”，即2010年成为世界前 50 网站。自那之后，目标实现了。让每个人与团队齐头并进实现目标。</p>\n<h3>导师制</h3>\n<p>导师制需要一系列快速的来来回回的互动，经常性的被打断，因为年轻工程师会询问高级工程师对于工作的反馈。这对于远程工作连接松散的沟通模式，不太匹配。</p>\n<p>我们对此的“解决方法”是避免招聘需要大量指导的人。在 Stack Overflow 和 Discourse 的时候，我们倾向招聘经验丰富的人，并非不相信年轻有才华的开发者（我们是相信的），而是因为远程指导他们不太现实。从招聘人用于远程工作的角度看，你或者能胜任……或者不能。我发现远程工作良好的人，但如果在技术层面上存在很大的不对称，会拖慢生产率。</p>\n<p>如果你有意将年轻开发者培养成高级开发者，就需要规划时间，使得他们能紧密合作。结对编程在这种情况就能受益了。</p>\n<p>考虑到所有的利弊，想象未来的 20、40 或 60 年，数字工作是怎样的，你觉得人们每天还会继续花一两个小时在上下班的路上吗？</p>\n<blockquote style=\"border-left: 6px solid #62dcad;\"><p><strong>你认为招聘策略应该基于十年前的工作状况，而不是十年后可能的工作状况吗？</strong></p></blockquote>\n<p>以我们在 Discourse 和 Stack Overflow 的情况看，从全球招聘有着很大的战略优势。我相信远程开发代表着工作的未来前景。如果我们得花少量时间弄明白如何召集远程工作者，也许途中会犯一些错，但这值得。未来近在眼前，何须等待？</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112539\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112539votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112539\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/wx2803614675\">枫轻</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/wx2803614675\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2017/05/d84bcbb0a1f4aa3fdae3199108091382.png\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            软件工程+英语 本科双学位，JAVA 程序媛 92 年一枚，语言主要涉及 JAVA/C/C# ，爱折腾各种新技术，欢迎交流学习        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/wx2803614675\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/wx2803614675/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/wx2803614675/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 12</a> · <a title=\"个人微信：1091149131\" target=\"_blank\" href=\"#\"><i class=\"fa fa-weixin\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": 1, "praise_nums": "1", "url_object_id": "c1f5b28b9b0f1b069a79f0781bad951b", "front_image_url": ["http://wx1.sinaimg.cn/mw690/7cc829d3gy1fjvmq1aacgj20hv0ajwf6.jpg"], "front_image_path": "full/2ba0736291f93777b18819fa5df513e0c3355328.jpg", "title": "为什么招不到最好的程序员？SO 创始人有些建议"}
{"create_date": "2017/09/25 ", "url": "http://blog.jobbole.com/112547/", "fav_nums": 5, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://sourceware.org/gdb/current/onlinedocs/gdb/\">Fsf</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-8900-1.html\">Linux中国/robot527</a>   </div><h3 id=\"toc_1\">目录</h3>\n<ul>\n<li>break — 在指定的行或函数处设置断点，缩写为 <code>b</code></li>\n<li>info breakpoints — 打印未删除的所有断点，观察点和捕获点的列表，缩写为 <code>i b</code></li>\n<li>disable — 禁用断点，缩写为 <code>dis</code></li>\n<li>enable — 启用断点</li>\n<li>clear — 清除指定行或函数处的断点</li>\n<li>delete — 删除断点，缩写为 <code>d</code></li>\n<li>tbreak — 设置临时断点，参数同 <code>break</code>，但在程序第一次停住后会被自动删除</li>\n<li>watch — 为表达式（或变量）设置观察点，当表达式（或变量）的值有变化时，暂停程序执行</li>\n<li>step — 单步跟踪，如果有函数调用，会进入该函数，缩写为 <code>s</code></li>\n<li>reverse-step — 反向单步跟踪，如果有函数调用，会进入该函数</li>\n<li>next — 单步跟踪，如果有函数调用，不会进入该函数，缩写为 <code>n</code></li>\n<li>reverse-next — 反向单步跟踪，如果有函数调用，不会进入该函数</li>\n<li>return — 使选定的栈帧返回到其调用者</li>\n<li>finish — 执行直到选择的栈帧返回，缩写为 <code>fin</code></li>\n<li>until — 执行直到达到当前栈帧中当前行后的某一行（用于跳过循环、递归函数调用），缩写为 <code>u</code></li>\n<li>continue — 恢复程序执行，缩写为 <code>c</code></li>\n<li>print — 打印表达式 EXP 的值，缩写为 <code>p</code></li>\n<li>x — 查看内存</li>\n<li>display — 每次程序停止时打印表达式 EXP 的值（自动显示）</li>\n<li>info display — 打印早先设置为自动显示的表达式列表</li>\n<li>disable display — 禁用自动显示</li>\n<li>enable display — 启用自动显示</li>\n<li>undisplay — 删除自动显示项</li>\n<li>help — 打印命令列表（带参数时查找命令的帮助），缩写为 <code>h</code></li>\n<li>attach — 挂接到已在运行的进程来调试</li>\n<li>run — 启动被调试的程序，缩写为 <code>r</code></li>\n<li>backtrace — 查看程序调用栈的信息，缩写为 <code>bt</code></li>\n<li>ptype — 打印类型 TYPE 的定义</li>\n</ul>\n<hr>\n<h3 id=\"toc_2\">break</h3>\n<p>使用 <code>break</code> 命令（缩写 <code>b</code>）来设置断点。</p>\n<p>用法：</p>\n<ul>\n<li><code>break</code> 当不带参数时，在所选栈帧中执行的下一条指令处设置断点。</li>\n<li><code>break &lt;function-name&gt; </code>在函数体入口处打断点，在 C++ 中可以使用 <code>class::function</code> 或 <code>function(type, ...)</code> 格式来指定函数名。</li>\n<li><code>break &lt;line-number&gt; </code>在当前源码文件指定行的开始处打断点。</li>\n<li><code>break -N</code> <code>break +N</code> 在当前源码行前面或后面的 <code>N</code> 行开始处打断点，<code>N</code> 为正整数。</li>\n<li><code>break &lt;filename:linenum&gt; </code> 在源码文件 <code>filename</code> 的 <code>linenum</code> 行处打断点。</li>\n<li><code>break &lt;filename:function&gt; </code> 在源码文件 <code>filename</code> 的 <code>function</code> 函数入口处打断点。</li>\n<li><code><code>break &lt;address&gt; </code></code>在程序指令的地址处打断点。</li>\n<li><code>break ... if &lt;cond&gt; </code> 设置条件断点，<code>...</code> 代表上述参数之一（或无参数），<code>cond</code> 为条件表达式，仅在 <code>cond</code> 值非零时暂停程序执行。</li>\n</ul>\n<p>详见<a href=\"https://sourceware.org/gdb/current/onlinedocs/gdb/Set-Breaks.html\">官方文档</a>。</p>\n<h3 id=\"toc_3\">info breakpoints</h3>\n<p>查看断点，观察点和捕获点的列表。</p>\n<p>用法：</p>\n<ul>\n<li><code>info breakpoints [list...]</code></li>\n<li><code>info break [list...]</code></li>\n<li><code>list...</code> 用来指定若干个断点的编号（可省略），可以是 <code>2</code>， <code>1-3</code>， <code>2 5</code> 等。</li>\n</ul>\n<h3 id=\"toc_4\">disable</h3>\n<p>禁用一些断点。参数是用空格分隔的断点编号。要禁用所有断点，不加参数。</p>\n<p>禁用的断点不会被忘记，但直到重新启用才有效。</p>\n<p>用法：</p>\n<ul>\n<li><code>disable [breakpoints] [list...]</code></li>\n<li><code>breakpoints</code> 是 <code>disable</code> 的子命令（可省略），<code>list...</code> 同 <code>info breakpoints</code> 中的描述。</li>\n</ul>\n<p>详见<a href=\"https://sourceware.org/gdb/current/onlinedocs/gdb/Disabling.html\">官方文档</a>。</p>\n<h3 id=\"toc_5\">enable</h3>\n<p>启用一些断点。给出断点编号（以空格分隔）作为参数。没有参数时，所有断点被启用。</p>\n<p>用法：</p>\n<ul>\n<li><code>enable [breakpoints] [list...]</code> 启用指定的断点（或所有定义的断点）。</li>\n<li><code>enable [breakpoints] once list...</code> 临时启用指定的断点。GDB 在停止您的程序后立即禁用这些断点。</li>\n<li><code>enable [breakpoints] delete list...</code> 使指定的断点启用一次，然后删除。一旦您的程序停止，GDB 就会删除这些断点。等效于用 <code>tbreak</code> 设置的断点。</li>\n</ul>\n<p><code>breakpoints</code> 同 <code>disable</code> 中的描述。</p>\n<p>详见<a href=\"https://sourceware.org/gdb/current/onlinedocs/gdb/Disabling.html\">官方文档</a>。</p>\n<h3 id=\"toc_6\">clear</h3>\n<p>在指定行或函数处清除断点。参数可以是行号，函数名称或 <code>*</code> 跟一个地址。</p>\n<p>用法：</p>\n<ul>\n<li><code>clear</code> 当不带参数时，清除所选栈帧在执行的源码行中的所有断点。</li>\n<li><code>clear &lt;function&gt;</code>, <code>clear &lt;filename:function&gt; </code> 删除在命名函数的入口处设置的任何断点。</li>\n<li><code>clear &lt;linenum&gt;</code>, <code>clear &lt;filename:linenum&gt; </code> 删除在指定的文件指定的行号的代码中设置的任何断点。</li>\n<li><code><code>clear &lt;address&gt; </code></code>清除指定程序指令的地址处的断点。</li>\n</ul>\n<p>详见<a href=\"https://sourceware.org/gdb/current/onlinedocs/gdb/Delete-Breaks.html\">官方文档</a>。</p>\n<h3 id=\"toc_7\">delete</h3>\n<p>删除一些断点或自动显示表达式。参数是用空格分隔的断点编号。要删除所有断点，不加参数。</p>\n<p>用法： <code>delete [breakpoints] [list...]</code></p>\n<p>详见<a href=\"https://sourceware.org/gdb/current/onlinedocs/gdb/Delete-Breaks.html\">官方文档</a>。</p>\n<h3 id=\"toc_8\">tbreak</h3>\n<p>设置临时断点。参数形式同 <code>break</code> 一样。</p>\n<p>除了断点是临时的之外，其他同 <code>break</code> 一样，所以在命中时会被删除。</p>\n<p>详见<a href=\"https://sourceware.org/gdb/current/onlinedocs/gdb/Set-Breaks.html\">官方文档</a>。</p>\n<h3 id=\"toc_9\">watch</h3>\n<p>为表达式设置观察点。</p>\n<p>用法： <code>watch [-l|-location] &lt;expr&gt; </code> 每当一个表达式的值改变时，观察点就会暂停程序执行。</p>\n<p>如果给出了 <code>-l</code> 或者 <code>-location</code>，则它会对 <code>expr</code> 求值并观察它所指向的内存。例如，<code>watch *(int *)0x12345678</code> 将在指定的地址处观察一个 4 字节的区域（假设 int 占用 4 个字节）。</p>\n<p>详见<a href=\"https://sourceware.org/gdb/current/onlinedocs/gdb/Set-Watchpoints.html\">官方文档</a>。</p>\n<h3 id=\"toc_10\">step</h3>\n<p>单步执行程序，直到到达不同的源码行。</p>\n<p>用法： <code>step [N]</code> 参数 <code>N</code> 表示执行 N 次（或由于另一个原因直到程序停止）。</p>\n<p>警告：如果当控制在没有调试信息的情况下编译的函数中使用 <code>step</code> 命令，则执行将继续进行，直到控制到达具有调试信息的函数。 同样，它不会进入没有调试信息编译的函数。</p>\n<p>要执行没有调试信息的函数，请使用 <code>stepi</code> 命令，详见后文。</p>\n<p>详见<a href=\"https://sourceware.org/gdb/current/onlinedocs/gdb/Continuing-and-Stepping.html\">官方文档</a>。</p>\n<h3 id=\"toc_11\">reverse-step</h3>\n<p>反向单步执行程序，直到到达另一个源码行的开头。</p>\n<p>用法： <code>reverse-step [N]</code> 参数 <code>N</code> 表示执行 N 次（或由于另一个原因直到程序停止）。</p>\n<p>详见<a href=\"https://sourceware.org/gdb/current/onlinedocs/gdb/Reverse-Execution.html\">官方文档</a>。</p>\n<h3 id=\"toc_12\">next</h3>\n<p>单步执行程序，执行完子程序调用。</p>\n<p>用法： <code>next [N]</code></p>\n<p>与 <code>step</code> 不同，如果当前的源代码行调用子程序，则此命令不会进入子程序，而是将其视为单个源代码行，继续执行。</p>\n<p>详见<a href=\"https://sourceware.org/gdb/current/onlinedocs/gdb/Continuing-and-Stepping.html\">官方文档</a>。</p>\n<h3 id=\"toc_13\">reverse-next</h3>\n<p>反向步进程序，执行完子程序调用。</p>\n<p>用法： <code>reverse-next [N]</code></p>\n<p>如果要执行的源代码行调用子程序，则此命令不会进入子程序，调用被视为一个指令。</p>\n<p>参数 <code>N</code> 表示执行 N 次（或由于另一个原因直到程序停止）。</p>\n<p>详见<a href=\"https://sourceware.org/gdb/current/onlinedocs/gdb/Reverse-Execution.html\">官方文档</a>。</p>\n<h3 id=\"toc_14\">return</h3>\n<p>您可以使用 <code>return</code> 命令取消函数调用的执行。如果你给出一个表达式参数，它的值被用作函数的返回值。</p>\n<p>用法： <code>return &lt;expression&gt; </code> 将 <code>expression</code> 的值作为函数的返回值并使函数直接返回。</p>\n<p>详见<a href=\"https://sourceware.org/gdb/current/onlinedocs/gdb/Returning.html\">官方文档</a>。</p>\n<h3 id=\"toc_15\">finish</h3>\n<p>执行直到选定的栈帧返回。</p>\n<p>用法： <code>finish</code> 返回后，返回的值将被打印并放入到值历史记录中。</p>\n<p>详见<a href=\"https://sourceware.org/gdb/current/onlinedocs/gdb/Continuing-and-Stepping.html\">官方文档</a>。</p>\n<h3 id=\"toc_16\">until</h3>\n<p>执行直到程序到达当前栈帧中当前行之后（与 <a href=\"#break\">break</a> 命令相同的参数）的源码行。此命令用于通过一个多次的循环，以避免单步执行。</p>\n<p>用法：<code>until &lt;location&gt; </code> 或 <code>u &lt;location&gt; </code> 继续运行程序，直到达到指定的位置，或者当前栈帧返回。</p>\n<p>详见<a href=\"https://sourceware.org/gdb/current/onlinedocs/gdb/Continuing-and-Stepping.html\">官方文档</a>。</p>\n<h3 id=\"toc_17\">continue</h3>\n<p>在信号或断点之后，继续运行被调试的程序。</p>\n<p>用法： <code>continue [N]</code> 如果从断点开始，可以使用数字 <code>N</code> 作为参数，这意味着将该断点的忽略计数设置为 <code>N - 1</code>(以便断点在第 N 次到达之前不会中断)。如果启用了非停止模式（使用 <code>show non-stop</code> 查看），则仅继续当前线程，否则程序中的所有线程都将继续。</p>\n<p>详见<a href=\"https://sourceware.org/gdb/current/onlinedocs/gdb/Continuing-and-Stepping.html\">官方文档</a>。</p>\n<h3 id=\"toc_18\">print</h3>\n<p>求值并打印表达式 EXP 的值。可访问的变量是所选栈帧的词法环境，以及范围为全局或整个文件的所有变量。</p>\n<p>用法：</p>\n<ul>\n<li><code>print [expr]</code> 或 <code>print /f [expr]</code> <code>expr</code> 是一个（在源代码语言中的）表达式。</li>\n</ul>\n<p>默认情况下，<code>expr</code> 的值以适合其数据类型的格式打印；您可以通过指定 <code>/f</code> 来选择不同的格式，其中 <code>f</code> 是一个指定格式的字母；详见<a href=\"https://sourceware.org/gdb/current/onlinedocs/gdb/Output-Formats.html\">输出格式</a>。</p>\n<p>如果省略 <code>expr</code>，GDB 再次显示最后一个值。</p>\n<p>要以每行一个成员带缩进的格式打印结构体变量请使用命令 <code>set print pretty on</code>，取消则使用命令 <code>set print pretty off</code>。</p>\n<p>可使用命令 <code>show print</code> 查看所有打印的设置。</p>\n<p>详见<a href=\"https://sourceware.org/gdb/current/onlinedocs/gdb/Data.html\">官方文档</a>。</p>\n<h3 id=\"toc_19\">x</h3>\n<p>检查内存。</p>\n<p>用法： <code>x/nfu &lt;addr&gt; </code> 或 <code>x &lt;addr&gt; </code><code>n</code>、<code>f</code> 和 <code>u</code> 都是可选参数，用于指定要显示的内存以及如何格式化。<code>addr</code> 是要开始显示内存的地址的表达式。</p>\n<p><code>n</code> 重复次数（默认值是 1），指定要显示多少个单位（由 <code>u</code> 指定）的内存值。</p>\n<p><code>f</code> 显示格式（初始默认值是 <code>x</code>），显示格式是 <code>print('x'，'d'，'u'，'o'，'t'，'a'，'c'，'f'，'s')</code> 使用的格式之一，再加 <code>i</code>（机器指令）。</p>\n<p><code>u</code> 单位大小，<code>b</code> 表示单字节，<code>h</code> 表示双字节，<code>w</code> 表示四字节，<code>g</code> 表示八字节。</p>\n<p>例如：</p>\n<p><code>x/3uh 0x54320</code> 表示从地址 0x54320 开始以无符号十进制整数的格式，双字节为单位来显示 3 个内存值。</p>\n<p><code>x/16xb 0x7f95b7d18870</code> 表示从地址 0x7f95b7d18870 开始以十六进制整数的格式，单字节为单位显示 16 个内存值。</p>\n<p>详见<a href=\"https://sourceware.org/gdb/current/onlinedocs/gdb/Memory.html\">官方文档</a>。</p>\n<h3 id=\"toc_20\">display</h3>\n<p>每次程序暂停时，打印表达式 EXP 的值。</p>\n<p>用法： <code>display &lt;expr&gt;</code>,  <code>display/fmt &lt;expr&gt; </code> 或 <code>display/fmt &lt;addr&gt; </code> <code>fmt</code> 用于指定显示格式。像 <a href=\"#print\">print</a> 命令里的 <code>/f</code> 一样。</p>\n<p>对于格式 <code>i</code> 或 <code>s</code>，或者包括单位大小或单位数量，将表达式 <code>addr</code> 添加为每次程序停止时要检查的内存地址。</p>\n<p>详见<a href=\"https://sourceware.org/gdb/current/onlinedocs/gdb/Auto-Display.html\">官方文档</a>。</p>\n<h3 id=\"toc_21\">info display</h3>\n<p>打印自动显示的表达式列表，每个表达式都带有项目编号，但不显示其值。</p>\n<p>包括被禁用的表达式和不能立即显示的表达式（当前不可用的自动变量）。</p>\n<h3 id=\"toc_22\">undisplay</h3>\n<p>取消某些表达式在程序暂停时的自动显示。参数是表达式的编号（使用 <code>info display</code> 查询编号）。不带参数表示取消所有自动显示表达式。</p>\n<p><code>delete display</code> 具有与此命令相同的效果。</p>\n<h3 id=\"toc_23\">disable display</h3>\n<p>禁用某些表达式在程序暂停时的自动显示。禁用的显示项目不会被自动打印，但不会被忘记。 它可能稍后再次被启用。</p>\n<p>参数是表达式的编号（使用 <code>info display</code> 查询编号）。不带参数表示禁用所有自动显示表达式。</p>\n<h3 id=\"toc_24\">enable display</h3>\n<p>启用某些表达式在程序暂停时的自动显示。</p>\n<p>参数是重新显示的表达式的编号（使用 <code>info display</code> 查询编号）。不带参数表示启用所有自动显示表达式。</p>\n<h3 id=\"toc_25\">help</h3>\n<p>打印命令列表。</p>\n<p>您可以使用不带参数的 <code>help</code>（缩写为 <code>h</code>）来显示命令的类别名的简短列表。</p>\n<p>使用 <code>help &lt;class&gt; </code> 您可以获取该类中的各个命令的列表。使用 <code>help &lt;command&gt; </code> 显示如何使用该命令。</p>\n<p>详见<a href=\"https://sourceware.org/gdb/current/onlinedocs/gdb/Help.html\">官方文档</a>。</p>\n<h3 id=\"toc_26\">attach</h3>\n<p>挂接到 GDB 之外的进程或文件。该命令可以将进程 ID 或设备文件作为参数。</p>\n<p>对于进程 ID，您必须具有向进程发送信号的权限，并且必须具有与调试器相同的有效的 uid。</p>\n<p>用法： <code>attach &lt;process-id&gt; </code> GDB 在安排调试指定的进程之后做的第一件事是暂停该进程。</p>\n<p>无论是通过 <code>attach</code> 命令挂接的进程还是通过 <code>run</code> 命令启动的进程，您都可以使用的 GDB 命令来检查和修改挂接的进程。</p>\n<p>详见<a href=\"https://sourceware.org/gdb/current/onlinedocs/gdb/Attach.html\">官方文档</a>。</p>\n<h3 id=\"toc_27\">run</h3>\n<p>启动被调试的程序。</p>\n<p>可以直接指定参数，也可以用 <a href=\"https://sourceware.org/gdb/current/onlinedocs/gdb/Arguments.html\">set args</a> 设置（启动所需的）参数。</p>\n<p>例如： <code>run arg1 arg2 ...</code> 等效于</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f25f28c92e1478485155\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nset args arg1 arg2 ...\r\nrun\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f25f28c92e1478485155-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25f28c92e1478485155-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f25f28c92e1478485155-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f25f28c92e1478485155-1\"><span class=\"crayon-e\">set </span><span class=\"crayon-e\">args </span><span class=\"crayon-e\">arg1 </span><span class=\"crayon-i\">arg2</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25f28c92e1478485155-2\"><span class=\"crayon-i\">run</span></div><div class=\"crayon-line\" id=\"crayon-59f25f28c92e1478485155-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>还允许使用 <code>&gt;</code>、 &lt; <code>或 <code>&gt;&gt;</code> 进行输入和输出重定向。</code></p>\n<p>详见<a href=\"https://sourceware.org/gdb/current/onlinedocs/gdb/Starting.html\">官方文档</a>。</p>\n<h3 id=\"toc_28\">backtrace</h3>\n<p>打印整体栈帧信息。</p>\n<ul>\n<li><code>bt</code> 打印整体栈帧信息，每个栈帧一行。</li>\n<li><code>bt n</code> 类似于上，但只打印最内层的 n 个栈帧。</li>\n<li><code>bt -n</code> 类似于上，但只打印最外层的 n 个栈帧。</li>\n<li><code>bt full n</code> 类似于 <code>bt n</code>，还打印局部变量的值。</li>\n</ul>\n<p><code>where</code> 和 <code>info stack</code>(缩写 <code>info s</code>) 是 <code>backtrace</code> 的别名。调用栈信息类似如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f25f28c92ec218475504\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n(gdb) where\r\n#0  vconn_stream_run (vconn=0x99e5e38) at lib/vconn-stream.c:232\r\n#1  0x080ed68a in vconn_run (vconn=0x99e5e38) at lib/vconn.c:276\r\n#2  0x080dc6c8 in rconn_run (rc=0x99dbbe0) at lib/rconn.c:513\r\n#3  0x08077b83 in ofconn_run (ofconn=0x99e8070, handle_openflow=0x805e274 &lt;handle_openflow&gt;) at ofproto/connmgr.c:1234\r\n#4  0x08075f92 in connmgr_run (mgr=0x99dc878, handle_openflow=0x805e274 &lt;handle_openflow&gt;) at ofproto/connmgr.c:286\r\n#5  0x08057d58 in ofproto_run (p=0x99d9ba0) at ofproto/ofproto.c:1159\r\n#6  0x0804f96b in bridge_run () at vswitchd/bridge.c:2248\r\n#7  0x08054168 in main (argc=4, argv=0xbf8333e4) at vswitchd/ovs-vswitchd.c:125\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f25f28c92ec218475504-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25f28c92ec218475504-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f25f28c92ec218475504-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25f28c92ec218475504-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f25f28c92ec218475504-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25f28c92ec218475504-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f25f28c92ec218475504-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25f28c92ec218475504-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f25f28c92ec218475504-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25f28c92ec218475504-10\">10</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f25f28c92ec218475504-1\"><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">gdb</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">where</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25f28c92ec218475504-2\"><span class=\"crayon-p\">#0  vconn_stream_run (vconn=0x99e5e38) at lib/vconn-stream.c:232</span></div><div class=\"crayon-line\" id=\"crayon-59f25f28c92ec218475504-3\"><span class=\"crayon-p\">#1  0x080ed68a in vconn_run (vconn=0x99e5e38) at lib/vconn.c:276</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25f28c92ec218475504-4\"><span class=\"crayon-p\">#2  0x080dc6c8 in rconn_run (rc=0x99dbbe0) at lib/rconn.c:513</span></div><div class=\"crayon-line\" id=\"crayon-59f25f28c92ec218475504-5\"><span class=\"crayon-p\">#3  0x08077b83 in ofconn_run (ofconn=0x99e8070, handle_openflow=0x805e274 &lt;handle_openflow&gt;) at ofproto/connmgr.c:1234</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25f28c92ec218475504-6\"><span class=\"crayon-p\">#4  0x08075f92 in connmgr_run (mgr=0x99dc878, handle_openflow=0x805e274 &lt;handle_openflow&gt;) at ofproto/connmgr.c:286</span></div><div class=\"crayon-line\" id=\"crayon-59f25f28c92ec218475504-7\"><span class=\"crayon-p\">#5  0x08057d58 in ofproto_run (p=0x99d9ba0) at ofproto/ofproto.c:1159</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25f28c92ec218475504-8\"><span class=\"crayon-p\">#6  0x0804f96b in bridge_run () at vswitchd/bridge.c:2248</span></div><div class=\"crayon-line\" id=\"crayon-59f25f28c92ec218475504-9\"><span class=\"crayon-p\">#7  0x08054168 in main (argc=4, argv=0xbf8333e4) at vswitchd/ovs-vswitchd.c:125</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25f28c92ec218475504-10\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>详见<a href=\"https://sourceware.org/gdb/current/onlinedocs/gdb/Backtrace.html\">官方文档</a>。</p>\n<h3 id=\"toc_29\">ptype</h3>\n<p>打印类型 TYPE 的定义。</p>\n<p>用法： <code>ptype[/FLAGS] TYPE-NAME | EXPRESSION</code></p>\n<p>参数可以是由 <code>typedef</code> 定义的类型名， 或者 <code>struct STRUCT-TAG</code> 或者 <code>class CLASS-NAME</code> 或者 <code>union UNION-TAG</code> 或者 <code>enum ENUM-TAG</code>。</p>\n<p>根据所选的栈帧的词法上下文来查找该名字。</p>\n<p>类似的命令是 <code>whatis</code>，区别在于 <code>whatis</code> 不展开由 <code>typedef</code> 定义的数据类型，而 <code>ptype</code> 会展开，举例如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f25f28c92f1446419824\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n/* 类型声明与变量定义 */\r\ntypedef double real_t;\r\nstruct complex {\r\n    real_t real;\r\n    double imag;\r\n};\r\ntypedef struct complex complex_t;\r\n\r\ncomplex_t var;\r\nreal_t *real_pointer_var;\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f25f28c92f1446419824-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25f28c92f1446419824-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f25f28c92f1446419824-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25f28c92f1446419824-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f25f28c92f1446419824-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25f28c92f1446419824-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f25f28c92f1446419824-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25f28c92f1446419824-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f25f28c92f1446419824-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25f28c92f1446419824-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f25f28c92f1446419824-11\">11</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f25f28c92f1446419824-1\"><span class=\"crayon-c\">/* 类型声明与变量定义 */</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25f28c92f1446419824-2\"><span class=\"crayon-r\">typedef</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">double</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">real_t</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f25f28c92f1446419824-3\"><span class=\"crayon-t\">struct</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">complex</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25f28c92f1446419824-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">real_t </span><span class=\"crayon-v\">real</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f25f28c92f1446419824-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">double</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">imag</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25f28c92f1446419824-6\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f25f28c92f1446419824-7\"><span class=\"crayon-r\">typedef</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">struct</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">complex </span><span class=\"crayon-v\">complex_t</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25f28c92f1446419824-8\"> </div><div class=\"crayon-line\" id=\"crayon-59f25f28c92f1446419824-9\"><span class=\"crayon-e\">complex_t </span><span class=\"crayon-t\">var</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25f28c92f1446419824-10\"><span class=\"crayon-e \">real_t *</span><span class=\"crayon-v\">real_pointer_var</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f25f28c92f1446419824-11\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p>这两个命令给出了如下输出：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f25f28c92f5640014217\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n(gdb) whatis var\r\ntype = complex_t\r\n(gdb) ptype var\r\ntype = struct complex {\r\n    real_t real;\r\n    double imag;\r\n}\r\n(gdb) whatis complex_t\r\ntype = struct complex\r\n(gdb) whatis struct complex\r\ntype = struct complex\r\n(gdb) ptype struct complex\r\ntype = struct complex {\r\n    real_t real;\r\n    double imag;\r\n}\r\n(gdb) whatis real_pointer_var\r\ntype = real_t *\r\n(gdb) ptype real_pointer_var\r\ntype = double *\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f25f28c92f5640014217-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25f28c92f5640014217-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f25f28c92f5640014217-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25f28c92f5640014217-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f25f28c92f5640014217-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25f28c92f5640014217-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f25f28c92f5640014217-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25f28c92f5640014217-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f25f28c92f5640014217-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25f28c92f5640014217-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f25f28c92f5640014217-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25f28c92f5640014217-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59f25f28c92f5640014217-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25f28c92f5640014217-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59f25f28c92f5640014217-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25f28c92f5640014217-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-59f25f28c92f5640014217-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25f28c92f5640014217-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-59f25f28c92f5640014217-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f25f28c92f5640014217-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-59f25f28c92f5640014217-21\">21</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f25f28c92f5640014217-1\"><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">gdb</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">whatis </span><span class=\"crayon-t\">var</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25f28c92f5640014217-2\"><span class=\"crayon-v\">type</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">complex_t</span></div><div class=\"crayon-line\" id=\"crayon-59f25f28c92f5640014217-3\"><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">gdb</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ptype </span><span class=\"crayon-t\">var</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25f28c92f5640014217-4\"><span class=\"crayon-v\">type</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">struct</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">complex</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f25f28c92f5640014217-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">real_t </span><span class=\"crayon-v\">real</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25f28c92f5640014217-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">double</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">imag</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f25f28c92f5640014217-7\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25f28c92f5640014217-8\"><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">gdb</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">whatis </span><span class=\"crayon-e\">complex_t</span></div><div class=\"crayon-line\" id=\"crayon-59f25f28c92f5640014217-9\"><span class=\"crayon-v\">type</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">struct</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">complex</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25f28c92f5640014217-10\"><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">gdb</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">whatis </span><span class=\"crayon-t\">struct</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">complex</span></div><div class=\"crayon-line\" id=\"crayon-59f25f28c92f5640014217-11\"><span class=\"crayon-v\">type</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">struct</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">complex</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25f28c92f5640014217-12\"><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">gdb</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ptype </span><span class=\"crayon-t\">struct</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">complex</span></div><div class=\"crayon-line\" id=\"crayon-59f25f28c92f5640014217-13\"><span class=\"crayon-v\">type</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">struct</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">complex</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25f28c92f5640014217-14\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">real_t </span><span class=\"crayon-v\">real</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f25f28c92f5640014217-15\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">double</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">imag</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25f28c92f5640014217-16\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-59f25f28c92f5640014217-17\"><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">gdb</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">whatis </span><span class=\"crayon-e\">real_pointer_var</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25f28c92f5640014217-18\"><span class=\"crayon-v\">type</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">real_t *</span></div><div class=\"crayon-line\" id=\"crayon-59f25f28c92f5640014217-19\"><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">gdb</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ptype </span><span class=\"crayon-e\">real_pointer_var</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f25f28c92f5640014217-20\"><span class=\"crayon-v\">type</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">double</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span></div><div class=\"crayon-line\" id=\"crayon-59f25f28c92f5640014217-21\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0024 seconds] -->\r\n<p>详见<a href=\"https://sourceware.org/gdb/current/onlinedocs/gdb/Symbols.html\">官方文档</a>。</p>\n<hr>\n<h3 id=\"toc_30\">参考资料</h3>\n<ul>\n<li><a href=\"https://sourceware.org/gdb/current/onlinedocs/gdb/\">Debugging with GDB</a></li>\n</ul>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112547\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112547votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112547\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 5 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": "  评论", "praise_nums": "1", "url_object_id": "358b0e8832095a10a110d4d9026251ac", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2014/05/1389f92e6bd3378cb6e4522971b7db35.jpg"], "front_image_path": "full/0d4192df99abd0f294a9eade3688a9b7ce6caa0e.jpg", "title": "常用 GDB 命令中文速览"}
{"create_date": "2017/09/26 ", "url": "http://blog.jobbole.com/112555/", "fav_nums": 5, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://www.ruanyifeng.com/blog/2017/09/flame-graph.html\">阮一峰</a>   </div><p>软件的性能分析，往往需要查看 CPU 耗时，了解瓶颈在哪里。</p>\n<p><a href=\"http://www.brendangregg.com/flamegraphs.html\">火焰图</a>（flame graph）是性能分析的利器。本文介绍它的基本用法。</p>\n<p><img class=\"aligncenter\" title=\"\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/b404a4768d2fc81f0cce6188bc5cb6d4.jpg\" alt=\"\"></p>\n<h3>一、perf 命令</h3>\n<p>让我们从 perf 命令（performance 的缩写）讲起，它是 Linux 系统原生提供的性能分析工具，会返回 CPU 正在执行的函数名以及调用栈（stack）。</p>\n<p>通常，它的执行频率是 99Hz（每秒99次），如果99次都返回同一个函数名，那就说明 CPU 这一秒钟都在执行同一个函数，可能存在性能问题。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33df825524102700068\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ sudo perf record -F 99 -p 13204 -g -- sleep 30\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33df825524102700068-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33df825524102700068-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33df825524102700068-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-e\">perf </span><span class=\"crayon-v\">record</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">F</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">99</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">13204</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">g</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">sleep</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">30</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33df825524102700068-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>上面的代码中，<code>perf record</code>表示记录，<code>-F 99</code>表示每秒99次，<code>-p 13204</code>是进程号，即对哪个进程进行分析，<code>-g</code>表示记录调用栈，<code>sleep 30</code>则是持续30秒。</p>\n<p>运行后会产生一个庞大的文本文件。如果一台服务器有16个 CPU，每秒抽样99次，持续30秒，就得到 47,520 个调用栈，长达几十万甚至上百万行。</p>\n<p>为了便于阅读，<code>perf record</code>命令可以统计每个调用栈出现的百分比，然后从高到低排列。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33df82552d773457805\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ sudo perf report -n --stdio\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33df82552d773457805-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33df82552d773457805-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33df82552d773457805-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-e\">perf </span><span class=\"crayon-v\">report</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-i\">stdio</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33df82552d773457805-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p><img class=\"aligncenter\" title=\"\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/49954cf587dbaf2d8cbd41d77e91f1bb.jpg\" alt=\"\"></p>\n<p>这个结果还是不易读，所以才有了火焰图。</p>\n<h3>二、火焰图的含义</h3>\n<p>火焰图是基于 perf 结果产生的 <a href=\"http://queue.acm.org/downloads/2016/Gregg4.svg\">SVG 图片</a>，用来展示 CPU 的调用栈。</p>\n<p><a href=\"http://queue.acm.org/downloads/2016/Gregg4.svg\"><img class=\"aligncenter\" title=\"\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/1cb85c41fb005a069df1ab3992cfa936.jpg\" alt=\"\"></a></p>\n<p>y 轴表示调用栈，每一层都是一个函数。调用栈越深，火焰就越高，顶部就是正在执行的函数，下方都是它的父函数。</p>\n<p>x 轴表示抽样数，如果一个函数在 x 轴占据的宽度越宽，就表示它被抽到的次数多，即执行的时间长。注意，x 轴不代表时间，而是所有的调用栈合并后，按字母顺序排列的。</p>\n<p><strong>火焰图就是看顶层的哪个函数占据的宽度最大。只要有”平顶”（plateaus），就表示该函数可能存在性能问题。</strong></p>\n<p>颜色没有特殊含义，因为火焰图表示的是 CPU 的繁忙程度，所以一般选择暖色调。</p>\n<h3>三、互动性</h3>\n<p>火焰图是 <a href=\"http://queue.acm.org/downloads/2016/Gregg4.svg\">SVG 图片</a>，可以与用户互动。</p>\n<p><strong>（1）鼠标悬浮</strong></p>\n<p>火焰的每一层都会标注函数名，鼠标悬浮时会显示完整的函数名、抽样抽中的次数、占据总抽样次数的百分比。下面是一个例子。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33df825532610001033\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nmysqld'JOIN::exec (272,959 samples, 78.34 percent)\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33df825532610001033-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33df825532610001033-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33df825532610001033-1\"><span class=\"crayon-i\">mysqld</span>'<span class=\"crayon-v\">JOIN</span><span class=\"crayon-o\">::</span><span class=\"crayon-e\">exec</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">272</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">959</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">samples</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">78.34</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">percent</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33df825532610001033-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p><strong>（2）点击放大</strong></p>\n<p>在某一层点击，火焰图会水平放大，该层会占据所有宽度，显示详细信息。</p>\n<p><img class=\"aligncenter\" title=\"\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/9835aa02069d2708b39780d23ce000d3.jpg\" alt=\"\"></p>\n<p>左上角会同时显示”Reset Zoom”，点击该链接，图片就会恢复原样。</p>\n<p><strong>（3）搜索</strong></p>\n<p>按下 Ctrl + F 会显示一个搜索框，用户可以输入关键词或正则表达式，所有符合条件的函数名会高亮显示。</p>\n<h3>四、火焰图示例</h3>\n<p>下面是一个简化的火焰图例子。</p>\n<p>首先，CPU 抽样得到了三个调用栈。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33df825536389101653\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfunc_c \r\nfunc_b \r\nfunc_a \r\nstart_thread \r\n\r\nfunc_d \r\nfunc_a \r\nstart_thread \r\n\r\nfunc_d \r\nfunc_a \r\nstart_thread\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33df825536389101653-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33df825536389101653-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f33df825536389101653-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33df825536389101653-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f33df825536389101653-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33df825536389101653-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f33df825536389101653-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33df825536389101653-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f33df825536389101653-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33df825536389101653-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f33df825536389101653-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33df825536389101653-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59f33df825536389101653-13\">13</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33df825536389101653-1\"><span class=\"crayon-e\">func_c </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33df825536389101653-2\"><span class=\"crayon-e\">func_b </span></div><div class=\"crayon-line\" id=\"crayon-59f33df825536389101653-3\"><span class=\"crayon-e\">func_a </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33df825536389101653-4\"><span class=\"crayon-e\">start_thread </span></div><div class=\"crayon-line\" id=\"crayon-59f33df825536389101653-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33df825536389101653-6\"><span class=\"crayon-e\">func_d </span></div><div class=\"crayon-line\" id=\"crayon-59f33df825536389101653-7\"><span class=\"crayon-e\">func_a </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33df825536389101653-8\"><span class=\"crayon-e\">start_thread </span></div><div class=\"crayon-line\" id=\"crayon-59f33df825536389101653-9\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33df825536389101653-10\"><span class=\"crayon-e\">func_d </span></div><div class=\"crayon-line\" id=\"crayon-59f33df825536389101653-11\"><span class=\"crayon-e\">func_a </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33df825536389101653-12\"><span class=\"crayon-v\">start</span><span class=\"crayon-sy\">_</span>thread</div><div class=\"crayon-line\" id=\"crayon-59f33df825536389101653-13\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>上面代码中，<code>start_thread</code>是启动线程，调用了<code>func_a</code>。后者又调用了<code>func_b</code>和<code>func_d</code>，而<code>func_b</code>又调用了<code>func_c</code>。</p>\n<p>经过合并处理后，得到了下面的结果，即存在两个调用栈，第一个调用栈抽中1次，第二个抽中2次。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33df82553c605488603\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nstart_thread;func_a;func_b;func_c 1 \r\nstart_thread;func_a;func_d 2\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33df82553c605488603-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33df82553c605488603-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f33df82553c605488603-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33df82553c605488603-1\"><span class=\"crayon-v\">start_thread</span><span class=\"crayon-sy\">;</span><span class=\"crayon-v\">func_a</span><span class=\"crayon-sy\">;</span><span class=\"crayon-v\">func_b</span><span class=\"crayon-sy\">;</span><span class=\"crayon-v\">func</span><span class=\"crayon-sy\">_</span>c<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33df82553c605488603-2\"><span class=\"crayon-v\">start_thread</span><span class=\"crayon-sy\">;</span><span class=\"crayon-v\">func_a</span><span class=\"crayon-sy\">;</span><span class=\"crayon-v\">func</span><span class=\"crayon-sy\">_</span>d<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span></div><div class=\"crayon-line\" id=\"crayon-59f33df82553c605488603-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>有了这个调用栈统计，<a href=\"https://github.com/brendangregg/FlameGraph\">火焰图工具</a>就能生成 SVG 图片。</p>\n<p><img class=\"aligncenter\" title=\"\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/de855feaf5c61ca93052e3d9c714a543.jpg\" alt=\"\"></p>\n<p>上面图片中，最顶层的函数<code>g()</code>占用 CPU 时间最多。<code>d()</code>的宽度最大，但是它直接耗用 CPU 的部分很少。<code>b()</code>和<code>c()</code>没有直接消耗 CPU。因此，如果要调查性能问题，首先应该调查<code>g()</code>，其次是<code>i()</code>。</p>\n<p>另外，从图中可知<code>a()</code>有两个分支<code>b()</code>和<code>h()</code>，这表明<code>a()</code>里面可能有一个条件语句，而<code>b()</code>分支消耗的 CPU 大大高于<code>h()</code>。</p>\n<h3>五、局限</h3>\n<p>两种情况下，无法画出火焰图，需要修正系统行为。</p>\n<p><strong>（1）调用栈不完整</strong></p>\n<p>当调用栈过深时，某些系统只返回前面的一部分（比如前10层）。</p>\n<p><strong>（2）函数名缺失</strong></p>\n<p>有些函数没有名字，编译器只用内存地址来表示（比如匿名函数）。</p>\n<h3>六、Node 应用的火焰图</h3>\n<p>Node 应用的火焰图就是对 Node 进程进行性能抽样，与其他应用的操作是一样的。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33df825540171739950\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ perf record -F 99 -p `pgrep -n node` -g -- sleep 30\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33df825540171739950-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33df825540171739950-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33df825540171739950-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">perf </span><span class=\"crayon-v\">record</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">F</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">99</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">pgrep</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">node</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">g</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">sleep</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">30</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33df825540171739950-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>详细的操作可以看<a href=\"http://www.brendangregg.com/blog/2014-09-17/node-flame-graphs-on-linux.html\">这篇文章</a>。</p>\n<h3>七、浏览器的火焰图</h3>\n<p>Chrome 浏览器可以生成页面脚本的火焰图，用来进行 CPU 分析。</p>\n<p>打开开发者工具，切换到 Performance 面板。然后，点击”录制”按钮，开始记录数据。这时，可以在页面进行各种操作，然后停止”录制”。</p>\n<p>这时，开发者工具会显示一个时间轴。它的下方就是火焰图。</p>\n<p><img class=\"aligncenter\" title=\"\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/e3a1966e0497d0958db5a194f82fe623.jpg\" alt=\"\"></p>\n<p>浏览器的火焰图与标准火焰图有两点差异：它是倒置的（即调用栈最顶端的函数在最下方）；x 轴是时间轴，而不是抽样次数。</p>\n<p><img class=\"aligncenter\" title=\"\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/a24104bed29208a16fa6745be1c157d6.jpg\" alt=\"\"></p>\n<h3>八、参考链接</h3>\n<ul>\n<li><a href=\"http://queue.acm.org/detail.cfm?id=2927301\">火焰图的介绍论文</a></li>\n<li><a href=\"http://www.brendangregg.com/flamegraphs.html\">火焰图官方主页</a></li>\n<li><a href=\"https://github.com/brendangregg/FlameGraph\">火焰图生成工具</a></li>\n</ul>\n<p>（完）</p>\n<p><!-- /div --></p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112555\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112555votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112555\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 5 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": 1, "praise_nums": "2", "url_object_id": "051765542dbbd7352da88175162f2a63", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/09/b404a4768d2fc81f0cce6188bc5cb6d4.jpg"], "front_image_path": "full/decffc56ea467d64fa3175fbb69438e60e666620.jpg", "title": "如何读懂火焰图？"}
{"create_date": "2017/09/26 ", "url": "http://blog.jobbole.com/112551/", "fav_nums": 12, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/snowhere\">一杯哈希不加盐「孙腾浩」</a> 翻译。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://medium.freecodecamp.org/how-does-blockchain-really-work-i-built-an-app-to-show-you-6b70cd4caf7d\">Sean Han</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p><img class=\"aligncenter\" src=\"http://wx1.sinaimg.cn/large/7cc829d3gy1fjwnwvo4g3g20wk0apnpd.gif\" alt=\"\"></p>\n<p style=\"text-align: center;\">（A minimal blockchain command-line interface.）</p>\n<p>维基百科上对区块链的描述：</p>\n<blockquote><p>维护不断增长的记录（称作区块）的分布式数据库。</p></blockquote>\n<p>听上去很简单，但到底是怎么回事呢？</p>\n<p>我们用一款开源命令行界面 <a href=\"https://github.com/seanseany/blockchain-cli\">Blockchain CLI</a> 来详细说明区块链。我也做了一个<a href=\"http://blockchaindemo.io/\">浏览器可以访问的在线版</a>。</p>\n<p><img id=\"pic\" class=\"\" src=\"http://wx1.sinaimg.cn/large/7cc829d3gy1fjwnwx80jlj20m80g70ul.jpg\"></p>\n<h2>安装命令行界面</h2>\n<p>首先请确保安装 <a href=\"https://nodejs.org/download/\">Node.js</a></p>\n<p>然后在终端里运行下面命令：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33df92ab35057296275\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nnpm install blockchain-cli -g\r\nblockchain</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33df92ab35057296275-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33df92ab35057296275-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33df92ab35057296275-1\"><span class=\"crayon-e\">npm </span><span class=\"crayon-e\">install </span><span class=\"crayon-v\">blockchain</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">cli</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">g</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33df92ab35057296275-2\"><span class=\"crayon-v\">blockchain</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>你将看到 <code>👋 Welcome to Blockchain CLI!</code> 和 <code>blockchain →</code> 提示已准备好接受命令。</p>\n<h2>区块是什么样子的？</h2>\n<p>你可以在命令行中输入 <code>blockchain</code> 或 <code>bc</code> 来查看你当前的区块链。你将看到下图类似的区块。</p>\n<p><img id=\"pic\" class=\"\" src=\"http://wx1.sinaimg.cn/large/7cc829d3gy1fjwnwycb5qj20h40bomxu.jpg\"></p>\n<ul>\n<li>索引（区块）：这是哪个区块？（初始区块索引为 0）</li>\n<li>哈希：区块有效吗？</li>\n<li>前个哈希：之前一个区块有效吗？</li>\n<li>时间戳：区块什么时候添加的？</li>\n<li>数据：区块中存的什么信息？</li>\n<li>随机数（Nonce）：我们重复了多少次才找到有效的区块？</li>\n</ul>\n<h3>初始区块</h3>\n<p>每个区块链都会以一个 <code>🏆 Genesis Block</code> 作为开始。你接下来将会看到每个区块都关联前一个区块。所以我们开采第一个区块前，要有初始区块。</p>\n<h2>当一个新的区块被开采出来会发生什么？</h2>\n<p><img class=\"alignnone\" src=\"http://wx1.sinaimg.cn/mw690/7cc829d3gy1fjwoc34vg8g207a00smx5.gif\" width=\"262\" height=\"28\"></p>\n<p>让我们来开采我们的第一个区块，在提示框输入 <code>mine freeCodeCamp♥︎</code> 命令。 区块链根据最后一个区块生成当前索引和前个哈希。我们现在的区块链最后一个区块就是初始区块。</p>\n<ul>\n<li>索引：o+1 = 1</li>\n<li>前个哈希：0000018035a828da0…</li>\n<li>时间戳：区块什么时候添加的？</li>\n<li>数据：freeCodeCamp❤</li>\n<li>哈希：??</li>\n<li>随机数（Nonce)：??</li>\n</ul>\n<h2>哈希值如何计算？</h2>\n<p>哈希值是固定长度的数值，用来标识唯一数据。</p>\n<p>哈希通过将索引、前个哈希、时间戳、数据、随机数作为输入后计算得出。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33df92ab3f092080355\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nCryptoJS.SHA256(index + previousHash + timestamp + data + nonce)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33df92ab3f092080355-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33df92ab3f092080355-1\"><span class=\"crayon-v\">CryptoJS</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">SHA256</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">index</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">previousHash</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">timestamp</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nonce</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>SHA256 算法通过给定的输入，计算出一个唯一的哈希。相同的输入总会生成相同的哈希。</p>\n<h3>你注意到哈希开头的四个 0 了吗？</h3>\n<p>开头的四个 0 是有效哈希的基本要求。开头 0 的个数被称为难度值（difficulty）。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33df92ab43915209669\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfunction isValidHashDifficulty(hash, difficulty) {\r\n  for (var i = 0, b = hash.length; i &lt; b; i ++) {\r\n      if (hash[i] !== '0') {\r\n          break;\r\n      }\r\n  }\r\n  return i &gt;= difficulty;\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33df92ab43915209669-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33df92ab43915209669-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f33df92ab43915209669-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33df92ab43915209669-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f33df92ab43915209669-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33df92ab43915209669-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f33df92ab43915209669-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33df92ab43915209669-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33df92ab43915209669-1\"><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">isValidHashDifficulty</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">hash</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">difficulty</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33df92ab43915209669-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">hash</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">length</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f33df92ab43915209669-3\"><span class=\"crayon-h\">      </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">hash</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!==</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'0'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33df92ab43915209669-4\"><span class=\"crayon-h\">          </span><span class=\"crayon-st\">break</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33df92ab43915209669-5\"><span class=\"crayon-h\">      </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33df92ab43915209669-6\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-59f33df92ab43915209669-7\"><span class=\"crayon-h\">  </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">difficulty</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33df92ab43915209669-8\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0017 seconds] -->\r\n<p>这就是众所周知的<a href=\"https://en.wikipedia.org/wiki/Proof-of-work_system\">工作量证明系统</a>（Proof-of-Work）。</p>\n<h2>什么是随机数？</h2>\n<p>随机数是用来寻找有效哈希的一个数字。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33df92ab47288264176\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nlet nonce = 0;\r\nlet hash;\r\nlet input;\r\nwhile(!isValidHashDifficulty(hash)) {     \r\n  nonce = nonce + 1;\r\n  input = index + previousHash + timestamp + data + nonce;\r\n  hash = CryptoJS.SHA256(input)\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33df92ab47288264176-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33df92ab47288264176-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f33df92ab47288264176-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33df92ab47288264176-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f33df92ab47288264176-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33df92ab47288264176-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f33df92ab47288264176-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33df92ab47288264176-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33df92ab47288264176-1\"><span class=\"crayon-e\">let </span><span class=\"crayon-v\">nonce</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33df92ab47288264176-2\"><span class=\"crayon-e\">let </span><span class=\"crayon-v\">hash</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33df92ab47288264176-3\"><span class=\"crayon-e\">let </span><span class=\"crayon-v\">input</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33df92ab47288264176-4\"><span class=\"crayon-st\">while</span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">!</span><span class=\"crayon-e\">isValidHashDifficulty</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">hash</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line\" id=\"crayon-59f33df92ab47288264176-5\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">nonce</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nonce</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33df92ab47288264176-6\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">input</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">index</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">previousHash</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">timestamp</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nonce</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33df92ab47288264176-7\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">hash</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">CryptoJS</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">SHA256</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">input</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33df92ab47288264176-8\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0015 seconds] -->\r\n<p>随机数不断迭代，直到哈希有效。在我们的例子中，有效的哈希值至少要四个 0 开头。寻找有效哈希对应随机数的过程就称为开采（挖矿）。</p>\n<p>随着难度值的提升，有效哈希的数量逐步减少，我们需要投入更多资源来找到一个有效哈希。</p>\n<h2>为什么这很重要？</h2>\n<p>因为它确保了区块链不可变。</p>\n<p>如果我们有一个这样的区块链 A → B → C，有人想修改区块 A 上的数据。会发生下面情况：</p>\n<ol>\n<li>修改区块 A 上的数据。</li>\n<li>区块 A 的哈希变动，因为计算哈希所用的数据变化了。</li>\n<li>区块 A 无效，因为它的哈希不是四个 0 开头。</li>\n<li>区块 B 的哈希变动，因为计算区块 B 的哈希所用到的区块 A 的哈希值变化了。</li>\n<li>区块 B 无效，因为它的哈希不是四个 0 开头。</li>\n<li>区块 C 的哈希变动，因为计算区块 C 的哈希所用到的区块 B 的哈希值变化了。</li>\n<li>区块 C 无效，因为它的哈希不是四个 0 开头。</li>\n</ol>\n<p>修改一个区块的唯一方式就是重新开采这个区块以及它之后的所有区块。因为新的区块不断增加，基本不可能修改区块链。</p>\n<p>我希望本文对你有帮助。</p>\n<p>如果你想 checkout 在线版本的例子，移步 <a href=\"http://blockchaindemo.io\">http://blockchaindemo.io</a></p>\n\r\n        \r\n            <blockquote class=\"rewards\">\n        <p><strong>打赏支持我翻译更多好文章，谢谢！</strong></p>\n        <a href=\"#rewardbox\" id=\"rewards-button\" class=\"fancybox\"><span class=\"btn-bluet-blue href-style\"><i class=\"fa fa-jpy\"></i> 打赏译者</span></a>\n    </blockquote>\n\n    <div id=\"rewardbox\">\n        <h4>打赏支持我翻译更多好文章，谢谢！</h4>\n                <p>任选一种支付方式</p>\n                <p>\n                        <img src=\"http://jbcdn2.b0.upaiyun.com/2017/01/5085cce1bd4e144b7d148079a34b20c1.jpg\">\n            \n                            <img src=\"http://jbcdn2.b0.upaiyun.com/2017/01/02b09a29fdb3ab5fe03d4bd1afe95664.jpg\">\n                    </p>\n    </div>\n\n    \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112551\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112551votetotal\">3</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112551\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 12 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 3 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/snowhere\">一杯哈希不加盐「孙腾浩」</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/snowhere\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2017/06/47765e50cfb7c4e598e72d893ab4f62f.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            毕业于郑州大学软件工程专业，身为 Java 程序猿却同样热爱着 JavaScript 。为了兴趣而写代码，做自己喜欢做的事。Keep coding ... Stay Cool ...        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/snowhere\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/snowhere/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/snowhere/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 26</a> · <a title=\"我的网站\" target=\"_blank\" href=\"http://snowhere.me/\"><i class=\"fa fa-link\"></i></a> <a title=\"GitHub主页\" target=\"_blank\" href=\"https://github.com/Snowhere/\"><i class=\"fa fa-github\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": 3, "praise_nums": "3", "url_object_id": "927c2cd160e2fa985dab3fca196b9d08", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/09/2a6eafb1f8c84ccaa82e82ced15970cc.jpg"], "front_image_path": "full/5a21463c0ffb79043345cbebc650228dea3217ef.jpg", "title": "区块链原理最清晰最直观的解释"}
{"create_date": "2017/09/19 ", "url": "http://blog.jobbole.com/112517/", "fav_nums": 1, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"http://www.linuxinsider.com/story/84489.html\">Jonathan Terrasi</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-8628-1.html\">Linux中国/geekpi</a>   </div><p>即使你是一个 Linux 新人，你可能也已经知道它不是一个单一的、整体的操作系统，而是一群项目。这个星座中不同的“星”组成了“发行版”。每个都提供了自己的 Linux 模式。</p>\n<p>感谢这一系列发行版所提供的多种选择，这有助于了解 Linux 如何开始并随后激增的。因此，这里会简要介绍一下 Linux 的历史。</p>\n<h3 id=\"toc_1\">Linus Torvalds，内核构建者</h3>\n<p>大多数熟悉 Linux 的人都已经听说过它的创建者 Linus Torvalds （题图中的人），但是并不知道他最初为何创建它。在 1991 年，Torvalds 还是一名在芬兰学习计算机的大学生。作为一个独立的个人项目，他希望为他的独特硬件创建一个类 Unix 内核。</p>\n<p>“内核”是操作系统的一部分，它介乎于操作系统和硬件之间，通过其固件进行协调。本质上，它是系统的核心。开发内核不是一个小工程，但是 Torvalds 渴望挑战，并且发现他自己有这个罕见的技能。</p>\n<p>由于他刚接触内核，他希望得到其他人的帮助来确保他走在正确的轨道上，因此他通过在早期的互联网论坛 Usenet 发布他的内核代码，并征求了老牌的老手的经验。然后贡献者就涌来了。</p>\n<p>在建立了一个对论坛提交的补丁进行审查以及选择性地集成它们的流程后，Torvalds 意识到他聚集起了一个非正式的团队。在项目发展之后，它很快成为了一个比较正式的开发团队。</p>\n<h3 id=\"toc_2\">Richard Stallman 的角色</h3>\n<p>虽然 Torvalds 以及他的团建创造了 Linux 内核，但是没有 Richard Stallman 的工作也不会有随后 Linux 众多发行版的传播，Richard 在十年之前发起了一个自由软件运动。</p>\n<p>受到许多核心 Unix 程序和系统功能缺乏透明度的阻挠，Stallman 决定自己编写一个，与任何想要它的人自由共享源代码，并且开放提交。他创造了许多核心程序的主体，并在 1983 年发布，统称为 “GNU 项目”。</p>\n<p>没有它们，内核不会有那么多的用量。基于 Linux 的操作系统的早期设计人员很乐意将 GNU 工具集成到他们的项目中。</p>\n<p>不同的团队开始出现 – 每个团队都有自己的计算功能和架构的理念。他们将 Linux 内核、GNU 实用程序和他们自己的原始软件结合在一起，然而“发行”了 Linux 操作系统的变体。</p>\n<h3 id=\"toc_3\">服务器发行版</h3>\n<p>每个发行版有它自己的设计逻辑和目的，但是要了解它们的细微差别，需要了解上游和下游开发人员之间的区别。“上游开发人员”负责实际创建项目并发布，以供个人下载或将其包含在其他项目中。相比之下，“下游开发人员”或“软件包维护人员”是指每个发布上游程序的人员，他们对每个上游程序的版本进行调整以适应下游项目的使用情况。</p>\n<p>虽然大多数 Linux 发行版包含一些（自己的）原生项目，但大部分发行版开发主要是对 Linux 内核、GNU 工具和庞大的用户程序生态系统的“下游”工作。</p>\n<p>许多发行通过优化特定使用场景来彰显它们的特征。例如，某些项目被设计作为服务器运行。为部署服务器而量身定制的发行版通常会避开上游项目中快速推出的最新功能，而倾向于发布一个经过彻底测试的、基础的基本软件，系统管理员可以依靠它来顺利运行。</p>\n<p>针对服务器的发行版的的开发团队经常很大，并且有富有经验的程序员可以为每个版本提供多年的支持。</p>\n<h3 id=\"toc_4\">桌面发行版</h3>\n<p>也有很多的发行版针对桌面用户。事实上，一些知名的发行版通过提供简单的安装以及直观的界面来与商业的操作系统竞争。这些发行版通常包含了大量的软件仓库，它包含了用户可以想到的每个软件，这样用户可以定制它们自己的系统。</p>\n<p>由于可用性是关键，他们可能会投入部门大量的员工来创建一个特征鲜明的、发行版特定的桌面，或调整已有的桌面以适应其设计理念。以用户为中心的发行版往往会加快其下游开发时间表，有助于及时为用户提供新功能。</p>\n<p>“滚动发布”项目，这是一种桌面发行版的子集，其被设计成紧跟潮流。滚动发布项目的包维护人员在为每个上游程序完成调整后分别发布其新版本，而不是等待所需的上游程序的开发达到某一特定的节点，然后将其集成到单个版本中。</p>\n<p>这种方法的一个优点是安全性，因为其关键补丁的发布将比非滚动发行版更快。另一个好处是新功能立即可用，不然用户需要等待才行。滚动发布的缺点是需要更多的人工干预和仔细维护，因为某些升级可能会与其他升级相冲突从而破坏系统。</p>\n<h3 id=\"toc_5\">嵌入式系统</h3>\n<p>另外一个 Linux 发行版类别是“嵌入式系统”，它被极致裁剪（相对与服务器和桌面发行版）来适应特定的使用情况。</p>\n<p>我们经常会忘记那些连接到因特网的任何东西，或者比一个简单的计算器复杂的东西，都是计算机。而计算机需要操作系统。因为 Linux 是自由的并且高度模块化，所以它通常是硬件厂商的选择。</p>\n<p>在大多数情况下，如果你看见一台智能电视、一台连接互联网的照相机、甚至是一辆车，你看到的都是 Linux 设备。特别是每部非 iPhone 的智能手机都运行着不同的嵌入式 Linux。</p>\n<h3 id=\"toc_6\">Linux 现场版</h3>\n<p>最后，有一些 Linux 发行版并不需要永久性地安装在计算机中，而是驻留在 USB 记忆棒上，并允许在其它的计算机上启动它们，而无需计算机硬盘。</p>\n<p>这些 “现场版（live）” 的系统可以被优化来执行一些任务。从修复损坏的系统到进行安全评估到高度安全地浏览因特网。</p>\n<p>由于这些 现场版 Linux 发行版通常针对解决特定的问题，因此它们一般都包含特定的工具，像磁盘分析和恢复程序、网络监控程序和加密工具。它们还占用很小的空间，因此它们可以快速启动。</p>\n<h3 id=\"toc_7\">你如何选择？</h3>\n<p>这绝不是 Linux 发行版类型的全面列表，但它应该可以让你大致了解 Linux 生态系统的范围和多样化了。</p>\n<p>在每个类别下都有许多选择，因此你会如何选择一个最能符合你需求的版本呢？</p>\n<p>一种方式是试验。在 Linux 社区中，来回尝试不同的发行版，或者为用户根据他们的需求在不同的机器上运行不同的发行版，这都很常见。</p>\n<p>在将来的文章中，我会展示每种类型发行版的几个例子，以便你可以自己尝试，并开始探索最喜欢的发行版的旅程。</p>\n<hr>\n<p>作者简介：</p>\n<p>自 2017 年以来 Jonathan Terrasi 一直是 ECT 新闻网的专栏作家。他的主要兴趣是计算机安全（特别是 Linux 桌面），加密和分析政治和时事。他是全职自由作家和音乐家。他的背景包括在芝加哥委员会发表的保卫人权法案文章中提供技术评论和分析。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112517\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112517votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112517\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": 1, "praise_nums": "1", "url_object_id": "3c3be9710ad6349b4226b28187cac799", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2016/08/2e327580770370cc02c696e176d4cb77.jpg"], "front_image_path": "full/dd1cc9aabc819ded578b6acfe94b7f995ee5ea2d.jpg", "title": "Linux 大爆炸：一个内核，无数发行版"}
{"create_date": "2017/09/19 ", "url": "http://blog.jobbole.com/112486/", "fav_nums": 1, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文作者： <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/hector\">hoohack</a> 。未经作者许可，禁止转载！<br>欢迎加入伯乐在线 <a href=\"http://blog.jobbole.com/99322\" target=\"_blank\">专栏作者</a>。</div><p>浮点数精度丢失是一个长久的问题，PHP中精度丢失并不是PHP的bug，是计算机表示范围导致的问题。精度，这个问题的原因看起来不太重要，虽然学这个对于实际上的业务开发也没什么用，不会让你的开发能力“duang”地一下上去几个level，但是了解了PHP对于大整数的处理，也是自己知识框架的一个小小积累。</p>\n<h2 id=\"遇到的问题\">遇到的问题</h2>\n<p>最近遇到一个PHP大整数的问题，问题代码是这样的</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33df7bdc5b764775859\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$shopId = 17978812896666957068;\r\nvar_dump($shopId);</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33df7bdc5b764775859-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33df7bdc5b764775859-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33df7bdc5b764775859-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">shopId</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">17978812896666957068</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33df7bdc5b764775859-2\"><span class=\"crayon-e\">var_dump</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">shopId</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>上面的代码输出，会把$shopId转换成float类型，且使用了科学计数法来表示，输出如下：</p>\n<blockquote><p>float(1.7978812896667E+19)</p></blockquote>\n<p>但在程序里需要的是完整的数字作为查找数据的参数，所以需要用的是完整的数字，当时以为只是因为数据被转换成科学计数法了，于是想到的解决方案是强制让它不使用科学计数法表示：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33df7bdc65796875115\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$shopId= number_format(17978812896666957068);\r\nvar_dump($shopId);</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33df7bdc65796875115-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33df7bdc65796875115-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33df7bdc65796875115-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">shopId</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">number_format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">17978812896666957068</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33df7bdc65796875115-2\"><span class=\"crayon-e\">var_dump</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">shopId</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>这时候奇怪的事情出现了，输出的是：</p>\n<blockquote><p>17978812896666957824</p></blockquote>\n<p>当时没有仔细看，对比了前十位就没有继续往下看，所以认为问题解决了，等到真正根据ID去找数据的时候才发现数据查不出来，这时候才发现是数据转换错误了。</p>\n<p>这里使用number_format失败的原因在后面会讲到，当时就想到将原来的数据转成字符串的，但是使用了以下方法仍然不行</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33df7bdc69899514073\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$shopId= strval(17978812896666957068);\r\nvar_dump($shopId);\r\n\r\n$shopId = 17978812896666957068 . '';\r\nvar_dump($shopId);</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33df7bdc69899514073-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33df7bdc69899514073-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f33df7bdc69899514073-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33df7bdc69899514073-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f33df7bdc69899514073-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33df7bdc69899514073-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">shopId</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">strval</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">17978812896666957068</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33df7bdc69899514073-2\"><span class=\"crayon-e\">var_dump</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">shopId</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33df7bdc69899514073-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33df7bdc69899514073-4\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">shopId</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">17978812896666957068</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">''</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33df7bdc69899514073-5\"><span class=\"crayon-e\">var_dump</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">shopId</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p>输出的结果都是</p>\n<blockquote><p>float(1.7978812896667E+19)</p></blockquote>\n<p>最后只有下面这种方案是可行的：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33df7bdc6c115158339\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$shopId = '17978812896666957068';\r\nvar_dump($shopId);\r\n\r\n// 输出\r\n// string(20) \"17978812896666957068\"</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33df7bdc6c115158339-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33df7bdc6c115158339-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f33df7bdc6c115158339-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33df7bdc6c115158339-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f33df7bdc6c115158339-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33df7bdc6c115158339-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">shopId</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'17978812896666957068'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33df7bdc6c115158339-2\"><span class=\"crayon-e\">var_dump</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">shopId</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33df7bdc6c115158339-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33df7bdc6c115158339-4\"><span class=\"crayon-c\">// 输出</span></div><div class=\"crayon-line\" id=\"crayon-59f33df7bdc6c115158339-5\"><span class=\"crayon-c\">// string(20) \"17978812896666957068\"</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>众所周知，PHP是一门解释型语言，所以当时就大胆地猜测PHP是在编译期间就将数字的字面量常量转换成float类型，并用科学计数法表示。但仅仅猜测不能满足自己的好奇心，想要看到真正实现代码才愿意相信。于是就逐步分析、探索，直到找到背后的实现。</p>\n<p>刚开始根据这个问题直接上网搜“PHP大整数解析过程”，并没有搜到答案，因此只能自己去追查。一开始对PHP的执行过程不熟悉，出发点就只能是一步一步地调试，然后</p>\n<p>示例代码：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33df7bdc70080943197\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n// test.php\r\n$var = 17978812896666957068;\r\nvar_dump($var);</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33df7bdc70080943197-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33df7bdc70080943197-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f33df7bdc70080943197-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33df7bdc70080943197-1\"><span class=\"crayon-c\">// test.php</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33df7bdc70080943197-2\"><span class=\"crayon-sy\">$</span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">17978812896666957068</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33df7bdc70080943197-3\"><span class=\"crayon-e\">var_dump</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">$</span><span class=\"crayon-t\">var</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p></p>\n<h2 id=\"追查过程\">追查过程</h2>\n<p>1、查看opcode 通过vld查看PHP执行代码的opcode，可以看到，赋值的是一个ASSIGN的opcode操作 <img src=\"http://7u2eqw.com1.z0.glb.clouddn.com/PHP%E5%A4%A7%E6%95%B4%E6%95%B0%20%281%29.png\" alt=\"php整数01\"></p>\n<p>接下来就想看看ASSIGN是在哪里执行的。</p>\n<p>2、gdb调试 2-1、用list查看有什么地方可以进行断点 <img src=\"http://7u2eqw.com1.z0.glb.clouddn.com/PHP%E5%A4%A7%E6%95%B4%E6%95%B0%20%282%29.png\" alt=\"php整数02\"></p>\n<p>2-2、暂时没有头绪，在1186断点试试 <img src=\"http://7u2eqw.com1.z0.glb.clouddn.com/PHP%E5%A4%A7%E6%95%B4%E6%95%B0%20%283%29.png\" alt=\"php整数03\"></p>\n<p>结果程序走到sapi/cli/php_cli.c文件的1200行了，按n不断下一步执行，一直到这里就走到了程序输出结果了： <img src=\"http://7u2eqw.com1.z0.glb.clouddn.com/PHP%E5%A4%A7%E6%95%B4%E6%95%B0%20%284%29.png\" alt=\"php整数04\"></p>\n<p>2-4、于是可以猜测，ASSIGN操作是在do_cli函数里面进行的，因此对do_cli函数做断点：break do_cli。 输入n，不断回车，在sapi/cli/php_cli.c文件的993行之后就走到程序输出结果了： <img src=\"http://7u2eqw.com1.z0.glb.clouddn.com/PHP%E5%A4%A7%E6%95%B4%E6%95%B0%20%285%29.png\" alt=\"php整数05\"></p>\n<p>2-5、再对php_execute_script函数做断点：break php_execute_script 不断逐步执行，发现在main/main.c文件的2537行就走到程序输出结果了： <img src=\"http://7u2eqw.com1.z0.glb.clouddn.com/PHP%E5%A4%A7%E6%95%B4%E6%95%B0%20%286%29.png\" alt=\"php整数06\"></p>\n<p>2-6、继续断点的步骤：break zend_execute_scripts 重复之前的步骤，发现在zend/Zend.c文件的1476行走到了程序输出结果的步骤： <img src=\"http://7u2eqw.com1.z0.glb.clouddn.com/PHP%E5%A4%A7%E6%95%B4%E6%95%B0%20%287%29.png\" alt=\"php整数07\"></p>\n<p>看到这里的时候，第1475行里有一个op_array，就猜测会不会是在op_array的时候就已经有值了，于是开始打印op_array的值： <img src=\"http://7u2eqw.com1.z0.glb.clouddn.com/PHP%E5%A4%A7%E6%95%B4%E6%95%B0%20%288%29.png\" alt=\"php整数08\"></p>\n<p>打印之后并没有看到有用的信息，但是其实这里包含有很大的信息量，比如opcode的handler: <strong>ZEND_ASSIGN_SPEC_CV_RETVAL_CV_CONST_RETVAL_UNUSED_HANDLER</strong>，但是当时没注意到，因为就想着看看op_array是怎么被赋值的，相关步骤做了什么，忽略了这个重要的信息，之后还是会回到这个handler。</p>\n<p>2-7、重新从2-5的断点开始，让程序逐步执行，看到op_array的赋值如下： <img src=\"http://7u2eqw.com1.z0.glb.clouddn.com/PHP%E5%A4%A7%E6%95%B4%E6%95%B0%20%289%29.png\" alt=\"php整数09\"></p>\n<p>将zend_compile_file函数运行的结果赋值给op_array了，于是break zend_compile_file，被告知zend_compile_file未定义，通过源码工具追踪到zend_compile_file指向的是compile_file，于是break zend_compile</p>\n<p>发现是在Zend/zend_language_scanner.l 文件断点了，逐步执行，看到这行pass_two(op_array)，猜测可能会在这里就有值，所以打印看看： <img src=\"http://7u2eqw.com1.z0.glb.clouddn.com/PHP%E5%A4%A7%E6%95%B4%E6%95%B0%20%2810%29.png\" alt=\"php整数10\"></p>\n<p>结果发现还是跟之前的一样，但是此时看到有一个opcodes的值，打印看看 <img src=\"http://7u2eqw.com1.z0.glb.clouddn.com/PHP%E5%A4%A7%E6%95%B4%E6%95%B0%20%2811%29.png\" alt=\"php整数11\"></p>\n<p><img src=\"http://7u2eqw.com1.z0.glb.clouddn.com/PHP%E5%A4%A7%E6%95%B4%E6%95%B0%20%2812%29.png\" alt=\"php整数12\"></p>\n<p>看到opcode = 38，网上查到38代表赋值</p>\n<p><img src=\"http://7u2eqw.com1.z0.glb.clouddn.com/PHP%E5%A4%A7%E6%95%B4%E6%95%B0%20%2813%29.png\" alt=\"php整数13\"></p>\n<p>2-8、于是可以知道，在这一步之前就已得到了ASSIGN的opcode，因此，不断的往前找，从op_array开始初始化时就开始，逐步打印op_array-&gt;opcodes的值，一直都是null： <img src=\"http://7u2eqw.com1.z0.glb.clouddn.com/PHP%E5%A4%A7%E6%95%B4%E6%95%B0%20%2814%29.png\" alt=\"php整数14\"></p>\n<p>直到执行了CG(zend_lineno) = last_lineno;才得到opcode = 38 的值： <img src=\"http://7u2eqw.com1.z0.glb.clouddn.com/PHP%E5%A4%A7%E6%95%B4%E6%95%B0%20%2815%29.png\" alt=\"php整数15\"></p>\n<p>因为这一句：CG(zend_lineno) = last_lineno;是一个宏，所以也没头绪，接近放弃状态。。。</p>\n<p>于是先去了解opcode的数据结构，在<a href=\"http://www.php-internals.com/book/\">深入理解PHP内核</a>书里找到opcode处理函数查找这一章，给了我一些继续下去的思路。</p>\n<p>引用里面的内容： 在PHP内部有一个函数用来快速的返回特定opcode对应的opcode处理函数指针：zend_vm_get_opcode_handler()函数： <img src=\"http://7u2eqw.com1.z0.glb.clouddn.com/PHP%E5%A4%A7%E6%95%B4%E6%95%B0%20%2816%29.png\" alt=\"php整数16\"></p>\n<p>知道其实opcode处理函数的命名是有以下规律的</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33df7bdc76853626664\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nZEND_[opcode]_SPEC_(变量类型1)_(变量类型2)_HANDLER</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33df7bdc76853626664-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33df7bdc76853626664-1\"><span class=\"crayon-v\">ZEND_</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">opcode</span><span class=\"crayon-sy\">]</span><span class=\"crayon-e\">_SPEC_</span><span class=\"crayon-sy\">(</span>变量类型<span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-e\">_</span><span class=\"crayon-sy\">(</span>变量类型<span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-v\">_HANDLER</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>根据之前调试打印出来的内容，在2-6的时候就看到了一个handler的值： <img src=\"http://7u2eqw.com1.z0.glb.clouddn.com/PHP%E5%A4%A7%E6%95%B4%E6%95%B0%20%2817%29.png\" alt=\"php整数17\"></p>\n<p>是 <strong>ZEND_ASSIGN_SPEC_CV_CONST_RETVAL_UNUSED_HANDLER</strong>，</p>\n<p>找出函数的定义如下： <img src=\"http://7u2eqw.com1.z0.glb.clouddn.com/PHP%E5%A4%A7%E6%95%B4%E6%95%B0%20%2818%29.png\" alt=\"php整数18\"></p>\n<p>可以看到，opcode操作的时候，值是从EX_CONSTANT获取的，根据定义展开这个宏，那就是</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33df7bdc7c218527295\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nopline-&gt;op2-&gt;execute_data-&gt;literals</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33df7bdc7c218527295-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33df7bdc7c218527295-1\"><span class=\"crayon-v\">opline</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">op2</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">execute_data</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">literals</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>这里可以得到两个信息： 1、参数的转换在opcode执行前就做好了 2、赋值过程取值时是在op2-&gt;execute_data-&gt;literals，如果猜想没错的话，op2-&gt;execute_data-&gt;literals此时保存的就是格式转换后的值，可以打印出来验证一下</p>\n<p>打印结果如下： <img src=\"http://7u2eqw.com1.z0.glb.clouddn.com/PHP%E5%A4%A7%E6%95%B4%E6%95%B0%20%2819%29.png\" alt=\"php整数19\"></p>\n<p>猜想验证正确，但是没有看到真正做转换的地方，还是不死心，继续找PHP的Zend底层做编译的逻辑代码。</p>\n<p>参考开源的<a href=\"https://github.com/pangudashu/php7-internal\">GitHub项目</a>，PHP编译阶段如下图： <img src=\"http://7u2eqw.com1.z0.glb.clouddn.com/PHP%E5%A4%A7%E6%95%B4%E6%95%B0%20%2820%29.png\" alt=\"php整数20\"></p>\n<p>猜测最有可能的是在zendparse、zend_compile_top_stmt这两个阶段完成转换，因为这个两个阶段做的事情就是将PHP代码转换成opcode数组。</p>\n<p>上网搜索了PHP语法分析相关的文章，有一篇里面讲到了解析整数的过程，因此找到了PHP真正将大整数做转换的地方：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33df7bdc82993034446\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n{LNUM} {\r\n    char *end;\r\nif (yyleng</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33df7bdc82993034446-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33df7bdc82993034446-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f33df7bdc82993034446-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33df7bdc82993034446-1\"><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">LNUM</span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33df7bdc82993034446-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">char</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-st\">end</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33df7bdc82993034446-3\"><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">yyleng</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>可以看到，zend引擎在对PHP代码在对纯数字的表达式做词法分析的时候，先判断数字是否有可能会溢出，如果有可能溢出，先尝试将其用LONG类型保存，如果溢出，先用zend_strtod将其转换为double类型，然后用double类型的zval结构体保存之。</p>\n<h2 id=\"number_format失败的原因\">number_format失败的原因</h2>\n<p>通过gdb调试，追查到number_format函数，在PHP底层最终会调用php_conv_fp函数对数字进行转换： <img src=\"http://7u2eqw.com1.z0.glb.clouddn.com/PHP%E5%A4%A7%E6%95%B4%E6%95%B0%20%2821%29.png\" alt=\"php整数21\"></p>\n<p>函数原型如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33df7bdc86537989969\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nPHPAPI char * php_conv_fp(register char format, register double num, boolean_e add_dp, int precision, char dec_point, bool_int * is_negative, char *buf, size_t *len);</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33df7bdc86537989969-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33df7bdc86537989969-1\"><span class=\"crayon-e\">PHPAPI </span><span class=\"crayon-t\">char</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">php_conv_fp</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">register </span><span class=\"crayon-t\">char</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">format</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">register </span><span class=\"crayon-t\">double</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">num</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">boolean_e </span><span class=\"crayon-v\">add_dp</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">precision</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">char</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dec_point</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">bool_int *</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">is_negative</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">char</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">buf</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">size_t *</span><span class=\"crayon-v\">len</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p>这里接收的参数num是一个double类型，因此，如果传入的是字符串类型数字的话，number_format函数也会将其转成double类型传入到php_conf_fp函数里。而这个double类型的num最终之所以输出为17978812896666957824，是因为进行科学计数法之后的精度丢失了，重新转成double时就恢复不了原来的值。在C语言下验证：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33df7bdc89958116261\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndouble local_dval = 1.7978812896666958E+19;\r\nprintf(\"%f\\n\", local_dval);</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33df7bdc89958116261-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33df7bdc89958116261-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33df7bdc89958116261-1\"><span class=\"crayon-t\">double</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">local_dval</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.7978812896666958E</span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">19</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33df7bdc89958116261-2\"><span class=\"crayon-e\">printf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"%f\\n\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">local_dval</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>输出的结果就是</p>\n<blockquote><p>17978812896666957824.000000</p></blockquote>\n<p>所以，这不是PHP的bug，它就是这样的。</p>\n<h2 id=\"此类问题解决方案\">此类问题解决方案</h2>\n<p>对于存储，超过PHP最大表示范围的纯整数，在MySQL中可以使用bigint/varchar保存，MySQL在查询出来的时候会将其使用string类型保存的。 对于赋值，在PHP里，如果遇到有大整数需要赋值的话，不要尝试用整型类型去赋值，比如，不要用以下这种：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33df7bdc8d061457370\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$var = 17978812896666957068;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33df7bdc8d061457370-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33df7bdc8d061457370-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">17978812896666957068</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>而用这种：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33df7bdc90304899743\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$var = '17978812896666957068';</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33df7bdc90304899743-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33df7bdc90304899743-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'17978812896666957068'</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>而对于number_format，在64位操作系统下，它能解析的精度不会丢失的数，建议的最大值是这个：9007199254740991。参考鸟哥博客：<a href=\"http://www.laruence.com/2011/12/19/2399.html\">关于PHP浮点数你应该知道的</a></p>\n<h2 id=\"总结\">总结</h2>\n<p>这个问题的原因看起来不太重要，虽然学这个对于实际上的业务开发也没什么用，不会让你的开发能力“duang”地一下上去几个level，但是了解了PHP对于大整数的处理，也是自己知识框架的一个小小积累，知道了为什么之后，在日常开发中就会多加注意，比如从存储以及使用赋值的角度。了解这个细节还是很有好处的。</p>\n<p>回想整个解决问题的过程，个人感觉有点长，总共大约花了4个小时去定位这个问题。因为对PHP的内核只是一知半解，没有系统的把整个流程梳理下来，所以一开始也不知道从哪里开始下手，就开始根据自己的猜测来调试。现在回想起来，应该先学习PHP的编译、执行流程，然后再去猜测具体的步骤。</p>\n<p>原创文章，文笔有限，才疏学浅，文中若有不正之处，万望告知。</p>\n\r\n        \r\n            <blockquote class=\"rewards\">\n        <p><strong>打赏支持我写出更多好文章，谢谢！</strong></p>\n        <a href=\"#rewardbox\" id=\"rewards-button\" class=\"fancybox\"><span class=\"btn-bluet-blue href-style\"><i class=\"fa fa-jpy\"></i> 打赏作者</span></a>\n    </blockquote>\n\n    <div id=\"rewardbox\">\n        <h4>打赏支持我写出更多好文章，谢谢！</h4>\n                <p>任选一种支付方式</p>\n                <p>\n                        <img src=\"http://jbcdn2.b0.upaiyun.com/2016/05/7aa70eaa311d5a5dec82ca0d49624741.png\">\n            \n                            <img src=\"http://jbcdn2.b0.upaiyun.com/2016/05/1a4b335ec981d013f4002205a23fedd0.jpg\">\n                    </p>\n    </div>\n\n    \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112486\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112486votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112486\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 2 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/hector\">hoohack</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/hector\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/df22a501f19a5bba1b3331e2001f8ec2.jpeg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            一个正在努力的菜鸟        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/hector\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/hector/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/hector/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 27</a> · <a title=\"我的网站\" target=\"_blank\" href=\"http://www.hoohack.me\"><i class=\"fa fa-link\"></i></a> <a title=\"微博主页\" target=\"_blank\" href=\"http://weibo.com/u/2388493434?is_all=1\"><i class=\"fa fa-weibo\"></i></a> <a title=\"QQ：914099943\" target=\"_blank\" href=\"#\"><i class=\"fa fa-qq\"></i></a> <a title=\"个人微信：hhq8307231\" target=\"_blank\" href=\"#\"><i class=\"fa fa-weixin\"></i></a> <a title=\"GitHub主页\" target=\"_blank\" href=\"https://github.com/hoohack\"><i class=\"fa fa-github\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": 2, "praise_nums": "1", "url_object_id": "d4fbf46a6293738d6c74397edc88e231", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2016/04/81fddcca1b7455ef27983ecf42a8502b.jpg"], "front_image_path": "full/fb5bc7aed8de99098d0e143ff7711b56f8cdae71.jpg", "title": "自上而下，逐步揭开 PHP 解析大整数的面纱"}
{"create_date": "2017/10/13 ", "url": "http://blog.jobbole.com/112611/", "fav_nums": 1, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文作者： <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/thoughtworkschina\">ThoughtWorks</a> 。未经作者许可，禁止转载！<br>欢迎加入伯乐在线 <a href=\"http://blog.jobbole.com/99322\" target=\"_blank\">专栏作者</a>。</div><div>\n<h3>前言</h3>\n<p>笔者从2013年加入ThoughtWorks至今共4年时间。在这4年时间里，我分别以开发人员、DevOps工程师、DevOps咨询师、微服务架构师以及微服务咨询师的角色参与了共计7个产品和项目的微服务咨询和实施。其中有成功，有失败，有反思，更多的是学习和总结。以下是我这些年来在微服务咨询上的经验总结，希望能给陷入微服务实施困境的人带来一些帮助。</p>\n<p><a href=\"http://insights.thoughtworks.cn/wp-content/uploads/2017/10/0.jpg\"><img src=\"http://insights.thoughtworks.cn/wp-content/uploads/2017/10/0-1024x680.jpg\" alt=\"\" width=\"700\" height=\"465\"></a></p>\n<h3>难点1：“一步到位”的认知错觉</h3>\n<p>这些年微服务大红大紫，但是真正能够拿出来做为可实践案例的少之又少。大部分的微服务案例只能看到微服务架构的“演进结果”，但是看不到其“演进过程”。这就像每个人可以看到一个架构的高峰，却看不到攀登高峰的路径。</p>\n<p>这就造成了一个假象：微服务的架构是通过能力极高的架构师一步到位设计出来的。</p>\n<p>这和很多团队自上而下的架构设计感受很相似。于是架构师们蜂拥而至，各种分析方法论层出不穷，讨论和分享络绎不绝。然而真正落地实施的却很少，使得微服务在网络上慢慢变成了一种“玄学”：微服务的实施一直在“理论研究”的阶段。</p>\n<p>这违反了软件架构的最基本规律：架构是通过解决当前的需求和痛点而演进的，无法根据没有出现的问题和痛点进行设计。因此，一步到位的、整体的微服务架构设计完全没有必要。况且一个集中化的设计，很难体现微服务的轻量级优势。</p>\n<p>我相信技术一定是向不断降低成本的方向发展的。如果新技术没有降低成本反而提升了成本，要么这个新技术有问题，要么是姿势不对、走错了路。</p>\n<p>因此，准备实施微服务一定要有一个长期的思想准备。不过跨过了最初的门槛之后，剩下的工作可以被复制、而且速度会越来越快。</p>\n<h3>难点2：“架构师精英主义”</h3>\n<p>很多产品对架构师的依赖很大，即“架构师精英主义”：认为只有这个组织的“技术精英”——架构师才可以完成该产品的架构，而团队其它成员只需要实现架构师的设计就可以。这是大型企业和大型系统的常见问题，来源于长期以来重量级企业级架构的习惯。</p>\n<p><a href=\"http://insights.thoughtworks.cn/wp-content/uploads/2017/10/architect.jpg\"><img src=\"http://insights.thoughtworks.cn/wp-content/uploads/2017/10/architect-1024x602.jpg\" alt=\"\" width=\"700\" height=\"412\"></a></p>\n<p>而微服务则类似于一种“敏捷边际革命”：即由一个不超过2~8个人的小团队就可以完成的轻量级架构。而且对于这种规模的团队而言，即使把整个微服务团队从产品团队移除也不会对整体产品的研发进度产生影响。因此，即使失败了也不会带来太多的损失。不过，当第一个微服务改造成功，那么成功经验的复制带来的乘数效应却能带来很大的收益。</p>\n<p>从架构改造投资的风险收益比来看，这是非常划算的。</p>\n<p>因此，微服务团队完全没必要大张旗鼓，只需要两三个人就可以动工。但是，谁也没有微服务的实践经验啊，万一失败了怎么办？</p>\n<p>这就带来了下一个难点。</p>\n<h3>难点3：缺乏一个信任并鼓励创新的环境</h3>\n<p>面对未知的领域，失败再所难免。而处在这个不确定性频发的世界，成功和失败已经不再重要：也许今天的失败，明天再看就是成功，反之亦然。</p>\n<p>成功只是表明结果符合自己的假设预期，而失败仅仅意味着结果不符合自己的假设预期。但是无论成败，我们都能在行动的过程中有所学习和反思，而这样的经验才是研发活动中最有价值的。</p>\n<p>然而，很多组织，尤其“精英主义”的产品团队，责任和压力往往从上至下分解。由于组织庞大，金字塔的结构往往会构建一种以“不信任”为基础的制度。这种制度营造了一种“宁可不作为，也不能犯错”的文化。由于上层需要对失败负责，使得所有创新只能停留在上层，难以落实推进。在这种情况下，组织的长期合作形成了稳定的工作习惯和思维定势，并形成了利益平衡，这会使得整个组织在面对创新的时候“卡壳”。</p>\n<p>当微服务以一种政治任务从上而下派发的时候，为了避免失败，团队内部会相互推诿。通过不断的分析讨论和设计来论证这个事情的难度。在我看来，只要想搞，就一定能找到办法，而不是先设想出一堆还没有遇到的问题和责任。在行进中解决问题是比设计和讨论更加有效率的方法。</p>\n<p>而组织解决“卡壳”的办法就是引入“背锅侠”：例如新聘请的架构师或外部咨询师，来完成这个事情。出了问题就不用自己来承担责任了。这样虽然是解决问题的一种折中办法，可以让事情毫无风险的执行下去。但这是一种短期效应，无法解决组织本身的创新窘境，长期依赖外部力量来解决最有价值的问题不会让自己提升，反而形成了对外部力量的依赖。对于凝聚组织来说不是一件好事。</p>\n<p>只有打破当前的工作习惯和思维定势，充分认识到创新的困难、风险以及价值，才可以占领创新的高点，吸引人才。</p>\n<p><a href=\"http://insights.thoughtworks.cn/wp-content/uploads/2017/10/Microservices.png\"><img src=\"http://insights.thoughtworks.cn/wp-content/uploads/2017/10/Microservices-1024x592.png\" alt=\"\" width=\"700\" height=\"405\"></a></p>\n<h3>难点4：微服务技术栈的“选择困难症”</h3>\n<p>由于“精英主义”的架构师需要担负很大的责任和压力。他们必须要为微服务架构谨慎的选择技术栈。因此会在不同的技术栈之间不断尝试。对于习惯了在大型研发组织里“精心设计，加班生产 ”的架构师而言。“长设计，慢反馈”节奏似乎是理所应当的。</p>\n<p>微服务开源社区的快速发展滋长了“架构师焦虑”：如果采用落后的技术会被同行鄙视，被不懂技术的老板鄙视，甚至被下属鄙视。因此架构师们疲于在各种新型的技术栈之间比较和学习。此外，不熟悉技术往往会增大风险，架构师就需要更多的时间研究。带着“一步到位”的架构幻想对微服务技术栈精挑细选，而不会采用现有低成本的方案快速迭代的解决问题。</p>\n<p>微服务的核心在于采用“小规模，快反馈”的机制降低软件系统的复杂性并通过虚拟和自动化技术分散风险，从而及时应对市场变化带来的各种挑战、进行快速销售创新，获得市场的反馈。而不仅仅是利用到了时下新兴的语言，编程框架或工具。</p>\n<p>学习和实践是相辅相成的过程，在实践中学习，并把学习到的知识应用到实践中。这不同于准备一场考试：先停下来学习，准备好了再全力以赴。</p>\n<p>以上四点会让大型组织在微服务实施中“卡壳”，这往往会导致微服务实施忽略最重要一点，也是我认为也是核心的一点。</p>\n<h3>难点5：对微服务的技术变革预估过高，而对微服务带来的组织变革预估不足</h3>\n<p>作为架构师，永远要不要低估康威定理的威力：“设计系统的组织，其产生的设计和架构等价于组织间的沟通结构。”</p>\n<p>从制度经济学角度来讲，软件产品本身就是企业内部组织（员工）和外部组织（用户）沟通制度的计算机程序表达。这个制度一定会朝着缩短组织内外部沟通成本的方向发展。</p>\n<p><a href=\"http://insights.thoughtworks.cn/wp-content/uploads/2017/10/communication.jpg\"><img src=\"http://insights.thoughtworks.cn/wp-content/uploads/2017/10/communication-1024x663.jpg\" alt=\"\" width=\"700\" height=\"453\"></a></p>\n<p>因此，系统架构一定是和组织架构相吻合的，如果不吻合，势必会阻碍组织的渐进。</p>\n<p>这就引出了一个推论：如果企业组织的架构不是唯一的，那么微服务的架构方案也不是唯一的。</p>\n<p>当架构和组织结构相一致的时候，一切都会很顺畅。反之，就会出现各种问题。</p>\n<p>这个关系就像鞋和脚的关系，只有穿上合适的鞋，走起路来才会舒服。过大过小的鞋都无法让你加快前进的步伐。当然，你可以选择买鞋（引入产品），虽然并不是很合脚，但还可以凑合穿，只是在换鞋的时候你不得不停下来试。你也可以花高价为自己定制一套，这个不会让你在短时间内走得更快，只会越来越合脚。</p>\n<p>如果所有人穿上了新鞋，都能跑得很快，只有你不能，那么这就不是鞋的问题，而是你脚的问题，这就不是换鞋能解决的了。你得先把脚的问题解决了，然后再看鞋的问题。当然，也可以通过鞋来矫正脚，只不过会花些功夫，但一定会比不停的换鞋更加有效。</p>\n<p>很不幸，大多数的组织并没有准备好迎接微服务架构带来的组织变化。仍然把“系统架构问题”和“组织问题”割裂成两个不同领域的问题：微服务是技术问题，组织问题是管理问题。</p>\n<p>有竞争力的组织，是能够通过融合优势达到1+1&gt;2效果的组织。而不是把优势割裂开，让1+1&lt;=2的组织。因此，技术问题和管理问题并不是两个问题，而是同一个问题的两个侧面。</p>\n<p>因此，如果你的组织结构是去中心化的小团队结构，那么不用担心，你的应用架构会朝组织架构的方向演进。反之，如果你不是一个去中心化的小团队结构，那么微服务的架构会和组织架构格格不入。</p>\n<h3>如何解决这些问题？</h3>\n<p>作为微服务的实践者，对微服务不应该是“叶公好龙”，仅仅停留在研讨的层面。而应该采用敏捷和精益的方式迅速开始，在行进中解决碰到的问题。每个组织的组织结构和业务结构都有所不同，微服务实施所面对的挑战也截然不同。在实施的过程中快速学习并改进，没有必要进行周期较长的总体设计。</p>\n<p>关于如何解决本文提到的5个问题，请期待下篇《提升微服务实施效率的7个步骤》。</p>\n<blockquote><p>本文首发于GitChat，原作者顾宇，经作者同意授权转发。转载请联系作者或GitChat。</p></blockquote>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112611\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112611votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112611\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/thoughtworkschina\">ThoughtWorks</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/thoughtworkschina\">\r\n\t\t\t<img src=\"http://tp3.sinaimg.cn/1774908135/180/0/1\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            ThoughtWorks是一家全球IT咨询公司，追求卓越软件质量，致力于科技驱动商业变革。擅长构建定制化软件产品，帮助客户快速将概念转化为价值。同时为客户提供用户体验设计、技术战略咨询、组织转型等咨询服务。        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/thoughtworkschina\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/thoughtworkschina/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/thoughtworkschina/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 72</a> · <a title=\"我的网站\" target=\"_blank\" href=\"http://insights.thoughtworkers.org/\"><i class=\"fa fa-link\"></i></a> <a title=\"微博主页\" target=\"_blank\" href=\"http://weibo.com/thoughtworkschina\"><i class=\"fa fa-weibo\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>\r\n\t<!-- END .entry -->\r\n\r\n\r\n<script type=\"text/javascript\">\r\nvar jiathis_config={\r\n\tdata_track_clickback:false,\r\n\ttitle:\"分享从伯乐在线看到的一篇好文章 \",\r\n\tsummary:\"《微服务进展缓慢的 5 个难点》\",\r\n\tpic:\"http://insights.thoughtworks.cn/wp-content/uploads/2017/10/0-1024x680.jpg\",\r\n\tappkey:{\r\n         \"tsina\": 1473879058    },\r\n\tralateuid:{\r\n\t\t\"tsina\": 1670481425\t},\r\n\thideMore:false\r\n}\r\n</script>\r\n<script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js?uid=1745061\" charset=\"utf-8\"></script>\r\n<!-- JiaThis Button END -->\r\n\t\t\t<div class=\"textwidget\"><p><a href=\"http://group.jobbole.com/22945/\" target=\"_blank\"><img src=\"http://wx4.sinaimg.cn/mw690/bfdcef89gy1fknwaqrq59j20h803caau.jpg\"></a></p>\n</div>\n\t\t\r\n</div>", "comment_nums": "  评论", "praise_nums": "1", "url_object_id": "fb470c958f70e3d3bf823efd548d1b1f", "front_image_url": ["http://insights.thoughtworks.cn/wp-content/uploads/2017/10/0-1024x680.jpg"], "front_image_path": "full/b2420ad3ad6e9c957eaa9a081537288408c32d67.jpg", "title": "微服务进展缓慢的 5 个难点"}
{"create_date": "2017/09/19 ", "url": "http://blog.jobbole.com/112507/", "fav_nums": 12, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文作者： <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/2653yy\">fullstackyang</a> 。未经作者许可，禁止转载！<br>欢迎加入伯乐在线 <a href=\"http://blog.jobbole.com/99322\" target=\"_blank\">专栏作者</a>。</div><div>\n<h2>一、微博一定要登录才能抓取？</h2>\n<p>目前，对于微博的爬虫，大部分是基于模拟微博账号登录的方式实现的，这种方式如果真的运营起来，实际上是一件非常头疼痛苦的事，你可能每天都过得提心吊胆，生怕新浪爸爸把你的那些账号给封了，而且现在随着实名制的落地，获得账号的渠道估计也会变得越来越少。</p>\n<p>但是日子还得继续，在如此艰难的条件下，为了生存爬虫们必须寻求进化。好在上帝关门的同时会随手开窗，微博在其他诸如头条，一点等这类新媒体平台的冲击之下，逐步放开了信息流的查看权限。现在的微博即便在不登录的状态下，依然可以看到很多微博信息流，而我们的落脚点就在这里。</p>\n<p>作为前篇的重点内容，本文详细介绍如何获取相关的Cookie并重新封装Httpclient达到免登录的目的，以支持微博上的各项数据抓取任务。下面就从微博首页http://weibo.com开始。</p>\n<h2>二、准备工作</h2>\n<p>准备工作很简单，一个现代浏览器（你知道我为什么会写”现代”两个字），以及httpclient（我用的版本是4.5.3）</p>\n<p>跟登录爬虫一样，免登录爬虫也是需要装载Cookie。这里的Cookie是用来标明游客身份，利用这个Cookie就可以在微博平台中访问那些允许访问的内容了。</p>\n<p>这里我们可以使用浏览器的network工具来看一下，请求http://weibo.com之后服务器都返回哪些东西，当然事先清空一下浏览器的缓存。</p>\n<p>不出意外，应该可以看到下图中的内容</p>\n<p><img src=\"http://www.fullstackyang.com/wp-content/uploads/2017/09/network.jpg\" alt=\"\"></p>\n<p>第1次请求weibo.com的时候，其状态为302重定向，也就是说这时并没有真正地开始加载页面，而最后一个请求weibo.com的状态为200，表示了请求成功，对比两次请求的header：</p>\n<p><img src=\"http://www.fullstackyang.com/wp-content/uploads/2017/09/weibo_header.jpg\" alt=\"\"></p>\n<p>明显地，中间的这些过程给客户端加载了各种Cookie，从而使得可以顺利访问页面，接下来我们逐个进行分析。</p>\n<h2>三、抽丝剥茧</h2>\n<p>第2个请求是https://passport.weibo.com/visitor……，各位可以把这个url复制出来，用httpclient单独访问一下这个url，可以看到返回的是一个html页面，里面有一大段Javascript脚本，另外头部还引用一个JS文件mini_original.js，也就是第3个请求。脚本的功能比较多，就不一一叙述了，简单来说就是微博访问的入口控制，而值得我们注意的是其中的一个function：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f2617f1d779683219338\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">JavaScript</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n// 为用户赋予访客身份 。\r\n    var incarnate = function (tid, where, conficence) {\r\n        var gen&lt;em&gt;conf = \"\";\r\n        var from = \"weibo\";\r\n        var incarnate_intr = window.location.protocol + \"//\" + window.location.host + \"/visitor/visitor?a=incarnate&amp;t=\" + encodeURIComponent(tid) + \"&amp;w=\" + encodeURIComponent(where) + \"&amp;c=\" + encodeURIComponent(conficence) + \"&amp;gc=\" + encodeURIComponent(gen_conf) + \"&amp;cb=cross_domain&amp;from=\" + from + \"&amp;_rand=\" + Math.random();\r\n        url.l(incarnate_intr);\r\n    };&lt;/em&gt;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d779683219338-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d779683219338-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d779683219338-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d779683219338-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d779683219338-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d779683219338-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d779683219338-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f2617f1d779683219338-1\"><span class=\"crayon-c\">// 为用户赋予访客身份 。</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d779683219338-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">incarnate</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">tid</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">where</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">conficence</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d779683219338-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">gen</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">em</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-e \">conf</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d779683219338-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"weibo\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d779683219338-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">incarnate_intr</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">window</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">location</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">protocol</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"//\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">window</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">location</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">host</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"/visitor/visitor?a=incarnate&amp;t=\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">encodeURIComponent</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">tid</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"&amp;w=\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">encodeURIComponent</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">where</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"&amp;c=\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">encodeURIComponent</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">conficence</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"&amp;gc=\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">encodeURIComponent</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">gen_conf</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"&amp;cb=cross_domain&amp;from=\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"&amp;_rand=\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Math</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">random</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d779683219338-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">url</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">l</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">incarnate_intr</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d779683219338-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">em</span><span class=\"crayon-o\">&gt;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0035 seconds] -->\r\n<p>这里是为请求者赋予一个访客身份，而控制跳转的链接也是由一些参数拼接起来的，也就是上图中第6个请求。所以下面的工作就是获得这3个参数：tid，w（where），c（conficence，从下文来看应为confidence，大概是新浪工程师的手误）。继续阅读源码，可以看到该function是tid.get方法的回调函数，而这个tid则是定义在那个mini_original.js中的一个对象，其部分源码为：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f2617f1d783005968992\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">JavaScript</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n    var tid = {\r\n        key: 'tid',\r\n        value: '',\r\n        recover: 0,\r\n        confidence: '',\r\n        postInterface: postUrl,\r\n        fpCollectInterface: sendUrl,\r\n        callbackStack: [],\r\n        init: function () {\r\n            tid.get();\r\n        },\r\n        runstack: function () {\r\n            var f;\r\n            while (f = tid.callbackStack.pop()) {\r\n                f(tid.value, tid.recover, tid.confidence);//注意这里，对应上述的3个参数\r\n            }\r\n        },\r\n        get: function (callback) {\r\n            callback = callback || function () {\r\n            };\r\n            tid.callbackStack.push(callback);\r\n            if (tid.value) {\r\n                return tid.runstack();\r\n            }\r\n            Store.DB.get(tid.key, function (v) {\r\n                if (!v) {\r\n                    tid.getTidFromServer();\r\n                } else {\r\n                    ……\r\n                }\r\n            });\r\n        },\r\n    ……\r\n    }\r\n……\r\n getTidFromServer: function () {\r\n            tid.getTidFromServer = function () {\r\n            };\r\n            if (window.use&lt;em&gt;fp) {\r\n                getFp(function (data) {\r\n                    util.postData(window.location.protocol + '//' + window.location.host + '/' + tid.postInterface, \"cb=gen_callback&amp;fp=\" + encodeURIComponent(data), function (res) {\r\n                        if (res) {\r\n                            eval(res);\r\n                        }\r\n                    });\r\n                });\r\n            } else {\r\n                util.postData(window.location.protocol + '//' + window.location.host + '/' + tid.postInterface, \"cb=gen_callback\", function (res) {\r\n                    if (res) {\r\n                        eval(res);\r\n                    }\r\n                });\r\n            }\r\n        },\r\n……\r\n//获得参数\r\nwindow.gen_callback = function (fp) {\r\n        var value = false, confidence;\r\n        if (fp) {\r\n            if (fp.retcode == 20000000) {\r\n                confidence = typeof(fp.data.confidence) != 'undefined' ? '000' + fp.data.confidence : '100';\r\n                tid.recover = fp.data.new_tid ? 3 : 2;\r\n                tid.confidence = confidence = confidence.substring(confidence.length - 3);\r\n                value = fp.data.tid;\r\n                Store.DB.set(tid.key, value + '&lt;/em&gt;' + confidence);\r\n            }\r\n        }\r\n        tid.value = value;\r\n        tid.runstack();\r\n    };</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d783005968992-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d783005968992-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d783005968992-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d783005968992-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d783005968992-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d783005968992-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d783005968992-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d783005968992-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d783005968992-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d783005968992-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d783005968992-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d783005968992-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d783005968992-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d783005968992-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d783005968992-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d783005968992-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d783005968992-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d783005968992-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d783005968992-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d783005968992-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d783005968992-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d783005968992-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d783005968992-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d783005968992-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d783005968992-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d783005968992-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d783005968992-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d783005968992-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d783005968992-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d783005968992-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d783005968992-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d783005968992-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d783005968992-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d783005968992-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d783005968992-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d783005968992-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d783005968992-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d783005968992-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d783005968992-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d783005968992-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d783005968992-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d783005968992-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d783005968992-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d783005968992-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d783005968992-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d783005968992-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d783005968992-47\">47</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d783005968992-48\">48</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d783005968992-49\">49</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d783005968992-50\">50</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d783005968992-51\">51</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d783005968992-52\">52</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d783005968992-53\">53</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d783005968992-54\">54</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d783005968992-55\">55</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d783005968992-56\">56</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d783005968992-57\">57</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d783005968992-58\">58</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d783005968992-59\">59</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d783005968992-60\">60</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d783005968992-61\">61</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d783005968992-62\">62</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d783005968992-63\">63</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d783005968992-64\">64</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d783005968992-65\">65</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d783005968992-66\">66</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d783005968992-67\">67</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d783005968992-68\">68</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d783005968992-69\">69</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d783005968992-70\">70</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f2617f1d783005968992-1\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tid</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d783005968992-2\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">key</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'tid'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d783005968992-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">value</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">''</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d783005968992-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">recover</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d783005968992-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">confidence</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">''</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d783005968992-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">postInterface</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">postUrl</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d783005968992-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">fpCollectInterface</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sendUrl</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d783005968992-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">callbackStack</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d783005968992-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">init</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d783005968992-10\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">tid</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d783005968992-11\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d783005968992-12\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">runstack</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d783005968992-13\"><span class=\"crayon-h\">            </span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">f</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d783005968992-14\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">while</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">f</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tid</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">callbackStack</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">pop</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d783005968992-15\"><span class=\"crayon-h\">                </span><span class=\"crayon-e\">f</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">tid</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">value</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tid</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">recover</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tid</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">confidence</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//注意这里，对应上述的3个参数</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d783005968992-16\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d783005968992-17\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d783005968992-18\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">get</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">callback</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d783005968992-19\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">callback</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">callback</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">||</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d783005968992-20\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d783005968992-21\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">tid</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">callbackStack</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">push</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">callback</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d783005968992-22\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">tid</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">value</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d783005968992-23\"><span class=\"crayon-h\">                </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tid</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">runstack</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d783005968992-24\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d783005968992-25\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">Store</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">DB</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">tid</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">v</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d783005968992-26\"><span class=\"crayon-h\">                </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">!</span><span class=\"crayon-v\">v</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d783005968992-27\"><span class=\"crayon-h\">                    </span><span class=\"crayon-v\">tid</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getTidFromServer</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d783005968992-28\"><span class=\"crayon-h\">                </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d783005968992-29\"><span class=\"crayon-h\">                    </span>……</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d783005968992-30\"><span class=\"crayon-h\">                </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d783005968992-31\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d783005968992-32\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d783005968992-33\"><span class=\"crayon-h\">    </span>……</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d783005968992-34\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d783005968992-35\">……</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d783005968992-36\"><span class=\"crayon-h\"> </span><span class=\"crayon-v\">getTidFromServer</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d783005968992-37\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">tid</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">getTidFromServer</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d783005968992-38\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d783005968992-39\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">window</span><span class=\"crayon-sy\">.</span><span class=\"crayon-st\">use</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">em</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-v\">fp</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d783005968992-40\"><span class=\"crayon-h\">                </span><span class=\"crayon-e\">getFp</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d783005968992-41\"><span class=\"crayon-h\">                    </span><span class=\"crayon-v\">util</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">postData</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">window</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">location</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">protocol</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'//'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">window</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">location</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">host</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'/'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tid</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">postInterface</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"cb=gen_callback&amp;fp=\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">encodeURIComponent</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">res</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d783005968992-42\"><span class=\"crayon-h\">                        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">res</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d783005968992-43\"><span class=\"crayon-h\">                            </span><span class=\"crayon-r\">eval</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">res</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d783005968992-44\"><span class=\"crayon-h\">                        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d783005968992-45\"><span class=\"crayon-h\">                    </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d783005968992-46\"><span class=\"crayon-h\">                </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d783005968992-47\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d783005968992-48\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">util</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">postData</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">window</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">location</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">protocol</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'//'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">window</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">location</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">host</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'/'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tid</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">postInterface</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"cb=gen_callback\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">res</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d783005968992-49\"><span class=\"crayon-h\">                    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">res</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d783005968992-50\"><span class=\"crayon-h\">                        </span><span class=\"crayon-r\">eval</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">res</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d783005968992-51\"><span class=\"crayon-h\">                    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d783005968992-52\"><span class=\"crayon-h\">                </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d783005968992-53\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d783005968992-54\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d783005968992-55\">……</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d783005968992-56\"><span class=\"crayon-c\">//获得参数</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d783005968992-57\"><span class=\"crayon-v\">window</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">gen_callback</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">fp</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d783005968992-58\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">value</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">confidence</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d783005968992-59\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">fp</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d783005968992-60\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">fp</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">retcode</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20000000</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d783005968992-61\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">confidence</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">typeof</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">fp</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">confidence</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'undefined'</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'000'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fp</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">confidence</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'100'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d783005968992-62\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">tid</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">recover</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fp</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">new</span><span class=\"crayon-sy\">_</span>tid<span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d783005968992-63\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">tid</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">confidence</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">confidence</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">confidence</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">substring</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">confidence</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">length</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d783005968992-64\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">value</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fp</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">tid</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d783005968992-65\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">Store</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">DB</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">set</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">tid</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">value</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'&lt;/em&gt;'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">confidence</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d783005968992-66\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d783005968992-67\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d783005968992-68\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">tid</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">value</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">value</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d783005968992-69\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">tid</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">runstack</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d783005968992-70\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0138 seconds] -->\r\n<p>\n</p></div>\n<p>显然，tid.runstack()是真正执行回调函数的地方，这里就能看到传入的3个参数。在get方法中，当cookie为空时，tid会调用getTidFromServer，这时就产生了第5个请求https://passport.weibo.com/visitor/genvisitor，它需要两个参数cb和fp，其参数值可以作为常量：</p>\n<p><img src=\"http://www.fullstackyang.com/wp-content/uploads/2017/09/genvisitor.jpg\" alt=\"\"></p>\n<p>该请求的结果返回一串json</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f2617f1d789985457460\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">JavaScript</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n{\r\n  \"msg\": \"succ\",\r\n  \"data\": {\r\n    \"new_tid\": false,\r\n    \"confidence\": 95,\r\n    \"tid\": \"kIRvLolhrCR5iSCc80tWqDYmwBvlRVlnY2+yvCQ1VVA=\"\r\n  },\r\n  \"retcode\": 20000000\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d789985457460-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d789985457460-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d789985457460-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d789985457460-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d789985457460-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d789985457460-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d789985457460-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d789985457460-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d789985457460-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f2617f1d789985457460-1\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d789985457460-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">\"msg\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"succ\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d789985457460-3\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">\"data\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d789985457460-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">\"new_tid\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d789985457460-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">\"confidence\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">95</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d789985457460-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">\"tid\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"kIRvLolhrCR5iSCc80tWqDYmwBvlRVlnY2+yvCQ1VVA=\"</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d789985457460-7\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d789985457460-8\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">\"retcode\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20000000</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d789985457460-9\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p>其中就包含了tid和confidence，这个confidence，我猜大概是推测客户端是否真实的一个置信度，不一定出现，根据window.gen_callback方法，不出现时默认为100，另外当new_tid为真时参数where等于3，否则等于2。</p>\n<p>此时3个参数已经全部获得，现在就可以用httpclient发起上面第6个请求，返回得到另一串json：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f2617f1d78d797189604\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">JavaScript</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n{\r\n  \"msg\": \"succ\",\r\n  \"data\": {\r\n    \"sub\": \"_2AkMu428tf8NxqwJRmPAcxWzmZYh_zQjEieKYv572JRMxHRl-yT83qnMGtRCnhyR4ezQQZQrBRO3gVMwM5ZB2hQ..\",\r\n    \"subp\": \"0033WrSXqPxfM72-Ws9jqgMF55529P9D9WWU2MgYnITksS2awP.AX-DQ\"\r\n  },\r\n  \"retcode\": 20000000\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d78d797189604-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d78d797189604-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d78d797189604-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d78d797189604-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d78d797189604-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d78d797189604-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d78d797189604-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d78d797189604-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f2617f1d78d797189604-1\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d78d797189604-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">\"msg\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"succ\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d78d797189604-3\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">\"data\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d78d797189604-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">\"sub\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"_2AkMu428tf8NxqwJRmPAcxWzmZYh_zQjEieKYv572JRMxHRl-yT83qnMGtRCnhyR4ezQQZQrBRO3gVMwM5ZB2hQ..\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d78d797189604-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">\"subp\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"0033WrSXqPxfM72-Ws9jqgMF55529P9D9WWU2MgYnITksS2awP.AX-DQ\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d78d797189604-6\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d78d797189604-7\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">\"retcode\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20000000</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d78d797189604-8\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p></p>\n<div>参考最后请求weibo.com的header，这里的sub和subp就是最终要获取的cookie值。大家或许有一个小疑问，第一个Cookie怎么来的，没用吗？是的，这个Cookie是第一次访问weibo.com产生的，经过测试可以不用装载。</div>\n<p><img src=\"http://www.fullstackyang.com/wp-content/uploads/2017/09/cookie-1.jpg\" alt=\"\"></p>\n<p>最后我们用上面两个Cookie装载到HttpClient中请求一次weibo.com，就可以获得完整的html页面了，下面就是见证奇迹的时刻：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f2617f1d791038030150\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-mixed-highlight\" title=\"含多种语言\"></span><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">XHTML</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&lt;!doctype html&gt;\r\n&lt;html&gt;\r\n&lt;head&gt;\r\n&lt;meta charset=\"utf-8\"&gt;\r\n&lt;meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\"&gt;\r\n&lt;meta name=\"viewport\" content=\"initial-scale=1,minimum-scale=1\" /&gt;\r\n&lt;meta content=\"随时随地发现新鲜事！微博带你欣赏世界上每一个精彩瞬间，了解每一个幕后故事。分享你想表达的，让全世界都能听到你的心声！\" name=\"description\" /&gt;\r\n&lt;link rel=\"mask-icon\" sizes=\"any\" href=\"//img.t.sinajs.cn/t6/style/images/apple/wbfont.svg\" color=\"black\" /&gt;\r\n&lt;link rel=\"shortcut icon\" type=\"image/x-icon\" href=\"/favicon.ico\" /&gt;\r\n&lt;script type=\"text/javascript\"&gt;\r\ntry{document.execCommand(\"BackgroundImageCache\", false, true);}catch(e){}\r\n&lt;/script&gt;\r\n&lt;title&gt;微博-随时随地发现新鲜事&lt;/title&gt;\r\n&lt;link href=\"//img.t.sinajs.cn/t6/style/css/module/base/frame.css?version=6c9bf6ab3b33391f\" type=\"text/css\" rel=\"stylesheet\" charset=\"utf-8\" /&gt;\r\n&lt;link href=\"//img.t.sinajs.cn/t6/style/css/pages/growth/login_v5.css?version=6c9bf6ab3b33391f\" type=\"text/css\" rel=\"stylesheet\" charset=\"utf-8\"&gt;\r\n&lt;link href=\"//img.t.sinajs.cn/t6/skin/default/skin.css?version=6c9bf6ab3b33391f\" type=\"text/css\" rel=\"stylesheet\" id=\"skin_style\" /&gt;\r\n&lt;script type=\"text/javascript\"&gt;\r\nvar $CONFIG = {};\r\n$CONFIG['islogin'] = '0';\r\n$CONFIG['version'] = '6c9bf6ab3b33391f';\r\n$CONFIG['timeDiff'] = (new Date() - 1505746970000);\r\n$CONFIG['lang'] = 'zh-cn';\r\n$CONFIG['jsPath'] = '//js.t.sinajs.cn/t5/';\r\n$CONFIG['cssPath'] = '//img.t.sinajs.cn/t5/';\r\n$CONFIG['imgPath'] = '//img.t.sinajs.cn/t5/';\r\n$CONFIG['servertime'] = 1505746970;\r\n$CONFIG['location']='login';\r\n$CONFIG['bigpipe']='false';\r\n$CONFIG['bpType']='login';\r\n$CONFIG['mJsPath'] = ['//js{n}.t.sinajs.cn/t5/', 1, 2];\r\n$CONFIG['mCssPath'] = ['//img{n}.t.sinajs.cn/t5/', 1, 2];\r\n$CONFIG['redirect'] = '';\r\n$CONFIG['vid']='1008997495870';\r\n&lt;/script&gt;\r\n&lt;style&gt;#js_style_css_module_global_WB_outframe{height:42px;}&lt;/style&gt;\r\n&lt;/head&gt;\r\n……</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d791038030150-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d791038030150-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d791038030150-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d791038030150-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d791038030150-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d791038030150-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d791038030150-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d791038030150-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d791038030150-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d791038030150-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d791038030150-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d791038030150-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d791038030150-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d791038030150-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d791038030150-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d791038030150-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d791038030150-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d791038030150-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d791038030150-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d791038030150-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d791038030150-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d791038030150-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d791038030150-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d791038030150-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d791038030150-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d791038030150-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d791038030150-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d791038030150-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d791038030150-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d791038030150-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d791038030150-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d791038030150-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d791038030150-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d791038030150-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d791038030150-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d791038030150-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d791038030150-37\">37</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f2617f1d791038030150-1\"><span class=\"crayon-n\">&lt;!doctype html&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d791038030150-2\"><span class=\"crayon-r \">&lt;html&gt;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d791038030150-3\"><span class=\"crayon-r \">&lt;head&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d791038030150-4\"><span class=\"crayon-r \">&lt;meta </span><span class=\"crayon-e \">charset</span><span class=\"crayon-o\">=</span><span class=\"crayon-s \">\"utf-8\"</span><span class=\"crayon-r \">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d791038030150-5\"><span class=\"crayon-r \">&lt;meta </span><span class=\"crayon-e \">http-equiv</span><span class=\"crayon-o\">=</span><span class=\"crayon-s \">\"X-UA-Compatible\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">content</span><span class=\"crayon-o\">=</span><span class=\"crayon-s \">\"IE=edge,chrome=1\"</span><span class=\"crayon-r \">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d791038030150-6\"><span class=\"crayon-r \">&lt;meta </span><span class=\"crayon-e \">name</span><span class=\"crayon-o\">=</span><span class=\"crayon-s \">\"viewport\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">content</span><span class=\"crayon-o\">=</span><span class=\"crayon-s \">\"initial-scale=1,minimum-scale=1\"</span><span class=\"crayon-r \"> /&gt;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d791038030150-7\"><span class=\"crayon-r \">&lt;meta </span><span class=\"crayon-e \">content</span><span class=\"crayon-o\">=</span><span class=\"crayon-s \">\"随时随地发现新鲜事！微博带你欣赏世界上每一个精彩瞬间，了解每一个幕后故事。分享你想表达的，让全世界都能听到你的心声！\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">name</span><span class=\"crayon-o\">=</span><span class=\"crayon-s \">\"description\"</span><span class=\"crayon-r \"> /&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d791038030150-8\"><span class=\"crayon-r \">&lt;link </span><span class=\"crayon-e \">rel</span><span class=\"crayon-o\">=</span><span class=\"crayon-s \">\"mask-icon\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">sizes</span><span class=\"crayon-o\">=</span><span class=\"crayon-s \">\"any\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">href</span><span class=\"crayon-o\">=</span><span class=\"crayon-s \">\"//img.t.sinajs.cn/t6/style/images/apple/wbfont.svg\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">color</span><span class=\"crayon-o\">=</span><span class=\"crayon-s \">\"black\"</span><span class=\"crayon-r \"> /&gt;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d791038030150-9\"><span class=\"crayon-r \">&lt;link </span><span class=\"crayon-e \">rel</span><span class=\"crayon-o\">=</span><span class=\"crayon-s \">\"shortcut icon\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">type</span><span class=\"crayon-o\">=</span><span class=\"crayon-s \">\"image/x-icon\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">href</span><span class=\"crayon-o\">=</span><span class=\"crayon-s \">\"/favicon.ico\"</span><span class=\"crayon-r \"> /&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d791038030150-10\"><span class=\"crayon-i \"><span class=\"crayon-ta\">&lt;script </span><span class=\"crayon-e \">type</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"text/javascript\"</span><span class=\"crayon-o\">&gt;</span></span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d791038030150-11\"><span class=\"crayon-st\">try</span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">document</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">execCommand</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"BackgroundImageCache\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-sy\">}</span><span class=\"crayon-st\">catch</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d791038030150-12\"><span class=\"crayon-ta\">&lt;/script&gt;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d791038030150-13\"><span class=\"crayon-r \">&lt;title&gt;</span><span class=\"crayon-i \">微博-随时随地发现新鲜事</span><span class=\"crayon-r \">&lt;/title&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d791038030150-14\"><span class=\"crayon-r \">&lt;link </span><span class=\"crayon-e \">href</span><span class=\"crayon-o\">=</span><span class=\"crayon-s \">\"//img.t.sinajs.cn/t6/style/css/module/base/frame.css?version=6c9bf6ab3b33391f\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">type</span><span class=\"crayon-o\">=</span><span class=\"crayon-s \">\"text/css\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">rel</span><span class=\"crayon-o\">=</span><span class=\"crayon-s \">\"stylesheet\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">charset</span><span class=\"crayon-o\">=</span><span class=\"crayon-s \">\"utf-8\"</span><span class=\"crayon-r \"> /&gt;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d791038030150-15\"><span class=\"crayon-r \">&lt;link </span><span class=\"crayon-e \">href</span><span class=\"crayon-o\">=</span><span class=\"crayon-s \">\"//img.t.sinajs.cn/t6/style/css/pages/growth/login_v5.css?version=6c9bf6ab3b33391f\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">type</span><span class=\"crayon-o\">=</span><span class=\"crayon-s \">\"text/css\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">rel</span><span class=\"crayon-o\">=</span><span class=\"crayon-s \">\"stylesheet\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">charset</span><span class=\"crayon-o\">=</span><span class=\"crayon-s \">\"utf-8\"</span><span class=\"crayon-r \">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d791038030150-16\"><span class=\"crayon-r \">&lt;link </span><span class=\"crayon-e \">href</span><span class=\"crayon-o\">=</span><span class=\"crayon-s \">\"//img.t.sinajs.cn/t6/skin/default/skin.css?version=6c9bf6ab3b33391f\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">type</span><span class=\"crayon-o\">=</span><span class=\"crayon-s \">\"text/css\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">rel</span><span class=\"crayon-o\">=</span><span class=\"crayon-s \">\"stylesheet\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">id</span><span class=\"crayon-o\">=</span><span class=\"crayon-s \">\"skin_style\"</span><span class=\"crayon-r \"> /&gt;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d791038030150-17\"><span class=\"crayon-i \"><span class=\"crayon-ta\">&lt;script </span><span class=\"crayon-e \">type</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"text/javascript\"</span><span class=\"crayon-o\">&gt;</span></span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d791038030150-18\"><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">CONFIG</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d791038030150-19\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">CONFIG</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'islogin'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'0'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d791038030150-20\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">CONFIG</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'version'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'6c9bf6ab3b33391f'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d791038030150-21\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">CONFIG</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'timeDiff'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">Date</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1505746970000</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d791038030150-22\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">CONFIG</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'lang'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'zh-cn'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d791038030150-23\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">CONFIG</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'jsPath'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'//js.t.sinajs.cn/t5/'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d791038030150-24\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">CONFIG</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'cssPath'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'//img.t.sinajs.cn/t5/'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d791038030150-25\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">CONFIG</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'imgPath'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'//img.t.sinajs.cn/t5/'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d791038030150-26\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">CONFIG</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'servertime'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1505746970</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d791038030150-27\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">CONFIG</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'location'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'login'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d791038030150-28\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">CONFIG</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'bigpipe'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'false'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d791038030150-29\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">CONFIG</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'bpType'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'login'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d791038030150-30\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">CONFIG</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'mJsPath'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'//js{n}.t.sinajs.cn/t5/'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d791038030150-31\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">CONFIG</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'mCssPath'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'//img{n}.t.sinajs.cn/t5/'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d791038030150-32\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">CONFIG</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'redirect'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">''</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d791038030150-33\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">CONFIG</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'vid'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'1008997495870'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d791038030150-34\"><span class=\"crayon-ta\">&lt;/script&gt;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d791038030150-35\"><span class=\"crayon-i \"><span class=\"crayon-ta\">&lt;style&gt;</span><span class=\"crayon-k \">#js_style_css_module_global_WB_outframe</span><span class=\"crayon-sy\">{</span><span class=\"crayon-e \">height</span><span class=\"crayon-sy\">:</span><span class=\"crayon-i \">42px</span><span class=\"crayon-sy\">;</span><span class=\"crayon-sy\">}</span><span class=\"crayon-ta\">&lt;/style&gt;</span></span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d791038030150-36\"><span class=\"crayon-r \">&lt;/head&gt;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d791038030150-37\">……</div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0078 seconds] -->\r\n<p></p>\n<div title=\"纯文本显示代码\">如果之前有微博爬虫开发经验的小伙伴，看到这里，一定能想出来很多玩法了吧。</div>\n<h3>四、代码实现</h3>\n<p>下面附上我的源码，通过上面的详细介绍，应该已经比较好理解，因此这里就简单地说明一下：</p>\n<ol>\n<li>我把Cookie获取的过程做成了一个静态内部类，其中需要发起2次请求，一次是genvisitor获得3个参数，另一次是incarnate获得Cookie值；</li>\n<li>如果Cookie获取失败，会调用HttpClientInstance.changeProxy来改变代理IP，然后重新获取，直到获取成功为止；</li>\n<li>在使用时，出现了IP被封或无法正常获取页面等异常情况，外部可以通过调用cookieReset方法，重新获取一个新的Cookie。这里还是要声明一下，科学地使用爬虫，维护世界和平是程序员的基本素养；</li>\n<li>虽然加了一些锁的控制，但是还未在高并发场景实测过，不能保证百分百线程安全，如使用下面的代码，请根据需要自行修改，如有问题也请大神们及时指出，拜谢！</li>\n<li>HttpClientInstance是我用单例模式重新封装的httpclient，对于每个传进来的请求重新包装了一层RequestConfig，并且使用了代理IP；</li>\n<li>不是所有的微博页面都可以抓取得到，但是博文，评论，转发等基本的数据还是没有问题的；</li>\n<li>后续我也会把代码push到github上，请大家支持，谢谢！</li>\n</ol>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f2617f1d797863399556\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Java</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nimport com.fullstackyang.httpclient.HttpClientInstance;\r\nimport com.fullstackyang.httpclient.HttpRequestUtils;\r\nimport com.google.common.base.Strings;\r\nimport com.google.common.collect.Maps;\r\nimport com.google.common.net.HttpHeaders;\r\nimport lombok.NoArgsConstructor;\r\nimport lombok.extern.slf4j.Slf4j;\r\nimport org.apache.commons.lang3.StringUtils;\r\nimport org.apache.http.client.config.CookieSpecs;\r\nimport org.apache.http.client.config.RequestConfig;\r\nimport org.apache.http.client.methods.HttpGet;\r\nimport org.apache.http.client.methods.HttpPost;\r\nimport org.json.JSONObject;\r\n\r\nimport java.io.UnsupportedEncodingException;\r\nimport java.math.BigDecimal;\r\nimport java.net.URLEncoder;\r\nimport java.util.Map;\r\nimport java.util.concurrent.locks.Lock;\r\nimport java.util.concurrent.locks.ReentrantLock;\r\n\r\n/**\r\n * 微博免登陆请求客户端\r\n *\r\n * @author fullstackyang\r\n */\r\n@Slf4j\r\npublic class WeiboClient {\r\n\r\n    private static CookieFetcher cookieFetcher = new CookieFetcher();\r\n\r\n    private volatile String cookie;\r\n\r\n    public WeiboClient() {\r\n        this.cookie = cookieFetcher.getCookie();\r\n    }\r\n\r\n    private static Lock lock = new ReentrantLock();\r\n\r\n    public void cookieReset() {\r\n        if (lock.tryLock()) {\r\n            try {\r\n                HttpClientInstance.instance().changeProxy();\r\n                this.cookie = cookieFetcher.getCookie();\r\n                log.info(\"cookie :\" + cookie);\r\n            } finally {\r\n                lock.unlock();\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * get方法，获取微博平台的其他页面\r\n     * @param url\r\n     * &lt;a href=\"http://www.jobbole.com/members/wx1409399284\"&gt;@return&lt;/a&gt;\r\n     */\r\n    public String get(String url) {\r\n        if (Strings.isNullOrEmpty(url))\r\n            return \"\";\r\n\r\n        while (true) {\r\n            HttpGet httpGet = new HttpGet(url);\r\n            httpGet.addHeader(HttpHeaders.COOKIE, cookie);\r\n            httpGet.addHeader(HttpHeaders.HOST, \"weibo.com\");\r\n            httpGet.addHeader(\"Upgrade-Insecure-Requests\", \"1\");\r\n\r\n            httpGet.setConfig(RequestConfig.custom().setSocketTimeout(3000)\r\n                    .setConnectTimeout(3000).setConnectionRequestTimeout(3000).build());\r\n            String html = HttpClientInstance.instance().tryExecute(httpGet, null, null);\r\n            if (html == null)\r\n                cookieReset();\r\n            else return html;\r\n        }\r\n    }\r\n\r\n     /**\r\n     * 获取访问微博时必需的Cookie\r\n     */\r\n    @NoArgsConstructor\r\n    static class CookieFetcher {\r\n\r\n        static final String PASSPORT_URL = \"https://passport.weibo.com/visitor/visitor?entry=miniblog&amp;a=enter&amp;url=http://weibo.com/?category=2\"\r\n                + \"&amp;domain=.weibo.com&amp;ua=php-sso_sdk_client-0.6.23\";\r\n\r\n        static final String GEN_VISITOR_URL = \"https://passport.weibo.com/visitor/genvisitor\";\r\n\r\n        static final String VISITOR_URL = \"https://passport.weibo.com/visitor/visitor?a=incarnate\";\r\n\r\n        private String getCookie() {\r\n            Map&lt;String, String&gt; map;\r\n            while (true) {\r\n                map = getCookieParam();\r\n                if (map.containsKey(\"SUB\") &amp;&amp; map.containsKey(\"SUBP\") &amp;&amp;\r\n                        StringUtils.isNoneEmpty(map.get(\"SUB\"), map.get(\"SUBP\")))\r\n                    break;\r\n                HttpClientInstance.instance().changeProxy();\r\n            }\r\n            return \" YF-Page-G0=\" + \"; _s_tentry=-; SUB=\" + map.get(\"SUB\") + \"; SUBP=\" + map.get(\"SUBP\");\r\n        }\r\n\r\n        private Map&lt;String, String&gt; getCookieParam() {\r\n            String time = System.currentTimeMillis() + \"\";\r\n            time = time.substring(0, 9) + \".\" + time.substring(9, 13);\r\n            String passporturl = PASSPORT_URL + \"&amp;_rand=\" + time;\r\n\r\n            String tid = \"\";\r\n            String c = \"\";\r\n            String w = \"\";\r\n            {\r\n                String str = postGenvisitor(passporturl);\r\n                if (str.contains(\"\\\"retcode\\\":20000000\")) {\r\n                    JSONObject jsonObject = new JSONObject(str).getJSONObject(\"data\");\r\n                    tid = jsonObject.optString(\"tid\");\r\n                    try {\r\n                        tid = URLEncoder.encode(tid, \"utf-8\");\r\n                    } catch (UnsupportedEncodingException e) {\r\n                    }\r\n                    c = jsonObject.has(\"confidence\") ? \"000\" + jsonObject.getInt(\"confidence\") : \"100\";\r\n                    w = jsonObject.optBoolean(\"new_tid\") ? \"3\" : \"2\";\r\n                }\r\n            }\r\n            String s = \"\";\r\n            String sp = \"\";\r\n            {\r\n                if (StringUtils.isNoneEmpty(tid, w, c)) {\r\n                    String str = getVisitor(tid, w, c, passporturl);\r\n                    str = str.substring(str.indexOf(\"(\") + 1, str.indexOf(\")\"));\r\n                    if (str.contains(\"\\\"retcode\\\":20000000\")) {\r\n                        System.out.println(new JSONObject(str).toString(2));\r\n                        JSONObject jsonObject = new JSONObject(str).getJSONObject(\"data\");\r\n                        s = jsonObject.getString(\"sub\");\r\n                        sp = jsonObject.getString(\"subp\");\r\n                    }\r\n\r\n                }\r\n            }\r\n            Map&lt;String, String&gt; map = Maps.newHashMap();\r\n            map.put(\"SUB\", s);\r\n            map.put(\"SUBP\", sp);\r\n            return map;\r\n        }\r\n\r\n        private String postGenvisitor(String passporturl) {\r\n\r\n            Map&lt;String, String&gt; headers = Maps.newHashMap();\r\n            headers.put(HttpHeaders.ACCEPT, \"*/*\");\r\n            headers.put(HttpHeaders.ORIGIN, \"https://passport.weibo.com\");\r\n            headers.put(HttpHeaders.REFERER, passporturl);\r\n\r\n            Map&lt;String, String&gt; params = Maps.newHashMap();\r\n            params.put(\"cb\", \"gen_callback\");\r\n            params.put(\"fp\", fp());\r\n\r\n            HttpPost httpPost = HttpRequestUtils.createHttpPost(GEN_VISITOR_URL, headers, params);\r\n\r\n            String str = HttpClientInstance.instance().execute(httpPost, null);\r\n            return str.substring(str.indexOf(\"(\") + 1, str.lastIndexOf(\"\"));\r\n        }\r\n        private String getVisitor(String tid, String w, String c, String passporturl) {\r\n            String url = VISITOR_URL + \"&amp;t=\" + tid + \"&amp;w=\" + \"&amp;c=\" + c.substring(c.length() - 3)\r\n                    + \"&amp;gc=&amp;cb=cross_domain&amp;from=weibo&amp;_rand=0.\" + rand();\r\n\r\n            Map&lt;String, String&gt; headers = Maps.newHashMap();\r\n            headers.put(HttpHeaders.ACCEPT, \"*/*\");\r\n            headers.put(HttpHeaders.HOST, \"passport.weibo.com\");\r\n            headers.put(HttpHeaders.COOKIE, \"tid=\" + tid + \"__0\" + c);\r\n            headers.put(HttpHeaders.REFERER, passporturl);\r\n\r\n            HttpGet httpGet = HttpRequestUtils.createHttpGet(url, headers);\r\n            httpGet.setConfig(RequestConfig.custom().setCookieSpec(CookieSpecs.STANDARD).build());\r\n            return HttpClientInstance.instance().execute(httpGet, null);\r\n        }\r\n        private static String rand() {\r\n            return new BigDecimal(Math.floor(Math.random() * 10000000000000000L)).toString();\r\n        }\r\n        private static String fp() {\r\n            JSONObject jsonObject = new JSONObject();\r\n            jsonObject.put(\"os\", \"1\");\r\n            jsonObject.put(\"browser\", \"Chrome59,0,3071,115\");\r\n            jsonObject.put(\"fonts\", \"undefined\");\r\n            jsonObject.put(\"screenInfo\", \"1680*1050*24\");\r\n            jsonObject.put(\"plugins\",\r\n                    \"Enables Widevine licenses for playback of HTML audio/video content. (version: 1.4.8.984)::widevinecdmadapter.dll::Widevine Content Decryption Module|Shockwave Flash 26.0 r0::pepflashplayer.dll::Shockwave Flash|::mhjfbmdgcfjbbpaeojofohoefgiehjai::Chrome PDF Viewer|::internal-nacl-plugin::Native Client|Portable Document Format::internal-pdf-viewer::Chrome PDF Viewer\");\r\n            return jsonObject.toString();\r\n        }\r\n    }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-47\">47</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-48\">48</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-49\">49</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-50\">50</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-51\">51</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-52\">52</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-53\">53</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-54\">54</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-55\">55</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-56\">56</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-57\">57</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-58\">58</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-59\">59</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-60\">60</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-61\">61</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-62\">62</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-63\">63</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-64\">64</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-65\">65</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-66\">66</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-67\">67</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-68\">68</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-69\">69</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-70\">70</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-71\">71</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-72\">72</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-73\">73</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-74\">74</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-75\">75</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-76\">76</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-77\">77</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-78\">78</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-79\">79</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-80\">80</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-81\">81</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-82\">82</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-83\">83</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-84\">84</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-85\">85</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-86\">86</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-87\">87</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-88\">88</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-89\">89</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-90\">90</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-91\">91</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-92\">92</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-93\">93</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-94\">94</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-95\">95</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-96\">96</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-97\">97</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-98\">98</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-99\">99</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-100\">100</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-101\">101</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-102\">102</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-103\">103</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-104\">104</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-105\">105</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-106\">106</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-107\">107</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-108\">108</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-109\">109</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-110\">110</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-111\">111</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-112\">112</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-113\">113</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-114\">114</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-115\">115</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-116\">116</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-117\">117</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-118\">118</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-119\">119</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-120\">120</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-121\">121</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-122\">122</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-123\">123</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-124\">124</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-125\">125</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-126\">126</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-127\">127</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-128\">128</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-129\">129</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-130\">130</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-131\">131</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-132\">132</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-133\">133</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-134\">134</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-135\">135</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-136\">136</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-137\">137</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-138\">138</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-139\">139</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-140\">140</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-141\">141</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-142\">142</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-143\">143</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-144\">144</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-145\">145</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-146\">146</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-147\">147</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-148\">148</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-149\">149</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-150\">150</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-151\">151</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-152\">152</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-153\">153</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-154\">154</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-155\">155</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-156\">156</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-157\">157</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-158\">158</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-159\">159</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-160\">160</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-161\">161</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-162\">162</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-163\">163</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-164\">164</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-165\">165</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-166\">166</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-167\">167</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-168\">168</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-169\">169</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-170\">170</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-171\">171</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-172\">172</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-173\">173</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-174\">174</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-175\">175</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-176\">176</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-177\">177</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-178\">178</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-179\">179</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-180\">180</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-181\">181</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-182\">182</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-183\">183</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-184\">184</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-185\">185</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2617f1d797863399556-186\">186</div><div class=\"crayon-num\" data-line=\"crayon-59f2617f1d797863399556-187\">187</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-1\"><span class=\"crayon-r\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">fullstackyang</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">httpclient</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">HttpClientInstance</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-2\"><span class=\"crayon-r\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">fullstackyang</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">httpclient</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">HttpRequestUtils</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-3\"><span class=\"crayon-r\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">google</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">common</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">base</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Strings</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-4\"><span class=\"crayon-r\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">google</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">common</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">collect</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Maps</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-5\"><span class=\"crayon-r\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">google</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">common</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">net</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">HttpHeaders</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-6\"><span class=\"crayon-r\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">lombok</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">NoArgsConstructor</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-7\"><span class=\"crayon-r\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">lombok</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">extern</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">slf4j</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Slf4j</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-8\"><span class=\"crayon-r\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">org</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">apache</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">commons</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">lang3</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">StringUtils</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-9\"><span class=\"crayon-r\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">org</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">apache</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">http</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">client</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">config</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">CookieSpecs</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-10\"><span class=\"crayon-r\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">org</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">apache</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">http</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">client</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">config</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">RequestConfig</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-11\"><span class=\"crayon-r\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">org</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">apache</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">http</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">client</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">methods</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">HttpGet</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-12\"><span class=\"crayon-r\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">org</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">apache</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">http</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">client</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">methods</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">HttpPost</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-13\"><span class=\"crayon-r\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">org</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">json</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">JSONObject</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-14\"> </div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-15\"><span class=\"crayon-r\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">java</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">io</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">UnsupportedEncodingException</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-16\"><span class=\"crayon-r\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">java</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">math</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">BigDecimal</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-17\"><span class=\"crayon-r\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">java</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">net</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">URLEncoder</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-18\"><span class=\"crayon-r\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">java</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">util</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Map</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-19\"><span class=\"crayon-r\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">java</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">util</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">concurrent</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">locks</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Lock</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-20\"><span class=\"crayon-r\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">java</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">util</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">concurrent</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">locks</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">ReentrantLock</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-21\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-22\"><span class=\"crayon-c\">/**</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-23\"><span class=\"crayon-c\"> * 微博免登陆请求客户端</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-24\"><span class=\"crayon-c\"> *</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-25\"><span class=\"crayon-c\"> * @author fullstackyang</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-26\"><span class=\"crayon-c\"> */</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-27\"><span class=\"crayon-n\">@Slf4j</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-28\"><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">WeiboClient</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-29\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-30\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">CookieFetcher </span><span class=\"crayon-v\">cookieFetcher</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">CookieFetcher</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-31\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-32\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">volatile</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cookie</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-33\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-34\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">WeiboClient</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-35\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">cookie</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cookieFetcher</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getCookie</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-36\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-37\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-38\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Lock </span><span class=\"crayon-v\">lock</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ReentrantLock</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-39\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-40\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">cookieReset</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-41\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">lock</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">tryLock</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-42\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">try</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-43\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">HttpClientInstance</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">instance</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">changeProxy</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-44\"><span class=\"crayon-h\">                </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">cookie</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cookieFetcher</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getCookie</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-45\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">log</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">info</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"cookie :\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cookie</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-46\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">finally</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-47\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">lock</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">unlock</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-48\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-49\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-50\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-51\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-52\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">/**</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-53\"><span class=\"crayon-c\">     * get方法，获取微博平台的其他页面</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-54\"><span class=\"crayon-c\">     * @param url</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-55\"><span class=\"crayon-c\">     * &lt;a href=\"http://www.jobbole.com/members/wx1409399284\"&gt;@return&lt;/a&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-56\"><span class=\"crayon-c\">     */</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-57\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">url</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-58\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">Strings</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">isNullOrEmpty</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">url</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-59\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-60\"> </div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-61\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">while</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-62\"><span class=\"crayon-h\">            </span><span class=\"crayon-e\">HttpGet </span><span class=\"crayon-v\">httpGet</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">HttpGet</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">url</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-63\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">httpGet</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">addHeader</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">HttpHeaders</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">COOKIE</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cookie</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-64\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">httpGet</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">addHeader</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">HttpHeaders</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">HOST</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"weibo.com\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-65\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">httpGet</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">addHeader</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"Upgrade-Insecure-Requests\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"1\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-66\"> </div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-67\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">httpGet</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setConfig</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">RequestConfig</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">custom</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setSocketTimeout</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">3000</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-68\"><span class=\"crayon-h\">                    </span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setConnectTimeout</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">3000</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setConnectionRequestTimeout</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">3000</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">build</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-69\"><span class=\"crayon-h\">            </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">html</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">HttpClientInstance</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">instance</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">tryExecute</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">httpGet</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-70\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">html</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-71\"><span class=\"crayon-h\">                </span><span class=\"crayon-e\">cookieReset</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-72\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">html</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-73\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-74\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-75\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-76\"><span class=\"crayon-h\">     </span><span class=\"crayon-c\">/**</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-77\"><span class=\"crayon-c\">     * 获取访问微博时必需的Cookie</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-78\"><span class=\"crayon-c\">     */</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-79\"><span class=\"crayon-h\">    </span><span class=\"crayon-n\">@NoArgsConstructor</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-80\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">CookieFetcher</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-81\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-82\"><span class=\"crayon-h\">        </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">final</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">PASSPORT_URL</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"https://passport.weibo.com/visitor/visitor?entry=miniblog&amp;a=enter&amp;url=http://weibo.com/?category=2\"</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-83\"><span class=\"crayon-h\">                </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"&amp;domain=.weibo.com&amp;ua=php-sso_sdk_client-0.6.23\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-84\"> </div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-85\"><span class=\"crayon-h\">        </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">final</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">GEN_VISITOR_URL</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"https://passport.weibo.com/visitor/genvisitor\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-86\"> </div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-87\"><span class=\"crayon-h\">        </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">final</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">VISITOR_URL</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"https://passport.weibo.com/visitor/visitor?a=incarnate\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-88\"> </div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-89\"><span class=\"crayon-h\">        </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getCookie</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-90\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">Map</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-t\">String</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">String</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">map</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-91\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">while</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-92\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">map</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getCookieParam</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-93\"><span class=\"crayon-h\">                </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">map</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">containsKey</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"SUB\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">map</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">containsKey</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"SUBP\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-94\"><span class=\"crayon-h\">                        </span><span class=\"crayon-v\">StringUtils</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">isNoneEmpty</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">map</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"SUB\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">map</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"SUBP\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-95\"><span class=\"crayon-h\">                    </span><span class=\"crayon-st\">break</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-96\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">HttpClientInstance</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">instance</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">changeProxy</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-97\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-98\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\" YF-Page-G0=\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"; _s_tentry=-; SUB=\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">map</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"SUB\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"; SUBP=\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">map</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"SUBP\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-99\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-100\"> </div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-101\"><span class=\"crayon-h\">        </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Map</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-t\">String</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">String</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getCookieParam</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-102\"><span class=\"crayon-h\">            </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">time</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">currentTimeMillis</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-103\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">time</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">time</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">substring</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\".\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">time</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">substring</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">13</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-104\"><span class=\"crayon-h\">            </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">passporturl</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">PASSPORT_URL</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"&amp;_rand=\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">time</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-105\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-106\"><span class=\"crayon-h\">            </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tid</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-107\"><span class=\"crayon-h\">            </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">c</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-108\"><span class=\"crayon-h\">            </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">w</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-109\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-110\"><span class=\"crayon-h\">                </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">str</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">postGenvisitor</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">passporturl</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-111\"><span class=\"crayon-h\">                </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">str</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">contains</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"\\\"retcode\\\":20000000\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-112\"><span class=\"crayon-h\">                    </span><span class=\"crayon-e\">JSONObject </span><span class=\"crayon-v\">jsonObject</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">JSONObject</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">str</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getJSONObject</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"data\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-113\"><span class=\"crayon-h\">                    </span><span class=\"crayon-v\">tid</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">jsonObject</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">optString</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"tid\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-114\"><span class=\"crayon-h\">                    </span><span class=\"crayon-st\">try</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-115\"><span class=\"crayon-h\">                        </span><span class=\"crayon-v\">tid</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">URLEncoder</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">encode</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">tid</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"utf-8\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-116\"><span class=\"crayon-h\">                    </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">catch</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">UnsupportedEncodingException</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-117\"><span class=\"crayon-h\">                    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-118\"><span class=\"crayon-h\">                    </span><span class=\"crayon-v\">c</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">jsonObject</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">has</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"confidence\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"000\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">jsonObject</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getInt</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"confidence\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"100\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-119\"><span class=\"crayon-h\">                    </span><span class=\"crayon-v\">w</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">jsonObject</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">optBoolean</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"new_tid\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"3\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"2\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-120\"><span class=\"crayon-h\">                </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-121\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-122\"><span class=\"crayon-h\">            </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">s</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-123\"><span class=\"crayon-h\">            </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sp</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-124\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-125\"><span class=\"crayon-h\">                </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">StringUtils</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">isNoneEmpty</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">tid</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">w</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">c</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-126\"><span class=\"crayon-h\">                    </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">str</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getVisitor</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">tid</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">w</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">c</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">passporturl</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-127\"><span class=\"crayon-h\">                    </span><span class=\"crayon-v\">str</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">str</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">substring</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">str</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">indexOf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"(\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">str</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">indexOf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\")\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-128\"><span class=\"crayon-h\">                    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">str</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">contains</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"\\\"retcode\\\":20000000\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-129\"><span class=\"crayon-h\">                        </span><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">out</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">println</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">JSONObject</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">str</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">toString</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-130\"><span class=\"crayon-h\">                        </span><span class=\"crayon-e\">JSONObject </span><span class=\"crayon-v\">jsonObject</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">JSONObject</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">str</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getJSONObject</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"data\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-131\"><span class=\"crayon-h\">                        </span><span class=\"crayon-v\">s</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">jsonObject</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getString</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"sub\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-132\"><span class=\"crayon-h\">                        </span><span class=\"crayon-v\">sp</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">jsonObject</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getString</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"subp\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-133\"><span class=\"crayon-h\">                    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-134\"> </div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-135\"><span class=\"crayon-h\">                </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-136\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-137\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">Map</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-t\">String</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">String</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">map</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Maps</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">newHashMap</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-138\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">map</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">put</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"SUB\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-139\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">map</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">put</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"SUBP\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sp</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-140\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">map</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-141\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-142\"> </div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-143\"><span class=\"crayon-h\">        </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">postGenvisitor</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">passporturl</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-144\"> </div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-145\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">Map</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-t\">String</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">String</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">headers</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Maps</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">newHashMap</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-146\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">headers</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">put</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">HttpHeaders</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">ACCEPT</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"*/*\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-147\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">headers</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">put</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">HttpHeaders</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">ORIGIN</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"https://passport.weibo.com\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-148\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">headers</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">put</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">HttpHeaders</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">REFERER</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">passporturl</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-149\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-150\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">Map</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-t\">String</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">String</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">params</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Maps</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">newHashMap</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-151\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">params</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">put</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"cb\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"gen_callback\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-152\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">params</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">put</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"fp\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">fp</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-153\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-154\"><span class=\"crayon-h\">            </span><span class=\"crayon-e\">HttpPost </span><span class=\"crayon-v\">httpPost</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">HttpRequestUtils</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">createHttpPost</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">GEN_VISITOR_URL</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">headers</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">params</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-155\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-156\"><span class=\"crayon-h\">            </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">str</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">HttpClientInstance</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">instance</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">execute</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">httpPost</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-157\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">str</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">substring</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">str</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">indexOf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"(\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">str</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">lastIndexOf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-158\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-159\"><span class=\"crayon-h\">        </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getVisitor</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tid</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">w</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">c</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">passporturl</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-160\"><span class=\"crayon-h\">            </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">url</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">VISITOR_URL</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"&amp;t=\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tid</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"&amp;w=\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"&amp;c=\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">c</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">substring</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">c</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">length</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-161\"><span class=\"crayon-h\">                    </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"&amp;gc=&amp;cb=cross_domain&amp;from=weibo&amp;_rand=0.\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">rand</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-162\"> </div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-163\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">Map</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-t\">String</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">String</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">headers</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Maps</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">newHashMap</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-164\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">headers</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">put</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">HttpHeaders</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">ACCEPT</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"*/*\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-165\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">headers</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">put</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">HttpHeaders</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">HOST</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"passport.weibo.com\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-166\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">headers</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">put</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">HttpHeaders</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">COOKIE</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"tid=\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tid</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"__0\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">c</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-167\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">headers</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">put</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">HttpHeaders</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">REFERER</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">passporturl</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-168\"> </div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-169\"><span class=\"crayon-h\">            </span><span class=\"crayon-e\">HttpGet </span><span class=\"crayon-v\">httpGet</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">HttpRequestUtils</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">createHttpGet</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">url</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">headers</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-170\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">httpGet</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setConfig</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">RequestConfig</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">custom</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setCookieSpec</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">CookieSpecs</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">STANDARD</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">build</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-171\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">HttpClientInstance</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">instance</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">execute</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">httpGet</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-172\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-173\"><span class=\"crayon-h\">        </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">rand</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-174\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">BigDecimal</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">Math</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">floor</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">Math</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">random</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10000000000000000L</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">toString</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-175\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-176\"><span class=\"crayon-h\">        </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">fp</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-177\"><span class=\"crayon-h\">            </span><span class=\"crayon-e\">JSONObject </span><span class=\"crayon-v\">jsonObject</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">JSONObject</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-178\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">jsonObject</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">put</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"os\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"1\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-179\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">jsonObject</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">put</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"browser\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Chrome59,0,3071,115\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-180\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">jsonObject</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">put</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"fonts\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"undefined\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-181\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">jsonObject</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">put</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"screenInfo\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"1680*1050*24\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-182\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">jsonObject</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">put</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"plugins\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-183\"><span class=\"crayon-h\">                    </span><span class=\"crayon-s\">\"Enables Widevine licenses for playback of HTML audio/video content. (version: 1.4.8.984)::widevinecdmadapter.dll::Widevine Content Decryption Module|Shockwave Flash 26.0 r0::pepflashplayer.dll::Shockwave Flash|::mhjfbmdgcfjbbpaeojofohoefgiehjai::Chrome PDF Viewer|::internal-nacl-plugin::Native Client|Portable Document Format::internal-pdf-viewer::Chrome PDF Viewer\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-184\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">jsonObject</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">toString</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-185\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2617f1d797863399556-186\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-59f2617f1d797863399556-187\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0360 seconds] -->\r\n<p></p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112507\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112507votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112507\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 12 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/2653yy\">fullstackyang</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/2653yy\">\r\n\t\t\t<img src=\"http://tp2.sinaimg.cn/2233098320/180/0/1\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            会当凌绝顶，一览众山小——全栈之路        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/2653yy\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/2653yy/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/2653yy/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 5</a> · <a title=\"我的网站\" target=\"_blank\" href=\"http://www.fullstackyang.com\"><i class=\"fa fa-link\"></i></a> <a title=\"微博主页\" target=\"_blank\" href=\"http://weibo.com/2653yy\"><i class=\"fa fa-weibo\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": 1, "praise_nums": "2", "url_object_id": "6c6b66c80fcd04dd9c516df9cd7f6eb4", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2015/04/63b78db96b87489a5800bda3165b2689.jpg"], "front_image_path": "full/dd8d6d643fed209184284cbaf7bb76344ee2dbb5.jpg", "title": "微博爬虫“免登录”技巧详解及 Java 实现"}
{"create_date": "2017/09/20 ", "url": "http://blog.jobbole.com/112218/", "fav_nums": 4, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文作者： <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/aoi\">伯小乐</a> 。未经作者许可，禁止转载！<br>欢迎加入伯乐在线 <a href=\"http://blog.jobbole.com/99322\" target=\"_blank\">专栏作者</a>。</div><p data-incom=\"P0\"><img id=\"pic\" class=\"aligncenter\" src=\"http://wx3.sinaimg.cn/large/7cc829d3gy1fjq718j3rvj20g00bf0zp.jpg\"></p>\n<p data-incom=\"P0\">离开百度后的吴恩达，新成立了 DeepLearning.ai 公司。9 月 13 日，吴恩达在 Twitter 发推招兵买马。有人发现其官网的招软件工程师要求中有这样的措词：</p>\n<p data-incom=\"P1\"><img id=\"pic\" class=\"\" src=\"http://wx3.sinaimg.cn/large/7cc829d3gy1fjq2u4zj6oj20r607kgo0.jpg\"></p>\n<blockquote>\n<p data-incom=\"P2\">我们希望你能很好适应我们的团队文化：</p>\n<ul>\n<li>工作道德强。我们所有人都相信我们的工作能够改变人类的生活，因此不仅聪明地工作，而且努力地工作。在办公室里看到一些团队成员工作到深夜，是很平常的事；我们中的许多人，每周工作和学习 70 个小时以上。</li>\n</ul>\n</blockquote>\n<p data-incom=\"P3\">目前招人文案中是「每周工作和学习 70 小时以上」，但有网友指出之前是「70 ~ 90 小时」。虽然这样的措词并没有直接明确要求应聘者每周工作和学习至少 70 小时，综合开头的「我们希望你能很好地适应我们的团队文化」，意思很明确了。</p>\n<p data-incom=\"P4\">每周至少是 70 小时，</p>\n<ul>\n<li>如果每周 5 天，每天至少 14 小时；</li>\n<li>如果每周 6 天，每天至少 11.6 小时；（这基本就是国内的「996」工作制了。）</li>\n<li>如果每周 7 天，每天至少 10 小时；</li>\n</ul>\n<p data-incom=\"P5\">所以这就引发广大开发圈的激烈讨论了。</p>\n<p data-incom=\"P6\">BestUsernameLeft：</p>\n<blockquote>\n<p data-incom=\"P7\">对这种工作环境，我有直接体会。我自己做过两次（一次是自愿的，一次是要求的）；我已经两次看着同事们这样做了。</p>\n<p data-incom=\"P8\">在精神上，你变得不可能集中精力，也就不能有高质量的工作。你的推理能力和做出好决定的能力受到影响。在心理上，你慢慢变得易怒和急躁，随着时间的推移，压力也会导致身体问题。</p>\n<p data-incom=\"P9\">我不会说那是“永远不值得”。但如果每周做 60 小时以上的工作生活，请你在要做出决定前了解代价。</p>\n</blockquote>\n<p data-incom=\"P10\">Susan J. Fowler：</p>\n<blockquote>\n<p data-incom=\"P11\">每周工作 90 小时的人，写不出良好的代码。不知道你们为啥会想招那样的！</p>\n</blockquote>\n<p data-incom=\"P12\">Farhad Manjoo：</p>\n<blockquote>\n<p data-incom=\"P13\">我也搞不懂。虽然你们把要求公开透明是挺好的，但你们失去了很多有家室的潜在求职者。</p>\n</blockquote>\n<p data-incom=\"P14\">cuminme69420：</p>\n<blockquote>\n<p data-incom=\"P15\">我是 99% 支持的，像吴恩达这样的人每周想工作这么长，这的确没问题。毕竟有些人是真的对工作着迷。但是，我搞不明白的是，要求公司其他成员也是同样的工作时间。这种行为挺愚蠢。</p>\n<p data-incom=\"P16\">我想了想「如果你想在我公司工作就要遵循我的理念和热情」背后的逻辑。或许他们就是在过滤掉那些看重心理稳定性的人吧。在软件工程中，往往有一种特定人格的吸引，补充到那个角色中没有任何问题。</p>\n</blockquote>\n<p data-incom=\"P17\">KneeDeepClunge：</p>\n<blockquote>\n<p data-incom=\"P18\">就我个人来讲，我几乎从来没有每周工作达到 40 小时。因为这包括了每天午餐后的 1 小时休息。这样算来了，我每周实际上大约工作 35 小时。</p>\n</blockquote>\n<p data-incom=\"P19\">qelsin：</p>\n<blockquote>\n<p data-incom=\"P20\">在努力工作 8 小时候，我脑子就一团糟了。即便我真想做完某些事，我几乎不能集中精力，如果遇到这种情况，我也不得不强迫自己辞职了。我无法想象工作 12 – 16 小时后的，你脑子是什么样的状态了 。</p>\n</blockquote>\n<p data-incom=\"P21\">icode2skrillex:</p>\n<blockquote>\n<p data-incom=\"P22\">大约两年前，我每天工作约 16 小时，并且全年每天 24 小时（24 / 7 / 365）都随时手机/电话待命。我变得非常不快乐，非常胖，我和朋友和家人的关系正在衰退。我也和女朋友（现在的妻子）经常争吵，因为我们从来没有见过面或者有任何有意义的联系。</p>\n<p data-incom=\"P23\">我辞掉了那份工作，我现在每周工作 40 个小时。如果我们落后于项目，管理层并没有逼迫使我们加班，他们鼓励我们准时离开并与家人在一起，因为他们意识到工作质量下降了。自从接受了这份工作，我已经减肥 65 磅，和女朋友结婚了，有时间去寻找和买房子。更重要的是（也许是不全面的，但在我们软件工程师这种职业），我能够集中精力发展自己和我的能力，来获得提升。</p>\n<p data-incom=\"P24\">当我去面试时，我总是会问关于工作与生活的平衡，是不是要随叫随到，通常工作多少小时。因为我知道，如果我要持续工作超过 45-50 小时（或者比这更多的时间），我知道我的个人风险。</p>\n</blockquote>\n<p data-incom=\"P25\">sensitiveinfomax:</p>\n<blockquote>\n<p data-incom=\"P26\">不仅仅是心理健康的问题了。</p>\n<p data-incom=\"P27\">花这么多时间在工作上，意味着你没有别的活动了。你将无法发展有意义的人际关系，不会有健康的饮食习惯，也不会像你应该做的那样锻炼身体，也不会给你的家人提供帮助。</p>\n<p data-incom=\"P28\">这将是一个被阻碍的发展状态，除非你换工作。</p>\n<p data-incom=\"P29\">这样累是求啥呢？你很可能不会直接与 Andrew Ng 的工作。他很可能不知道你的名字。如果你有足够的资格在那里被聘了，你就可以得到一份工作时间少、薪水高、有声望的工作。</p>\n</blockquote>\n<p class=\"tagline\" data-incom=\"P30\">xian0：</p>\n<blockquote>\n<p data-incom=\"P31\">每天工作 70 小时，他们是怎样安排的呢？。每天早八点到晚七点（午餐 1 小时），没有周末么？还是早七点到晚十点，周末双休？没有周末，似乎看起来更正常，但美国人通常也没有很多假期，所以总体上可能更糟。</p>\n<p data-incom=\"P32\">我记得，当人们坐在电脑一天要 9-12 小时，结果最后就是在玩 WOW 之类的游戏。</p>\n</blockquote>\n<p data-incom=\"P33\">CSStudent15：</p>\n<blockquote>\n<p data-incom=\"P34\">我老板每周工作 60 小时。这家伙没有什么爱好，他只是为了公司而活。挺可悲的，我想他除了公司，并不关心其他事。</p>\n<p data-incom=\"P35\">我永远不会在没有工作和生活平衡的公司工作。</p>\n</blockquote>\n<form id=\"form-t1_dn3ztcwnhm\" class=\"usertext warn-on-unload\" action=\"https://www.reddit.com/r/cscareerquestions/comments/70iedc/a_friendly_reminder_that_regularly_working_7090/?limit=500#\">\n<div class=\"usertext-body may-blank-within md-container \">\n<div class=\"md\">\n<p>mjcov：</p>\n<blockquote><p>让你每周工作超过 40 小时的唯一原因，那是你对公司的成长发展有着重大的兴趣。你可能是公司创办人或者合伙人。就我来说，我只是一个员工，我能换其他工作，我不必关心是不是因为我们做事不够快而导致公司在流失客户。招足够多的人去完成他们想做的事，这是某人的工作。我的意思是，我有时候会工作到很晚来救火，但我做的工作并不是那么重要，并不会因为我工作完成的晚了，就有人会受到严重伤害。</p>\n<p>在面试时，我也常常会问工作/生活平衡，向现在的员工去打听了解。我考虑过每周工作 40 小时的弹性（比如：因为我要去的 DMV 是 5 点关门，我能否早点下班），还有每周超过 40 小时的频率。即便是每周工作 40 小时，我感觉自己没有足够多的时间做完所有的事。作为一只单身狗，情况就更惨了。因为所有的家务、购物这些都得自己做了。除了全职工作和睡眠，每天大概有 2-4 小时留给自己支配，可以是学习和我工作相关的东西，或者做个人项目。我不知道其他人是什么情况，尤其是那些家务没人帮的，每周工作 50+ 小时，并且还没有很快就职业疲倦的单身程序员，他们是怎么样做到的。</p></blockquote>\n</div>\n</div>\n</form>\n<p data-incom=\"P36\">当然了，既然有不认同这种工作时长的，就有认同的人。😂😂😂  这不，吴恩达在 9 月 16 日有发一条推：</p>\n<blockquote>\n<p data-incom=\"P37\">自从宣布了 deeplearning.ai 的新岗位，我们在 24 小时内收到大约 120 份的申请，48 小时内大约收到了 270 份。哇！</p>\n</blockquote>\n<p data-incom=\"P38\">噢，对了，吴恩达他们官网招人说明中并没有说明薪资。在没有说明薪资的情况下，并且是高强度工作时间，还有这么多人申请，挺疯狂的。这或许也说明了吴恩达的吸引力吧。</p>\n<p data-incom=\"P38\"><span style=\"color: #ff0000;\">对于这种类似国内 996 的，每周工作/学习 70+ 小时，你怎么看呢？</span></p>\n<p data-incom=\"P39\">参考：</p>\n<p data-incom=\"P40\">Twitter、Reddit、DeepLearning.ai</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112218\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112218votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112218\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 4 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 28 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/aoi\">伯小乐</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/aoi\">\r\n\t\t\t<img src=\"http://www.jobbole.com/wp-content/uploads/2015/11/f2bb4f6f428a49476a2e91c355c8d150.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            伯乐在线小编一枚~~~~PS：我不是@小编辑，不要问我了        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/aoi\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/aoi/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/aoi/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 253</a>        </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": 28, "praise_nums": "1", "url_object_id": "b09b05cadf7a3aaeb82a891746bd449d", "front_image_url": ["http://wx3.sinaimg.cn/large/7cc829d3gy1fjq718j3rvj20g00bf0zp.jpg"], "front_image_path": "full/e7d8941c8e19478127fbb56b8843766501cf843d.jpg", "title": "每周 70+ 小时，吴恩达的招人要求之一"}
{"create_date": "2017/09/21 ", "url": "http://blog.jobbole.com/112530/", "fav_nums": 3, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/zhj318\">飞哥的咖啡</a> 翻译，<a href=\"http://www.jobbole.com/members/hanxiaomax\">艾凌风</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"http://jlongster.com/Starters-and-Maintainers\">James Long</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>【导读】：James Long 是 Mozilla 的工程师。他在这篇文章讨论了开源项目的两种角色 starters（发起人）与 maintainers（维护者）。没有报酬的情况下，有多少开源项目的维护者能持之以恒？</p>\n<div class=\"header-text\">\n<h3>发起人与维护者</h3>\n</div>\n<p>现在是周五的深夜，妻子已经睡着了，我终于能够抽空看看那些发布请求（pull request），这些发布请求来自我去年放上 GitHub 的一个旧项目。女儿早上七点半要起床，所以我最好不要熬夜太晚。</p>\n<p><img class=\"alignnone aligncenter\" src=\"http://wx1.sinaimg.cn/mw690/7cc829d3gy1fjreozv07cj20oz0gg3z9.jpg\" width=\"600\" height=\"395\"></p>\n<p>自我上次查看之后，新增了 9 个问题（issues），以及 2 个发布请求。好消息是大部分问题都可以关闭，而且发布请求也无关紧要。呃，不好，有一些重大的更改。我不得不重新考虑这些更改，并将（带着礼貌的态度）参与一场长时间的讨论。这是一个突破性的更改，但他们并没有更新文档，所以我们必须弄清楚，如何通知每位用户去升级。</p>\n<p>我应该给项目建立一个更好的（推送）方式，来通知用户新的问题和发布请求。但是仔细一想，骗谁呢，这只会让我更加精疲力竭。我根本没有这么多时间来回应这些（问题和发布请求）。至少现在，当我在焦头烂额忙着其他事情的时候，我可以假装它并不存在。</p>\n<h3>我为什么要这么逼迫自己呢？</h3>\n<p>诚然，我的代码已经帮助了很多人，但随之而来的维护负担却也十分严重，尽管它本身只是一个小项目。如果它变得更加流行，有更多的用户来使用它哪？那么要做的事情就更多了。（尽管我的 GitHub 个人博客内容比较冷门，还不怎么使用， 都已有超过 1000 颗星了，啊？！）从此它会变成一个每周 10 小时的工作。😱</p>\n<p>我非常佩服那些将大量时间免费贡献给开源软件（Open Source Software，简写 OSS）项目的人。我不敢想象有多少无趣的免费工作正在进行。人们非常乐于喜欢帮助别人和社区，这件事情本身很棒。</p>\n<p>我也喜欢这样做，但是有了妻子和女儿（而且马上要有第二个女儿），再加上一个本已高强度的工作，基本不可能办到这一点。我在 Mozilla 的工作基本上就是完全的 OSS 工作。</p>\n<h3>我认为自己能坚持下去的唯一理由，是因为我喜欢发起一件事。</h3>\n<p>每个人都喜欢做发起人，但我想做出点影响力，做出点贡献。将作品放到 GitHub 上很容易，而且如果没有人使用它，你都可以忽略它，但这样做不会产生任何影响力。我想让人们看看我做出的东西，能够从中学到些什么，甚至能够使用它。通过编写可以应用到生产环境到库，我帮助人们学习 React、React-Router、传感器、健康的宏、动画等大量东西。</p>\n<p>但这也会带来负担。</p>\n<h3>一旦人们在生产中使用你的代码，你还要继续维护它吗？</h3>\n<p>你可以说不，这是你的权力。但大多数时候，你想要看到你的想法不断成长、进化。问题是，要维持这样的动力，背后需要付出大量的工作。</p>\n<p>任何一个项目都要有两个角色：发起人和维护者。人们可能在生活中同时扮演着这两个角色，但出于某种原因，我发现对于单一的项目而言，这两个角色一般对应不同的人。发起人擅长在不一样的角度（方向）迈出重要的一大步，而维护者擅长保持代码存活。</p>\n<p>另一个很大的区别是，项目发起人往往只有一个，而最终会有多个项目维护者，这是因为单独一人无法支撑起整个项目。随着它越来越受欢迎，会出现越来越多的问题、发布请求以及其他各种请求，两者之间呈线性递增的关系。当项目人气到达了新的阶段，就必须增加新的维护者，而理想的情况是来自现有的重度用户。</p>\n<p>正是因为一个人无法支撑起整个项目，所以发起人自一开始就容易陷入一个令人绝望的循环：他/她拥有所有这些好的想法，但随着一些想法逐渐得到实现，会收到越来越多（来自他人的）噪音干扰，这使得未来的想法难以实现。关键是，你要不忘记现有的项目，要不为它们找到维护者，而后者通常不是一个能够很快实现的任务。</p>\n<p>我本人绝对是一个发起人。我对万事万物都存有兴趣（好奇心），并不专注于几个集中的领域。我维护库的时间已经长达数年，但赶着在周五晚上处理积压留存的问题，总是让我怀有巨大的愧疚感。</p>\n<p>从现在起，我清楚地表示，由于我放上 GitHub 的代码是实验性的，我将不会回应任何的问题或发布请求。如果我确实发布了一个可以应用到生产环境到库，说明我已经想到了要请谁来维护。我不想再让自己背上第二份工作了。:)</p>\n<p>这是我想对所有维护者说的话：<strong>正是他们在幕后从事各种费力不讨好的工作来保持代码存活</strong>，包括编写文档、编辑版本、注册域名等等。</p>\n<p>哎，今晚要补救的问题还挺多的，也许我只要将废弃声明（ DEPRECATED ）添加到 README 中就能解决一切了。😊</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112530\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112530votetotal\">3</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112530\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 3 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/zhj318\">飞哥的咖啡</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/zhj318\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2016/09/9667abaa540914200edd449974fb5538.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            我见青山多妩媚，料青山见我应如是        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/zhj318\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/zhj318/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/zhj318/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 41</a> · <a title=\"QQ：574375911\" target=\"_blank\" href=\"#\"><i class=\"fa fa-qq\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": "  评论", "praise_nums": "3", "url_object_id": "207a7bb951ac59fefed1603907d61d79", "front_image_url": ["http://wx1.sinaimg.cn/mw690/7cc829d3gy1fjreozv07cj20oz0gg3z9.jpg"], "front_image_path": "full/3deb44b3048ff6de0d692db7935b9824dd296da7.jpg", "title": "没有报酬，有多少开源项目维护者能坚持？"}
{"create_date": "2017/09/22 ", "url": "http://blog.jobbole.com/112524/", "fav_nums": "  收藏", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/young605867996\">Lada</a> 翻译，<a href=\"http://www.jobbole.com/members/huanglimin\">黄利民</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"http://www.joelonsoftware.com/items/2006/06/16.html\">joelonsoftware</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>【导读】：本文作者是 StackOverflow 联合创始人、知名博主 Joel Spolsky。本文讲述他于 1991 年在微软做 Excel 的 Program Manager 的时候，与 Bill Gates 一起 review 产品的感受，行文生动有趣。另外，微软鼎盛时期的 Program Manager ，技术能力很强的。<b></b></p>\n<p><img id=\"pic\" class=\"aligncenter\" src=\"http://wx1.sinaimg.cn/large/7cc829d3gy1fjpv065lnvj20eu0b5jru.jpg\"></p>\n<p style=\"text-align: center;\">（伯乐在线补图：1991 年 Bill Gates 接受今日美国的采访）</p>\n<h3>我的第一次 BillG 评审</h3>\n<p>在早些时候，Excel 有一种非常难用的没名字的编程语言。我们叫它“Excel 宏（Excel Macros）”。这是一种功能严重失调的编程语言，它没有变量（你必须将值存储在一个工作表的单元格中）、没有局部变量（locals）、没有子例程调用（subroutine calls）。简而言之，它几乎完全无法维护。它有像任意跳转语句 Goto 这样的高级特性，但标签（labels）实际上是看不见的。</p>\n<p>唯一使它看起来合理的是，它和 Lotus 宏相比看上去太好了。Lotus 宏只不过是把一系列的键盘敲击作为一个长字符串输入到一个工作表单元格。</p>\n<p>1991 年 6 月 17 日，我开始在微软 Excel 团队工作。我的头衔是“程序经理（Program Manager）”。我应该为 Excel 宏的问题想出一个解决办法。言外之意就是，解决方案会与 Basic 编程语言有关。</p>\n<p>Basic？一点都没错！</p>\n<p>我花了一些时间，与不同的开发小组磋商。Visual Basic 1.0 那时刚刚发布，酷到不行。有一个在误导中进行的开发，代号为 MacroMan，以及另一个面向对象（Object-Oriented）的 Basic 也在开发，代号为“Sliver”。Sliver 团队得知，他们的产品将会有一个客户端：Excel。Sliver 的市场经理 Bob Wyman，没错，就是那个 Bob Wyman，他只用把技术售卖给一个人：我。</p>\n<p><img id=\"pic\" class=\"M_cur_zoom_in aligncenter\" src=\"http://wx1.sinaimg.cn/large/7cc829d3gy1fjpuxgbivnj21hc140ai5.jpg\" width=\"559\" height=\"420\"></p>\n<p style=\"text-align: center;\">（2014 年的 Joel Spolsky，伯乐在线补图 ）</p>\n<p>正如我所说的，MacroMan 误入歧途，也采纳了一些劝告，但最终它被关闭了。Excel 团队使 Basic 团队确信，我们真正需要的是一种针对 Excel 的 Visual Basic。我设法在 Basic 中添加了四个受宠的特性。我让他们添加了变型（Variants），一个可以存储任何其他类型的数据类型，否则在没有 switch 语句的判断下，你就不能以一个变量存储电子表格单元格的内容。我还让他们加上了后期绑定（late binding），也叫做 IDispatch，或是 COM 自动化。因为Silver的原始设计需要对类型系统（type systems）有深入理解，而宏的开发者根本不需要懂这个。然后，我有两个受宠的语法特性：For Each 结构是从 csh 中借鉴的；With 结构是从<strong><b> </b></strong>Pascal 中借鉴的。</p>\n<p>之后，我坐下来编写 Excel Basic 的规格说明书，一份巨大的文件，长到几百页。我想起写完的时候，它有 500 页了。（“瀑布式开发”有人在偷笑了，是的没错，别笑了。）</p>\n<p>那时候，我们通常会有一件事叫做“BillG 审查”。Bill Gates 基本上会审查每个重大的功能。我被通知送一份规格说明书复印件到他的办公室，为审查做好准备。这基本上用掉了一令打印纸。<span style=\"color: #999999;\">（伯乐在线注：令，英文纸张计数单位。1 令为 500 张）</span></p>\n<p>我赶去把规格说明书打印出来，送到了他的办公室。</p>\n<p>那天晚一点的时候，我有了一些时间，因此我开始工作于计算 Basic 是否有足够的日期和时间函数来完成所有在 Excel 里能做的任务。</p>\n<p>在多数现代编程环境中，日期是以实数形式存储的。这个实数的整数部分，是从以前某个公认的日子至今所经过的天数。这个公认的日子叫做“纪元（epoch）”。在 Excel 中，例如，今天的日期——2006 年 6 月 16 日，以 38884 存储着；计算日期 1900 年 1 月 1 日的话，就是 1。</p>\n<p>我开始彻底地测试 Basic 和 Excel 的各种日期和时间函数，在那之后，我注意到 Visual Basic 的文件里有异常——Basic 以 1899 年 12 月 31 日为纪元，而不是 1900年 1 月 1 日，但不知何种原因，当天日期的值在 Basic 和 Excel 里是一样的。</p>\n<p>哈？</p>\n<p>我去找到一个资历老练到记得背后原因的 Excel 开发者。Ed Fries 看起来知道答案。</p>\n<p>他告诉我：“检验一下 1900 年 2 月 28 日。”</p>\n<p>我说：“存储值是 59。”</p>\n<p>“那再试下 3 月 1 日。”</p>\n<p>“是 61。”</p>\n<p>Ed 问：“60 哪去了？”</p>\n<p>“2 月 29 日，1900 年是闰年，它能被 4 整除！”</p>\n<p>Ed 说：“猜测的不错，但还不够。”接着让我想了一会儿。</p>\n<p>天呐，我又思索了一番，能被 100 整除的年份，除非它还能被 400 整除，否则就不是闰年。</p>\n<p>1900 年不是闰年。</p>\n<p>我惊呼道，“这是一个 Excel 里的 bug。”</p>\n<p>“不完全是，”Ed 讲到，“我们不得不用那种方式，为了能导入 Lotus 123 的工作表。”</p>\n<p>“所以这是 Lotus 123 里的 bug？” <span style=\"color: #999999;\">（伯乐在线补充：Lotus 123 是一种电子表格软件，1983 年由莲花公司推出，后来被 IBM 收购。Lotus 123 就是 Excel 的竞品。）</span></p>\n<p>“是的，但很有可能是故意为之。Lotus 内存小于 640 k。那是很小的内存。如果忽视 1900 年，你能只是看最右两位是否为零来计算某一年是不是闰年。这样快速且容易。Lotus 的人可能认为在过去的日子里只有这两个月受到影响并不是什么重大的错误。但看起来，Basic 的人对这两个月吹毛求疵，所以他们把纪元回退了一天。”</p>\n<p>“天啊！”我感叹到。然后继续研究为什么在名为「1904 Date System」的选项对话框里有一个复选项。</p>\n<p>第二天就是重要的 BillG 审查。</p>\n<p>1992 年 6 月 30 日。</p>\n<p>过去，微软公司是很少官僚的。我向 Mike Conte 汇报，Mike Conte 经过 Chris Graham、Pete Higgins、Mike Maples 的层层汇报，最终 Mike Maples 就能向 Bill 汇报了。不像现在的 11 或是12 层，以前自顶向下只有 6 个层级左右。我们曾经取笑像通用汽车（General Motors ）这样的公司，因为他们有 8 个管理层或是天知道做什么的层。</p>\n<p>在我 BillG 评审的会议上，以上的汇报层都到场了，他们还带着一堆我怀疑是表兄表妹姑婶的人。<span style=\"color: #ff0000;\">还有一个我团队里的人，他负责准确记录 Bill 整场爆了几次粗口。Bill 说 Fxxx 的次数越少，review 结果越好。</span></p>\n<p><img id=\"pic\" class=\"aligncenter\" src=\"http://ww4.sinaimg.cn/large/7cc829d3jw1dpx6ahcgfuj.jpg\"></p>\n<p style=\"text-align: center;\">（看到上句标红的地方，伯小乐不由自主想到这张漫画 😂）</p>\n<p>Bill 进来了。</p>\n<p>我感觉太奇怪了，他竟然有两条腿、两个胳膊和一个脑袋。几乎和普通人类完全一样。</p>\n<p>在他手上拿着我的规格说明书。</p>\n<p>我的规格说明书在他手上！</p>\n<p>他坐下，和一个我不认识的高管，戏谑了几句对我而言没什么意义的话。一些人笑了。</p>\n<p>Bill 转向我。</p>\n<p>我注意到我的规格说明书边缘上有一些评论。他已经看过第一页了！</p>\n<p>他已经看过我规格说明书的第一页了，而且还在边上写了几句笔记！</p>\n<p>想到我们刚在 24 小时前把规格说明书送给他，他一定是在昨天晚上阅读它的。</p>\n<p>他问了几个问题。我回答了。它们非常简单，但我之后再也记不起都问了什么，因为我目不转睛地看着他翻阅着规格说明书……</p>\n<p>他在翻阅着规格说明书！（冷静，你是没见过世面的小女孩么？）</p>\n<p>……并且，边上都写着笔记。在规格说明书的每一页都有。天啊，他已经阅读过了整个文件，并且在所有边缘写上了笔记。</p>\n<p>他读了整个文件！（天啊，怎么可能！）</p>\n<p>提问越来越难，越来越细。</p>\n<p>问题似乎有点随机。那时我已经把 Bill 当成自己人了。他是个不错的家伙！他读完了我的规格说明书！他可能只是想问我几个和写在边上的评论相关的问题。我要打开错误提交系统，把他的每一条笔记都放进去，并且确保得到重视和解决，要快！</p>\n<p>最后是一个很要命的问题。</p>\n<p>Bill 说，“我不知道你们有谁真的看过如何去做的所有细节？比如，所有的日期和时间函数。Excel 有大量的日期和时间函数，Basic 是否也有一样的函数？它们工作的方式一样吗？”</p>\n<p>“看过，”我回答到，“除了 1900 年的 1 月和 2 月。”</p>\n<p>一片寂静。</p>\n<p>粗口记录员和我上司惊讶地对视了一眼。我是怎么知道的？1 月 和 2 月怎么了？</p>\n<p>“好。那么，做的不错，”Bill 这么说。他拿起他做了笔记的规格说明书复印件。</p>\n<p>……等等！我想要那个！</p>\n<p>然后他走了。</p>\n<p>“4 次。”粗口记录员汇报道。所有人都说：“哇。这是我记忆中的最低记录。Bill 随着年龄大起来越来越稳重了。” 那年，他 36 岁。</p>\n<p>后来，我自己解释：“Bill 并不是真的要评论规格说明书，只是想确保你已经完全掌握了它。他的标准做法是不断提问，越问越难，直到你承认你不懂，接着他就会吼你‘为什么没准备好？’没人真的知道，如果答出来了那个他抛出的最难得问题会怎么样，因为之前还没人答上过。”</p>\n<p>“你能想象如果 Jim Manzi 在那个会上吗？”有人问。“Manzi 会问你‘什么是日期函数？’”</p>\n<p>Jim Manzi 是 MBA 类型的领导，他把 Lotus 带上了下坡路。（<span style=\"color: #999999;\">伯乐在线补注：Jim Manzi 1982 年加入 Lotus 公司。1984 年成为 Lotus 总裁。）</span></p>\n<p>这是很重要的一点。Bill Gates 是个惊人的技术人员。他理解可变数据类型、COM 对象、IDispatch 接口，以及 Automation 和虚表有什么不同，为什么这样会导致双重接口（dual interfaces）。他担忧日期函数。他不会干涉软件，如果他信任为此工作的人。但你一分钟也不能糊弄他，因为他是一个程序员。一个真真正正的程序员。</p>\n<p>看那些不懂编程的人想经营一家软件公司，就像看不会冲浪的人硬要去冲浪一样。</p>\n<p>“没关系。我有极好的顾问站在岸边告诉我如何去做！”他们这样说，结果他们会一次又一次的从滑板摔落。这是那些 MBA 的标准说辞，他们相信管理是一项通用技能。鲍尔默会成为另一个 John Sculley 吗？ John Sculley 几乎差点让苹果（Apple）破产，就因为那时苹果的董事会相信一个整天想着卖百事可乐的人能准备好经营一家计算机公司。MBA 的崇拜者乐于相信人可以经营一家公司，而根本不懂公司业务。</p>\n<p>几年过去，微软逐渐变得庞大。Bill 精力分散，一些道德上名声不好的决策，使得公司管理需要在很多方向上与美国政府抗争。鲍尔默接手微软 CEO 的角色，在理论上能够让 Bill 把更多时间放在他的长处上，去经营软件开发组织，但这似乎并没有解决由于一些特殊原因造成的问题。像是11 层的管理结构、无尽的开会文化、一种将所有可能产品都制造出来的固执，无论那是什么。（微软流失了不可计数的美元，在研发、法律费用和名誉损失上，只因为他们决定不仅必须要做一个浏览器，而且还必须要免费发布。）以及几十年以来匆忙、草率的招聘使微软中层的水平下降。（Douglas Coupland 在 Microserfs 中说：他们在 1992 年雇佣了 3100 人，其中并不都是人才。）</p>\n<p>好了。聚会已经搬到了其他地方。Excel Basic 成为了 Microsoft Visual Basic 应用程序微软 Excel 版，有太多注册商标（TM）和（R）以至于我不知道该把它们放哪。我在 1994 年离开了微软公司，以为 Bill 已经完全忘记了我，直到我发现《华尔街日报》上一篇 Bill Gates 的小专访。里面他讲到招聘是多么难的事时，几乎只是顺便一提地说了，就像一个优秀的 Excel 程序经理，他们不是简单地长在树上，诸如此类的话。</p>\n<p>他会不会是在说我？不会吧，那可能是别的什么人。</p>\n<p>一切都定格在过去了。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112524\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112524votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112524\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/young605867996\">Lada</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/young605867996\">\r\n\t\t\t<img src=\"http://q.qlogo.cn/qqapp/208656/B77EEB9D520DE9C7BD42E89DC348FEC7/100\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            希望了解更多互联网、创业管理、创新思维、前沿技术和设计的知识。渐进明细，持续改进。        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/young605867996\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/young605867996/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/young605867996/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 16</a> · <a title=\"我的网站\" target=\"_blank\" href=\"http://littlejanery.blog.163.com/\"><i class=\"fa fa-link\"></i></a> <a title=\"QQ：605867996\" target=\"_blank\" href=\"#\"><i class=\"fa fa-qq\"></i></a> <a title=\"个人微信：yao605867996\" target=\"_blank\" href=\"#\"><i class=\"fa fa-weixin\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": "  评论", "praise_nums": "1", "url_object_id": "f1f633028dafc2690bff8eb78c583994", "front_image_url": ["http://wx1.sinaimg.cn/large/7cc829d3gy1fjpv065lnvj20eu0b5jru.jpg"], "front_image_path": "full/03ea20195dbafa37dd7cf02d5ac24c4eb1cd9f11.jpg", "title": "比尔·盖茨评审产品时说 F**k 最少的一次"}
{"create_date": "2017/09/18 ", "url": "http://blog.jobbole.com/112503/", "fav_nums": "  收藏", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://opensource.com/article/17/9/5-reasons-facebooks-react-license-was-mistake\">Simon Phipps</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-8876-1.html\">Linux中国/薛亮</a>   </div><blockquote><p>Facebook 公司的 BSD+专利许可证失败的原因不是因为许可证本身，而是因为它忽略了开源软件更深层次的本质。</p></blockquote>\n<p>2017 年 7 月，Facebook 公司应用于 react 等项目的许可证组合<a href=\"https://meshedinsights.com/2017/07/16/apache-bans-facebooks-license-combo/\">被 Apache 软件基金会禁止使用</a>。该许可证组合曾被 Facebook 应用于其所有作为开源软件发布的项目，它使用了被 OSI 批准的广泛使用的<a href=\"https://meshedinsights.com/2017/04/04/permissive-and-copyleft-are-not-antonyms/\">非互惠</a>许可证 BSD 3-Clause，并且加入了宽泛的、非互惠的专利授权条款，但为了应对挑衅者，该许可证组合的终止规则同样宽泛。这种组合代表了一种新的开源许可证，我称之为“Facebook BSD+专利许可证”（FB + PL），在我看来，该许可证试图与 GPL v2 和 Apache v2 许可证保持兼容，以规避这些许可证所指称的不兼容性。</p>\n<p><a href=\"https://meshedinsights.com/2017/07/16/apache-bans-facebooks-license-combo/\">使用 FB + PL 许可证的 Apache 项目仍在发挥作用</a>，但是我认为 Facebook 所犯错误的原因可能不会立即被一贯秉持实用主义态度的软件开发人员们所注意到。例如，<a href=\"https://medium.com/@dwalsh.sdlr/react-facebook-and-the-revokable-patent-license-why-its-a-paper-25c40c50b562\">由律师转行做程序员的 Dennis Walsh 针对这个问题表示</a>：“它没有什么实质意义”。他的观点是，FB + PL 许可证仅对你所使用的适用该许可证的特定软件项目产生影响，专利授权撤回的后果对另一个专利持有者来说并不严重。他得出结论说：</p>\n<blockquote><p>“Facebook 想要推广开源软件同时不被起诉——这是一个崇高的目标。为此，它可以使用一些苛刻的条款。但在这种情况下，由于上述实践和法律方面的原因，很难在被攻击之后发现是谁干的。”</p></blockquote>\n<p>Dennis 也许是对的，但这并不重要。Facebook 自出机杼地发明自己的开源许可证是一个坏主意。有一系列非直接风险或具体情境的重要因素需要考虑，Facebook 的许可证几乎将它们完全忽略了。</p>\n<ol>\n<li>许可证审批很重要<br>\n使用非 OSI 批准的许可证意味着，就像任何专有许可证一样，将其应用于企业用途时总是需要法律审查。<a href=\"https://meshedinsights.com/2017/07/12/why-osi-license-approval-matters/\">OSI 许可证审批之所以重要</a>，是因为它为开发人员提供了一种指示，即社区评估已经认可了该许可证，并认为它以不会产生不可接受风险的方式提供了软件自由。如果 Facebook 采取了寻求 OSI 批准的路线，那么很有可能一开始就会发现并且回避了他造成的问题。实际上有一种 OSI 批准的许可证能够实现 Facebook 的明确目标（<a href=\"https://opensource.org/licenses/BSDplusPatent\">BSD + 专利许可证</a>）。该许可证最近刚被提交和批准，这看起来是 Facebook 可以考虑采用的合理替代方案。</li>\n<li>较少的提前许可<br>\n不仅仅是许可证批准很重要。任何有关创新自由的不确定性都会阻碍开发人员使用代码。与使用相关的含糊条款在使用前需要消除歧义——该步骤相当于为了继续推进而寻求许可。出于同样的原因，<a href=\"https://meshedinsights.com/2017/03/16/public-domain-is-not-open-source/\">公共领域对于软件开发者来说是不利的</a>，因为使用条款规定了在采用之前需要寻求许可。由于需要向项目添加一个与 Facebook 相关的法律文件，每个企业开发人员现在都需要与法律顾问联系，才能继续推进。即使答案是“是的，可以”，他们仍然不得不停下来寻求许可。<a href=\"https://github.com/facebook/react/issues/10191#issuecomment-316380810\">正如 Aaron Williamson 指出的那样</a>，这可能不是他们的反应。</li>\n<li>不公平的比赛场<br>\nFacebook 使用的专利授权条款为其提供了特殊权利和保护，而项目中的其他人并不享有。这使得开源开发人员感到紧张，原因与<a href=\"https://webmink.com/2010/09/01/copyright-aggregation/\">贡献者协议</a>（contributor agreements）一样。开源项目的软件自由的全部价值在于它创造了一个<a href=\"https://meshedinsights.com/2017/05/03/is-the-gpl-really-declining/#safe\">安全的空间</a>，在其中每个人都是平等的，它保护每个人免受他人动机的影响。刻意为自己设置额外权利是反社会的行为，可悲的是，开源社区有很多不平等权利最终被滥用的例子。</li>\n<li>隐含的授权无效<br>\n许多开源法律机构认为，通过对用于任何目的的软件使用授予许可，即使没有提及专利的许可证也隐含授予专利许可。通过添加任意形式的外部专利授权，Facebook 表示它不认为隐含授权足够（最好的情形）或存在（最差的情形）。专注于开源软件的律师们认为，这是 Facebook 毫无根据的扩大化解释。这也是<a href=\"https://opensource.org/faq#cc-zero\">为什么 OSI 放弃了对 CC0 许可协议批准的原因</a>。</li>\n<li>Apache 基金会的规则<br>\n虽然我没有找到清晰和完整的理由，但 Apache 基金会似乎已经对 Facebook 的许可证组合做出了裁定，因为 Apache 基金会认为，Facebook 的专利授权比 Apache v2 许可证中的专利条款限制性更强。Apache 基金会希望自身是一个中立的软件来源——一个“万能供血者”，而对此产生妨害的条款很有可能违背其规则。对于旨在成为 Apache 生态系统一部分的组件，与 Apache 的许可证产生混乱的做法看起来不太明智。</li>\n</ol>\n<p>所以争论这个问题没有什么意义，因为风险很小，问题微不足道。以一种忽视我上面列出的五个社区规范的方式行动无益于任何人，甚至也帮不了 Facebook。虽然 <a href=\"https://code.facebook.com/posts/112130496157735/explaining-react-s-license/\">Facebook 目前正在坚持己见</a>，但我希望它能够改正，我愿意提供帮助。</p>\n<hr>\n<p>作者简介：Simon Phipps 是“公开软件”（Public Software）开源项目的发起人，以志愿者身份担任 OSI 和文档基金会（The Document Foundation）的理事。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112503\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112503votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112503\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": 1, "praise_nums": "1", "url_object_id": "f56f9e29820a99ea2c92f3d18fcc89d5", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2014/09/a7d76e2b76679ff9b1827452d44218fc.png"], "front_image_path": "full/df06ccaa34ea3c46bdf50c4d4fd0348685508f79.jpg", "title": "React 许可证的五宗罪"}
{"create_date": "2017/09/14 ", "url": "http://blog.jobbole.com/112469/", "fav_nums": 1, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文作者： <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/2653yy\">fullstackyang</a> 。未经作者许可，禁止转载！<br>欢迎加入伯乐在线 <a href=\"http://blog.jobbole.com/99322\" target=\"_blank\">专栏作者</a>。</div><p>在使用HttpClient进行抓取一些网页的时候，经常会保留从服务器端发回的Cookie信息，以便发起其他需要这些Cookie的请求。大多数情况下，我们使用内置的cookie策略，便能够方便直接地获取这些cookie。</p>\n<p>下面的一小段代码，就是访问<a href=\"http://www.baidu.com\">http://www.baidu.com</a>，并获取对应的cookie：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33e4586285523088428\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n@ Test\r\npublic void getCookie(){\r\n    CloseableHttpClient httpClient = HttpClients.createDefault();\r\n    HttpGet get=new HttpGet(\"http://www.baidu.com\");\r\n    HttpClientContext context = HttpClientContext.create();\r\n    try {\r\n        CloseableHttpResponse response = httpClient.execute(get, context);\r\n        try{\r\n            System.out.println(\"&gt;&gt;&gt;&gt;&gt;&gt;headers:\");\r\n            Arrays.stream(response.getAllHeaders()).forEach(System.out::println);\r\n            System.out.println(\"&gt;&gt;&gt;&gt;&gt;&gt;cookies:\");\r\n            context.getCookieStore().getCookies().forEach(System.out::println);\r\n        }\r\n        finally {\r\n            response.close();\r\n        }\r\n    } catch (IOException e) {\r\n        e.printStackTrace();\r\n    }finally {\r\n        try {\r\n            httpClient.close();\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33e4586285523088428-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e4586285523088428-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f33e4586285523088428-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e4586285523088428-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f33e4586285523088428-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e4586285523088428-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f33e4586285523088428-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e4586285523088428-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f33e4586285523088428-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e4586285523088428-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f33e4586285523088428-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e4586285523088428-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59f33e4586285523088428-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e4586285523088428-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59f33e4586285523088428-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e4586285523088428-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-59f33e4586285523088428-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e4586285523088428-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-59f33e4586285523088428-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e4586285523088428-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-59f33e4586285523088428-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e4586285523088428-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-59f33e4586285523088428-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e4586285523088428-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-59f33e4586285523088428-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e4586285523088428-26\">26</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33e4586285523088428-1\"><span class=\"crayon-sy\">@</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Test</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e4586285523088428-2\"><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getCookie</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f33e4586285523088428-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">CloseableHttpClient </span><span class=\"crayon-v\">httpClient</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">HttpClients</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">createDefault</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e4586285523088428-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">HttpGet </span><span class=\"crayon-v\">get</span><span class=\"crayon-o\">=</span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">HttpGet</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"http://www.baidu.com\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33e4586285523088428-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">HttpClientContext </span><span class=\"crayon-v\">context</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">HttpClientContext</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">create</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e4586285523088428-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">try</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f33e4586285523088428-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">CloseableHttpResponse </span><span class=\"crayon-v\">response</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">httpClient</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">execute</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">get</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">context</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e4586285523088428-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">try</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f33e4586285523088428-9\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">out</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">println</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"&gt;&gt;&gt;&gt;&gt;&gt;headers:\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e4586285523088428-10\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">Arrays</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">stream</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">response</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getAllHeaders</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-st\">forEach</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">out</span><span class=\"crayon-o\">::</span><span class=\"crayon-v\">println</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33e4586285523088428-11\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">out</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">println</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"&gt;&gt;&gt;&gt;&gt;&gt;cookies:\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e4586285523088428-12\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">context</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getCookieStore</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getCookies</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-st\">forEach</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">out</span><span class=\"crayon-o\">::</span><span class=\"crayon-v\">println</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33e4586285523088428-13\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e4586285523088428-14\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">finally</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f33e4586285523088428-15\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">response</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">close</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e4586285523088428-16\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-59f33e4586285523088428-17\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">catch</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">IOException</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e4586285523088428-18\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">printStackTrace</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33e4586285523088428-19\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span><span class=\"crayon-st\">finally</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e4586285523088428-20\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">try</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f33e4586285523088428-21\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">httpClient</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">close</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e4586285523088428-22\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">catch</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">IOException</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f33e4586285523088428-23\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">printStackTrace</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e4586285523088428-24\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-59f33e4586285523088428-25\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e4586285523088428-26\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0043 seconds] -->\r\n<p>打印结果</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33e458628f855028970\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt;&gt;&gt;&gt;headers:\r\nServer: bfe/1.0.8.18\r\nDate: Tue, 12 Sep 2017 06:19:06 GMT\r\nContent-Type: text/html\r\nLast-Modified: Mon, 23 Jan 2017 13:28:24 GMT\r\nTransfer-Encoding: chunked\r\nConnection: Keep-Alive\r\nCache-Control: private, no-cache, no-store, proxy-revalidate, no-transform\r\nPragma: no-cache\r\nSet-Cookie: BDORZ=27315; max-age=86400; domain=.baidu.com; path=/\r\n&gt;&gt;&gt;&gt;&gt;&gt;cookies:\r\n[version: 0][name: BDORZ][value: 27315][domain: baidu.com][path: /][expiry: null]</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33e458628f855028970-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e458628f855028970-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f33e458628f855028970-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e458628f855028970-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f33e458628f855028970-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e458628f855028970-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f33e458628f855028970-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e458628f855028970-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f33e458628f855028970-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e458628f855028970-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f33e458628f855028970-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e458628f855028970-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33e458628f855028970-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-v\">headers</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e458628f855028970-2\"><span class=\"crayon-v\">Server</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">bfe</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">1.0.8.18</span></div><div class=\"crayon-line\" id=\"crayon-59f33e458628f855028970-3\"><span class=\"crayon-v\">Date</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Tue</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Sep</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2017</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">06</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">19</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">06</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">GMT</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e458628f855028970-4\"><span class=\"crayon-v\">Content</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">Type</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">text</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">html</span></div><div class=\"crayon-line\" id=\"crayon-59f33e458628f855028970-5\"><span class=\"crayon-v\">Last</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">Modified</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Mon</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">23</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Jan</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2017</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">13</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">28</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">24</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">GMT</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e458628f855028970-6\"><span class=\"crayon-v\">Transfer</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">Encoding</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">chunked</span></div><div class=\"crayon-line\" id=\"crayon-59f33e458628f855028970-7\"><span class=\"crayon-v\">Connection</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Keep</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">Alive</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e458628f855028970-8\"><span class=\"crayon-v\">Cache</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">Control</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">private</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">no</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">cache</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">no</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">store</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">proxy</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">revalidate</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">no</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">transform</span></div><div class=\"crayon-line\" id=\"crayon-59f33e458628f855028970-9\"><span class=\"crayon-v\">Pragma</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">no</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">cache</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e458628f855028970-10\"><span class=\"crayon-v\">Set</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">Cookie</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">BDORZ</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">27315</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">max</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">age</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">86400</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">domain</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">baidu</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">path</span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">/</span></div><div class=\"crayon-line\" id=\"crayon-59f33e458628f855028970-11\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-v\">cookies</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e458628f855028970-12\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">version</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">name</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">BDORZ</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">value</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">27315</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">domain</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">baidu</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">path</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">expiry</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0038 seconds] -->\r\n<p>但是也有一些网站返回的cookie并不一定完全符合规范，例如下面这个例子，从打印出的header中可以看到，这个cookie中的Expires属性是时间戳形式，并不符合标准的时间格式，因此，httpclient对于cookie的处理失效，最终无法获取到cookie，并且发出了一条警告信息：“Invalid ‘expires’ attribute: 1505204523”</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33e4586294272155793\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n警告: Invalid cookie header: \"Set-Cookie: yd_cookie=90236a64-8650-494b332a285dbd886e5981965fc4a93f023d; Expires=1505204523; Path=/; HttpOnly\". Invalid 'expires' attribute: 1505204523\r\n&gt;&gt;&gt;&gt;&gt;&gt;headers:\r\nDate: Tue, 12 Sep 2017 06:22:03 GMT\r\nContent-Type: text/html\r\nConnection: keep-alive\r\nSet-Cookie: yd_cookie=90236a64-8650-494b332a285dbd886e5981965fc4a93f023d; Expires=1505204523; Path=/; HttpOnly\r\nCache-Control: no-cache, no-store\r\nServer: WAF/2.4-12.1\r\n&gt;&gt;&gt;&gt;&gt;&gt;cookies:</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33e4586294272155793-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e4586294272155793-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f33e4586294272155793-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e4586294272155793-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f33e4586294272155793-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e4586294272155793-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f33e4586294272155793-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e4586294272155793-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f33e4586294272155793-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33e4586294272155793-1\">警告<span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Invalid </span><span class=\"crayon-e\">cookie </span><span class=\"crayon-v\">header</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Set-Cookie: yd_cookie=90236a64-8650-494b332a285dbd886e5981965fc4a93f023d; Expires=1505204523; Path=/; HttpOnly\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Invalid</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'expires'</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">attribute</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1505204523</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e4586294272155793-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-v\">headers</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-59f33e4586294272155793-3\"><span class=\"crayon-v\">Date</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Tue</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Sep</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2017</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">06</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">22</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">03</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">GMT</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e4586294272155793-4\"><span class=\"crayon-v\">Content</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">Type</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">text</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">html</span></div><div class=\"crayon-line\" id=\"crayon-59f33e4586294272155793-5\"><span class=\"crayon-v\">Connection</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">keep</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">alive</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e4586294272155793-6\"><span class=\"crayon-v\">Set</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">Cookie</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">yd_cookie</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">90236a64</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">8650</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">494b332a285dbd886e5981965fc4a93f023d</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Expires</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">1505204523</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Path</span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">/</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">HttpOnly</span></div><div class=\"crayon-line\" id=\"crayon-59f33e4586294272155793-7\"><span class=\"crayon-v\">Cache</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">Control</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">no</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">cache</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">no</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">store</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e4586294272155793-8\"><span class=\"crayon-v\">Server</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">WAF</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2.4</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">12.1</span></div><div class=\"crayon-line\" id=\"crayon-59f33e4586294272155793-9\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-v\">cookies</span><span class=\"crayon-o\">:</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0026 seconds] -->\r\n<p>虽然我们可以利用header的数据，重新构造一个cookie出来，也有很多人确实也是这么做的，但这种方法不够优雅，那么如何解决这个问题？网上相关的资料又很少，所以就只能先从官方文档入手。在官方文档3.4小节custom cookie policy中讲到允许自定义的cookie策略，自定义的方法是实现CookieSpec接口，并通过CookieSpecProvider来完成在httpclient中的初始化和注册策略实例的工作。好了，关键的线索在于CookieSpec接口，我们来看一下它的源码：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33e4586298502071371\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\npublic interface CookieSpec {\r\n……\r\n    /**\r\n      * Parse the {@ code \"Set-Cookie\"} Header into an array of Cookies.\r\n      *\r\n      * &lt;p&gt; This method will not perform the validation of the resultant&lt;code&gt;\r\n      * {@link Cookie}s&lt;/p&gt;\r\n      *\r\n      * @ see #validate\r\n      *\r\n      * @param header the {@ code Set-Cookie} received from the server\r\n      * @param origin details of the cookie origin\r\n      * @ return an array of {@ code Cookie}s parsed from the header\r\n      * @throws MalformedCookieException if an exception occurs during parsing\r\n      */\r\n    List parse(Header header, CookieOrigin origin) throws MalformedCookieException;\r\n……\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33e4586298502071371-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e4586298502071371-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f33e4586298502071371-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e4586298502071371-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f33e4586298502071371-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e4586298502071371-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f33e4586298502071371-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e4586298502071371-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f33e4586298502071371-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e4586298502071371-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f33e4586298502071371-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e4586298502071371-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59f33e4586298502071371-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e4586298502071371-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59f33e4586298502071371-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e4586298502071371-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-59f33e4586298502071371-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e4586298502071371-18\">18</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33e4586298502071371-1\"><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">interface</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">CookieSpec</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e4586298502071371-2\">……</div><div class=\"crayon-line\" id=\"crayon-59f33e4586298502071371-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">/**</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e4586298502071371-4\"><span class=\"crayon-c\">      * Parse the {@ code \"Set-Cookie\"} Header into an array of Cookies.</span></div><div class=\"crayon-line\" id=\"crayon-59f33e4586298502071371-5\"><span class=\"crayon-c\">      *</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e4586298502071371-6\"><span class=\"crayon-c\">      * &lt;p&gt; This method will not perform the validation of the resultant&lt;code&gt;</span></div><div class=\"crayon-line\" id=\"crayon-59f33e4586298502071371-7\"><span class=\"crayon-c\">      * {@link Cookie}s&lt;/p&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e4586298502071371-8\"><span class=\"crayon-c\">      *</span></div><div class=\"crayon-line\" id=\"crayon-59f33e4586298502071371-9\"><span class=\"crayon-c\">      * @ see #validate</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e4586298502071371-10\"><span class=\"crayon-c\">      *</span></div><div class=\"crayon-line\" id=\"crayon-59f33e4586298502071371-11\"><span class=\"crayon-c\">      * @param header the {@ code Set-Cookie} received from the server</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e4586298502071371-12\"><span class=\"crayon-c\">      * @param origin details of the cookie origin</span></div><div class=\"crayon-line\" id=\"crayon-59f33e4586298502071371-13\"><span class=\"crayon-c\">      * @ return an array of {@ code Cookie}s parsed from the header</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e4586298502071371-14\"><span class=\"crayon-c\">      * @throws MalformedCookieException if an exception occurs during parsing</span></div><div class=\"crayon-line\" id=\"crayon-59f33e4586298502071371-15\"><span class=\"crayon-c\">      */</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e4586298502071371-16\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">List </span><span class=\"crayon-e\">parse</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">Header </span><span class=\"crayon-v\">header</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">CookieOrigin </span><span class=\"crayon-v\">origin</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">throws </span><span class=\"crayon-v\">MalformedCookieException</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33e4586298502071371-17\">……</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e4586298502071371-18\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p>在源码中我们发现了一个parse方法，看注释就知道正是这个方法，将Set-Cookie的header信息解析为Cookie对象，自然地再了解一下在httplcient中的默认实现DefaultCookieSpec，限于篇幅，源码就不贴了。在默认的实现中，DefaultCookieSpec主要的工作是判断header中Cookie规范的类型，然后再调用具体的某一个实现。像上述这种Cookie，最终是交由NetscapeDraftSpec的实例来做解析，而在NetscapeDraftSpec的源码中，定义了默认的expires时间格式为“EEE, dd-MMM-yy HH:mm:ss z”</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33e458629c536788060\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\npublic class NetscapeDraftSpec extends CookieSpecBase {\r\n\r\n    protected static final String EXPIRES_PATTERN = \"EEE, dd-MMM-yy HH:mm:ss z\";\r\n\r\n    /** Default constructor */\r\n    public NetscapeDraftSpec(final String[] datepatterns) {\r\n        super(new BasicPathHandler(),\r\n                new NetscapeDomainHandler(),\r\n                new BasicSecureHandler(),\r\n                new BasicCommentHandler(),\r\n                new BasicExpiresHandler(\r\n                        datepatterns != null ? datepatterns.clone() : new String[]{EXPIRES_PATTERN}));\r\n    }\r\n\r\n    NetscapeDraftSpec(final CommonCookieAttributeHandler... handlers) {\r\n        super(handlers);\r\n    }\r\n\r\n    public NetscapeDraftSpec() {\r\n        this((String[]) null);\r\n    }\r\n……\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33e458629c536788060-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e458629c536788060-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f33e458629c536788060-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e458629c536788060-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f33e458629c536788060-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e458629c536788060-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f33e458629c536788060-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e458629c536788060-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f33e458629c536788060-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e458629c536788060-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f33e458629c536788060-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e458629c536788060-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59f33e458629c536788060-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e458629c536788060-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59f33e458629c536788060-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e458629c536788060-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-59f33e458629c536788060-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e458629c536788060-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-59f33e458629c536788060-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e458629c536788060-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-59f33e458629c536788060-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e458629c536788060-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-59f33e458629c536788060-23\">23</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33e458629c536788060-1\"><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">NetscapeDraftSpec</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">extends</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">CookieSpecBase</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e458629c536788060-2\"> </div><div class=\"crayon-line\" id=\"crayon-59f33e458629c536788060-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">protected</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">final</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">EXPIRES_PATTERN</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"EEE, dd-MMM-yy HH:mm:ss z\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e458629c536788060-4\"> </div><div class=\"crayon-line\" id=\"crayon-59f33e458629c536788060-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">/** Default constructor */</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e458629c536788060-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">NetscapeDraftSpec</span><span class=\"crayon-sy\">(</span><span class=\"crayon-m\">final</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">String</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">datepatterns</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f33e458629c536788060-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">super</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">BasicPathHandler</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e458629c536788060-8\"><span class=\"crayon-h\">                </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">NetscapeDomainHandler</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f33e458629c536788060-9\"><span class=\"crayon-h\">                </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">BasicSecureHandler</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e458629c536788060-10\"><span class=\"crayon-h\">                </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">BasicCommentHandler</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f33e458629c536788060-11\"><span class=\"crayon-h\">                </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">BasicExpiresHandler</span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e458629c536788060-12\"><span class=\"crayon-h\">                        </span><span class=\"crayon-v\">datepatterns</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">datepatterns</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">clone</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">String</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">EXPIRES_PATTERN</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33e458629c536788060-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e458629c536788060-14\"> </div><div class=\"crayon-line\" id=\"crayon-59f33e458629c536788060-15\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">NetscapeDraftSpec</span><span class=\"crayon-sy\">(</span><span class=\"crayon-m\">final</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">CommonCookieAttributeHandler</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">handlers</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e458629c536788060-16\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">super</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">handlers</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33e458629c536788060-17\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e458629c536788060-18\"> </div><div class=\"crayon-line\" id=\"crayon-59f33e458629c536788060-19\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">NetscapeDraftSpec</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e458629c536788060-20\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">String</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33e458629c536788060-21\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e458629c536788060-22\">……</div><div class=\"crayon-line\" id=\"crayon-59f33e458629c536788060-23\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0032 seconds] -->\r\n<p>到这里已经比较清楚了，我们只需要将Cookie中expires的时间转换为正确的格式，然后再送入默认的解析器就可以了。</p>\n<p><strong>解决方法：</strong></p>\n<ol>\n<li>自定义一个CookieSpec类，继承DefaultCookieSpec</li>\n<li>重写parser方法</li>\n<li>将Cookie中的expires转换为正确的时间格式</li>\n<li>调用默认的解析方法</li>\n</ol>\n<p>实现如下（URL就不公开了，已经隐去）</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33e45862a0995052138\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\npublic class TestHttpClient {\r\n    \r\n    String url = sth;\r\n\r\n    class MyCookieSpec extends DefaultCookieSpec {\r\n        @ Override\r\n        public List parse(Header header, CookieOrigin cookieOrigin) throws MalformedCookieException {\r\n            String value = header.getValue();\r\n            String prefix = \"Expires=\";\r\n            if (value.contains(prefix)) {\r\n                String expires = value.substring(value.indexOf(prefix) + prefix.length());\r\n                expires = expires.substring(0, expires.indexOf(\";\"));\r\n                String date = DateUtils.formatDate(new Date(Long.parseLong(expires) * 1000L),\"EEE, dd-MMM-yy HH:mm:ss z\");\r\n                value = value.replaceAll(prefix + \"\\\\d{10};\", prefix + date + \";\");\r\n            }\r\n            header = new BasicHeader(header.getName(), value);\r\n            return super.parse(header, cookieOrigin);\r\n        }\r\n    }\r\n\r\n    @ Test\r\n    public void getCookie() {\r\n\r\n        CloseableHttpClient httpClient = HttpClients.createDefault();\r\n\r\n        Registry cookieSpecProviderRegistry = RegistryBuilder.create()\r\n                .register(\"myCookieSpec\", context -&gt; new MyCookieSpec()).build();//注册自定义CookieSpec\r\n\r\n        HttpClientContext context = HttpClientContext.create();\r\n        context.setCookieSpecRegistry(cookieSpecProviderRegistry);\r\n\r\n        HttpGet get = new HttpGet(url);\r\n        get.setConfig(RequestConfig.custom().setCookieSpec(\"myCookieSpec\").build());\r\n\r\n        try {\r\n            CloseableHttpResponse response = httpClient.execute(get, context);\r\n            try{\r\n                System.out.println(\"&gt;&gt;&gt;&gt;&gt;&gt;headers:\");\r\n                Arrays.stream(response.getAllHeaders()).forEach(System.out::println);\r\n                System.out.println(\"&gt;&gt;&gt;&gt;&gt;&gt;cookies:\");\r\n                context.getCookieStore().getCookies().forEach(System.out::println);\r\n            }\r\n            finally {\r\n                response.close();\r\n            }\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }finally {\r\n            try {\r\n                httpClient.close();\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33e45862a0995052138-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e45862a0995052138-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f33e45862a0995052138-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e45862a0995052138-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f33e45862a0995052138-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e45862a0995052138-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f33e45862a0995052138-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e45862a0995052138-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f33e45862a0995052138-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e45862a0995052138-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f33e45862a0995052138-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e45862a0995052138-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59f33e45862a0995052138-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e45862a0995052138-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59f33e45862a0995052138-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e45862a0995052138-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-59f33e45862a0995052138-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e45862a0995052138-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-59f33e45862a0995052138-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e45862a0995052138-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-59f33e45862a0995052138-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e45862a0995052138-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-59f33e45862a0995052138-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e45862a0995052138-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-59f33e45862a0995052138-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e45862a0995052138-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-59f33e45862a0995052138-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e45862a0995052138-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-59f33e45862a0995052138-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e45862a0995052138-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-59f33e45862a0995052138-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e45862a0995052138-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-59f33e45862a0995052138-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e45862a0995052138-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-59f33e45862a0995052138-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e45862a0995052138-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-59f33e45862a0995052138-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e45862a0995052138-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-59f33e45862a0995052138-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e45862a0995052138-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-59f33e45862a0995052138-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e45862a0995052138-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-59f33e45862a0995052138-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e45862a0995052138-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-59f33e45862a0995052138-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e45862a0995052138-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-59f33e45862a0995052138-47\">47</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e45862a0995052138-48\">48</div><div class=\"crayon-num\" data-line=\"crayon-59f33e45862a0995052138-49\">49</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e45862a0995052138-50\">50</div><div class=\"crayon-num\" data-line=\"crayon-59f33e45862a0995052138-51\">51</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e45862a0995052138-52\">52</div><div class=\"crayon-num\" data-line=\"crayon-59f33e45862a0995052138-53\">53</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e45862a0995052138-54\">54</div><div class=\"crayon-num\" data-line=\"crayon-59f33e45862a0995052138-55\">55</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e45862a0995052138-56\">56</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33e45862a0995052138-1\"><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">TestHttpClient</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e45862a0995052138-2\"><span class=\"crayon-h\">    </span></div><div class=\"crayon-line\" id=\"crayon-59f33e45862a0995052138-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">url</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sth</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e45862a0995052138-4\"> </div><div class=\"crayon-line\" id=\"crayon-59f33e45862a0995052138-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">MyCookieSpec</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">extends</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">DefaultCookieSpec</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e45862a0995052138-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">@</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Override</span></div><div class=\"crayon-line\" id=\"crayon-59f33e45862a0995052138-7\"><span class=\"crayon-e\">        </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">List </span><span class=\"crayon-e\">parse</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">Header </span><span class=\"crayon-v\">header</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">CookieOrigin </span><span class=\"crayon-v\">cookieOrigin</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">throws</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">MalformedCookieException</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e45862a0995052138-8\"><span class=\"crayon-h\">            </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">value</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">header</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getValue</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33e45862a0995052138-9\"><span class=\"crayon-h\">            </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">prefix</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Expires=\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e45862a0995052138-10\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">value</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">contains</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">prefix</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f33e45862a0995052138-11\"><span class=\"crayon-h\">                </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">expires</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">value</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">substring</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">value</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">indexOf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">prefix</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">prefix</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">length</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e45862a0995052138-12\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">expires</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">expires</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">substring</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">expires</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">indexOf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\";\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33e45862a0995052138-13\"><span class=\"crayon-h\">                </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">date</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">DateUtils</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">formatDate</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Date</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">Long</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">parseLong</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">expires</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1000L</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">\"EEE, dd-MMM-yy HH:mm:ss z\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e45862a0995052138-14\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">value</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">value</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">replaceAll</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">prefix</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"\\\\d{10};\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">prefix</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">date</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\";\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33e45862a0995052138-15\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e45862a0995052138-16\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">header</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">BasicHeader</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">header</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getName</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">value</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33e45862a0995052138-17\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">super</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">parse</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">header</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cookieOrigin</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e45862a0995052138-18\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-59f33e45862a0995052138-19\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e45862a0995052138-20\"> </div><div class=\"crayon-line\" id=\"crayon-59f33e45862a0995052138-21\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">@</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Test</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e45862a0995052138-22\"><span class=\"crayon-e\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getCookie</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f33e45862a0995052138-23\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e45862a0995052138-24\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">CloseableHttpClient </span><span class=\"crayon-v\">httpClient</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">HttpClients</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">createDefault</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33e45862a0995052138-25\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e45862a0995052138-26\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">Registry </span><span class=\"crayon-v\">cookieSpecProviderRegistry</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">RegistryBuilder</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">create</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f33e45862a0995052138-27\"><span class=\"crayon-h\">                </span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">register</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"myCookieSpec\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">context</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">MyCookieSpec</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">build</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//注册自定义CookieSpec</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e45862a0995052138-28\"> </div><div class=\"crayon-line\" id=\"crayon-59f33e45862a0995052138-29\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">HttpClientContext </span><span class=\"crayon-v\">context</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">HttpClientContext</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">create</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e45862a0995052138-30\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">context</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setCookieSpecRegistry</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">cookieSpecProviderRegistry</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33e45862a0995052138-31\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e45862a0995052138-32\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">HttpGet </span><span class=\"crayon-v\">get</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">HttpGet</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">url</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33e45862a0995052138-33\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">get</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setConfig</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">RequestConfig</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">custom</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setCookieSpec</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"myCookieSpec\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">build</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e45862a0995052138-34\"> </div><div class=\"crayon-line\" id=\"crayon-59f33e45862a0995052138-35\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">try</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e45862a0995052138-36\"><span class=\"crayon-h\">            </span><span class=\"crayon-e\">CloseableHttpResponse </span><span class=\"crayon-v\">response</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">httpClient</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">execute</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">get</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">context</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33e45862a0995052138-37\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">try</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e45862a0995052138-38\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">out</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">println</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"&gt;&gt;&gt;&gt;&gt;&gt;headers:\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33e45862a0995052138-39\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">Arrays</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">stream</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">response</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getAllHeaders</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-st\">forEach</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">out</span><span class=\"crayon-o\">::</span><span class=\"crayon-v\">println</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e45862a0995052138-40\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">out</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">println</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"&gt;&gt;&gt;&gt;&gt;&gt;cookies:\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33e45862a0995052138-41\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">context</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getCookieStore</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getCookies</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-st\">forEach</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">out</span><span class=\"crayon-o\">::</span><span class=\"crayon-v\">println</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e45862a0995052138-42\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-59f33e45862a0995052138-43\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">finally</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e45862a0995052138-44\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">response</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">close</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33e45862a0995052138-45\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e45862a0995052138-46\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">catch</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">IOException</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f33e45862a0995052138-47\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">printStackTrace</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e45862a0995052138-48\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span><span class=\"crayon-st\">finally</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f33e45862a0995052138-49\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">try</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e45862a0995052138-50\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">httpClient</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">close</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33e45862a0995052138-51\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">catch</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">IOException</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e45862a0995052138-52\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">printStackTrace</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33e45862a0995052138-53\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e45862a0995052138-54\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-59f33e45862a0995052138-55\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e45862a0995052138-56\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0111 seconds] -->\r\n<p>再次运行，顺利地打印出正确的结果，完美！</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33e45862a5814519973\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt;&gt;&gt;&gt;headers:\r\nDate: Tue, 12 Sep 2017 07:24:10 GMT\r\nContent-Type: text/html\r\nConnection: keep-alive\r\nSet-Cookie: yd_cookie=9f521fc5-0248-4ab3ee650ca50b1c7abb1cd2526b830e620f; Expires=1505208250; Path=/; HttpOnly\r\nCache-Control: no-cache, no-store\r\nServer: WAF/2.4-12.1\r\n&gt;&gt;&gt;&gt;&gt;&gt;cookies:\r\n[version: 0][name: yd_cookie][value: 9f521fc5-0248-4ab3ee650ca50b1c7abb1cd2526b830e620f][domain: www.sth.com][path: /][expiry: Tue Sep 12 17:24:10 CST 2017]</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33e45862a5814519973-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e45862a5814519973-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f33e45862a5814519973-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e45862a5814519973-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f33e45862a5814519973-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e45862a5814519973-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f33e45862a5814519973-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e45862a5814519973-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f33e45862a5814519973-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33e45862a5814519973-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-v\">headers</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e45862a5814519973-2\"><span class=\"crayon-v\">Date</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Tue</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Sep</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2017</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">07</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">24</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">10</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">GMT</span></div><div class=\"crayon-line\" id=\"crayon-59f33e45862a5814519973-3\"><span class=\"crayon-v\">Content</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">Type</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">text</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">html</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e45862a5814519973-4\"><span class=\"crayon-v\">Connection</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">keep</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">alive</span></div><div class=\"crayon-line\" id=\"crayon-59f33e45862a5814519973-5\"><span class=\"crayon-v\">Set</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">Cookie</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">yd_cookie</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">9f521fc5</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0248</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4ab3ee650ca50b1c7abb1cd2526b830e620f</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Expires</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">1505208250</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Path</span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">/</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">HttpOnly</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e45862a5814519973-6\"><span class=\"crayon-v\">Cache</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">Control</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">no</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">cache</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">no</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">store</span></div><div class=\"crayon-line\" id=\"crayon-59f33e45862a5814519973-7\"><span class=\"crayon-v\">Server</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">WAF</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2.4</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">12.1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e45862a5814519973-8\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-v\">cookies</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-59f33e45862a5814519973-9\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">version</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">name</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">yd_cookie</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">value</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9f521fc5</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0248</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4ab3ee650ca50b1c7abb1cd2526b830e620f</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">domain</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">www</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">sth</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">path</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">expiry</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Tue </span><span class=\"crayon-i\">Sep</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">17</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">24</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">10</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">CST</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2017</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0032 seconds] -->\r\n<p>本文也发我的个人博客：<a href=\"http://www.fullstackyang.com/archives/416.html\">fullstackyang</a></p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112469\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112469votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112469\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/2653yy\">fullstackyang</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/2653yy\">\r\n\t\t\t<img src=\"http://tp2.sinaimg.cn/2233098320/180/0/1\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            会当凌绝顶，一览众山小——全栈之路        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/2653yy\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/2653yy/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/2653yy/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 5</a> · <a title=\"我的网站\" target=\"_blank\" href=\"http://www.fullstackyang.com\"><i class=\"fa fa-link\"></i></a> <a title=\"微博主页\" target=\"_blank\" href=\"http://weibo.com/2653yy\"><i class=\"fa fa-weibo\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": "  评论", "praise_nums": "1", "url_object_id": "149aabb38c863d753923c7f320a4a6ff", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/09/b133aed073d8d50b86dc17cd62408b91.jpg"], "front_image_path": "full/400ad67cf4361f1937db9bb746d2b7f0b34d3af6.jpg", "title": "HttpClient 获取 Cookie 的一次踩坑实录"}
{"create_date": "2017/09/14 ", "url": "http://blog.jobbole.com/112479/", "fav_nums": 1, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://www.networkworld.com/article/3222070/linux/maneuvering-around-run-levels-on-linux.html\">Sandra Henry-stocker</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-8857-1.html\">Linux中国/penghuster</a>   </div><blockquote><p>了解运行级别是如何配置的，如何改变系统运行级别以及修改对应状态下运行的服务。</p></blockquote>\n<p>在 Linux 系统中，运行级别run level是指运维的级别，用于描述一种表明什么服务是可用的系统运行状态。</p>\n<p>运行级别 1 是严格限制的，仅仅用于系统维护；该级别下，网络连接将不可操作，但是管理员可以通过控制台连接登录系统。</p>\n<p>其他运行级别的系统允许任何人登录和使用，但是不同级别中可使用的服务不同。本文将探索如何配置运行级别，如何交互式改变系统运行级别以及修改该状态下可用的服务。</p>\n<p>Linux 系统的默认运行状态是一个在系统开机时使用的运行级别（除非有其他的指示），它通常是在 <code>/etc/inittab</code> 文件中进行配置的，该文件内容通常如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f289b608920253748375\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nid:3:initdefault\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f289b608920253748375-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f289b608920253748375-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f289b608920253748375-1\"><span class=\"crayon-v\">id</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">3</span><span class=\"crayon-o\">:</span><span class=\"crayon-i\">initdefault</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f289b608920253748375-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>包括 Debian 系统在内的一些系统，默认运行级别为 2，而不是上述文件中的 3，甚至都没有 <code>/etc/inittab</code> 文件。</p>\n<p>运行级别在默认情况下是如何被配置，其配置依赖于你所运行的 Linux 操作系统的具体发行版本。 例如，在某些系统中， 运行级别 2 是多用户模式，运行级别 3 是多用户模式并支持 NFS （网络文件系统）。 在另外一些系统，运行级别 2 – 5 基本相同，运行级别 1 是单用户模式。例如，Debian 系统的所用运行级别如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f289b60892a409264105\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n0 = 停机\r\n1 = 单用户（维护模式）\r\n2 = 多用户模式\r\n3-5 = 同 2 一样\r\n6 = 重启\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f289b60892a409264105-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f289b60892a409264105-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f289b60892a409264105-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f289b60892a409264105-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f289b60892a409264105-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f289b60892a409264105-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f289b60892a409264105-1\"><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span>停机</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f289b60892a409264105-2\"><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span>单用户（维护模式）</div><div class=\"crayon-line\" id=\"crayon-59f289b60892a409264105-3\"><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span>多用户模式</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f289b60892a409264105-4\"><span class=\"crayon-cn\">3</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span>同<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span>一样</div><div class=\"crayon-line\" id=\"crayon-59f289b60892a409264105-5\"><span class=\"crayon-cn\">6</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span>重启</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f289b60892a409264105-6\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>在 Linux 系统上，运行级别 3 用于共享文件系统给其它系统，可以方便地只通过改变系统的运行级别来启动和停止文件系统共享。系统从运行级别 2 改变到 3 系统将允许文件系统共享，反之从运行级别 3 改变到 2 则系统不支持文件系统共享。</p>\n<p>在某个运行级别中，系统运行哪些进程依赖于目录 <code>/etc/rc?.d</code> 目录的内容，其中 <code>?</code> 可以是 2、 3、 4 或 5 （对应于相应的运行级别）。</p>\n<p>在以下示例中（Ubuntu 系统），由于这些目录的配置是相同的，我们将看见上述 4 个级别对应的目录中的内容是一致的。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f289b60892e228339442\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n/etc/rc2.d$ ls\r\nREADME         S20smartmontools      S50saned      S99grub-common\r\nS20kerneloops  S20speech-dispatcher  S70dns-clean  S99ondemand\r\nS20rsync       S20sysstat            S70pppd-dns   S99rc.local\r\n/etc/rc2.d$ cd ../rc3.d\r\n/etc/rc3.d$ ls\r\nREADME         S20smartmontools      S50saned      S99grub-common\r\nS20kerneloops  S20speech-dispatcher  S70dns-clean  S99ondemand\r\nS20rsync       S20sysstat            S70pppd-dns   S99rc.local\r\n/etc/rc3.d$ cd ../rc4.d\r\n/etc/rc4.d$ ls\r\nREADME         S20smartmontools      S50saned      S99grub-common\r\nS20kerneloops  S20speech-dispatcher  S70dns-clean  S99ondemand\r\nS20rsync       S20sysstat            S70pppd-dns   S99rc.local\r\n/etc/rc4.d$ cd ../rc5.d\r\n/etc/rc5.d$ ls\r\nREADME         S20smartmontools      S50saned      S99grub-common\r\nS20kerneloops  S20speech-dispatcher  S70dns-clean  S99ondemand\r\nS20rsync       S20sysstat            S70pppd-dns   S99rc.local\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f289b60892e228339442-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f289b60892e228339442-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f289b60892e228339442-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f289b60892e228339442-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f289b60892e228339442-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f289b60892e228339442-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f289b60892e228339442-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f289b60892e228339442-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f289b60892e228339442-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f289b60892e228339442-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f289b60892e228339442-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f289b60892e228339442-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59f289b60892e228339442-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f289b60892e228339442-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59f289b60892e228339442-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f289b60892e228339442-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-59f289b60892e228339442-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f289b60892e228339442-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-59f289b60892e228339442-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f289b60892e228339442-20\">20</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f289b60892e228339442-1\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">etc</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">rc2</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">d</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ls</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f289b60892e228339442-2\"><span class=\"crayon-e\">README         </span><span class=\"crayon-e\">S20smartmontools      </span><span class=\"crayon-e\">S50saned      </span><span class=\"crayon-v\">S99grub</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">common</span></div><div class=\"crayon-line\" id=\"crayon-59f289b60892e228339442-3\"><span class=\"crayon-e\">S20kerneloops  </span><span class=\"crayon-v\">S20speech</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">dispatcher  </span><span class=\"crayon-v\">S70dns</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">clean  </span><span class=\"crayon-e\">S99ondemand</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f289b60892e228339442-4\"><span class=\"crayon-e\">S20rsync       </span><span class=\"crayon-e\">S20sysstat            </span><span class=\"crayon-v\">S70pppd</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">dns   </span><span class=\"crayon-v\">S99rc</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">local</span></div><div class=\"crayon-line\" id=\"crayon-59f289b60892e228339442-5\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">etc</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">rc2</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">d</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">cd</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">rc3</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">d</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f289b60892e228339442-6\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">etc</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">rc3</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">d</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ls</span></div><div class=\"crayon-line\" id=\"crayon-59f289b60892e228339442-7\"><span class=\"crayon-e\">README         </span><span class=\"crayon-e\">S20smartmontools      </span><span class=\"crayon-e\">S50saned      </span><span class=\"crayon-v\">S99grub</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">common</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f289b60892e228339442-8\"><span class=\"crayon-e\">S20kerneloops  </span><span class=\"crayon-v\">S20speech</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">dispatcher  </span><span class=\"crayon-v\">S70dns</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">clean  </span><span class=\"crayon-e\">S99ondemand</span></div><div class=\"crayon-line\" id=\"crayon-59f289b60892e228339442-9\"><span class=\"crayon-e\">S20rsync       </span><span class=\"crayon-e\">S20sysstat            </span><span class=\"crayon-v\">S70pppd</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">dns   </span><span class=\"crayon-v\">S99rc</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">local</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f289b60892e228339442-10\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">etc</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">rc3</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">d</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">cd</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">rc4</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">d</span></div><div class=\"crayon-line\" id=\"crayon-59f289b60892e228339442-11\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">etc</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">rc4</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">d</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ls</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f289b60892e228339442-12\"><span class=\"crayon-e\">README         </span><span class=\"crayon-e\">S20smartmontools      </span><span class=\"crayon-e\">S50saned      </span><span class=\"crayon-v\">S99grub</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">common</span></div><div class=\"crayon-line\" id=\"crayon-59f289b60892e228339442-13\"><span class=\"crayon-e\">S20kerneloops  </span><span class=\"crayon-v\">S20speech</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">dispatcher  </span><span class=\"crayon-v\">S70dns</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">clean  </span><span class=\"crayon-e\">S99ondemand</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f289b60892e228339442-14\"><span class=\"crayon-e\">S20rsync       </span><span class=\"crayon-e\">S20sysstat            </span><span class=\"crayon-v\">S70pppd</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">dns   </span><span class=\"crayon-v\">S99rc</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">local</span></div><div class=\"crayon-line\" id=\"crayon-59f289b60892e228339442-15\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">etc</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">rc4</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">d</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">cd</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">rc5</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">d</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f289b60892e228339442-16\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">etc</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">rc5</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">d</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ls</span></div><div class=\"crayon-line\" id=\"crayon-59f289b60892e228339442-17\"><span class=\"crayon-e\">README         </span><span class=\"crayon-e\">S20smartmontools      </span><span class=\"crayon-e\">S50saned      </span><span class=\"crayon-v\">S99grub</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">common</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f289b60892e228339442-18\"><span class=\"crayon-e\">S20kerneloops  </span><span class=\"crayon-v\">S20speech</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">dispatcher  </span><span class=\"crayon-v\">S70dns</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">clean  </span><span class=\"crayon-e\">S99ondemand</span></div><div class=\"crayon-line\" id=\"crayon-59f289b60892e228339442-19\"><span class=\"crayon-e\">S20rsync       </span><span class=\"crayon-e\">S20sysstat            </span><span class=\"crayon-v\">S70pppd</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">dns   </span><span class=\"crayon-v\">S99rc</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">local</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f289b60892e228339442-20\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0045 seconds] -->\r\n<p>这些都是什么文件？它们都是指向 <code>/etc/init.d</code> 目录下用于启动服务的脚本符号连接。 这些文件的文件名是至关重要的， 因为它们决定了这些脚本文件的执行顺序，例如, S20 脚本是在 S50 脚本前面运行的。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f289b608932714490871\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ls -l\r\ntotal 4\r\n-rw-r--r-- 1 root root 677 Feb 16  2016 README\r\nlrwxrwxrwx 1 root root  20 Aug 30 14:40 S20kerneloops -&gt; ../init.d/kerneloops\r\nlrwxrwxrwx 1 root root  15 Aug 30 14:40 S20rsync -&gt; ../init.d/rsync\r\nlrwxrwxrwx 1 root root  23 Aug 30 16:10 S20smartmontools -&gt; ../init.d/smartmontools\r\nlrwxrwxrwx 1 root root  27 Aug 30 14:40 S20speech-dispatcher -&gt; ../init.d/speech-dispatcher\r\nlrwxrwxrwx 1 root root  17 Aug 31 14:12 S20sysstat -&gt; ../init.d/sysstat\r\nlrwxrwxrwx 1 root root  15 Aug 30 14:40 S50saned -&gt; ../init.d/saned\r\nlrwxrwxrwx 1 root root  19 Aug 30 14:40 S70dns-clean -&gt; ../init.d/dns-clean\r\nlrwxrwxrwx 1 root root  18 Aug 30 14:40 S70pppd-dns -&gt; ../init.d/pppd-dns\r\nlrwxrwxrwx 1 root root  21 Aug 30 14:40 S99grub-common -&gt; ../init.d/grub-common\r\nlrwxrwxrwx 1 root root  18 Aug 30 14:40 S99ondemand -&gt; ../init.d/ondemand\r\nlrwxrwxrwx 1 root root  18 Aug 30 14:40 S99rc.local -&gt; ../init.d/rc.local\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f289b608932714490871-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f289b608932714490871-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f289b608932714490871-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f289b608932714490871-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f289b608932714490871-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f289b608932714490871-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f289b608932714490871-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f289b608932714490871-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f289b608932714490871-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f289b608932714490871-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f289b608932714490871-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f289b608932714490871-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59f289b608932714490871-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f289b608932714490871-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59f289b608932714490871-15\">15</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f289b608932714490871-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ls</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f289b608932714490871-2\"><span class=\"crayon-i\">total</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span></div><div class=\"crayon-line\" id=\"crayon-59f289b608932714490871-3\"><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rw</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">root </span><span class=\"crayon-i\">root</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">677</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Feb</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">16</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">2016</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">README</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f289b608932714490871-4\"><span class=\"crayon-i\">lrwxrwxrwx</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">root </span><span class=\"crayon-i\">root</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">20</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Aug</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">30</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">14</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">40</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">S20kerneloops</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">init</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">d</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">kerneloops</span></div><div class=\"crayon-line\" id=\"crayon-59f289b608932714490871-5\"><span class=\"crayon-i\">lrwxrwxrwx</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">root </span><span class=\"crayon-i\">root</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Aug</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">30</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">14</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">40</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">S20rsync</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">init</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">d</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">rsync</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f289b608932714490871-6\"><span class=\"crayon-i\">lrwxrwxrwx</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">root </span><span class=\"crayon-i\">root</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">23</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Aug</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">30</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">16</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">10</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">S20smartmontools</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">init</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">d</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">smartmontools</span></div><div class=\"crayon-line\" id=\"crayon-59f289b608932714490871-7\"><span class=\"crayon-i\">lrwxrwxrwx</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">root </span><span class=\"crayon-i\">root</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">27</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Aug</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">30</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">14</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">40</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">S20speech</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">dispatcher</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">init</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">d</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">speech</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">dispatcher</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f289b608932714490871-8\"><span class=\"crayon-i\">lrwxrwxrwx</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">root </span><span class=\"crayon-i\">root</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">17</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Aug</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">31</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">14</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">12</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">S20sysstat</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">init</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">d</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">sysstat</span></div><div class=\"crayon-line\" id=\"crayon-59f289b608932714490871-9\"><span class=\"crayon-i\">lrwxrwxrwx</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">root </span><span class=\"crayon-i\">root</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Aug</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">30</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">14</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">40</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">S50saned</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">init</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">d</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">saned</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f289b608932714490871-10\"><span class=\"crayon-i\">lrwxrwxrwx</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">root </span><span class=\"crayon-i\">root</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">19</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Aug</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">30</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">14</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">40</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">S70dns</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">clean</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">init</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">d</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">dns</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">clean</span></div><div class=\"crayon-line\" id=\"crayon-59f289b608932714490871-11\"><span class=\"crayon-i\">lrwxrwxrwx</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">root </span><span class=\"crayon-i\">root</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">18</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Aug</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">30</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">14</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">40</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">S70pppd</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">dns</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">init</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">d</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">pppd</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">dns</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f289b608932714490871-12\"><span class=\"crayon-i\">lrwxrwxrwx</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">root </span><span class=\"crayon-i\">root</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">21</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Aug</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">30</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">14</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">40</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">S99grub</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">common</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">init</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">d</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">grub</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">common</span></div><div class=\"crayon-line\" id=\"crayon-59f289b608932714490871-13\"><span class=\"crayon-i\">lrwxrwxrwx</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">root </span><span class=\"crayon-i\">root</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">18</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Aug</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">30</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">14</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">40</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">S99ondemand</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">init</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">d</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">ondemand</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f289b608932714490871-14\"><span class=\"crayon-i\">lrwxrwxrwx</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">root </span><span class=\"crayon-i\">root</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">18</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Aug</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">30</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">14</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">40</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">S99rc</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">local</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">init</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">d</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">rc</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">local</span></div><div class=\"crayon-line\" id=\"crayon-59f289b608932714490871-15\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0077 seconds] -->\r\n<p>如你所想，目录 <code>/etc/rc1.d</code> 因运行级别 1 的特殊而不同。它包含的符号链接指向非常不同的一套脚本。 同样也要注意到其中一些脚本以 <code>K</code> 开头命名，而另一些与其它运行级别脚本一样以 <code>S</code> 开头命名。这是因为当系统进入单用户模式时， 一些服务需要<strong>停止</strong>。 然而这些 K 开头的符号链接指向了其它级别 S 开头的符号链接的同一文件时， K（kill）表示这个脚本将以指示其停止的参数执行，而不是以启动的参数执行。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f289b608937555478201\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n/etc/rc1.d$ ls -l\r\ntotal 4\r\nlrwxrwxrwx 1 root root  20 Aug 30 14:40 K20kerneloops -&gt; ../init.d/kerneloops\r\nlrwxrwxrwx 1 root root  15 Aug 30 14:40 K20rsync -&gt; ../init.d/rsync\r\nlrwxrwxrwx 1 root root  15 Aug 30 14:40 K20saned -&gt; ../init.d/saned\r\nlrwxrwxrwx 1 root root  23 Aug 30 16:10 K20smartmontools -&gt; ../init.d/smartmontools\r\nlrwxrwxrwx 1 root root  27 Aug 30 14:40 K20speech-dispatcher -&gt; ../init.d/speech-dispatcher\r\n-rw-r--r-- 1 root root 369 Mar 12  2014 README\r\nlrwxrwxrwx 1 root root  19 Aug 30 14:40 S30killprocs -&gt; ../init.d/killprocs\r\nlrwxrwxrwx 1 root root  19 Aug 30 14:40 S70dns-clean -&gt; ../init.d/dns-clean\r\nlrwxrwxrwx 1 root root  18 Aug 30 14:40 S70pppd-dns -&gt; ../init.d/pppd-dns\r\nlrwxrwxrwx 1 root root  16 Aug 30 14:40 S90single -&gt; ../init.d/single\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f289b608937555478201-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f289b608937555478201-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f289b608937555478201-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f289b608937555478201-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f289b608937555478201-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f289b608937555478201-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f289b608937555478201-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f289b608937555478201-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f289b608937555478201-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f289b608937555478201-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f289b608937555478201-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f289b608937555478201-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59f289b608937555478201-13\">13</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f289b608937555478201-1\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">etc</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">rc1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">d</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ls</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f289b608937555478201-2\"><span class=\"crayon-i\">total</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span></div><div class=\"crayon-line\" id=\"crayon-59f289b608937555478201-3\"><span class=\"crayon-i\">lrwxrwxrwx</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">root </span><span class=\"crayon-i\">root</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">20</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Aug</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">30</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">14</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">40</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">K20kerneloops</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">init</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">d</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">kerneloops</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f289b608937555478201-4\"><span class=\"crayon-i\">lrwxrwxrwx</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">root </span><span class=\"crayon-i\">root</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Aug</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">30</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">14</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">40</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">K20rsync</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">init</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">d</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">rsync</span></div><div class=\"crayon-line\" id=\"crayon-59f289b608937555478201-5\"><span class=\"crayon-i\">lrwxrwxrwx</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">root </span><span class=\"crayon-i\">root</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Aug</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">30</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">14</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">40</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">K20saned</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">init</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">d</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">saned</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f289b608937555478201-6\"><span class=\"crayon-i\">lrwxrwxrwx</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">root </span><span class=\"crayon-i\">root</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">23</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Aug</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">30</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">16</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">10</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">K20smartmontools</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">init</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">d</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">smartmontools</span></div><div class=\"crayon-line\" id=\"crayon-59f289b608937555478201-7\"><span class=\"crayon-i\">lrwxrwxrwx</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">root </span><span class=\"crayon-i\">root</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">27</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Aug</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">30</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">14</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">40</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">K20speech</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">dispatcher</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">init</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">d</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">speech</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">dispatcher</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f289b608937555478201-8\"><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rw</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">root </span><span class=\"crayon-i\">root</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">369</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Mar</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">2014</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">README</span></div><div class=\"crayon-line\" id=\"crayon-59f289b608937555478201-9\"><span class=\"crayon-i\">lrwxrwxrwx</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">root </span><span class=\"crayon-i\">root</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">19</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Aug</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">30</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">14</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">40</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">S30killprocs</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">init</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">d</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">killprocs</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f289b608937555478201-10\"><span class=\"crayon-i\">lrwxrwxrwx</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">root </span><span class=\"crayon-i\">root</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">19</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Aug</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">30</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">14</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">40</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">S70dns</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">clean</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">init</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">d</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">dns</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">clean</span></div><div class=\"crayon-line\" id=\"crayon-59f289b608937555478201-11\"><span class=\"crayon-i\">lrwxrwxrwx</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">root </span><span class=\"crayon-i\">root</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">18</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Aug</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">30</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">14</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">40</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">S70pppd</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">dns</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">init</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">d</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">pppd</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">dns</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f289b608937555478201-12\"><span class=\"crayon-i\">lrwxrwxrwx</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">root </span><span class=\"crayon-i\">root</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">16</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Aug</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">30</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">14</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">40</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">S90single</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">init</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">d</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">single</span></div><div class=\"crayon-line\" id=\"crayon-59f289b608937555478201-13\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0061 seconds] -->\r\n<p>你可以改变系统的默认运行级别，尽管这很少被用到。例如，通过修改前文中提到的 <code>/etc/inittab</code> 文件，你能够配置 Debian 系统的默认运行级别为 3 （而不是 2），以下是该文件示例：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f289b60893a619279089\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nid:3:initdefault:\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f289b60893a619279089-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f289b60893a619279089-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f289b60893a619279089-1\"><span class=\"crayon-v\">id</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">3</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">initdefault</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f289b60893a619279089-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>一旦你修改完成并重启系统， <code>runlevel</code> 命令将显示如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f289b60893e605375531\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ runlevel\r\nN 3\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f289b60893e605375531-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f289b60893e605375531-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f289b60893e605375531-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f289b60893e605375531-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">runlevel</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f289b60893e605375531-2\"><span class=\"crayon-i\">N</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span></div><div class=\"crayon-line\" id=\"crayon-59f289b60893e605375531-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>另外一种可选方式，使用 <code>init 3</code> 命令，你也能改变系统运行级别（且无需重启立即生效）， <code>runlevel</code> 命令的输出为：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f289b608941994498133\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ runlevel\r\n2 3\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f289b608941994498133-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f289b608941994498133-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f289b608941994498133-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f289b608941994498133-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">runlevel</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f289b608941994498133-2\"><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span></div><div class=\"crayon-line\" id=\"crayon-59f289b608941994498133-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>当然，除非你修改了系统默认级别的 <code>/etc/rc?.d</code> 目录下的符号链接，使得系统默认运行在一个修改的运行级别之下，否则很少需要通过创建或修改 <code>/etc/inittab</code> 文件改变系统的运行级别。</p>\n<h3 id=\"toc_1\">在 Linux 系统中如何使用运行级别？</h3>\n<p>为了扼要重述在系统中如何使用运行级别，下面有几个关于运行级别的快速问答问题：</p>\n<p><strong>如何查询系统当前的运行级别？</strong></p>\n<p>使用 <code>runlevel</code> 命令。</p>\n<p><strong>如何查看特定运行级别所关联的服务进程？</strong></p>\n<p>查看与该运行级别关联的运行级别开始目录（例如， <code>/etc/rc2.d</code> 对应于运行级别 2）。</p>\n<p><strong>如何查看系统的默认运行级别？</strong></p>\n<p>首先，查看 <code>/etc/inittab</code> 文件是否存在。如果不存在，就执行 <code>runlevel</code> 命令查询，你一般就已经处在该运行级别。</p>\n<p><strong>如何改变系统运行级别？</strong></p>\n<p>用 <code>init</code> 命令（例如 <code>init 3</code>）临时改变运行级别，通过修改或创建 <code>/etc/inittab</code> 文件永久改变其运行级别。</p>\n<p><strong>能改变特定运行级别下运行的服务么？</strong></p>\n<p>当然，通过改变对应的 <code>/etc/rc?.d</code> 目录下的符号连接即可。</p>\n<p><strong>还有一些其他的什么需要考虑？</strong></p>\n<p>当改变系统运行级别时，你应该特别小心，确保不影响到系统上正在运行的服务或者正在使用的用户。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112479\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112479votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112479\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": "  评论", "praise_nums": "1", "url_object_id": "3dd0bd6e615cf2d18c22e1e52fa54c2f", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2016/11/59d49abe8909a122bc2c9aa43b71e3bb.png"], "front_image_path": "full/d3d1a5ad957de059084690efae6fdfaa3527e1c3.jpg", "title": "漫谈传统的 Linux 初始化系统的运行级别"}
{"create_date": "2017/09/14 ", "url": "http://blog.jobbole.com/112473/", "fav_nums": "  收藏", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/snowhere\">一杯哈希不加盐「孙腾浩」</a> 翻译。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://www.vincit.fi/en/blog/software-development-450-words-per-minute/\">Tuukka Ojala</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p><img src=\"http://wx2.sinaimg.cn/mw690/6941baebly1fjj46lxsofj20sg0lc3zw.jpg\"></p>\n<p>我认为你第一次看到我的工作间肯定这样想 —— “总感觉少些什么”。没有显示器和鼠标，却有个人敲打着键盘，不知注视着哪里。</p>\n<p>这就是我，我同事可以证明我没问题。我是位于坦佩雷（芬兰西南部一座城市）的 Vincit 写字楼中的一名软件开发者。我双目失明。这篇文章中我将讲述有关我工作中的事情。</p>\n<h2>你真的什么都看不到吗？</h2>\n<p>准确来说，我觉察到阳光和其他明亮的光线，不过也仅限这些。其实，这对我的工作也并没有什么帮助。</p>\n<h2>你工作内容是什么？</h2>\n<p>和大部分人一样：忙时写代码，闲时和同事吹逼。我做全栈项目，主攻后端。兼职访问顾问 – 或称监管，随你如何称呼。</p>\n<h2>你如何使用电脑？</h2>\n<p>我用的电脑是一台运行 Windows 10 的普通笔记本。是其中的软件让一切变得神奇。我使用一款叫做屏幕阅读器的程序来访问电脑。屏幕阅读器监听屏幕上的变化并通过盲文（需要单独的盲文设备）或合成的声音来展示给用户。这并不是你如今听到的各种智能助理的合成声音。我使用一种机械声音，每分钟能说 450 个单词。相比较而言，英语正常语速每分钟 120-150 个单词。我有一个怪癖：我既说英语也说芬兰语，我用芬兰语合成器读英语，因为老旧的屏幕阅读器在语言之间切换不够智能，所以我习惯这样做。下面是个例子是阅读这个段落，我能听懂。</p>\n<p><a href=\"https://www.vincit.fi/wp-content/uploads/2017/08/mpsample.mp3?_=1\">https://www.vincit.fi/wp-content/uploads/2017/08/mpsample.mp3?_=1</a></p>\n<p>下面是英语合成器发出的声音：</p>\n<p><a href=\"https://www.vincit.fi/wp-content/uploads/2017/08/essample.mp3?_=2\">https://www.vincit.fi/wp-content/uploads/2017/08/essample.mp3?_=2</a></p>\n<p>鼠标对于我来说并不是非常有用，所以我仅仅通过键盘工作。在座的各位应该十分熟悉我用到的命令：方向键和 tab 键控制窗口内的移动，alt+tab 切换窗口等等。屏幕阅读器也有很多自己的快捷键，比如阅读活动窗口的不同区域或开关一些功能特性。</p>\n<p>有趣的是阅读网页和其他格式化文档。你看，屏幕阅读器分块呈现信息。每一块可能是一行，也可能是一个单词、一个字母，亦或是文本的片段。举个例子，我在网页中按向下的方向键，我听到页面的下一行。我并不能像正常人一样用眼睛从屏幕上阅读内容。相反，我听到一块一块的内容，或跳过我不感兴趣的部分。</p>\n<p>语音或盲文并不能描绘出窗口的显示布局。信息以线性方式呈现给我。如果你把网页复制粘贴进记事本，你就能明白我看到的网页是什么样子的。就是剥离大部分格式的多行文本。然而屏幕阅读器可以获取网页上的 HTML 语法，所以我也能知道超链接、标题、表单等等。事实上，如果非复选框元素展示成复选框样式，我并不能知道这是复选框。我之后将写一篇文章详细讲述这些内容，记住我刚刚举的是个“反人类”例子。 （译者注：突然感到自责和羞愧，深深明白了一个道理：不要用各种有含意义的传统标签 hack 布局和样式，也不要因为 css 的强大而懒得使用各种有含义的传统标签。共勉）</p>\n<p>我花费大量时间工作在命令行上。事实上我通常用浏览器和编辑器，很少用其他图形应用程序。相比那些为鼠标用户打造的图形界面，我发现用命令行处理手边的工作更加高效。</p>\n<p>既然我如此热爱命令行，为什么我却要选择 Windows 这个并不以命令行出名的操作系统呢？答案很简单：Windows 是最方便的操作系统。<a href=\"https://www.nvaccess.org/\">NVDA</a>是我所选择的屏幕阅读器，它是开源的并且维护比其他阅读器更频繁。如果上天再我一次机会，我可能会选 Mac 系统，因为我认为它是易用性和功能性平衡的典范。不幸的是 Mac 系统上的屏幕阅读器 <a href=\"https://www.apple.com/accessibility/mac/vision/\">VoiceOver</a> 经历了漫长的发布周期从而被遗忘，并且它的导航模型和我独特的工作方式并不协调。当然这里也有一个 Gnome 桌面上的<a href=\"https://wiki.gnome.org/action/show/Projects/Orca?action=show&amp;redirect=Orca\">屏幕阅读器</a>，虽然用户很少，依然被很好地维护着，不过还有一些不完善的地方和我日常工作不协调。所以，我选择 Windows。由 GNU 诞生的 Git Bash 和其他命令行工具弥补了 Windows 内置命令行的缺陷。</p>\n<h2>你如何写代码？</h2>\n<p>我花费好长时间才明白为什么大家觉得这个问题是个很高深的问题。记得我上面说过一行一行地阅读文本吗？我也是通过这种方式读代码。通常我会跳过无用的行，或仅听半行来获取内容，但当我需要知道完整信息的时候，我不得不像读小说一样读完所有东西。我当然无法阅读整个代码库。这种情况下我会在脑中抽象一部分代码：这个组件输入 x 返回 y，并不用关心细节逻辑。</p>\n<p>这种阅读方式让我和正常同事的工作方式有些区别。举个例子，当代码审查时，我喜欢看原始 diff 输出，并列窗口显示 diff 对我并不适用，而且还容易让人分心。有修改的代码行上用符号 + 和 – 比用不同背景色标注也要好太多，并不是因为我不能获知颜色名字，而是因为在新增的一行中，读“加”这个字比读“带复杂阴影的高亮红色”用更短的时间。（嘿，我说你呢 Gerrit (一款代码审查工具)）</p>\n<p>你或许会认为缩进和其他代码格式和我无关，因为都是基本的视觉问题。并不是这样，正确的缩进对我的帮助和正常开发者一样。当我用盲文（比语音更加高效）读代码时，我像其他正常程序员一样清楚代码结构。当我进入一段有缩进或无缩进的代码时，我也会得到语音提醒。这些信息帮助我在脑中描绘代码结构。事实上我学的第一门语言就是 Python （PHP 不算），它强制使用代码缩进，这对我来说并不是问题。我有众多理由来强烈建议使用整洁统一的代码风格，其中之一就是不要让我的生活变得更加艰难了，好吗。</p>\n<h2>你喜欢哪款编辑器？</h2>\n<p>剧透一下：这个答案并不是以 V 或者 E 开头（我虽然通过命令行用 Vim 来写 git commit 信息和其他备注。我认为我在这场圣战中是中立的）（译者注：Vim 和 Emacs 梗）一年前我认为 Notepad++ 最棒，它是轻量级的做工精细的文本编辑器。然而一年前我还没有接触大规模 Java 项目，当我接触这种项目时，意味着我应该在 Notepad++ 和理智之间做个选择。最后我选择理智，抛弃 Notepad++ 转投 IntelliJ IDEA 的怀抱。从那之后 IntelliJ IDEA 便是我首选编辑器。我曾对各种 IDE 有深深怨念，它们大多数在纯键盘流操作下麻烦又低效。如果我视力没问题，我肯定早就跳到 IDE 阵营了。</p>\n<p>但你可能会问，为什么当初选 Notepad++。还有其他很多更先进的轻量级编辑器，比如 Sublime 或 Atom。原因很简单：屏幕阅读器无法访问它们。Vim 一类的文本编辑器也是如此，我使用的屏幕阅读器对命令行程序的支持有问题，在这些编辑器上无法处理多于 commit 信息的文本。很遗憾，可用性决定了我能够使用的工具。即使我不能高效工作，也不是什么大问题。</p>\n<h2>你编写过前端代码吗？</h2>\n<p>你应该认为前端开发和视觉有关，注定与盲人程序员无缘。基本上是这样。我从来不自己做概念原型，我做都是有界面，需要随后加入功能的项目。</p>\n<p>然而，我也做过 Angular 和 React 工作任务。怎么会这样？如今很多 APP 基于浏览器。举个例子，我曾花费两周时间为一个 Angular APP 增加国际化支持。我并不需要做任何视觉上的改动。</p>\n<p>我发现对于我这类开发者开说，像 Bootstrap 这类的库简直是上天的礼物。正因为栅格系统（Bootstrap的响应式布局解决方案），我可以自己构建一个粗糙的界面。尽管如此，我做的有关界面的改动在呈现给用户之前仍然要有一双眼睛检查。所以，总而言之，我可以在一定程度上做些前端开发，至少不是和表现层太相关。</p>\n<h2>有什么其他没有提到的东西？</h2>\n<p>其实这篇文章有很多东西没有表达出来。正如上文所承诺，我将全力以赴写一篇文章，有关制作易访问网页的艺术，因为一言未尽是我讨厌的事情之一。我不会半途而废的，敬请期待。</p>\n\r\n        \r\n            <blockquote class=\"rewards\">\n        <p><strong>打赏支持我翻译更多好文章，谢谢！</strong></p>\n        <a href=\"#rewardbox\" id=\"rewards-button\" class=\"fancybox\"><span class=\"btn-bluet-blue href-style\"><i class=\"fa fa-jpy\"></i> 打赏译者</span></a>\n    </blockquote>\n\n    <div id=\"rewardbox\">\n        <h4>打赏支持我翻译更多好文章，谢谢！</h4>\n                <p>任选一种支付方式</p>\n                <p>\n                        <img src=\"http://jbcdn2.b0.upaiyun.com/2017/01/5085cce1bd4e144b7d148079a34b20c1.jpg\">\n            \n                            <img src=\"http://jbcdn2.b0.upaiyun.com/2017/01/02b09a29fdb3ab5fe03d4bd1afe95664.jpg\">\n                    </p>\n    </div>\n\n    \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112473\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112473votetotal\">4</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112473\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 4 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/snowhere\">一杯哈希不加盐「孙腾浩」</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/snowhere\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2017/06/47765e50cfb7c4e598e72d893ab4f62f.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            毕业于郑州大学软件工程专业，身为 Java 程序猿却同样热爱着 JavaScript 。为了兴趣而写代码，做自己喜欢做的事。Keep coding ... Stay Cool ...        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/snowhere\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/snowhere/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/snowhere/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 26</a> · <a title=\"我的网站\" target=\"_blank\" href=\"http://snowhere.me/\"><i class=\"fa fa-link\"></i></a> <a title=\"GitHub主页\" target=\"_blank\" href=\"https://github.com/Snowhere/\"><i class=\"fa fa-github\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": 4, "praise_nums": "4", "url_object_id": "6a460eaa67aa7e8ca87d0cb25e5f526a", "front_image_url": ["http://wx2.sinaimg.cn/mw690/6941baebly1fjj46lxsofj20sg0lc3zw.jpg"], "front_image_path": "full/f99add302e9e9474ef727d93109a13d123869a36.jpg", "title": "惊叹！这个盲人程序员是这样写代码的"}
{"create_date": "2017/09/14 ", "url": "http://blog.jobbole.com/112487/", "fav_nums": 10, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://draveness.me/sql-index-intro.html\">Draveness</a>   </div><p>在关系型数据库中设计索引其实并不是复杂的事情，很多开发者都觉得设计索引能够提升数据库的性能，相关的知识一定非常复杂。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/09/e53f2b2cf119db0c59de9f83caa31f5e.jpg\" alt=\"Index-and-Performance\"></p>\n<p>然而这种想法是不正确的，索引其实并不是一个多么高深莫测的东西，只要我们掌握一定的方法，理解索引的实现就能在不需要 DBA 的情况下设计出高效的索引。</p>\n<p>本文会介绍 <a href=\"https://www.amazon.cn/%E5%9B%BE%E4%B9%A6/dp/B00ZH27RH0\">数据库索引设计与优化</a> 中设计索引的一些方法，让各位读者能够快速的在现有的工程中设计出合适的索引。</p>\n<h3 id=\"io\">磁盘 IO</h3>\n<p>一个数据库必须保证其中存储的所有数据都是可以随时读写的，同时因为 MySQL 中所有的数据其实都是以文件的形式存储在磁盘上的，而从磁盘上<strong>随机访问</strong>对应的数据非常耗时，所以数据库程序和操作系统提供了缓冲池和内存以提高数据的访问速度。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/09/3eef1adc99076fce083d3b1beea313fd.jpg\" alt=\"Disk-IO\"></p>\n<p>除此之外，我们还需要知道数据库对数据的读取并不是以行为单位进行的，无论是读取一行还是多行，都会将该行或者多行所在的页全部加载进来，然后再读取对应的数据记录；也就是说，读取所耗费的时间与行数无关，只与页数有关。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/09/61d440834e7684466865619054c05717.jpg\" alt=\"Page-DatabaseBufferPool\"></p>\n<p>在 MySQL 中，页的大小一般为 16KB，不过也可能是 8KB、32KB 或者其他值，这跟 MySQL 的存储引擎对数据的存储方式有很大的关系，文中不会展开介绍，不过<strong>索引或行记录是否在缓存池中极大的影响了访问索引或者数据的成本</strong>。</p>\n<h4 id=\"section\">随机读取</h4>\n<p>数据库等待一个页从磁盘读取到缓存池的所需要的成本巨大的，无论我们是想要读取一个页面上的多条数据还是一条数据，都需要消耗<strong>约</strong> 10ms 左右的时间：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/09/0f07e5811a5dc125cc01482284cd2f3f.jpg\" alt=\"Disk-Random-IO\"></p>\n<p>10ms 的时间在计算领域其实是一个非常巨大的成本，假设我们使用脚本向装了 SSD 的磁盘上顺序写入字节，那么在 10ms 内可以写入大概 3MB 左右的内容，但是数据库程序在 10ms 之内只能将一页的数据加载到数据库缓冲池中，从这里可以看出随机读取的代价是巨大的。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/09/bdeb5251f80438e8d19027231912074a.jpg\" alt=\"Disk-IO-Total-Time\"></p>\n<p>这 10ms 的一次随机读取是按照每秒 50 次的读取计算得到的，其中等待时间为 3ms、磁盘的实际繁忙时间约为 6ms，最终数据页从磁盘传输到缓冲池的时间为 1ms 左右，在对查询进行估算时并不需要准确的知道随机读取的时间，只需要知道估算出的 10ms 就可以了。</p>\n<h4 id=\"section-1\">内存读取</h4>\n<p>如果在数据库的<strong>缓存池</strong>中没有找到对应的数据页，那么会去内存中寻找对应的页面：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/09/249d4599ab96b6adc85b9c01c3682e7e.jpg\" alt=\"Read-from-Memory\"></p>\n<p>当对应的页面存在于内存时，数据库程序就会使用内存中的页，这能够将数据的读取时间降低一个数量级，将 10ms 降低到 1ms；MySQL 在执行读操作时，会先从数据库的缓冲区中读取，如果不存在与缓冲区中就会尝试从内存中加载页面，如果前面的两个步骤都失败了，最后就只能执行随机 IO 从磁盘中获取对应的数据页。</p>\n<h4 id=\"section-2\">顺序读取</h4>\n<p>从磁盘读取数据并不是都要付出很大的代价，当数据库管理程序一次性从磁盘中<strong>顺序</strong>读取大量的数据时，读取的速度会异常的快，大概在 40MB/s 左右。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/09/2312998ad76d8fb341969812487f1de4.jpg\" alt=\"Sequential-Reads-from-Disk\"></p>\n<p>如果一个页面的大小为 4KB，那么 1s 的时间就可以读取 10000 个页，读取一个页面所花费的平均时间就是 0.1ms，相比随机读取的 10ms 已经降低了两个数量级，甚至比内存中读取数据还要快。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/09/9ebb7991b42865054e063cefb1a4347b.jpg\" alt=\"Random-to-Sequentia\"></p>\n<p>数据页面的顺序读取有两个非常重要的优势：</p>\n<ol>\n<li>同时读取多个界面意味着总时间的消耗会大幅度减少，磁盘的吞吐量可以达到 40MB/s；</li>\n<li>数据库管理程序会对一些即将使用的界面进行预读，以减少查询请求的等待和响应时间；</li>\n</ol>\n<h4 id=\"section-3\">小结</h4>\n<p>数据库查询操作的时间大都消耗在从磁盘或者内存中读取数据的过程，由于随机 IO 的代价巨大，如何在一次数据库查询中减少随机 IO 的次数往往能够大幅度的降低查询所耗费的时间提高磁盘的吞吐量。</p>\n<h3 id=\"section-4\">查询过程</h3>\n<p>在上一节中，文章从数据页加载的角度介绍了磁盘 IO 对 MySQL 查询的影响，而在这一节中将介绍 MySQL 查询的执行过程中以及数据库中的数据的特征对最终查询性能的影响。</p>\n<h4 id=\"index-slices\">索引片（Index Slices）</h4>\n<p>索引片其实就是 SQL 查询在执行过程中扫描的一个索引片段，在这个范围中的索引将被顺序扫描，根据索引片包含的列数不同，<a href=\"https://www.amazon.cn/%E5%9B%BE%E4%B9%A6/dp/B00ZH27RH0\">数据库索引设计与优化</a> 书中对将索引分为宽索引和窄索引：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/09/305453471fa87c6a090eb4f92003e759.jpg\" alt=\"Thin-Index-and-Fat-Index\"></p>\n<blockquote><p>主键列 <code>id</code> 在所有的 MySQL 索引中都是一定会存在的。</p></blockquote>\n<p>对于查询 <code>SELECT id, username, age FROM users WHERE username=\"draven\"</code> 来说，(id, username) 就是一个窄索引，因为该索引没有包含存在于 SQL 查询中的 age 列，而 (id, username, age) 就是该查询的一个宽索引了，它<strong>包含这个查询中所需要的全部数据列</strong>。</p>\n<p>宽索引能够避免二次的随机 IO，而窄索引就需要在对索引进行顺序读取之后再根据主键 id 从主键索引中查找对应的数据：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/09/d30e5ece6b40f3019e207a701d2c50ad.jpg\" alt=\"Thin-Index-and-Clustered-Index\"></p>\n<p>对于窄索引，每一个在索引中匹配到的记录行最终都需要执行另外的随机读取从聚集索引中获得剩余的数据，如果结果集非常大，那么就会导致随机读取的次数过多进而影响性能。</p>\n<h4 id=\"section-5\">过滤因子</h4>\n<p>从上一小节对索引片的介绍，我们可以看到影响 SQL 查询的除了查询本身还与数据库表中的数据特征有关，如果使用的是窄索引那么对表的随机访问就不可避免，在这时如何让索引片变『薄』就是我们需要做的了。</p>\n<p>一个 SQL 查询扫描的索引片大小其实是由过滤因子决定的，也就是满足查询条件的记录行数所占的比例：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/09/f4149e33e1dccc5702864a629b300bf5.jpg\" alt=\"Filter-Facto\"></p>\n<p>对于 users 表来说，sex=”male” 就不是一个好的过滤因子，它会选择整张表中一半的数据，所以<strong>在一般情况下</strong>我们最好不要使用 sex 列作为整个索引的第一列；而 name=”draven” 的使用就可以得到一个比较好的过滤因子了，它的使用能过滤整个数据表中 99.9% 的数据；当然我们也可以将这三个过滤进行组合，创建一个新的索引 (name, age, sex) 并同时使用这三列作为过滤条件：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/09/f0e821466f63037631b10ca9bce799cb.jpg\" alt=\"Combined-Filter-Facto\"></p>\n<blockquote><p>当三个过滤条件都是等值谓词时，几个索引列的顺序其实是无所谓的，索引列的顺序不会影响同一个 SQL 语句对索引的选择，也就是索引 (name, age, sex) 和 (age, sex, name) 对于上图中的条件来说是完全一样的，这两个索引在执行查询时都有着完全相同的效果。</p></blockquote>\n<p>组合条件的过滤因子就可以达到十万分之 6 了，如果整张表中有 10w 行数据，也只需要在扫描薄索引片后进行 6 次随机读取，这种直接使用乘积来计算组合条件的过滤因子其实有一个比较重要的问题：列与列之间不应该有太强的相关性，如果不同的列之间有相关性，那么得到的结果就会比直接乘积得出的结果大一些，比如：所在的城市和邮政编码就有非常强的相关性，两者的过滤因子直接相乘其实与实际的过滤因子会有很大的偏差，不过这在多数情况下都不是太大的问题。</p>\n<p>对于一张表中的同一个列，不同的值也会有不同的过滤因子，这也就造成了同一列的不同值最终的查询性能也会有很大差别：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/09/3a84a867b9d385867fa3e462cda4f376.jpg\" alt=\"Same-Columns-Filter-Facto\"></p>\n<p>当我们评估一个索引是否合适时，需要考虑极端情况下查询语句的性能，比如 0% 或者 50% 等；最差的输入往往意味着最差的性能，在平均情况下表现良好的 SQL 语句在极端的输入下可能就完全无法正常工作，这也是在设计索引时需要注意的问题。</p>\n<p>总而言之，需要扫描的索引片的大小对查询性能的影响至关重要，而扫描的索引记录的数量，就是总行数与组合条件的过滤因子的乘积，索引片的大小最终也决定了从表中读取数据所需要的时间。</p>\n<h4 id=\"section-6\">匹配列与过滤列</h4>\n<p>假设在 users 表中有 name、age 和 (name, sex, age) 三个辅助索引；当 WHERE 条件中存在类似 age = 21 或者 name = “draven” 这种<strong>等值谓词</strong>时，它们都会成为匹配列（Matching Column）用于选择索引树中的数据行，但是当我们使用以下查询时：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f27d4741790888272564\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSELECT * FROM users\r\nWHERE name = \"draven\" AND sex = \"male\" AND age &gt; 20;\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f27d4741790888272564-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d4741790888272564-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f27d4741790888272564-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f27d4741790888272564-1\"><span class=\"crayon-e \">SELECT *</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">FROM </span><span class=\"crayon-e\">users</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d4741790888272564-2\"><span class=\"crayon-e\">WHERE </span><span class=\"crayon-v\">name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"draven\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">AND</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sex</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"male\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">AND</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">age</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f27d4741790888272564-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>虽然我们有 (name, sex, age) 索引包含了上述查询条件中的全部列，但是在这里只有 name 和 sex 两列才是匹配列，MySQL 在执行上述查询时，会选择 name 和 sex 作为匹配列，扫描所有满足条件的数据行，然后将 age 当做过滤列（Filtering Column）：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/09/98f9cda753228126ca4d454edfe18386.jpg\" alt=\"Match-Columns-Filter-Columns\"></p>\n<p>过滤列虽然不能够减少索引片的大小，但是能够减少从表中随机读取数据的次数，所以在索引中也扮演着非常重要的角色。</p>\n<h3 id=\"section-7\">索引的设计</h3>\n<p>作者相信文章前面的内容已经为索引的设计提供了充足的理论基础和知识，从总体来看如何减少随机读取的次数是设计索引时需要重视的最重要的问题，在这一节中，我们将介绍 <a href=\"https://www.amazon.cn/%E5%9B%BE%E4%B9%A6/dp/B00ZH27RH0\">数据库索引设计与优化</a> 一书中归纳出的设计最佳索引的方法。</p>\n<h4 id=\"section-8\">三星索引</h4>\n<p>三星索引是对于一个查询语句可能的最好索引，如果一个查询语句的索引是三星索引，那么它只需要进行<strong>一次磁盘的随机读及一个窄索引片的顺序扫描</strong>就可以得到全部的结果集；因此其查询的响应时间比普通的索引会少几个数量级；根据书中对三星索引的定义，我们可以理解为主键索引对于 <code>WHERE id = 1</code> 就是一个特殊的三星索引，我们只需要对主键索引树进行一次索引访问并且顺序读取一条数据记录查询就结束了。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/09/51b6a983ef0d571b7821f1c88738cf2f.jpg\" alt=\"Three-Star-Index\"></p>\n<p>为了满足三星索引中的三颗星，我们分别需要做以下几件事情：</p>\n<ol>\n<li>第一颗星需要取出所有等值谓词中的列，作为索引开头的最开始的列（任意顺序）；</li>\n<li>第二颗星需要将 ORDER BY 列加入索引中；</li>\n<li>第三颗星需要将查询语句剩余的列全部加入到索引中；</li>\n</ol>\n<blockquote><p>三星索引的概念和星级的给定来源于 <a href=\"https://www.amazon.cn/%E5%9B%BE%E4%B9%A6/dp/B00ZH27RH0\">数据库索引设计与优化</a> 书中第四章三星索引一节。</p></blockquote>\n<p>如果对于一个查询语句我们依照上述的三个条件进行设计，那么就可以得到该查询的三星索引，这三颗星中的最后一颗星往往都是最容易获得的，满足第三颗星的索引也就是上面提到的宽索引，能够避免大量的随机 IO，如果我们遵循这个顺序为一个 SQL 查询设计索引那么我们就可以得到一个完美的索引了；这三颗星的获得其实也没有表面上这么简单，每一颗星都有自己的意义：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/09/8acc115991e8b8f008f9b0a768092dbd.jpg\" alt=\"Behind-Three-Star-Index\"></p>\n<ol>\n<li>第一颗星不只是将等值谓词的列加入索引，它的作用是减少索引片的大小以减少需要扫描的数据行；</li>\n<li>第二颗星用于避免排序，减少磁盘 IO 和内存的使用；</li>\n<li>第三颗星用于避免每一个索引对应的数据行都需要进行一次随机 IO 从聚集索引中读取剩余的数据；</li>\n</ol>\n<p>在实际场景中，问题往往没有这么简单，我们虽然可以总能够通过宽索引避免大量的随机访问，但是在一些复杂的查询中我们无法同时获得第一颗星和第二颗星。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f27d47417a0458049497\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSELECT id, name, age FROM users\r\nWHERE age BETWEEN 18 AND 21\r\n  AND city = \"Beijing\"\r\nORDER BY name;\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f27d47417a0458049497-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d47417a0458049497-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f27d47417a0458049497-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d47417a0458049497-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f27d47417a0458049497-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f27d47417a0458049497-1\"><span class=\"crayon-e\">SELECT </span><span class=\"crayon-v\">id</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">age </span><span class=\"crayon-e\">FROM </span><span class=\"crayon-e\">users</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d47417a0458049497-2\"><span class=\"crayon-e\">WHERE </span><span class=\"crayon-e\">age </span><span class=\"crayon-i\">BETWEEN</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">AND</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">21</span></div><div class=\"crayon-line\" id=\"crayon-59f27d47417a0458049497-3\"><span class=\"crayon-h\">  </span><span class=\"crayon-st\">AND</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">city</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Beijing\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d47417a0458049497-4\"><span class=\"crayon-e\">ORDER </span><span class=\"crayon-e\">BY </span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f27d47417a0458049497-5\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>在上述查询中，我们总可以通过增加索引中的列以获得第三颗星，但是如果我们想要获得第一颗星就需要最小化索引片的大小，这时索引的前缀必须为 (city, age)，在这时再想获得第三颗星就不可能了，哪怕在 age 的后面添加索引列 name，也会因为 name 在范围索引列 age 后面必须进行一次排序操作，最终得到的索引就是 (city, age, name, id)：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/09/0623c023856da52e860cca75c59198a4.jpg\" alt=\"Different-Stars-Index\"></p>\n<p>如果我们需要在内存中避免排序的话，就需要交换 age 和 name 的位置了，在这时就可以得到索引 (city, name, age, id)，当一个 SQL 查询中<strong>同时拥有范围谓词和 ORDER BY 时</strong>，无论如何我们都是没有办法获得一个三星索引的，我们能够做的就是在这两者之间做出选择，是牺牲第一颗星还是第二颗星。</p>\n<p>总而言之，在设计单表的索引时，首先把查询中所有的<strong>等值谓词全部取出</strong>以任意顺序放在索引最前面，在这时，如果索引中同时存在范围索引和 ORDER BY 就需要权衡利弊了，希望最小化扫描的索引片厚度时，应该将<strong>过滤因子最小的范围索引列</strong>加入索引，如果希望避免排序就选择 <strong>ORDER BY 中的全部列</strong>，在这之后就只需要将查询中<strong>剩余的全部列</strong>加入索引了，通过这种固定的方法和逻辑就可以最快地获得一个查询语句的二星或者三星索引了。</p>\n<h3 id=\"section-9\">总结</h3>\n<p>在单表上对索引进行设计其实还是非常容易的，只需要遵循固定的套路就能设计出一个理想的三星索引，在这里强烈推荐 <a href=\"https://www.amazon.cn/%E5%9B%BE%E4%B9%A6/dp/B00ZH27RH0\">数据库索引设计与优化</a> 这本书籍，其中包含了大量与索引设计与优化的相关内容；在之后的文章中读者也会分析介绍书中提供的几种估算方法，来帮助我们通过预估问题设计出更高效的索引。</p>\n<h2 id=\"reference\">Reference</h2>\n<ul>\n<li><a href=\"https://www.amazon.cn/%E5%9B%BE%E4%B9%A6/dp/B00ZH27RH0\">数据库索引设计与优化</a></li>\n<li><a href=\"https://dev.mysql.com/doc/refman/5.7/en/innodb-file-space.html\">File Space Management</a></li>\n<li><a href=\"https://www.youtube.com/watch?v=9eMWG3fwiEU\">Inside of Hard Drive – YouTube</a></li>\n<li><a href=\"https://www.youtube.com/watch?v=4iaxOUYalJU\">Hard Disk Working – How does a hard disk work – Hard Drive – YouTube</a></li>\n</ul>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112487\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112487votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112487\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 10 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": "  评论", "praise_nums": "2", "url_object_id": "eb3b137648fe2b84ea99ef352615cc1a", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2015/11/e78e36715813f49e9e62fe0c6050075c.png"], "front_image_path": "full/35011d6168be00e949624c665041dc724e3ad786.jpg", "title": "MySQL 索引设计概要"}
{"create_date": "2017/09/16 ", "url": "http://blog.jobbole.com/112499/", "fav_nums": 3, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/hanxiaomax\">艾凌风</a> 翻译。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://stackoverflow.blog/2017/09/14/python-growing-quickly/?cb=1\">stackoverflow</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>【伯乐在线导读】：根据 Stack Overflow 最近公布的报告，基于 SO 上不同问题帖的访问量统计，Python 可以说是增长最快的主流编程语言。Python 也是高收入国家访客最爱浏览的标签。一起看看 SO 数据科学家 David Robinson 的分析。</p>\n<p>为什么 Python 增长的这么快？它有很多的用途，从 Web 开发到数据科学，再到 DevOps，而且你要知道，现在有越来越多的应用是使用 Python 开发的。我是一个用 R 语言的数据科学家，所以我自然很想知道，在我这个领域，Python 已经增长到了什么程度。还有哪些公司和组织最喜欢用 Python。</p>\n<p>我们分析得出了以下两个结论。首先，快速增长的 Python 主要是因为数据科学、机器学习以及学术研究。这一点可以从 pandas 软件包的增长上看出，pandas 已经成为增长最快的与 Python 相关的标签了。至于哪些行业在使用Python，我们发现如下行业对其最为关注，比如电子、制造业、软件、政务，尤其是高校。但是，Python 在各个行业的增长几乎是差不多的。这也恰好说明了，数据科学和机器学习对于各行各业来说，变得越来越常见，而且 Python 在这两个领域已经成为了最为普遍的选择。</p>\n<p>与之前一样，本文的分析也只针对世界银行所公布的高收入国家进行。</p>\n<h1>Python能够做哪些工作？</h1>\n<p>Python 是一个用途广泛的语言，比如说web开发和数据科学。我们是如何理清Python在这些领域的增长的呢？</p>\n<p>每个领域都有一些比较著名的库，我们可以研究一下这些库所对应标签的访问量。我们可以比较 web 开发框架 Django 和 Flask 以及数据科学领域的 NumPy，matplotlib 和 pandas （你可以使用 Stack Overflow Trends 来比较某个问题被问到的比率，而不是仅仅是访问量）</p>\n<p><img class=\"alignnone size-large wp-image-7814\" src=\"https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/related_tags_over_time-1-1024x1024.png\" sizes=\"(max-width: 1024px) 100vw, 1024px\" srcset=\"https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/related_tags_over_time-1-1024x1024.png 1024w , https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/related_tags_over_time-1-150x150.png 150w , https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/related_tags_over_time-1-300x300.png 300w , https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/related_tags_over_time-1-768x768.png 768w , https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/related_tags_over_time-1-200x200.png 200w , https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/related_tags_over_time-1-400x400.png 400w , https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/related_tags_over_time-1-600x600.png 600w , https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/related_tags_over_time-1-800x800.png 800w , https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/related_tags_over_time-1-1000x1000.png 1000w , https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/related_tags_over_time-1-1200x1200.png 1200w \" alt=\"\" width=\"1024\" height=\"1024\"></p>\n<p>对于来自高收入国家的访问量，padnas 是增长最快的Python软件包：它于2011年问世，而现在，Stack Overflow 中有 1％ 的问题都是关于它的。关于 numpy 和 matplotlib 的问题也在不断增长。与之相对的是，与 Django 相关问题的增长比较平缓，Flask 虽然有所增长，但仍旧比较小众。这表明，大多数 Python 问题的的增长主要还得归功于数据科学，而不是 Web 开发。</p>\n<p>但是，这只是一方面，因为它只能测量常用的 Python 库。Python 在系统管理员和 DevOps 工程师中也非常的流行，他们会同时访问Linux，Bash 和 Docker 等领域的问题。同样，很多 Python web 应用并不是基于 Django 或者 Flask 的，这些开发者很可能去访问 JavaScript、HTML 和 CSS ，而我们不能简单的计算 Linux、bash、javascript 这些标签的增长并且假定它们和Python相关。因此，我们想要计算一下，与 Python 标签一起访问的标签有哪些。</p>\n<p>我们仅考虑今夏（2017年 6-8 月期间）的访问量，这样做可以减小学生们带来的流量影响，专注于最近的流量数据，同时还可以减少计算量。此外，我们仅考虑注册用户，且该用户在这段时间内应该至少访问过50个问题。我们基于两点判断一个用户是Python使用者：第一，他最多访问的标签是Python，第二，Python问题在他浏览的所有问题中，占比至少要达到20%。</p>\n<p><strong>浏览Python标签的人，通常还会浏览什么标签呢？</strong></p>\n<p><img class=\"alignnone size-large wp-image-7815\" src=\"https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/common_other_tags-1-1024x1024.png\" sizes=\"(max-width: 1024px) 100vw, 1024px\" srcset=\"https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/common_other_tags-1-1024x1024.png 1024w , https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/common_other_tags-1-150x150.png 150w , https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/common_other_tags-1-300x300.png 300w , https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/common_other_tags-1-768x768.png 768w , https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/common_other_tags-1-200x200.png 200w , https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/common_other_tags-1-400x400.png 400w , https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/common_other_tags-1-600x600.png 600w , https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/common_other_tags-1-800x800.png 800w , https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/common_other_tags-1-1000x1000.png 1000w , https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/common_other_tags-1-1200x1200.png 1200w \" alt=\"\" width=\"1024\" height=\"1024\"></p>\n<p>对于一个 Python 开发者来说，访问最多的标签是 Pandas（优势非常明显），这点我们丝毫不感到意外。访问量第二多的标签是JavaScript，这些流量代表了使用 Python 做 Web 开发的程序员。这证实了我们的猜想：我们应该考虑的是与Python标签一起访问的那些标签，而不仅仅是与 Python 相关的标签的增长（这两者是有区别的）。</p>\n<p>我们还能看到其他的一些“技术簇”（“clusters” of technologies）。这些聚在一起的标签，表现出了一定的相关性，借此我们可以分析出它们之间的关系：比如说Python程序员是不是更加倾向于访问某些特定的标签。通过过滤出一组具有较高的皮尔森相关系数（ Pearson correlation）的标签，我们可以在图表中看到三组关系：</p>\n<p><img class=\"alignnone size-large wp-image-7816\" src=\"https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/tag_network_graph-1-1024x1024.png\" sizes=\"(max-width: 1024px) 100vw, 1024px\" srcset=\"https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/tag_network_graph-1-1024x1024.png 1024w , https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/tag_network_graph-1-150x150.png 150w , https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/tag_network_graph-1-300x300.png 300w , https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/tag_network_graph-1-768x768.png 768w , https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/tag_network_graph-1-200x200.png 200w , https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/tag_network_graph-1-400x400.png 400w , https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/tag_network_graph-1-600x600.png 600w , https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/tag_network_graph-1-800x800.png 800w , https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/tag_network_graph-1-1000x1000.png 1000w , https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/tag_network_graph-1-1200x1200.png 1200w \" alt=\"\" width=\"1024\" height=\"1024\"></p>\n<p>我们可以看到一些较大的“技术簇”，它表明了Python可以解决的一类问题。在图片的中上部分我们可以看到有关数据科学和机器学习相关的内容：有pandas，NumPy和Matplotlib，并且你可以发现它们和R语言，Keras以及TensorFlow息息相关。它下面的一个“技术簇”表现了有关web开发领域的一些关系，这里有JavaScript, HTML, CSS, Django, Flask 和 JQuery。另外还有两个“技术簇”，左边是与系统管理／DevOps相关的（以linux和bash为中心），右边是与数据工程相关的（包括Spark, Hadoop, 和 Scala）</p>\n<h2>话题的增长</h2>\n<p>我们发现，Python相关的访问流量可以被归纳为一些特定的话题。这使得我们可以获知，Python访问量的增长，与哪些话题息息相关。</p>\n<p>想象一下，我们正在研究一个用户的历史纪录并发现Python是他最常访问的标签。我们怎么才能进一步判断出这个用户的细分属性呢？是web开发者？数据科学家？系统管理员？还是其他角色？为了达成这一目标，我们还需要去研究他访问量第二多的标签，第三多的标签，以此类推。沿着这条路走下去，最终我们会在上述“技术簇”模型中，找到属于这位程序员的位置。</p>\n<p>因此，我们提出了一种简单的方法，通过对以下九个标签的访问统计 ，我们将某个用户归类到某个话题中。</p>\n<ul>\n<li><strong>数据科学</strong>：Pandas, NumPy 或 Matplotlib</li>\n<li><strong>Web 开发者</strong>：JavaScript, Django, HTML</li>\n<li><strong>系统管理员／DevOps</strong>：Linux, Bash 或 Windows.</li>\n<li><strong>无法归类</strong>：上述 9 个标签的访问量，没有任何一个能够占据该用户5%以上的流量。</li>\n</ul>\n<p>虽说并不是特别精确，但是该方法可以让我们快速的估计出每个领域对Python增长的影响力。我们也尝试使用了更加严谨的计算手段，比如说潜在狄利克雷分布（Latent Dirichlet Allocation），得到的结果是相似的。</p>\n<p><strong>上述哪种类别的Python开发者越来越常见了呢？</strong></p>\n<p>考虑到我们现在主要研究的是用户而不是问题，我们首先为您展示Stack Overflow全体注册用户访问上述话题的比例变化趋势（不论其是否访问了Python话题）</p>\n<p><img class=\"alignnone size-large wp-image-7817\" src=\"https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/user_categories_plot-1-1024x731.png\" sizes=\"(max-width: 1024px) 100vw, 1024px\" srcset=\"https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/user_categories_plot-1-1024x731.png 1024w , https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/user_categories_plot-1-300x214.png 300w , https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/user_categories_plot-1-768x549.png 768w , https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/user_categories_plot-1-280x200.png 280w , https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/user_categories_plot-1-560x400.png 560w , https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/user_categories_plot-1-840x600.png 840w , https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/user_categories_plot-1-1120x800.png 1120w , https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/user_categories_plot-1-1400x1000.png 1400w \" alt=\"\" width=\"1024\" height=\"731\"></p>\n<p>我们可以看到，Web开发和系统管理员这两大类在过去的三年中增长平缓，但是Python程序员访问数据科学相关技术的占比却飞速增长。这就说明，Python的流行主要还是由数据科学以及机器学习驱动的。</p>\n<p>通过计算Python程序员在2016和2017两年中访问某个标签点流量，我们还可以研究一下每个单独标签的增长水平。比方说，可能出现的情况是：Javascript标签的流量总体平稳，但若仅考虑Python程序员对此标签的访问，Javascript标签的访问占比可能会下降。当我们计算出每个标签的增长速率后，我们可以在网络图表中展现出某个话题的增长或萎缩。</p>\n<p><img class=\"alignnone size-large wp-image-7818\" src=\"https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/tag_network_graph_color-1-1024x1024.png\" sizes=\"(max-width: 1024px) 100vw, 1024px\" srcset=\"https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/tag_network_graph_color-1-1024x1024.png 1024w , https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/tag_network_graph_color-1-150x150.png 150w , https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/tag_network_graph_color-1-300x300.png 300w , https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/tag_network_graph_color-1-768x768.png 768w , https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/tag_network_graph_color-1-200x200.png 200w , https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/tag_network_graph_color-1-400x400.png 400w , https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/tag_network_graph_color-1-600x600.png 600w , https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/tag_network_graph_color-1-800x800.png 800w , https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/tag_network_graph_color-1-1000x1000.png 1000w , https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/tag_network_graph_color-1-1200x1200.png 1200w \" alt=\"\" width=\"1024\" height=\"1024\"></p>\n<p>这些工作有利于证明我们的猜想：Python的增长主要和数据科学以及机器学习相关，图表中大多数的技术簇都在向橙色演变，这说明这些标签开始成为Python生态系统的主角了。</p>\n<h2>来自工业界的数据</h2>\n<p>理解Python的增长还有一个途径，那就是考察一下访问它的流量都来自哪些类型的公司。</p>\n<p>我们仅关注Python增长速度最为显著的两个国家：美国和英国。在这俩国家中，我们可以将流量按照行业归类（就像我们对比AWS和Azure一样）</p>\n<p><img class=\"alignnone size-large wp-image-7819\" src=\"https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/by_industry_graph-1-1024x1024.png\" sizes=\"(max-width: 1024px) 100vw, 1024px\" srcset=\"https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/by_industry_graph-1-1024x1024.png 1024w , https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/by_industry_graph-1-150x150.png 150w , https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/by_industry_graph-1-300x300.png 300w , https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/by_industry_graph-1-768x768.png 768w , https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/by_industry_graph-1-200x200.png 200w , https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/by_industry_graph-1-400x400.png 400w , https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/by_industry_graph-1-600x600.png 600w , https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/by_industry_graph-1-800x800.png 800w , https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/by_industry_graph-1-1000x1000.png 1000w , https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/by_industry_graph-1-1200x1200.png 1200w \" alt=\"\" width=\"1024\" height=\"1024\"></p>\n<p>访问Python最多的是学术界（优势明显），包括各类科研院校。是因为为本科生开了Python课么？</p>\n<p>可能有这方面的原因，但绝不是全部的原因。在上一篇文章中我们看到，Python的流量在夏季的时候也很多，不仅仅是春秋两季。比如，Python和Java是高校最常访问的标签，我们可以看出两者的季节性变化是不同的。</p>\n<p><img class=\"alignnone size-large wp-image-7820\" src=\"https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/percent_academic_by_month_plot-1-1024x1024.png\" sizes=\"(max-width: 1024px) 100vw, 1024px\" srcset=\"https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/percent_academic_by_month_plot-1-1024x1024.png 1024w , https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/percent_academic_by_month_plot-1-150x150.png 150w , https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/percent_academic_by_month_plot-1-300x300.png 300w , https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/percent_academic_by_month_plot-1-768x768.png 768w , https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/percent_academic_by_month_plot-1-200x200.png 200w , https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/percent_academic_by_month_plot-1-400x400.png 400w , https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/percent_academic_by_month_plot-1-600x600.png 600w , https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/percent_academic_by_month_plot-1-800x800.png 800w , https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/percent_academic_by_month_plot-1-1000x1000.png 1000w , https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/percent_academic_by_month_plot-1-1200x1200.png 1200w \" alt=\"\" width=\"1024\" height=\"1024\"></p>\n<p>我们可以看到，Java在夏季访问量下降的非常多，因为Java是最常见的本科课程。与之相对的是，Python在夏季流量的占比非常高。来自高校的Python的高访问量主要是来自科研人员，他们整年都在工作。这也为我们的猜想提供了更多的证据，Python的增长主要是因为它强大的科学计算能力和数据分析能力。</p>\n<p>至于其他行业，我们发现Python在政府部门非常流行，增长迅速。同时，Python在电子和制造业也被广泛使用。我对这些行业不太了解，很想了解它们是如何使用Python的。在零售业和保险业，Python还不是主流，一些研究表明，Java在这些行业仍然占据统治地位。</p>\n<p><strong>本文主要研究的是Python的增长。那么，Python在某个行业的增长速度，是否明显高于其他行业呢？</strong></p>\n<p><img class=\"alignnone size-large wp-image-7821\" src=\"https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/industry_growth_plot-1-1024x1024.png\" sizes=\"(max-width: 1024px) 100vw, 1024px\" srcset=\"https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/industry_growth_plot-1-1024x1024.png 1024w , https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/industry_growth_plot-1-150x150.png 150w , https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/industry_growth_plot-1-300x300.png 300w , https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/industry_growth_plot-1-768x768.png 768w , https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/industry_growth_plot-1-200x200.png 200w , https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/industry_growth_plot-1-400x400.png 400w , https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/industry_growth_plot-1-600x600.png 600w , https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/industry_growth_plot-1-800x800.png 800w , https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/industry_growth_plot-1-1000x1000.png 1000w , https://zgab33vy595fw5zq-zippykid.netdna-ssl.com/wp-content/uploads/2017/09/industry_growth_plot-1-1200x1200.png 1200w \" alt=\"\" width=\"1024\" height=\"1024\"></p>\n<p>过去一年里，Python在各行业的增长几乎是差不多的，至少在英美两国是这样。各个行业访问Python的流量增长了2-3个百分点（对于原本使用Python不多的行业，这样的增长是非常显著的，比如之前提到的保险和零售业）</p>\n<p>在大部分行业中，Java仍然是最多访问的标签（2017年截止到目前的最新数据），但是Python进步明显。比如，在金融领域（该领域是SO站点访问量占比较大的行业之一），Python的访问量从2016年排名第四升至2017年的排名第二。</p>\n<h2>结论</h2>\n<p>作为一个数据科学家，我以前使用 Python 但是现在用 R 语言工作，这些研究是否会让我重回 Python 的怀抱？</p>\n<p>我并不这样认为，一方面，R 语言增长的同样很快；在上一篇文章里面我们可以看到，R 语言是增长速度第二快的编程语言，仅次于Python。我更倾向于使用 R 语言进行数据分析，这和它的流行度并没有关系。（我准备写一篇个人博客，讲讲我为何从 Python 迁移到R，为何两种语言我都喜欢但却不愿意重回 Python 的怀抱）</p>\n<p>不论如何，数据科学是一个令人激动，增长迅速的领域，这一领域空间很大，还能容得下很多语言，我鼓励开发者们在他们职业生涯的早期应该考虑去学习一些数据科学的技能。数据科学是软件开发生态系统中增长最为迅速的领域，并且越来越多的渗透到各行各业中。</p>\n<h3>SO 原文的读者评论精选：</h3>\n<p>onemerlin ： 作者对Python在电子和制造业的增长有兴趣，我是一个嵌入式老兵，我来给大家介绍一下。在电子行业，以前测试工具都是C/C++/Java写的，和脚本语言比起来，维护它们代价太大，有了Python，我们的硬件工程师只需要借助一些 I/O库就可以快速的编写一些脚本了。此外，以前用于布线和仿真的CAD软件都适用 TCL 编程，和 Python 语言相比，TCL太反人类了。</p>\n<p>Robert Mennell： 我很好奇，如果说一个人使用Python是为了它和C语言交互的能力，为什么不用NodeJs呢（不知道还可以用NodeJs来封装么？）我见过很多优秀的NodeJs程序员，和C++程序员合作，使用javascrip进行硬件交互。这些人都晋升的比较快，没时间访问stack overflow，相反，那些不知道Nodejs可以做这些事情的科研人员才老喜欢到Stack Overflow搜搜搜。</p>\n<p>jdenvir ： 我是一个数学家、程序员，工作是一个生物医学家。生物和生物医学最近一二十年向着计算方向发展，我必须要教那些20几岁的博士去学习编程，我是一个Java程序员，但是Java不适合这些初学者，R语言感觉有点怪，除非你是个统计学家。Python正好弥补了这些，容易上手，足够强大可以去帮助我们研究真正的科学。</p>\n<p>Mike ： “为什么Python（蟒蛇）增长的这么快？”“我不晓得，不过我建议你打电话给虫害管理机构，等它们把你吞掉了就来不及了”</p>\n<p>（Mike，你是Reddit派来的逗比么？）</p>\n\r\n        \r\n            <blockquote class=\"rewards\">\n        <p><strong>打赏支持我翻译更多好文章，谢谢！</strong></p>\n        <a href=\"#rewardbox\" id=\"rewards-button\" class=\"fancybox\"><span class=\"btn-bluet-blue href-style\"><i class=\"fa fa-jpy\"></i> 打赏译者</span></a>\n    </blockquote>\n\n    <div id=\"rewardbox\">\n        <h4>打赏支持我翻译更多好文章，谢谢！</h4>\n                <p>任选一种支付方式</p>\n                <p>\n                        <img src=\"http://jbcdn2.b0.upaiyun.com/2016/05/d3704dca07a3c6ce19c14a9762a0d776.jpg\">\n            \n                            <img src=\"http://www.jobbole.com/wp-content/uploads/2016/03/d8aa159efcd108a908cd3d6ab74b8f5f.jpg\">\n                    </p>\n    </div>\n\n    \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112499\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112499votetotal\">5</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112499\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 3 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 2 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/hanxiaomax\">艾凌风</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/hanxiaomax\">\r\n\t\t\t<img src=\"http://www.jobbole.com/wp-content/uploads/2015/10/bb74ca97c7e8b5a21a24f0b5bbc519c3.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            初入职场小码农;翻译组的勤务员;C/Python/在线教育/英文翻译        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/hanxiaomax\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/hanxiaomax/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/hanxiaomax/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 76</a> · <a title=\"我的网站\" target=\"_blank\" href=\"http://hanxiaomax.github.io\"><i class=\"fa fa-link\"></i></a> <a title=\"微博主页\" target=\"_blank\" href=\"http://www.weibo.com/smilingly1989\"><i class=\"fa fa-weibo\"></i></a> <a title=\"GitHub主页\" target=\"_blank\" href=\"https://github.com/hanxiaomax\"><i class=\"fa fa-github\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": 2, "praise_nums": "5", "url_object_id": "44b1416999d77262f2e24ed9de2c5763", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2015/02/edecceebedd0d04aa17bccba430ddcaf.jpg"], "front_image_path": "full/a6d031713da6a85b0c6d6390db2c13c7de0b75fd.jpg", "title": "为什么 Python 增长如此之快？"}
{"create_date": "2017/09/07 ", "url": "http://blog.jobbole.com/112375/", "fav_nums": 2, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/zhj318\">飞哥的咖啡</a> 翻译，<a href=\"http://www.jobbole.com/members/young605867996\">Lada</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://dev.to/tkaczanowski/explaining-programming-to-6-years-old-kids\">Tomek Kaczanowski</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>任务：<strong>向一组六岁的孩子解释你的工作（我自己的女儿也在其中）。</strong></p>\n<p>难度等级：高。</p>\n<p><img src=\"http://wx3.sinaimg.cn/mw690/6941baebly1fjb5w7x6khj208406imx4.jpg\"></p>\n<p>关于这个任务/主题，之前网上已有许多人分享了他们对这种“讲座”的想法，你可以在 Stack Overflow 上找到一些非常有趣的例子（例如<a href=\"http://stackoverflow.com/questions/2455786/career-day-in-kindergarten-how-to-demonstrate-programming-in-20-minutes\">这里</a>）。其中许多人的想法是关于<strong>计算机是多么愚蠢</strong>，因为要取得成功，你需要非常准确地告诉它做事的方法和规律。我保证这样很有趣，但我也很怀疑，过后孩子们能对编程有什么了解。</p>\n<p>一个成功的演讲在我心里应该是这样的：</p>\n<ul>\n<li><strong>让他们通过提问和画画来持续参与其中。</strong>我在谈话期间画下的原画（白板纸）相当大。顺便一提，画画是一个能让年轻观众参与进来的好方法（他们玩得很开心，嘲笑代表程序员的稻草人，或者指出<span id=\"0KSFindDIV\" class=\"KSFIND_CLASS\">粉红猪小妹</span>（Peppa Pig）长得不是这样的等等）。我没有原始图纸（忘了拍照），但我又画了一次，让你看到这个想法。</li>\n<li><strong>所有演讲的内容要基于他们已知的事物</strong>（比如：YouTube、笔记本、平板、DVD）。现在每个孩子都在 YouTube 上观看卡通片，在平板上玩游戏，看到爸妈在笔记本上工作。他们也知道电影是保存在 CD/DVD 上的，以及（在涉及游戏和电影时）智能手机和平板非常相似。</li>\n</ul>\n<p>我从一个最基本的问题开始，“<strong>谁知道程序员是做什么的？</strong>”我知道他们昨天讨论过这个问题，所以对他们提出的一些想法，我并不感到惊讶。我给了他们我自己的定义：“程序员是编写计算机程序的人，他们掌握和计算机交流的语言，而且对计算机懂得很多。“</p>\n<p>然后我画了一个工作中的程序员。</p>\n<p><img src=\"http://wx2.sinaimg.cn/mw690/6941baebly1fjb5w8duw2j20dw089glp.jpg\"></p>\n<p>下一步是讨论<strong>计算机</strong>。所有的孩子都开始谈论他们父母的笔记本（他们反复提到同样的东西，这样真的很可爱）。讨论了一段时间后，我打断他们并指出，<strong>在不同地方还有很多计算机</strong>，比如智能手机或手表，还包括汽车和电梯。我把上面提到的每一项都画了出来，并用几个字简单地概述每一种情况下计算机的用途。我还问他们他们如何看待天气预报的工作（这时一个聪明的孩子回答：“卫星知道第二天的天气”），并告诉他们计算机得出的预测，基于上千的测量设备给出的测量结果。</p>\n<p><img src=\"http://wx3.sinaimg.cn/mw690/6941baebly1fjb5w8s86gj20dw0dfaag.jpg\"></p>\n<p>为了转到下一个话题<strong>计算机程序</strong>，我提到计算机之所以能做很多事，要归功于指导它们做这些事情的程序。</p>\n<p>话题随之转向 YouTube，我知道他们很了解它，我从他们熟悉的 UI 开始。</p>\n<p>我问他们 YouTube 上有多少部电影。有些人比较困惑，而有些人高喊“数百万”或“无限”。我问所有的电影是否都可以放在一张光盘上。然后我画出许多光盘，问他们“在给 YouTube 下达观看 《粉红猪小妹》某一集的指令后，你了解它是如何找到那个正确的光盘吗？”他们以沉默回应，所以我画了一个数据库，并快速描述了它的作用。</p>\n<p><img src=\"http://wx1.sinaimg.cn/mw690/6941baebly1fjb5w97wn4j20dw0ftmxv.jpg\"></p>\n<p>我想让他们知道，他们所看到的只是冰山一角，<strong>而程序员们还有很多要做的</strong>。我解释了我们必须如何处理以下各种事情：</p>\n<ul>\n<li>保护电影免受坏人的篡改（“如果有人改变了数据库会发生什么事情，你会看到一些足球比赛，而不是<span id=\"2KSFindDIV\" class=\"KSFIND_CLASS\">粉红猪小妹</span>。”，底下的孩子一片死寂 😁 ）</li>\n<li>制作备份（“一个光盘破裂了怎么办？那你永远不会在<span id=\"3KSFindDIV\" class=\"KSFIND_CLASS_SELECT\">粉红猪小妹</span>中，看到猪爸爸设法挂画这一情节了。“，底下又是一片死寂 😁 ）</li>\n<li>使得 YouTube 可以在不同的设备上运行（智能手机、平板、笔记本）</li>\n<li>展示广告</li>\n<li>计算观看每一部电影的人数</li>\n<li>显示相似电影的缩略图，等等</li>\n</ul>\n<p>这是一个提醒他们<strong>编程是团队合作</strong>的好时机。这些项目很大，需要不同领域的知识，所以很多人都参与了创作。在这一点上，我更新了第一张图，添加了另一个程序员，让他们俩坐得很近。</p>\n<p>下一个主题是<strong>计算机的工作原理</strong>，当然我一笔带过，没有详细展开。我是这样告诉他们的：</p>\n<ul>\n<li>鼠标和键盘是供人们发送命令给计算机的</li>\n<li>计算机屏幕是供计算机响应（命令）的</li>\n<li>每台计算机里都有一个处理器（你可以把它当成计算机的大脑）</li>\n<li>还有一些磁盘允许计算机存储信息</li>\n</ul>\n<p><img src=\"http://wx2.sinaimg.cn/mw690/6941baebly1fjb5wac6g5j20dw0db74q.jpg\"></p>\n<p>我把注意力集中在处理器上，告诉他们计算机使用<strong>一种只包含 0 和 1 的有趣语言</strong>。当我假装只用 A 和 B 开头的词说话时，我们获得了一点乐趣。然后我解释程序员之所以使用编程语言，是为了更容易与处理器沟通对话。</p>\n<p>然后我使用了一些最简单的<strong>编程语言进行示例</strong>（使用一些伪代码）。我本想再给他们看一些东西，但我觉得他们正在失去注意力，所以我甚至没有提出 for 循环。</p>\n<p><img src=\"http://wx4.sinaimg.cn/mw690/6941baebly1fjb5wap1zoj20dw06haa5.jpg\"></p>\n<p>为了完成我的演讲，我再次画出了我们所谈论过的符号。我一个一个地画出来，问他们“这是什么？”、“你还记得什么？”这样的问题。整个过程都非常棒。</p>\n<p><img src=\"http://wx3.sinaimg.cn/mw690/6941baebly1fjb5wb29ncj205k0hcmx8.jpg\"></p>\n<p>额外的说明、注意事项、提示及技巧：</p>\n<ul>\n<li>这比我想象的要<strong>有趣</strong>得多！我认真地对待这件事，进行了很好的准备，结果也得到了回报。孩子们很感兴趣，我想他们可能会记得一些事情。</li>\n<li><strong>画画</strong>是正确的方式。它能抓住他们的注意力。通过指着某一幅画，能让我提醒他们几分钟前我们就此讨论过的事情。</li>\n<li>要做好<strong>一遍遍重复</strong>的准备。当我问他们知道的语言时，一个孩子举起手说：“我知道一点英语”，然后他的同伴也一样，这一个，那一个，然后组里剩下的人一个接一个（或几个同时）举手，但几乎所有人说的都是英语。当你谈到他们喜欢的主题，比如卡通片时，场面会变得更加混乱。</li>\n<li>不管你做什么，有些孩子会变得<strong>无聊</strong>，因为他们的注意力周期实在太短了。</li>\n<li>注意<strong>书写。</strong>举个例子，当你写 1 时，他们会抗议这看起来像 7。</li>\n<li>在这次演讲中，我明白了<strong>纠正他们是毫无意义的</strong>。例如，我认为在他们眼中， YouTube 会将卡通片保存在 DVD 上，当你要求某个卡通片时，计算机会选择正确的光盘并播放。我个人觉得这种想法很好，我想让他们理解的是概念（搜索是怎样的，数据库做什么的），而不是技术细节，这才是我认为正确的方法。</li>\n<li>演讲花了大约 25 分钟，感觉没必要更长了。</li>\n</ul>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112375\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112375votetotal\">6</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112375\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 2 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/zhj318\">飞哥的咖啡</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/zhj318\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2016/09/9667abaa540914200edd449974fb5538.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            我见青山多妩媚，料青山见我应如是        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/zhj318\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/zhj318/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/zhj318/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 41</a> · <a title=\"QQ：574375911\" target=\"_blank\" href=\"#\"><i class=\"fa fa-qq\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": 2, "praise_nums": "6", "url_object_id": "39e9518a9d5fa1c6e5ff1afda070376e", "front_image_url": ["http://wx3.sinaimg.cn/mw690/6941baebly1fjb5w7x6khj208406imx4.jpg"], "front_image_path": "full/baced409c07eeea2ff08af3899c6a96f6a93a6a5.jpg", "title": "如何向 6 岁的孩子解释何为编程"}
{"create_date": "2017/09/07 ", "url": "http://blog.jobbole.com/112381/", "fav_nums": 2, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://my.oschina.net/giegie/blog/1525931\">冷冷gg</a>   </div><p>限流的目的是通过对并发访问/请求进行限速或者一个时间窗口内的的请求进行限速来保护系统，一旦达到限制速率则可以拒绝服务。</p>\n<p>前几天在DD的公众号，看了一篇关于使用 瓜娃 实现单应用限流的方案，参考《redis in action》 实现了一个jedis版本的，都属于业务层次限制。 实际场景中常用的限流策略：</p>\n<ul>\n<li>Nginx接入层限流<br>\n按照一定的规则如帐号、IP、系统调用逻辑等在Nginx层面做限流</li>\n<li>业务应用系统限流<br>\n通过业务代码控制流量这个流量可以被称为信号量，可以理解成是一种锁，它可以限制一项资源最多能同时被多少进程访问。</li>\n</ul>\n<h3>代码实现</h3>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33c7bd6840731058875\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nimport redis.clients.jedis.Jedis;\r\nimport redis.clients.jedis.Transaction;\r\nimport redis.clients.jedis.ZParams;\r\n\r\nimport java.util.List;\r\nimport java.util.UUID;\r\n\r\n/**\r\n * email wangiegie@gmail.com\r\n * @data 2017-08\r\n */\r\npublic class RedisRateLimiter {\r\n    private static final String BUCKET = \"BUCKET\";\r\n    private static final String BUCKET_COUNT = \"BUCKET_COUNT\";\r\n    private static final String BUCKET_MONITOR = \"BUCKET_MONITOR\";\r\n\r\n    static String acquireTokenFromBucket(\r\n            Jedis jedis, int limit, long timeout) {\r\n        String identifier = UUID.randomUUID().toString();\r\n        long now = System.currentTimeMillis();\r\n        Transaction transaction = jedis.multi();\r\n\r\n        //删除信号量\r\n        transaction.zremrangeByScore(BUCKET_MONITOR.getBytes(), \"-inf\".getBytes(), String.valueOf(now - timeout).getBytes());\r\n        ZParams params = new ZParams();\r\n        params.weightsByDouble(1.0,0.0);\r\n        transaction.zinterstore(BUCKET, params, BUCKET, BUCKET_MONITOR);\r\n\r\n        //计数器自增\r\n        transaction.incr(BUCKET_COUNT);\r\n        List&lt;Object&gt; results = transaction.exec();\r\n        long counter = (Long) results.get(results.size() - 1);\r\n\r\n        transaction = jedis.multi();\r\n        transaction.zadd(BUCKET_MONITOR, now, identifier);\r\n        transaction.zadd(BUCKET, counter, identifier);\r\n        transaction.zrank(BUCKET, identifier);\r\n        results = transaction.exec();\r\n        //获取排名，判断请求是否取得了信号量\r\n        long rank = (Long) results.get(results.size() - 1);\r\n        if (rank &lt; limit) {\r\n            return identifier;\r\n        } else {//没有获取到信号量，清理之前放入redis 中垃圾数据\r\n            transaction = jedis.multi();\r\n            transaction.zrem(BUCKET_MONITOR, identifier);\r\n            transaction.zrem(BUCKET, identifier);\r\n            transaction.exec();\r\n        }\r\n        return null;\r\n    }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33c7bd6840731058875-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c7bd6840731058875-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f33c7bd6840731058875-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c7bd6840731058875-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f33c7bd6840731058875-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c7bd6840731058875-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f33c7bd6840731058875-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c7bd6840731058875-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f33c7bd6840731058875-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c7bd6840731058875-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f33c7bd6840731058875-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c7bd6840731058875-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59f33c7bd6840731058875-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c7bd6840731058875-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59f33c7bd6840731058875-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c7bd6840731058875-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-59f33c7bd6840731058875-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c7bd6840731058875-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-59f33c7bd6840731058875-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c7bd6840731058875-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-59f33c7bd6840731058875-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c7bd6840731058875-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-59f33c7bd6840731058875-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c7bd6840731058875-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-59f33c7bd6840731058875-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c7bd6840731058875-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-59f33c7bd6840731058875-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c7bd6840731058875-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-59f33c7bd6840731058875-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c7bd6840731058875-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-59f33c7bd6840731058875-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c7bd6840731058875-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-59f33c7bd6840731058875-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c7bd6840731058875-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-59f33c7bd6840731058875-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c7bd6840731058875-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-59f33c7bd6840731058875-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c7bd6840731058875-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-59f33c7bd6840731058875-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c7bd6840731058875-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-59f33c7bd6840731058875-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c7bd6840731058875-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-59f33c7bd6840731058875-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c7bd6840731058875-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-59f33c7bd6840731058875-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c7bd6840731058875-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-59f33c7bd6840731058875-47\">47</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c7bd6840731058875-48\">48</div><div class=\"crayon-num\" data-line=\"crayon-59f33c7bd6840731058875-49\">49</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c7bd6840731058875-50\">50</div><div class=\"crayon-num\" data-line=\"crayon-59f33c7bd6840731058875-51\">51</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33c7bd6840731058875-1\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">redis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">clients</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">jedis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Jedis</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c7bd6840731058875-2\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">redis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">clients</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">jedis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Transaction</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33c7bd6840731058875-3\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">redis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">clients</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">jedis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">ZParams</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c7bd6840731058875-4\"> </div><div class=\"crayon-line\" id=\"crayon-59f33c7bd6840731058875-5\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">java</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">util</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">List</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c7bd6840731058875-6\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">java</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">util</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">UUID</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33c7bd6840731058875-7\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c7bd6840731058875-8\"><span class=\"crayon-c\">/**</span></div><div class=\"crayon-line\" id=\"crayon-59f33c7bd6840731058875-9\"><span class=\"crayon-c\"> * email wangiegie@gmail.com</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c7bd6840731058875-10\"><span class=\"crayon-c\"> * @data 2017-08</span></div><div class=\"crayon-line\" id=\"crayon-59f33c7bd6840731058875-11\"><span class=\"crayon-c\"> */</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c7bd6840731058875-12\"><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">RedisRateLimiter</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f33c7bd6840731058875-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">final</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">BUCKET</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"BUCKET\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c7bd6840731058875-14\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">final</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">BUCKET_COUNT</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"BUCKET_COUNT\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33c7bd6840731058875-15\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">final</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">BUCKET_MONITOR</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"BUCKET_MONITOR\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c7bd6840731058875-16\"> </div><div class=\"crayon-line\" id=\"crayon-59f33c7bd6840731058875-17\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">acquireTokenFromBucket</span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c7bd6840731058875-18\"><span class=\"crayon-h\">            </span><span class=\"crayon-e\">Jedis </span><span class=\"crayon-v\">jedis</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">limit</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">timeout</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f33c7bd6840731058875-19\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">identifier</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">UUID</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">randomUUID</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">toString</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c7bd6840731058875-20\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">now</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">currentTimeMillis</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33c7bd6840731058875-21\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">Transaction </span><span class=\"crayon-v\">transaction</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">jedis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">multi</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c7bd6840731058875-22\"> </div><div class=\"crayon-line\" id=\"crayon-59f33c7bd6840731058875-23\"><span class=\"crayon-h\">        </span><span class=\"crayon-c\">//删除信号量</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c7bd6840731058875-24\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">transaction</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">zremrangeByScore</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">BUCKET_MONITOR</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getBytes</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"-inf\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getBytes</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">String</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">valueOf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">now</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">timeout</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getBytes</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33c7bd6840731058875-25\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">ZParams </span><span class=\"crayon-v\">params</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ZParams</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c7bd6840731058875-26\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">params</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">weightsByDouble</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">0.0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33c7bd6840731058875-27\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">transaction</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">zinterstore</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">BUCKET</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">params</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">BUCKET</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">BUCKET_MONITOR</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c7bd6840731058875-28\"> </div><div class=\"crayon-line\" id=\"crayon-59f33c7bd6840731058875-29\"><span class=\"crayon-h\">        </span><span class=\"crayon-c\">//计数器自增</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c7bd6840731058875-30\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">transaction</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">incr</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">BUCKET_COUNT</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33c7bd6840731058875-31\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">List</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-t\">Object</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">results</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">transaction</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">exec</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c7bd6840731058875-32\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">counter</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">Long</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">results</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">results</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">size</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33c7bd6840731058875-33\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c7bd6840731058875-34\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">transaction</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">jedis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">multi</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33c7bd6840731058875-35\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">transaction</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">zadd</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">BUCKET_MONITOR</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">now</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">identifier</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c7bd6840731058875-36\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">transaction</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">zadd</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">BUCKET</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">counter</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">identifier</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33c7bd6840731058875-37\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">transaction</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">zrank</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">BUCKET</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">identifier</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c7bd6840731058875-38\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">results</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">transaction</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">exec</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33c7bd6840731058875-39\"><span class=\"crayon-h\">        </span><span class=\"crayon-c\">//获取排名，判断请求是否取得了信号量</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c7bd6840731058875-40\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rank</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">Long</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">results</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">results</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">size</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33c7bd6840731058875-41\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">rank</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">limit</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c7bd6840731058875-42\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">identifier</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33c7bd6840731058875-43\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-c\">//没有获取到信号量，清理之前放入redis 中垃圾数据</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c7bd6840731058875-44\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">transaction</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">jedis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">multi</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33c7bd6840731058875-45\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">transaction</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">zrem</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">BUCKET_MONITOR</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">identifier</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c7bd6840731058875-46\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">transaction</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">zrem</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">BUCKET</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">identifier</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33c7bd6840731058875-47\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">transaction</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">exec</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c7bd6840731058875-48\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-59f33c7bd6840731058875-49\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c7bd6840731058875-50\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-59f33c7bd6840731058875-51\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0087 seconds] -->\r\n<p></p>\n<h3>调用</h3>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33c7bd684a476356819\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n测试接口调用\r\n@GetMapping(\"/\")\r\npublic void index(HttpServletResponse response) throws IOException {\r\n    Jedis jedis = jedisPool.getResource();\r\n    String token = RedisRateLimiter.acquireTokenFromBucket(jedis, LIMIT, TIMEOUT);\r\n    if (token == null) {\r\n        response.sendError(500);\r\n    }else{\r\n        //TODO 你的业务逻辑\r\n    }\r\n    jedisPool.returnResource(jedis);\r\n}\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33c7bd684a476356819-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c7bd684a476356819-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f33c7bd684a476356819-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c7bd684a476356819-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f33c7bd684a476356819-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c7bd684a476356819-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f33c7bd684a476356819-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c7bd684a476356819-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f33c7bd684a476356819-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c7bd684a476356819-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f33c7bd684a476356819-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c7bd684a476356819-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59f33c7bd684a476356819-13\">13</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33c7bd684a476356819-1\">测试接口调用</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c7bd684a476356819-2\"><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">GetMapping</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"/\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f33c7bd684a476356819-3\"><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">index</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">HttpServletResponse </span><span class=\"crayon-v\">response</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">throws</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">IOException</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c7bd684a476356819-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">Jedis </span><span class=\"crayon-v\">jedis</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">jedisPool</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getResource</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33c7bd684a476356819-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">token</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">RedisRateLimiter</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">acquireTokenFromBucket</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">jedis</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">LIMIT</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">TIMEOUT</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c7bd684a476356819-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">token</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f33c7bd684a476356819-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">response</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">sendError</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">500</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c7bd684a476356819-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span><span class=\"crayon-st\">else</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f33c7bd684a476356819-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-c\">//TODO 你的业务逻辑</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c7bd684a476356819-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-59f33c7bd684a476356819-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">jedisPool</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">returnResource</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">jedis</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c7bd684a476356819-12\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-59f33c7bd684a476356819-13\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0020 seconds] -->\r\n<p></p>\n<h2>优化</h2>\n<p>使用拦截器 + 注解优化代码</p>\n<h3>拦截器</h3>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33c7bd684f222994279\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n@Configuration\r\nstatic class WebMvcConfigurer extends WebMvcConfigurerAdapter {\r\n    private Logger logger = LoggerFactory.getLogger(WebMvcConfigurer.class);\r\n    @Autowired\r\n    private JedisPool jedisPool;\r\n\r\n    public void addInterceptors(InterceptorRegistry registry) {\r\n        registry.addInterceptor(new HandlerInterceptorAdapter() {\r\n            public boolean preHandle(HttpServletRequest request, HttpServletResponse response,\r\n                                     Object handler) throws Exception {\r\n                HandlerMethod handlerMethod = (HandlerMethod) handler;\r\n                Method method = handlerMethod.getMethod();\r\n                RateLimiter rateLimiter = method.getAnnotation(RateLimiter.class);\r\n\r\n                if (rateLimiter != null){\r\n                    int limit = rateLimiter.limit();\r\n                    int timeout = rateLimiter.timeout();\r\n                    Jedis jedis = jedisPool.getResource();\r\n                    String token = RedisRateLimiter.acquireTokenFromBucket(jedis, limit, timeout);\r\n                    if (token == null) {\r\n                        response.sendError(500);\r\n                        return false;\r\n                    }\r\n                    logger.debug(\"token -&gt; {}\",token);\r\n                    jedis.close();\r\n                }\r\n                return true;\r\n            }\r\n        }).addPathPatterns(\"/*\");\r\n    }\r\n}\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33c7bd684f222994279-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c7bd684f222994279-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f33c7bd684f222994279-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c7bd684f222994279-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f33c7bd684f222994279-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c7bd684f222994279-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f33c7bd684f222994279-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c7bd684f222994279-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f33c7bd684f222994279-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c7bd684f222994279-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f33c7bd684f222994279-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c7bd684f222994279-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59f33c7bd684f222994279-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c7bd684f222994279-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59f33c7bd684f222994279-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c7bd684f222994279-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-59f33c7bd684f222994279-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c7bd684f222994279-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-59f33c7bd684f222994279-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c7bd684f222994279-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-59f33c7bd684f222994279-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c7bd684f222994279-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-59f33c7bd684f222994279-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c7bd684f222994279-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-59f33c7bd684f222994279-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c7bd684f222994279-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-59f33c7bd684f222994279-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c7bd684f222994279-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-59f33c7bd684f222994279-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c7bd684f222994279-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-59f33c7bd684f222994279-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c7bd684f222994279-32\">32</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33c7bd684f222994279-1\"><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">Configuration</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c7bd684f222994279-2\"><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">WebMvcConfigurer</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">extends</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">WebMvcConfigurerAdapter</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f33c7bd684f222994279-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Logger </span><span class=\"crayon-v\">logger</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">LoggerFactory</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getLogger</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">WebMvcConfigurer</span><span class=\"crayon-sy\">.</span><span class=\"crayon-t\">class</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c7bd684f222994279-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">Autowired</span></div><div class=\"crayon-line\" id=\"crayon-59f33c7bd684f222994279-5\"><span class=\"crayon-e\">    </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">JedisPool </span><span class=\"crayon-v\">jedisPool</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c7bd684f222994279-6\"> </div><div class=\"crayon-line\" id=\"crayon-59f33c7bd684f222994279-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">addInterceptors</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">InterceptorRegistry </span><span class=\"crayon-v\">registry</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c7bd684f222994279-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">registry</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">addInterceptor</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">HandlerInterceptorAdapter</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f33c7bd684f222994279-9\"><span class=\"crayon-h\">            </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">boolean</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">preHandle</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">HttpServletRequest </span><span class=\"crayon-v\">request</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">HttpServletResponse </span><span class=\"crayon-v\">response</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c7bd684f222994279-10\"><span class=\"crayon-h\">                                     </span><span class=\"crayon-t\">Object</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">handler</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">throws</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Exception</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f33c7bd684f222994279-11\"><span class=\"crayon-h\">                </span><span class=\"crayon-e\">HandlerMethod </span><span class=\"crayon-v\">handlerMethod</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">HandlerMethod</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">handler</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c7bd684f222994279-12\"><span class=\"crayon-h\">                </span><span class=\"crayon-e\">Method </span><span class=\"crayon-v\">method</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">handlerMethod</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getMethod</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33c7bd684f222994279-13\"><span class=\"crayon-h\">                </span><span class=\"crayon-e\">RateLimiter </span><span class=\"crayon-v\">rateLimiter</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">method</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getAnnotation</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">RateLimiter</span><span class=\"crayon-sy\">.</span><span class=\"crayon-t\">class</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c7bd684f222994279-14\"> </div><div class=\"crayon-line\" id=\"crayon-59f33c7bd684f222994279-15\"><span class=\"crayon-h\">                </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">rateLimiter</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c7bd684f222994279-16\"><span class=\"crayon-h\">                    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">limit</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rateLimiter</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">limit</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33c7bd684f222994279-17\"><span class=\"crayon-h\">                    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">timeout</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rateLimiter</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">timeout</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c7bd684f222994279-18\"><span class=\"crayon-h\">                    </span><span class=\"crayon-e\">Jedis </span><span class=\"crayon-v\">jedis</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">jedisPool</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getResource</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33c7bd684f222994279-19\"><span class=\"crayon-h\">                    </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">token</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">RedisRateLimiter</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">acquireTokenFromBucket</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">jedis</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">limit</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">timeout</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c7bd684f222994279-20\"><span class=\"crayon-h\">                    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">token</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f33c7bd684f222994279-21\"><span class=\"crayon-h\">                        </span><span class=\"crayon-v\">response</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">sendError</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">500</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c7bd684f222994279-22\"><span class=\"crayon-h\">                        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33c7bd684f222994279-23\"><span class=\"crayon-h\">                    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c7bd684f222994279-24\"><span class=\"crayon-h\">                    </span><span class=\"crayon-v\">logger</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">debug</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"token -&gt; {}\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">token</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33c7bd684f222994279-25\"><span class=\"crayon-h\">                    </span><span class=\"crayon-v\">jedis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">close</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c7bd684f222994279-26\"><span class=\"crayon-h\">                </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-59f33c7bd684f222994279-27\"><span class=\"crayon-h\">                </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c7bd684f222994279-28\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-59f33c7bd684f222994279-29\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">addPathPatterns</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"/*\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c7bd684f222994279-30\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-59f33c7bd684f222994279-31\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c7bd684f222994279-32\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0053 seconds] -->\r\n<p></p>\n<h3>定义注解</h3>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33c7bd6853374581757\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n/**\r\n * email wangiegie@gmail.com\r\n * @data 2017-08\r\n * 限流注解\r\n */\r\n\r\n@Target(ElementType.METHOD)\r\n@Retention(RetentionPolicy.RUNTIME)\r\n@Documented\r\npublic @interface RateLimiter {\r\n    int limit() default 5;\r\n    int timeout() default 1000;\r\n}\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33c7bd6853374581757-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c7bd6853374581757-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f33c7bd6853374581757-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c7bd6853374581757-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f33c7bd6853374581757-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c7bd6853374581757-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f33c7bd6853374581757-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c7bd6853374581757-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f33c7bd6853374581757-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c7bd6853374581757-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f33c7bd6853374581757-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c7bd6853374581757-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59f33c7bd6853374581757-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c7bd6853374581757-14\">14</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33c7bd6853374581757-1\"><span class=\"crayon-c\">/**</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c7bd6853374581757-2\"><span class=\"crayon-c\"> * email wangiegie@gmail.com</span></div><div class=\"crayon-line\" id=\"crayon-59f33c7bd6853374581757-3\"><span class=\"crayon-c\"> * @data 2017-08</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c7bd6853374581757-4\"><span class=\"crayon-c\"> * 限流注解</span></div><div class=\"crayon-line\" id=\"crayon-59f33c7bd6853374581757-5\"><span class=\"crayon-c\"> */</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c7bd6853374581757-6\"> </div><div class=\"crayon-line\" id=\"crayon-59f33c7bd6853374581757-7\"><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">Target</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ElementType</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">METHOD</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c7bd6853374581757-8\"><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">Retention</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">RetentionPolicy</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">RUNTIME</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f33c7bd6853374581757-9\"><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">Documented</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c7bd6853374581757-10\"><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-t\">interface</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">RateLimiter</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f33c7bd6853374581757-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">limit</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">default</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c7bd6853374581757-12\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">timeout</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">default</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1000</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33c7bd6853374581757-13\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c7bd6853374581757-14\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p></p>\n<h3>使用</h3>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33c7bd6856557900259\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n@RateLimiter(limit = 2, timeout = 5000)\r\n@GetMapping(\"/test\")\r\npublic void test() {\r\n}\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33c7bd6856557900259-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c7bd6856557900259-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f33c7bd6856557900259-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c7bd6856557900259-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f33c7bd6856557900259-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33c7bd6856557900259-1\"><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">RateLimiter</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">limit</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">timeout</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5000</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c7bd6856557900259-2\"><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">GetMapping</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"/test\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f33c7bd6856557900259-3\"><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">test</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c7bd6856557900259-4\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-59f33c7bd6856557900259-5\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p></p>\n<h2>并发测试</h2>\n<p>工具：apache-jmeter-3.2<br>\n说明： 没有获取到信号量的接口返回500，status是红色，获取到信号量的接口返回200，status是绿色。<br>\n当限制请求信号量为2，并发5个线程： <img src=\"http://jbcdn2.b0.upaiyun.com/2017/09/88fe4ce72def9cd9bcb4ddcc1185200e.png\" alt=\"image\"><br>\n当限制请求信号量为5，并发10个线程：<br>\n<img src=\"http://jbcdn2.b0.upaiyun.com/2017/09/d92c4624c99f43a7093aa4fe92b7a112.png\" alt=\"image\"></p>\n<h2>资料</h2>\n<p><a href=\"https://github.com/tangaiyun/RedisRateLimiter\">基于reids + lua的实现</a></p>\n<h2>总结</h2>\n<ol>\n<li>对于信号量的操作，使用事务操作。</li>\n<li>不要使用时间戳作为信号量的排序分数，因为在分布式环境中，各个节点的时间差的原因，会出现不公平信号量的现象。</li>\n<li>可以使用把这块代码抽成@rateLimiter注解，然后再方法上使用就会很方便啦</li>\n<li>不同接口的流控，可以参考源码的里面RedisRateLimiterPlus,无非是每个接口生成一个监控参数</li>\n<li>源码<a href=\"http://git.oschina.net/boding1/pig-cloud\">http://git.oschina.net/boding1/pig-cloud</a></li>\n</ol>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112381\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112381votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112381\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": "  评论", "praise_nums": "1", "url_object_id": "cfaf090cb48b0f211a6912344d6ea9b9", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2016/04/49961db8952e63d98b519b76a2daa5e2.png"], "front_image_path": "full/c766feed221138f7946130756cddfc7e86e388b4.jpg", "title": "基于 Redis 实现分布式应用限流"}
{"create_date": "2017/09/07 ", "url": "http://blog.jobbole.com/112384/", "fav_nums": 4, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://www.linux.com/learn/cleaning-your-linux-startup-process\">David Both</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-8835-1.html\">Linux中国/penghuster</a>   </div><p>一般情况下，常规用途的 Linux 发行版在开机启动时拉起各种相关服务进程，包括许多你可能无需使用的服务，例如蓝牙bluetooth、Avahi、 调制解调管理器ModemManager、ppp-dns（LCTT 译注：此处作者笔误 ppp-dns 应该为 pppd-dns) 等服务进程，这些都是什么东西？用于哪里，有何功能？</p>\n<p>Systemd 提供了许多很好的工具用于查看系统启动情况，也可以控制在系统启动时运行什么。在这篇文章中，我将说明在 Systemd 类发行版中如何关闭一些令人讨厌的进程。</p>\n<h3 id=\"toc_1\">查看开机启动项</h3>\n<p>在过去，你能很容易通过查看 <code>/etc/init.d</code> 了解到哪些服务进程会在引导时启动。Systemd 以不同的方式展现，你可以使用如下命令罗列允许开机启动的服务进程。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f2981d609f3909398093\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ systemctl list-unit-files --type=service | grep enabled\r\naccounts-daemon.service                    enabled\r\nanacron-resume.service                     enabled\r\nanacron.service                            enabled\r\nbluetooth.service                          enabled\r\nbrltty.service                             enabled\r\n[...]\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f2981d609f3909398093-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2981d609f3909398093-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f2981d609f3909398093-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2981d609f3909398093-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f2981d609f3909398093-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2981d609f3909398093-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f2981d609f3909398093-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2981d609f3909398093-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f2981d609f3909398093-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">systemctl </span><span class=\"crayon-v\">list</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">unit</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">files</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">type</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">service</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">grep </span><span class=\"crayon-e\">enabled</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2981d609f3909398093-2\"><span class=\"crayon-v\">accounts</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">daemon</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">service                    </span><span class=\"crayon-e\">enabled</span></div><div class=\"crayon-line\" id=\"crayon-59f2981d609f3909398093-3\"><span class=\"crayon-v\">anacron</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">resume</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">service                     </span><span class=\"crayon-e\">enabled</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2981d609f3909398093-4\"><span class=\"crayon-v\">anacron</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">service                            </span><span class=\"crayon-e\">enabled</span></div><div class=\"crayon-line\" id=\"crayon-59f2981d609f3909398093-5\"><span class=\"crayon-v\">bluetooth</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">service                          </span><span class=\"crayon-e\">enabled</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2981d609f3909398093-6\"><span class=\"crayon-v\">brltty</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">service                             </span><span class=\"crayon-i\">enabled</span></div><div class=\"crayon-line\" id=\"crayon-59f2981d609f3909398093-7\"><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2981d609f3909398093-8\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p>在此列表顶部，对我来说，蓝牙服务是冗余项，因为在该电脑上我不需要使用蓝牙功能，故无需运行此服务。下面的命令将停止该服务进程，并且使其开机不启动。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f2981d609fe539347969\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ sudo systemctl stop bluetooth.service\r\n$ sudo systemctl disable bluetooth.service\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f2981d609fe539347969-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2981d609fe539347969-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f2981d609fe539347969-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f2981d609fe539347969-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-e\">systemctl </span><span class=\"crayon-e\">stop </span><span class=\"crayon-v\">bluetooth</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">service</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2981d609fe539347969-2\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-e\">systemctl </span><span class=\"crayon-e\">disable </span><span class=\"crayon-v\">bluetooth</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">service</span></div><div class=\"crayon-line\" id=\"crayon-59f2981d609fe539347969-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>你可以通过下面命令确定是否操作成功。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f2981d60a02532220160\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ systemctl status bluetooth.service\r\n bluetooth.service - Bluetooth service\r\n  Loaded: loaded (/lib/systemd/system/bluetooth.service; disabled; vendor preset: enabled)\r\n  Active: inactive (dead)\r\n    Docs: man:bluetoothd(8)\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f2981d60a02532220160-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2981d60a02532220160-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f2981d60a02532220160-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2981d60a02532220160-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f2981d60a02532220160-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2981d60a02532220160-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f2981d60a02532220160-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">systemctl </span><span class=\"crayon-e\">status </span><span class=\"crayon-v\">bluetooth</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">service</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2981d60a02532220160-2\"><span class=\"crayon-e\"> </span><span class=\"crayon-v\">bluetooth</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">service</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Bluetooth </span><span class=\"crayon-e\">service</span></div><div class=\"crayon-line\" id=\"crayon-59f2981d60a02532220160-3\"><span class=\"crayon-e\">  </span><span class=\"crayon-v\">Loaded</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">loaded</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">lib</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">systemd</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">system</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bluetooth</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">service</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">disabled</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">vendor </span><span class=\"crayon-v\">preset</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">enabled</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2981d60a02532220160-4\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">Active</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">inactive</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dead</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f2981d60a02532220160-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">Docs</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">man</span><span class=\"crayon-o\">:</span><span class=\"crayon-e\">bluetoothd</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2981d60a02532220160-6\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0019 seconds] -->\r\n<p>停用的服务进程仍然能够被另外一个服务进程启动。如果你真的想在任何情况下系统启动时都不启动该进程，无需卸载该它，只需要把它掩盖起来就可以阻止该进程在任何情况下开机启动。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f2981d60a05808734588\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ sudo systemctl mask bluetooth.service\r\n Created symlink from /etc/systemd/system/bluetooth.service to /dev/null.\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f2981d60a05808734588-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2981d60a05808734588-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f2981d60a05808734588-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f2981d60a05808734588-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-e\">systemctl </span><span class=\"crayon-e\">mask </span><span class=\"crayon-v\">bluetooth</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">service</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2981d60a05808734588-2\"><span class=\"crayon-e\"> </span><span class=\"crayon-e\">Created </span><span class=\"crayon-e\">symlink </span><span class=\"crayon-v\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">etc</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">systemd</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">system</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bluetooth</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">service </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">dev</span><span class=\"crayon-o\">/</span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-59f2981d60a05808734588-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>一旦你对禁用该进程启动而没有出现负面作用感到满意，你也可以选择卸载该程序。</p>\n<p>通过执行命令可以获得如下服务列表：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f2981d60a09389965367\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ systemctl list-unit-files --type=service                       \r\nUNIT FILE                                  STATE   \r\naccounts-daemon.service                    enabled\r\nacpid.service                              disabled\r\nalsa-restore.service                       static    \r\nalsa-utils.service                         masked\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f2981d60a09389965367-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2981d60a09389965367-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f2981d60a09389965367-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2981d60a09389965367-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f2981d60a09389965367-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2981d60a09389965367-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f2981d60a09389965367-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f2981d60a09389965367-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">systemctl </span><span class=\"crayon-v\">list</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">unit</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">files</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">type</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">service                       </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2981d60a09389965367-2\"><span class=\"crayon-e\">UNIT </span><span class=\"crayon-e\">FILE                                  </span><span class=\"crayon-e\">STATE   </span></div><div class=\"crayon-line\" id=\"crayon-59f2981d60a09389965367-3\"><span class=\"crayon-v\">accounts</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">daemon</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">service                    </span><span class=\"crayon-e\">enabled</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2981d60a09389965367-4\"><span class=\"crayon-v\">acpid</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">service                              </span><span class=\"crayon-e\">disabled</span></div><div class=\"crayon-line\" id=\"crayon-59f2981d60a09389965367-5\"><span class=\"crayon-v\">alsa</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">restore</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">service                       </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\">    </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2981d60a09389965367-6\"><span class=\"crayon-v\">alsa</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">utils</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">service                         </span><span class=\"crayon-i\">masked</span></div><div class=\"crayon-line\" id=\"crayon-59f2981d60a09389965367-7\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0016 seconds] -->\r\n<p>你不能启用或禁用静态服务，因为静态服务被其他的进程所依赖，并不意味着它们自己运行。</p>\n<h3 id=\"toc_2\">哪些服务能够禁止？</h3>\n<p>如何知道你需要哪些服务，而哪些又是可以安全地禁用的呢？它总是依赖于你的个性化需求。</p>\n<p>这里举例了几个服务进程的作用。许多服务进程都是发行版特定的，所以你应该看看你的发行版文档（比如通过 google 或 StackOverflow）。</p>\n<ul>\n<li><strong>accounts-daemon.service</strong> 是一个潜在的安全风险。它是 AccountsService 的一部分，AccountsService 允许程序获得或操作用户账户信息。我不认为有好的理由能使我允许这样的后台操作，所以我选择掩盖mask该服务进程。</li>\n<li><strong>avahi-daemon.service</strong> 用于零配置网络发现，使电脑超容易发现网络中打印机或其他的主机，我总是禁用它，别漏掉它。</li>\n<li><strong>brltty.service</strong> 提供布莱叶盲文设备支持，例如布莱叶盲文显示器。</li>\n<li><strong>debug-shell.service</strong> 开放了一个巨大的安全漏洞（该服务提供了一个无密码的 root shell ，用于帮助 调试 systemd 问题），除非你正在使用该服务，否则永远不要启动服务。</li>\n<li><strong>ModemManager.service</strong> 该服务是一个被 dbus 激活的守护进程，用于提供移动宽频broadband（2G/3G/4G）接口，如果你没有该接口，无论是内置接口，还是通过如蓝牙配对的电话，以及 USB 适配器，那么你也无需该服务。</li>\n<li><strong>pppd-dns.service</strong> 是一个计算机发展的遗物，如果你使用拨号接入互联网的话，保留它，否则你不需要它。</li>\n<li><strong>rtkit-daemon.service</strong> 听起来很可怕，听起来像是 rootkit。 但是你需要该服务，因为它是一个实时内核调度器real-time kernel scheduler。</li>\n<li><strong>whoopsie.service</strong> 是 Ubuntu 错误报告服务。它用于收集 Ubuntu 系统崩溃报告，并发送报告到 <a href=\"https://daisy.ubuntu.com\">https://daisy.ubuntu.com</a> 。 你可以放心地禁止其启动，或者永久的卸载它。</li>\n<li><strong>wpa_supplicant.service</strong> 仅在你使用 Wi-Fi 连接时需要。</li>\n</ul>\n<h3 id=\"toc_3\">系统启动时发生了什么？</h3>\n<p>Systemd 提供了一些命令帮助调试系统开机启动问题。该命令会重演你的系统启动的所有消息。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f2981d60a0d950975833\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ journalctl -b\r\n\r\n-- Logs begin at Mon 2016-05-09 06:18:11 PDT,\r\nend at Mon 2016-05-09 10:17:01 PDT. --\r\nMay 16 06:18:11 studio systemd-journal[289]:\r\nRuntime journal (/run/log/journal/) is currently using 8.0M.\r\nMaximum allowed usage is set to 157.2M.\r\nLeaving at least 235.9M free (of currently available 1.5G of space).\r\nEnforced usage limit is thus 157.2M.\r\n[...]\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f2981d60a0d950975833-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2981d60a0d950975833-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f2981d60a0d950975833-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2981d60a0d950975833-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f2981d60a0d950975833-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2981d60a0d950975833-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f2981d60a0d950975833-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2981d60a0d950975833-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f2981d60a0d950975833-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2981d60a0d950975833-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f2981d60a0d950975833-11\">11</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f2981d60a0d950975833-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">journalctl</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">b</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2981d60a0d950975833-2\"> </div><div class=\"crayon-line\" id=\"crayon-59f2981d60a0d950975833-3\"><span class=\"crayon-o\">--</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Logs </span><span class=\"crayon-e\">begin </span><span class=\"crayon-e\">at </span><span class=\"crayon-i\">Mon</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2016</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">05</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">09</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">06</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">PDT</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2981d60a0d950975833-4\"><span class=\"crayon-st\">end</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">at </span><span class=\"crayon-i\">Mon</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2016</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">05</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">09</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">17</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">01</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">PDT</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span></div><div class=\"crayon-line\" id=\"crayon-59f2981d60a0d950975833-5\"><span class=\"crayon-i\">May</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">16</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">06</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">studio </span><span class=\"crayon-v\">systemd</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">journal</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">289</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2981d60a0d950975833-6\"><span class=\"crayon-e\">Runtime </span><span class=\"crayon-e\">journal</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">run</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">log</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">journal</span><span class=\"crayon-o\">/</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">currently </span><span class=\"crayon-i\">using</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8.0M.</span></div><div class=\"crayon-line\" id=\"crayon-59f2981d60a0d950975833-7\"><span class=\"crayon-e\">Maximum </span><span class=\"crayon-e\">allowed </span><span class=\"crayon-e\">usage </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">set </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">157.2M.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2981d60a0d950975833-8\"><span class=\"crayon-e\">Leaving </span><span class=\"crayon-e\">at </span><span class=\"crayon-i\">least</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">235.9M</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">free</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">of </span><span class=\"crayon-e\">currently </span><span class=\"crayon-i\">available</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.5G</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">of </span><span class=\"crayon-v\">space</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-59f2981d60a0d950975833-9\"><span class=\"crayon-e\">Enforced </span><span class=\"crayon-e\">usage </span><span class=\"crayon-e\">limit </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">thus</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">157.2M.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2981d60a0d950975833-10\"><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-59f2981d60a0d950975833-11\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0051 seconds] -->\r\n<p>通过命令 <code>journalctl -b -1</code> 可以复审前一次启动，<code>journalctl -b -2</code> 可以复审倒数第 2 次启动，以此类推。</p>\n<p>该命令会打印出大量的信息，你可能并不关注所有信息，只是关注其中问题相关部分。为此，系统提供了几个过滤器，用于帮助你锁定目标。让我们以进程号为 1 的进程为例，该进程是所有其它进程的父进程。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f2981d60a11592076585\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ journalctl _PID=1\r\n\r\nMay 08 06:18:17 studio systemd[1]: Starting LSB: Raise network interfaces....\r\nMay 08 06:18:17 studio systemd[1]: Started LSB: Raise network interfaces..\r\nMay 08 06:18:17 studio systemd[1]: Reached target System Initialization.\r\nMay 08 06:18:17 studio systemd[1]: Started CUPS Scheduler.\r\nMay 08 06:18:17 studio systemd[1]: Listening on D-Bus System Message Bus Socket\r\nMay 08 06:18:17 studio systemd[1]: Listening on CUPS Scheduler.\r\n[...]\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f2981d60a11592076585-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2981d60a11592076585-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f2981d60a11592076585-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2981d60a11592076585-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f2981d60a11592076585-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2981d60a11592076585-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f2981d60a11592076585-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2981d60a11592076585-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f2981d60a11592076585-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2981d60a11592076585-10\">10</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f2981d60a11592076585-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">journalctl </span><span class=\"crayon-v\">_PID</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2981d60a11592076585-2\"> </div><div class=\"crayon-line\" id=\"crayon-59f2981d60a11592076585-3\"><span class=\"crayon-i\">May</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">08</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">06</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">17</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">studio </span><span class=\"crayon-v\">systemd</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Starting </span><span class=\"crayon-v\">LSB</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Raise </span><span class=\"crayon-e\">network </span><span class=\"crayon-v\">interfaces</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2981d60a11592076585-4\"><span class=\"crayon-i\">May</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">08</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">06</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">17</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">studio </span><span class=\"crayon-v\">systemd</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Started </span><span class=\"crayon-v\">LSB</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Raise </span><span class=\"crayon-e\">network </span><span class=\"crayon-v\">interfaces</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-59f2981d60a11592076585-5\"><span class=\"crayon-i\">May</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">08</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">06</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">17</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">studio </span><span class=\"crayon-v\">systemd</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Reached </span><span class=\"crayon-e\">target </span><span class=\"crayon-e\">System </span><span class=\"crayon-v\">Initialization</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2981d60a11592076585-6\"><span class=\"crayon-i\">May</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">08</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">06</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">17</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">studio </span><span class=\"crayon-v\">systemd</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Started </span><span class=\"crayon-e\">CUPS </span><span class=\"crayon-v\">Scheduler</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-59f2981d60a11592076585-7\"><span class=\"crayon-i\">May</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">08</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">06</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">17</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">studio </span><span class=\"crayon-v\">systemd</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Listening </span><span class=\"crayon-i\">on</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">D</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">Bus </span><span class=\"crayon-e\">System </span><span class=\"crayon-e\">Message </span><span class=\"crayon-e\">Bus </span><span class=\"crayon-e\">Socket</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2981d60a11592076585-8\"><span class=\"crayon-i\">May</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">08</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">06</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">17</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">studio </span><span class=\"crayon-v\">systemd</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Listening </span><span class=\"crayon-e\">on </span><span class=\"crayon-e\">CUPS </span><span class=\"crayon-v\">Scheduler</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-59f2981d60a11592076585-9\"><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2981d60a11592076585-10\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0032 seconds] -->\r\n<p>这些打印消息显示了什么被启动，或者是正在尝试启动。</p>\n<p>一个最有用的命令工具之一 <code>systemd-analyze blame</code>，用于帮助查看哪个服务进程启动耗时最长。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f2981d60a15414863548\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ systemd-analyze blame\r\n         8.708s gpu-manager.service\r\n         8.002s NetworkManager-wait-online.service\r\n         5.791s mysql.service\r\n         2.975s dev-sda3.device\r\n         1.810s alsa-restore.service\r\n         1.806s systemd-logind.service\r\n         1.803s irqbalance.service\r\n         1.800s lm-sensors.service\r\n         1.800s grub-common.service\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f2981d60a15414863548-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2981d60a15414863548-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f2981d60a15414863548-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2981d60a15414863548-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f2981d60a15414863548-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2981d60a15414863548-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f2981d60a15414863548-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2981d60a15414863548-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f2981d60a15414863548-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2981d60a15414863548-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f2981d60a15414863548-11\">11</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f2981d60a15414863548-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">systemd</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">analyze </span><span class=\"crayon-i\">blame</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2981d60a15414863548-2\"><span class=\"crayon-h\">         </span><span class=\"crayon-cn\">8.708s</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">gpu</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">manager</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">service</span></div><div class=\"crayon-line\" id=\"crayon-59f2981d60a15414863548-3\"><span class=\"crayon-h\">         </span><span class=\"crayon-cn\">8.002s</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">NetworkManager</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">wait</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">online</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">service</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2981d60a15414863548-4\"><span class=\"crayon-h\">         </span><span class=\"crayon-cn\">5.791s</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">mysql</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">service</span></div><div class=\"crayon-line\" id=\"crayon-59f2981d60a15414863548-5\"><span class=\"crayon-h\">         </span><span class=\"crayon-cn\">2.975s</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dev</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">sda3</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">device</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2981d60a15414863548-6\"><span class=\"crayon-h\">         </span><span class=\"crayon-cn\">1.810s</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">alsa</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">restore</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">service</span></div><div class=\"crayon-line\" id=\"crayon-59f2981d60a15414863548-7\"><span class=\"crayon-h\">         </span><span class=\"crayon-cn\">1.806s</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">systemd</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">logind</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">service</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2981d60a15414863548-8\"><span class=\"crayon-h\">         </span><span class=\"crayon-cn\">1.803s</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">irqbalance</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">service</span></div><div class=\"crayon-line\" id=\"crayon-59f2981d60a15414863548-9\"><span class=\"crayon-h\">         </span><span class=\"crayon-cn\">1.800s</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">lm</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">sensors</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">service</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2981d60a15414863548-10\"><span class=\"crayon-h\">         </span><span class=\"crayon-cn\">1.800s</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">grub</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">common</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">service</span></div><div class=\"crayon-line\" id=\"crayon-59f2981d60a15414863548-11\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0020 seconds] -->\r\n<p>这个特定的例子没有出现任何异常，但是如果存在系统启动瓶颈，则该命令将能发现它。</p>\n<p>你也能通过如下资源了解 Systemd 如何工作：</p>\n<ul>\n<li><a href=\"https://www.linux.com/learn/understanding-and-using-systemd\">理解和使用 Systemd</a></li>\n<li><a href=\"https://www.linux.com/learn/intro-systemd-runlevels-and-service-management-commands\">介绍 Systemd 运行级别和服务管理命令</a></li>\n<li><a href=\"https://www.linux.com/learn/here-we-go-again-another-linux-init-intro-systemd\">再次前行，另一个 Linux 初始化系统：Systemd 介绍</a></li>\n</ul>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112384\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112384votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112384\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 4 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": "  评论", "praise_nums": "1", "url_object_id": "f51b3da1c08181a6b90377ff717b844a", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2016/11/59d49abe8909a122bc2c9aa43b71e3bb.png"], "front_image_path": "full/d3d1a5ad957de059084690efae6fdfaa3527e1c3.jpg", "title": "Linux 系统开机启动项清理"}
{"create_date": "2017/09/15 ", "url": "http://blog.jobbole.com/112494/", "fav_nums": 1, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://opensource.com/article/17/8/linux-anniversary\">Jim Hall</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-8836-1.html\">Linux中国/softpaopao</a>   </div><blockquote><p>通过安装 SLS 1.05 展示了 Linux 内核在这 26 年间走过了多远。</p></blockquote>\n<p>我第一次安装 Linux 是在 1993 年。那时我跑的是 MS-DOS，但我真的很喜欢学校机房电脑的 Unix 系统，就在那里度过了我大学本科时光。 当我听说了 Linux，一个 Unix 的免费版本，可以在我家的 386 电脑上运行的时候，我立刻就想要试试。我的第一个 Linux 发行版是 <a href=\"https://en.wikipedia.org/wiki/Softlanding_Linux_System\">Softlanding Linux System</a> (SLS) 1.03，带有 11 级补丁的 0.99 alpha 版本的 Linux 内核。它要求高达 2 MB 的内存，如果你想要编译项目需要 4 MB，运行 X windows 则需要 8 MB。</p>\n<p>我认为 Linux 相较于 MS-DOS 世界是一个巨大的进步。 尽管 Linux 缺乏运行在 MS-DOS 上的广泛的应用及游戏，但我发现 Linux 带给我的是巨大的灵活性。不像 MS-DOS ，现在我可以进行真正的多任务，同时运行不止一个程序。并且 Linux 提供了丰富的工具，包括一个 C 语言编译器，让我可以构建自己的项目。</p>\n<p>一年后，我升级到了 SLS 1.05，它支持全新的 Linux 内核 1.0。 更重要的，Linux 引入了内核模块。通过内核模块，你不再需要为支持新硬件而编译整个内核；取而代之，只需要从包含 Linux 内核之内的 63 个模块里加载一个就行。在 SLS 1.05 的发行自述文件中包含这些关于模块的注释：</p>\n<blockquote><p>内核的模块化旨在正视减少并最终消除重新编译内核的要求，无论是变更、修改设备驱动或者为了动态访问不常用的驱动。也许更为重要的是，个别工作小组的工作不再影响到内核的正确开发。事实上，这让以二进制发布官方内核现在成为了可能。</p></blockquote>\n<p>在 8 月 25 日，Linux 内核将迎来它的第 26 周年（LCTT 译注：已经过去了 =.= ）。为了庆祝，我重新安装了 SLS 1.05 来提醒自己 Linux 1.0 内核是什么样子，去认识 Linux 自二十世纪 90 年代以来走了多远。和我一起踏上 Linux 的怀旧之旅吧！</p>\n<h3 id=\"toc_1\">安装</h3>\n<p>SLS 是第一个真正的 “发行版”，因为它包含一个安装程序。 尽管安装过程并不像现代发行版一样顺畅。 不能从 CD-ROM 启动安装，我需要从安装软盘启动我的系统，然后从 <strong>login</strong> 提示中运行安装程序。</p>\n<p><img title=\"Installing SLS 1.05 from the login prompt\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/5c45499b688747f0526bf130c0154587.png\" alt=\"Installing SLS 1.05 from the login prompt\"></p>\n<p>在 SLS 1.05 中引入的一个漂亮的功能是支持彩色的文本模式安装器。当我选择彩色模式时，安装器切换到一个带有黑色文字的亮蓝色背景，不再是我们祖祖辈辈们使用的原始的普通黑白文本。</p>\n<p><img title=\"Color-enabled text-mode installer in SLS 1.05\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/a6012be8a0eee0df8f3e26191734cd8a.png\" alt=\"Color-enabled text-mode installer in SLS 1.05\"></p>\n<p>SLS 安装器是个简单的东西，文本从屏幕底部滚动而上，显示其做的工作。通过对一些简单的提示的响应，我能够创建一个 Linux 分区，挂载上 ext2 文件系统，并安装 Linux 。 安装包含了 X windows 和开发工具的 SLS 1.05，需要大约 85 MB 的磁盘空间。依照今天的标准这听起来可能不是很多，但在 Linux 1.0 出来的时候，120 MB 的硬件设备才是主流设备。</p>\n<p><img title=\"Creating a partition for Linux, putting an ext2 filesystem on it, and installing Linux\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/ec187c4e241e9271150072dbe7d4cdfe.png\" alt=\"Creating a partition for Linux, putting an ext2 filesystem on it, and installing Linux\"></p>\n<p><img title=\"First boot\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/387f178eb53fc2ac018d8054a21e7071.png\" alt=\"First boot\"></p>\n<h3 id=\"toc_2\">系统级别</h3>\n<p>当我第一次启动到 Linux 时，让我想起来了一些关于这个早期版本 Linux 系统的事情。首先，Linux 没有占据很多的空间。在启动系统之后运行一些程序来检查的时候，Linux 占用了不到 4 MB 的内存。在一个拥有 16MB 内存的系统中，这就意味着节省了很多内存用来运行程序。</p>\n<p><img title=\"Checking out the filesystem and available disk space\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/f4a217e99547a2749af4bb5c658d56df.png\" alt=\"Checking out the filesystem and available disk space\"></p>\n<p>熟悉的 <code>/proc</code> 元文件系统在 Linux 1.0 就存在了，尽管对比我们今天在现代系统上看到的，它并不能提供许多信息。在 Linux 1.0， <code>/proc</code> 包含一些接口来探测类似 <code>meminfo</code> 和 <code>stat</code> 之类的基本系统状态。</p>\n<p><img title=\"The familiar /proc meta filesystem\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/8419659167d2ca26f0182224283a317d.png\" alt=\"The familiar /proc meta filesystem\"></p>\n<p>在这个系统上的 <code>/etc</code> 文件目录非常简单。值得一提的是，SLS 1.05 借用了来自 <a href=\"https://en.wikipedia.org/wiki/Berkeley_Software_Distribution\">BSD Unix</a> 的 <strong>rc</strong> 脚本来控制系统启动。 初始化是通过 <strong>rc</strong> 脚本进行的，由 <code>rc.local</code> 文件来定义本地系统的调整。后来，许多 Linux 发行版采用了来自 <a href=\"https://en.wikipedia.org/wiki/UNIX_System_V\">Unix System V</a> 的很相似的 <strong>init</strong> 脚本，后来又是 <a href=\"https://en.wikipedia.org/wiki/Systemd\">systemd</a> 初始化系统。</p>\n<p><img title=\"The /etc directory\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/237938a3c980e846b2d65d67899e6ddb.png\" alt=\"The /etc directory\"></p>\n<h3 id=\"toc_3\">你能做些什么</h3>\n<p>随着我的系统的启动运行，接下来就可以使用了了。那么，在这样的早期 Linux 系统上你能做些什么？</p>\n<p>让我们从基本的文件管理开始。 每次在你登录的时候，SLS 会让你使用 Softlanding 菜单界面（MESH），这是一个文件管理程序，现代的用户们可能觉得它和 <a href=\"https://midnight-commander.org/\">Midnight Commander</a> 很相似。 而二十世纪 90 年代的用户们可能会拿 MESH 与更为接近的 <a href=\"https://en.wikipedia.org/wiki/Norton_Commander\">Norton Commander</a> 相比，这个可以说是在 MS-DOS 上最流行的第三方文件管理程序。</p>\n<p><img title=\"The Softlanding menu shell (MESH)\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/b7f623257b1323375b9a13f652b57a2d.png\" alt=\"The Softlanding menu shell (MESH)\"></p>\n<p>除了 MESH 之外，在 SLS 1.05 中还少量包含了一些全屏应用程序。你可以找到熟悉的用户工具，包括 Elm 邮件阅读器、GNU Emacs 可编程编辑器，以及古老的 Vim 编辑器。</p>\n<p><img title=\"Elm mail reader\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/91dd27186da1961d4ca3e93928ff0956.png\" alt=\"Elm mail reader\"></p>\n<p><img title=\"GNU Emacs programmable editor\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/f752eaf2abf8ea574b328c61f914cc33.png\" alt=\"GNU Emacs programmable editor\"></p>\n<p>SLS 1.05 甚至包含了一个可以让你在终端玩的俄罗斯方块版本。</p>\n<p><img title=\"Tetris for terminals\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/7f441201064939f5d49061a65a0fcdf0.png\" alt=\"Tetris for terminals\"></p>\n<p>在二十世纪 90 年代，多数住宅的网络接入是通过拨号连接的，所以 SLS 1.05 包含了 Minicom 调制解调器拨号程序。Minicom 提供一个与调制解调器的直接连接，并需要用户通过贺氏调制解调器的 <strong>AT</strong> 命令来完成一些像是拨号或挂电话这样的基础功能。Minicom 同样支持宏和其他简单功能来使连接你的本地调制解调器池更容易。</p>\n<p><img title=\"Minicom modem-dialer application\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/13b052925335f4bf15a61e2a2f73352b.png\" alt=\"Minicom modem-dialer application\"></p>\n<p>但如果你想要写一篇文档时怎么办？ SLS 1.05 的存在要比 LibreOffice 或者 OpenOffice 早很长时间。在二十世纪 90 年代，Linux 还没有这些应用。相反，如果你想要使用一个文字处理器，可能需要引导你的系统进入 MS-DOS，然后运行你喜欢的文字处理器程序，如 WordPerfect 或者共享软件 GalaxyWrite。</p>\n<p>但是所有的 Unix 系统都包含一套简单的文本格式化程序，叫做 nroff 和 troff。在 Linux 系统中，他们被合并成 GNU groff 包，而 SLS 1.05 包含了 groff 的一个版本。我在 SLS 1.05 上的一项测试就是用 nroff 生成一个简单的文本文档。</p>\n<p><img title=\"A simple nroff text document\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/ec200b92a91cd1e94945295a30d3eb8c.png\" alt=\"A simple nroff text document\"></p>\n<p><img title=\"nroff text document output\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/f217fcd68ed4087077ecc9c0214f0fe4.png\" alt=\"nroff text document output\"></p>\n<h3 id=\"toc_4\">运行 X windows</h3>\n<p>获取安装 X windows 并不特别容易，如 SLS 安装文件承诺的那样：</p>\n<blockquote><p>在你的 PC 上获取安装 X windows 可能会有一些发人深省的体验，主要是因为 PC 的显示卡类型太多。Linux X11 仅支持 VGA 类型的显示卡，但在许多类型的 VGA 中仅有个别的某些类型是完全支持的。SLS 存在两种 X windows 服务器。全彩的 XFree86，支持一些或所有 ET3000、ET400、PVGA1、GVGA、Trident、S3、8514、Accelerated cards、ATI plus 等。</p>\n<p>另一个服务器 XF86_Mono，能够工作在几乎所有的 VGA 卡上，但只提供单色模式。因此，相比于彩色服务器，它会占用更少的内存并拥有更快的速度。当然就是看起来不怎么漂亮。</p>\n<p>X windows 的配置信息都堆放在目录 “/usr/X386/lib/X11/”。需要注意的是，“Xconfig” 文件为监视器和显示卡定义了时序。默认情况下，X windows 设置使用彩色服务器，如果彩色服务器出现问题，你可以切换到单色服务器 x386mono，因为它已经支持各种标准的 VGA。本质上，这只是将 /usr/X386/bin/X 链接到它。</p>\n<p>只需要编辑 Xconfig 来设置鼠标驱动类型和时序，然后键入 “startx” 即可。</p></blockquote>\n<p>这些听起来令人困惑，但它就是这样。手工配置 X windows 真的可以是一个发人深省的体验。幸好，SLS 1.05 包含了 syssetup 程序来帮你确定系统组件的种类，包括了 X windows 的显示设置。在一些提示过后，经过一些实验和调整，最终我成功启动了 X windows！</p>\n<p><img title=\"The syssetup program\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/bcaea8d4616c94e53487a762f0b7eaf0.png\" alt=\"The syssetup program\"></p>\n<p>但这是来自于 1994 年的 X windows，它仍然并没有桌面的概念。我可以从 FVWM （一个虚拟窗口管理器）或 TWM （选项卡式的窗口管理器）中选择。TWM 直观地设置提供一个功能简单的图形环境。</p>\n<p><img title=\"TWM\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/97c8eadaf2ce93c38995b0a92e839fc5.png\" alt=\"TWM\"></p>\n<h3 id=\"toc_5\">关机</h3>\n<p>我已经在我的 Linux 寻根之旅沉浸许久，是时候最终回到我的现代桌面上了。最初我跑 Linux 的是一台仅有 8MB 内存和 一个 120MB 硬盘驱动器的 32 位 386 电脑，而我现在的系统已经足够强大了。拥有双核 64 位 Intel Core i5 处理器，4 GB 内存和一个 128 GB 的固态硬盘，我可以在我的运行着 Linux 内核 4.11.11 的系统上做更多事情。那么，在我的 SLS 1.05 的实验结束之后，是时候离开了。</p>\n<p><img title=\"Shutting down\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/b6254ead7170bd2dbacf864457006fdc.png\" alt=\"Shutting down\"></p>\n<p>再见，Linux 1.0。很高兴看到你的茁壮成长。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112494\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112494votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112494\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": "  评论", "praise_nums": "1", "url_object_id": "1118eeda71990c18b1a0e9492a82d95e", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2014/04/e260ae4f5d153b25be87819b25ff0577.jpg"], "front_image_path": "full/6085acc0af4696f5d49164561c6bc4f9b590fc26.jpg", "title": "Linux 26 周年，来一场怀旧之旅"}
{"create_date": "2017/09/12 ", "url": "http://blog.jobbole.com/112466/", "fav_nums": 2, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://my.oschina.net/wangxindong/blog/1531596\">新栋BOOK</a>   </div><h3>1、定义</h3>\n<p>何谓数据异构，上周交易部门商品的同事过来做分享，又看到这个词，他的PPT里面是 数据库异构。其实我们以前做的事情，也是可以成为数据异构。比如我们将DB里面的数据持久化到REDIS里面去，就是一种数据异构的方式。如果要下个定义的话：<strong>把数据按需（数据结构、存取方式、存取形式）异地构建存储。</strong></p>\n<h3>2、常见应用场景</h3>\n<p>分库分表中有一个最为常见的场景，为了提升数据库的查询能力，我们都会对数据库做分库分表操作。比如订单库，开始的时候我们是按照订单ID维度去分库分表，那么后来的业务需求想按照商家维度去查询，比如我想查询某一个商家下的所有订单，就非常麻烦。这个时候通过数据异构就能很好的解决此问题，比如下图</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/fa46be3f45850ad48951742bb9ec51df.png\" alt=\"异构维度.png\"></p>\n<p style=\"text-align: center\">异构维度</p>\n<p style=\"text-align: left\"><strong>总结起来大概有以下几种场景</strong></p>\n<ol>\n<li>数据库镜像</li>\n<li>数据库实时备份</li>\n<li>多级索引</li>\n<li>search build（比如分库分表后的多维度数据查询）</li>\n<li>业务cache刷新</li>\n<li>价格、库存变化等重要业务消息</li>\n</ol>\n<h3>3、数据异构方向</h3>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/939f4abdb92c7c0ce9a8ba0918d85180.png\" alt=\"异构的几种方向.png\"></p>\n<p style=\"text-align: center\">几种异构方式</p>\n<p>在日常业务开发中大致可以分为以上几种数据去向，DB-DB这种方式，一般常见于分库分表后，聚合查询的时候，比如我们按照订单ID去分库分表，那么这个时候我们要按照用户ID去查询，查询这个用户下面的订单就非常不方便了，当然可以使用统一加到内存中去，但这样不太好。所以我们就可以用数据库异构的方式，重新按照用户ID的维度来分一个表，像在上面常见应用场景中介绍的那样。把数据异构到redis、elasticserach、slor中去要解决的问题跟按照多维度来查询的需求差不多。这些存储天生都有聚合的功能。当然同时也可以提高查询性能，应对大访问量，比如redis这种抗量银弹。</p>\n<h3>4、数据异构的常用方法</h3>\n<h4>3.1、完整克隆</h4>\n<p>这个很简单就是将数据库A，全部拷贝一份到数据库B，这样的使用场景是离线统计跑任务脚本的时候可以。缺点也很突出，不适用于持续增长的数据。</p>\n<h4>3.2、标记同步</h4>\n<p>这个是业务场景比较简单的时候，理想情况下数据不会发生改变，比如日志数据，这个时候可以去标记，比如时间戳，这样当发生故障的时候还可以回溯到上一次同步点，开始重新同步数据。</p>\n<h4>3.3、BINLOG方式</h4>\n<p>通过实时的订阅mysql的binlog日志，消费到这些日志后，重新构建数据结构插入一个新的数据库或者是其他存储比如es、slor等等。订阅binlog日志可以比较好的能保证数据的一致性。</p>\n<h4>3.4、MQ方式</h4>\n<p>业务数据写入DB的同时，也发送MQ一份，也就是业务里面实现双写。这种方式比较简单，但也很难保证数据一致性，对简单的业务场景可以采用这种方式。</p>\n<h3>5、binlog和mq方式重点介绍</h3>\n<h4>5.1、binlog</h4>\n<h5>5.1.1、订阅binglog日志异构流程图</h5>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/a8369973e6880af9e85c3c0477430595.png\" alt=\"canal异构方式.png\"></p>\n<p style=\"text-align: center\">canal异构方式</p>\n<h5>5.1.2、使用说明</h5>\n<p>binglog是数据的日志记录方式，每次对数据的操作都会有binlog日志。现在开源的订阅binlog日志的组件，比如使用比较广泛的canal，它是阿里开源的基于mysql数据库binlog的增量订阅和消费组件。由于cannal服务器目前读取的binlog事件只保存在内存中，并且只有一个canal客户端可以进行消费。所以如果需要多个消费客户端，可以引入activemq或者kafka。如上图绿色虚线框部分。我们还需要确保全量对比来保证数据的一致性（canal+mq的重试机制基本可以保证写入异构库之后的数据一致性），这个时候可以有一个全量同步WORKER程序来保证，如上图深绿色部分。</p>\n<h5>5.1.3、canal的工作原理</h5>\n<p>先来看下mysql主备（主从）复制原理如下图，在此原理基础之上我们再来理解canal的实现原理就一眼能明白了。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/daadf7db68a30d1e844ebee84d7f854c.jpg\" alt=\"mysql主备复制实现原理.jpg\"></p>\n<p style=\"text-align: center\">mysql主备复制实现原理</p>\n<p style=\"text-align: left\"><strong>mysql主备（主从）复制原理，从上层来看，复制分成三步：</strong></p>\n<ol>\n<li>master将改变记录到二进制日志(binary log)中（这些记录叫做二进制日志事件，binary log events，可以通过show binlog events进行查看）；</li>\n<li>slave将master的binary log events拷贝到它的中继日志(relay log)；</li>\n<li>slave重做中继日志中的事件，将改变反映它自己的数据。<br>\n再来看下canal的原理，如下图：<br>\n<img src=\"http://jbcdn2.b0.upaiyun.com/2017/09/a82380169db0d36662aaefb8c910003a.jpg\" alt=\"canal工作原理.jpg\"><br>\n<strong>cannal实现原理相对比较简单（参照上面的mysql主备复制实现原理）：</strong></li>\n<li>canal模拟mysql slave的交互协议，伪装自己为mysql slave，向mysql master发送dump协议</li>\n<li>mysql master收到dump请求，开始推送binary log给slave(也就是canal)</li>\n<li>canal解析binary log对象(原始为byte流)<br>\n我们在部署canal server的时候要部署多台，来保证高可用。但是canal的原理，是只有一台服务器在跑处理，其它的服务器作为热备。canal server的高可用是通过zookeeper来维护的。<br>\n<strong>有关canal更具体的使用和详细原理请参照：<a href=\"https://github.com/alibaba/canal\" target=\"_blank\" rel=\"nofollow\">https://github.com/alibaba/canal</a></strong></li>\n</ol>\n<h5>5.1.4、注意点</h5>\n<ul>\n<li>1、确认MySQL开启binlog，使用<strong>show variables like ‘log_bin’;</strong> 查看ON为已开启</li>\n<li>2、确认目标库可以产生binlog，<strong>show master status</strong> 注意Binlog_Do_DB，Binlog_Ignore_DB参数</li>\n<li>3、确认binlog格式为ROW，使用<strong>show variables like ‘binlog_format’;</strong> 非ROW模式登录MySQL执行 <strong>set global binlog_format=ROW; flush logs;</strong> 或者通过更改MySQL配置文件并重启MySQL生效。</li>\n<li>4、为保证binlake服务可以获取Binlog，需添加授权，执行 <strong>GRANT SELECT, REPLICATION SLAVE, REPLICATION CLIENT ON <em>.</em> TO ‘admin’@’%’ identified by ‘admin’; FLUSH PRIVILEGES;</strong></li>\n</ul>\n<h4>5.2、mq方式</h4>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/fd773d9eb65abb904785d4dbd31196d3.png\" alt=\"MQ异构方式.png\"></p>\n<p style=\"text-align: center\">MQ异构方式</p>\n<p>mq的方式，就相对简单，实际上是在业务逻辑中写DB的同时去写一次MQ，但是这种方式不能够保证数据一致性，就是不能保证跨资源的事务。<strong>注：调用第三方远程RPC的操作一定不要放到事务中。</strong></p>\n<h3>6、总结</h3>\n<p>本文主要叙述了数据异构的使用场景，方法。这里面涉及到的activemq以及canal并没有深入分析，关于这块的内容可以直接参考相关具体文档，文中已给了链接地址。根据数据异构的定义，将数据异地构建存储，我们可以应用的地方就非常多，文中说的分库分表之后按照其它维度来查询的时候，我们想脱离DB直接用缓存比如redis来抗量的时候。数据异构这种方式都能够很好的帮助我们来解决诸如此类的问题。<br>\n<strong>转载请注明出处，并附上链接 https://my.oschina.net/wangxindong/blog/1531596</strong><br>\n参考资料：<a href=\"https://github.com/alibaba/canal\" target=\"_blank\" rel=\"nofollow\">https://github.com/alibaba/canal</a></p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112466\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112466votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112466\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": "  评论", "praise_nums": "1", "url_object_id": "e46f82608b69c33c31063358c6a14cf5", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/03/4bae6998d00f180d42c7da716e3d0bb2.jpg"], "front_image_path": "full/117976068e2e847f1067d25ea3fa90a3b5a60f3f.jpg", "title": "数据异构的武器-BINLOG+MQ"}
{"create_date": "2017/09/10 ", "url": "http://blog.jobbole.com/112322/", "fav_nums": 7, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/buntamarui\">小米云豆粥</a> 翻译。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://thehftguy.com/2016/10/24/heres-how-to-make-a-good-github-project-for-your-resume/\">thehftguy</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>你面试的公司找你要 GitHub 链接，猎头找你要 GitHub 链接。“你参与过开源项目么？”是目前 IT 技术面试中的常见问题之一。</p>\n<p>既然他们要 GitHub，你就得给。本文将阐述如何在面试中展示你在 GitHub 上的项目。</p>\n<p>以下的建议有两个用途：应聘者可以学习怎么写软件的简介（不一定非要是GitHub）；招聘者（程序员）可以学习可以从哪些关键点来评价一个程序员的水平和软件的质量。</p>\n<figure id=\"attachment_3948\" class=\"wp-caption aligncenter\"><img class=\"aligncenter size-medium wp-image-3948\" src=\"https://thehftguy.files.wordpress.com/2016/10/github-submit-application1.png?w=300&amp;h=239\" alt=\"submit application form with a GitHub link\" width=\"300\" height=\"239\">\n<figcaption class=\"wp-caption-text\">When having a GitHub is mandatory, just like having a name.</figcaption>\n</figure>\n<h3>链接一个特定的项目</h3>\n<p>在你的简历和每一份申请里面都放上你的GitHub链接。</p>\n<p>该链接要直链到一个项目。不要给你GitHub的主页地址，那个页面没有有用信息，很难让人继续浏览。</p>\n<p>你必须只展示一个项目。一个就够了，不需要更多。</p>\n<p>这个项目将是你的“登录页面”，是招聘者看到的第一个页面。他们很少去看其他页面（也没有这个必要）所以该页面本身就应该展示一切信息。如果他们去看了其他页面，说明这个主页成功引起了他们的兴趣，他们想知道更多项目细节。</p>\n<p>我们要写一个可以充分展示你的能力，并能给人留下好的第一印象的项目页面。</p>\n<h3>项目结构</h3>\n<p>用5秒时间看软件的架构就可以知道项目优劣。</p>\n<p>你一眼就能看出来一个程序员没有经验，他们的项目往往没有结构。项目文件要么在随便一个地方或者都在根目录。</p>\n<p><strong>一个好的项目结构必须将源代码，测试，库文件，可执行文件分开放在不同的文件夹中</strong>。</p>\n<p>命名的细节，例如是用‘doc’还是用‘docs’并不重要。这里是GitHub项目的<a href=\"https://GitHub.com/kriasoft/Folder-Structure-Conventions\">文件夹结构</a>：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33df93e5c4717273729\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n.\r\n├── build                   # Compiled files (alternatively `dist`)\r\n├── docs                    # Documentation files (alternatively `doc`)\r\n├── src                     # Source files (alternatively `lib` or `app`)\r\n├── test                    # Automated tests (alternatively `spec` or `tests`)\r\n├── tools                   # Tools and utilities\r\n├── LICENSE\r\n└── README.md\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33df93e5c4717273729-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33df93e5c4717273729-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f33df93e5c4717273729-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33df93e5c4717273729-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f33df93e5c4717273729-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33df93e5c4717273729-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f33df93e5c4717273729-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33df93e5c4717273729-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f33df93e5c4717273729-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33df93e5c4717273729-1\"><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33df93e5c4717273729-2\">├──<span class=\"crayon-h\"> </span><span class=\"crayon-v\">build</span><span class=\"crayon-h\">                   </span><span class=\"crayon-p\"># Compiled files (alternatively `dist`)</span></div><div class=\"crayon-line\" id=\"crayon-59f33df93e5c4717273729-3\">├──<span class=\"crayon-h\"> </span><span class=\"crayon-v\">docs</span><span class=\"crayon-h\">                    </span><span class=\"crayon-p\"># Documentation files (alternatively `doc`)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33df93e5c4717273729-4\">├──<span class=\"crayon-h\"> </span><span class=\"crayon-v\">src</span><span class=\"crayon-h\">                     </span><span class=\"crayon-p\"># Source files (alternatively `lib` or `app`)</span></div><div class=\"crayon-line\" id=\"crayon-59f33df93e5c4717273729-5\">├──<span class=\"crayon-h\"> </span><span class=\"crayon-v\">test</span><span class=\"crayon-h\">                    </span><span class=\"crayon-p\"># Automated tests (alternatively `spec` or `tests`)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33df93e5c4717273729-6\">├──<span class=\"crayon-h\"> </span><span class=\"crayon-v\">tools</span><span class=\"crayon-h\">                   </span><span class=\"crayon-p\"># Tools and utilities</span></div><div class=\"crayon-line\" id=\"crayon-59f33df93e5c4717273729-7\">├──<span class=\"crayon-h\"> </span><span class=\"crayon-i\">LICENSE</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33df93e5c4717273729-8\">└──<span class=\"crayon-h\"> </span><span class=\"crayon-v\">README</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">md</span></div><div class=\"crayon-line\" id=\"crayon-59f33df93e5c4717273729-9\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p></p>\n<figure id=\"attachment_4111\" class=\"wp-caption alignnone\"><img class=\"alignnone size-full wp-image-4111\" src=\"https://thehftguy.files.wordpress.com/2016/10/github-project-structure.png?w=809\" alt=\"software project structure\">\n<figcaption class=\"wp-caption-text\">A well-organized project</figcaption>\n</figure>\n<h3>有一个项目简介文件</h3>\n<p>项目简介文件可以提供：</p>\n<ul>\n<li>项目目标</li>\n<li>截屏或视频</li>\n<li>使用说明</li>\n<li>软件下载页面</li>\n</ul>\n<h3>在简介文件里面放软件界面截屏</h3>\n<p>一张图比一千个字更能说明问题。</p>\n<p>人们不会因为要看软件界面就去安装软件。请提供软件界面截图。</p>\n<h3>在简介中放视频</h3>\n<p>一张图能抵一千个字，那么一个视频顶一千张图。</p>\n<figure id=\"attachment_3846\" class=\"wp-caption alignnone\"><img class=\"alignnone size-full wp-image-3846\" src=\"https://thehftguy.files.wordpress.com/2016/10/github-snake-gif.gif?w=809\" alt=\"snake game preview animated gif\" width=\"600\" height=\"370\">\n<figcaption class=\"wp-caption-text\">Great demo from <a href=\"https://GitHub.com/DyegoCosta/snake-game\" target=\"_blank\" rel=\"noopener\">a random snake project on GitHub</a></figcaption>\n</figure>\n<p><strong>注意</strong>：GitHub不允许插入视频，你可以使用动态图。</p>\n<h3>网页链接或安装文件链接</h3>\n<p>如果该项目是网络应用，请提供网页地址。当然，所有人都应该能访问该地址。</p>\n<p>如果该项目是单机程序，请提供安装文件下载地址。如果安装文件看上去不专业，用户是不会安装它的。很多时候，是否专业跟发布方式有关。</p>\n<h3>整合GitHub工具</h3>\n<p>GitHub提供了一整套免费工具用于编连，打包，测试和其他功能。这些工具在专业软件开发中都是必须的。</p>\n<p>以前想要实现这些功能非常困难，但如今通过GitHub一切都非常简单。你没有理由不用它们。</p>\n<p><img class=\" size-full wp-image-3871 aligncenter\" style=\"height: auto; max-width: 100%; clear: both; margin: 0.8em auto;\" src=\"https://thehftguy.files.wordpress.com/2016/10/github-integration-icons.png?w=809\" alt=\"GitHub-integration-icons\"></p>\n<p>这是一个由C++实现的四子棋的例子。按钮从左到右代表：</p>\n<ol>\n<li>在Linux上编连（<a href=\"https://travis-ci.org/\" target=\"_blank\" rel=\"noopener\">Travis CI</a>）</li>\n<li>在Windows上编连（<a href=\"https://www.appveyor.com/\" target=\"_blank\" rel=\"noopener\">AppVeyor</a>）</li>\n<li>单元测试和测试覆盖分析（<a href=\"https://coveralls.io/\" target=\"_blank\" rel=\"noopener\">Coveralls</a>）</li>\n</ol>\n<h3>如何处理源代码？</h3>\n<p>“没人在乎你的源代码——得知这个事实的时候我也很吃惊。我在整理代码上花了不少时间，但发现没人在乎。重要的不是代码，而是产品” （<a href=\"https://mortoray.com/2015/04/20/nobody-cares-about-your-code/\">出处</a>）</p>\n<p>比起猜，读一段软件功能描述要快10倍。比起自己弄明白软件用法，观看一个介绍基本用法的视频可以快100倍。比起逆向工程，读设计图表要快1000倍。你可以通过读源代码来搞清楚一切，但这个过程要费事得多。读源代码（解码源代码）是非常耗时的。只有在走投无路的时候才应该用。</p>\n<p>经验教训1：没人在乎你的代码，也不会有人去读你的代码。</p>\n<p>经验教训2：别指望别人会去读你的代码，也别强迫别人去读代码。</p>\n<h3>如果我没有像样的大项目要怎么办？</h3>\n<p>挺好的。简单的项目更容易展示，更容易解释，面试官也更容易理解。比如大家都知道四子棋是怎么回事。</p>\n<p>即使第一眼看上去很简单，但每一个项目都包含了很多工作量：写一个好的用户界面，调整颜色，允许两个人一起游戏，加上对下一步棋的走子建议，加上 AI 选手等等。</p>\n<p>这个游戏规则很简单但是要把它做成好的软件要做很多工作。这些都是你在面对面的面试中可以跟面试官深入探讨的地方。</p>\n<p>你知道玩四子棋的时候先走的选手一定会赢么？【如果他不犯错的话】你知道如果第一个选手第一步棋不走中间的话，第二个选手一定可以将棋走成平局么？</p>\n<p>来源：<a href=\"http://www.informatik.uni-trier.de/~fernau/DSL0607/Masterthesis-Viergewinnt.pdf\" target=\"_blank\" rel=\"noopener\">A Knowledge-based Approach of Connect-Four</a>, <em>The Game is Solved: White Wins</em>, Victor Allis</p>\n<h3>面试官真的会去看GitHub么？</h3>\n<p>事实上<strong>他们不会</strong>。</p>\n<figure id=\"attachment_4010\" class=\"wp-caption aligncenter\"><img class=\" size-full wp-image-4010 aligncenter\" src=\"https://thehftguy.files.wordpress.com/2016/10/github-traffic.png?w=809\" alt=\"GitHub traffic statistics\">\n<figcaption class=\"wp-caption-text\">GitHub Traffic Statistics</figcaption>\n</figure>\n<p>我们测试过了。这个图是我们发出一堆简历之后的数据统计。这三个点击是我自己点的。在写这篇文章的时候我没有登录就去点了GitHub。我的错。</p>\n<p>从我上次找工作的经验来说，经过十几个电话面试（每次电话有一个技术人员）和几个现场面试（4到7个技术人员），只有一个人去看了我的GitHub页面。</p>\n<p>结论：没人关心GitHub，没人会看GitHub。每人都会问，是因为别人也在这样做。</p>\n<p>好处：既然没有人真的去看，你也可以拒绝参加这场GitHub的假面舞会。你可以用这个<a href=\"https://GitHub.com/leachim6/hello-world\"> hello world 终极版本库</a> 去回应所有的GitHub要求。这个版本库包含用一百种语言实现的“Hello world”。</p>\n<h3>小抄</h3>\n<ol>\n<li>项目要有结构</li>\n<li>要有项目简介文件</li>\n<li>写一段说明软件功能的介绍</li>\n<li>放上软件界面截图和使用说明视频</li>\n<li>提供安装文件下载地址或者网络应用的网址</li>\n<li>整合发开工具（CI，单元测试，打包工具等等）</li>\n</ol>\n<p>这世上还有其他软件工程的好范例，不仅仅局限于GitHub。</p>\n\r\n        \r\n            <blockquote class=\"rewards\">\n        <p><strong>打赏支持我翻译更多好文章，谢谢！</strong></p>\n        <a href=\"#rewardbox\" id=\"rewards-button\" class=\"fancybox\"><span class=\"btn-bluet-blue href-style\"><i class=\"fa fa-jpy\"></i> 打赏译者</span></a>\n    </blockquote>\n\n    <div id=\"rewardbox\">\n        <h4>打赏支持我翻译更多好文章，谢谢！</h4>\n                <p>任选一种支付方式</p>\n                <p>\n                        <img src=\"http://jbcdn2.b0.upaiyun.com/2016/07/2ec965670e006b5d53c221a7cdcf0108.jpg\">\n            \n                            <img src=\"http://jbcdn2.b0.upaiyun.com/2016/07/a5e36df34a1aea088f06fb503c7ce93d.jpg\">\n                    </p>\n    </div>\n\n    \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112322\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112322votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112322\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 7 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 2 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/buntamarui\">小米云豆粥</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/buntamarui\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2016/09/5bfa690c5bc8a2dc2344cffdebf5f50b.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            数据科学进修中，Python小码农。不用QQ，有事站内信联系。        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/buntamarui\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/buntamarui/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/buntamarui/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 30</a> · <a title=\"微博主页\" target=\"_blank\" href=\"http://weibo.com/ammie/\"><i class=\"fa fa-weibo\"></i></a> <a title=\"GitHub主页\" target=\"_blank\" href=\"https://github.com/bchen4\"><i class=\"fa fa-github\"></i></a> <a title=\"Linked主页\" target=\"_blank\" href=\"https://www.linkedin.com/\"><i class=\"fa fa-linkedin\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": 2, "praise_nums": "2", "url_object_id": "3020491df0f8c0be11c80716e2019c4c", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2013/03/124.jpg"], "front_image_path": "full/4ccab0a38c3c13879135519b200e0c60ce7498bb.jpg", "title": "技术面试中常被问到是否参与开源，那如何清晰展示 GitHub 项目呢？"}
{"create_date": "2017/09/11 ", "url": "http://blog.jobbole.com/112407/", "fav_nums": "  收藏", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://dev.mysql.com/doc/relnotes/mysql/8.0/en/\">MySQL</a>   译文出处：<a target=\"_blank\" href=\"https://www.oschina.net/news/88499/mysql-8-0-3-rc-coming-soon\">老叶茶馆 微信公众号</a>   </div><p>MySQL 8.0.3 即将发布，一起看看有什么新变化吧</p>\n<p>MySQL 8.0.3 即将发布 RC 版本，这预示着 8.0 版本离 GA 越来越近了。</p>\n<p>下面分享一下 8.0.3 版本的一些重要新特性、新变化：</p>\n<ol class=\" list-paddingleft-2\">\n<li>直接<strong>废除 query cache</strong>（应该只是关闭入口，自行编译源码的话，还能再次启用）</li>\n<li>查询优化器支持直接在 SQL 中利用 <strong>SET_VAR</strong> 这个 HINT 语法修改某些会话级的选项，比如：- SELECT /*+ SET_VAR(sort_buffer_size = 16M) */ name FROM people ORDER BY name;- INSERT /*+ SET_VAR(foreign_key_checks=OFF) */ INTO t2 VALUES(2);\n<p>（这个功能超级实用啊，直接在 SQL 内可以修改了，都不用再写一个 SQL，而且还担心会影响别人）</p></li>\n<li>查询优化器现在支持将各个列统计结果直方图存储在 <strong>column_statistics</strong> 数据字典中，以便构造执行计划。有了这个直方图，就可用于该列和常量的比较判断</li>\n<li>查询优化器中新增标记位 <strong>use_invisible_indexes</strong>，用于控制在构造执行计划时是否考虑不可见索引（invisible indexes）因素</li>\n<li>InnoDB 新增<strong>备份专用锁</strong>，以前 InnoDB 表在线热备时若同时进行 DML 可能导致 InnoDB 文件的快照不一致，有了这个备份锁就不用担心了。备份锁用法是 <strong>LOCK INSTANCE FOR BACKUP、UNLOCK INSTANCE</strong>，需要有 <strong>BACKUP_ADMIN</strong> 权限</li>\n<li>InnoDB 现在支持<strong>表 DDL 的原子性</strong>，也就是 InnoDB 表上的 DDL 也可以实现事务完整性了，要么失败回滚，要么成功提交，不至于出现 DDL 时部分成功的问题，此外还<strong>支持 crash-safe 特性</strong>（这个功能大赞啊）</li>\n<li>若是延迟初始化组复制（GR，Group Replication），也就是在 single-primary 模式下，辅助节点上可以通过异步复制通道写入数据，这在正常初始化组复制插件时是不允许的（Bug #26314756，这是个内部 BUG ID，我们看不到的，别费劲了。不过还有万能的 github 啊，也能看到相关描述，参见：<a title=\"https://github.com/mysql/mysql-server/commit/acbf1d13ecd1d89557f8ca62116f06e8633dc90d\" href=\"https://github.com/mysql/mysql-server/commit/acbf1d13ecd1d89557f8ca62116f06e8633dc90d\" target=\"_blank\">https://github.com/mysql/mysql-server/commit/acbf1d13ecd1d89557f8ca62116f06e8633dc90d</a>）</li>\n<li>系统库 INFORMATION_SCHEMA 中的 <strong>FILES、PARTITIONS、REFERENTIAL_CONSTRAINTS </strong>等几个视图被重新实现了一番（这个没说太具体，可能和所有的 DDL 都放入 InnoDB 有关系，不再使用 FRM 文件存储 DDL 信息）</li>\n<li>由于外键约束锁功能改造，涉及到外键约束的父表上的列改名功能将暂时被禁用一段时间（估计过几个小版本就能正常用了）</li>\n<li>InnoDB 通用表空间新增改名语法：<strong>ALTER TABLESPACE … RENAME TO</strong>（作为 MySQL DBA，貌似没什么人玩通用表空间，可能从 Oracle DBA 转过来更习惯使用吧）</li>\n<li>MySQL 复制的 slave 节点上，<strong>log_slave_updates </strong>选项默认值改为 ON（这个也是比较实用，方便将该 slave 直接作为中继节点使用）</li>\n<li>选项 <strong>sql_log_bin </strong>的全局作用域被改成回话级作用域，也就是修改本选项只影响本会话，不再影响全局（这个选项一般也是在会话级使用）</li>\n<li>选项 <strong>max_allowed_packet </strong>的默认值从 4M 提高到 64M（这个貌似比较实在）</li>\n<li>选项 <strong>event_scheduler </strong>的默认值由 OFF 改成 ON，使得默认启用 event scheduler 功能（我觉得 event 功能挺好的呀，不过貌似没几个人使用 event）</li>\n<li>选项 <strong>max_error_count </strong>的默认值从 64 提高到 1024（没感觉的说）</li>\n<li>最后一个，utf8mb4 字符集增加俄语的校验集（新增 utf8mb4_ru_0900_ai_ci、utf8mb4_ru_0900_as_cs 两种 collations set）</li>\n</ol>\n<p>一起期待 8.0.3 的发布吧！</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112407\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112407votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112407\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": "  评论", "praise_nums": "1", "url_object_id": "0f20efaab05e871972b90f5ccd637e96", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2015/11/e78e36715813f49e9e62fe0c6050075c.png"], "front_image_path": "full/35011d6168be00e949624c665041dc724e3ad786.jpg", "title": "MySQL 8.0.3 RC 版即将发布，看看有哪些变化"}
{"create_date": "2017/09/05 ", "url": "http://blog.jobbole.com/112366/", "fav_nums": 3, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://blog.openocean.vc/founder-stories-a-hackers-hacker-6d5054c90564\">OpenOcean</a>   译文出处：<a target=\"_blank\" href=\"http://36kr.com/p/5090841.html\">36氪</a>   </div><p>编者按：根据StackOverflow的最新调查，MySQL仍然是全世界最流行的数据库，受访的开发者中有44.3%的人在使用，超过了第二位的SQL Server 10多个百分点。可是你知道MySQL是怎么诞生的吗？openocean 的一篇有关MySQL开发者Michael “Monty” Widenius的传记为我们揭秘。</p>\n<p><span class=\"load-html-img loaded\"><img class=\"aligncenter\" src=\"https://pic.36krcnd.com/avatar/201708/31082811/du4b3zkobsgzg70e.jpeg!1200\" alt=\"MySQL创始人：写代码比打游戏还爽，程序员应该多泡开源社区\"></span></p>\n<p>大学计算机专业的数量总是会随着技术公司的兴衰而起伏，而现在，计算机科学正处在全盛时期。这意味着，不管怎样，计算机科学专业的毕业生绝大部分可能都会去敲2年的代码，再转到产品管理，然后过渡到企业、创业或者商学院，接着再转为既有公司的中层管理，32岁的时候结婚，有了2个孩子，一个儿子，一个女儿，一条狗，还有一栋2层的漂亮房子。对于大多数人来说，成为程序员就是一份朝九晚五的工作，一份有保障的6位数薪水来偿还高昂的学费，一种达到目的的手段，没人应该为此受到责备。但对于千千万万无论好坏的程序员来说，只有一个Monty Widenius。</p>\n<p>Monty是一位编程天才。19岁的时候，他从赫尔辛基理工大学辍学开始全职工作，因为大学已经没有什么东西可以教他了。在独自一人写完除了一个库以外的全部代码之后，33岁时，他发布了MySQL，后来后者成为了全世界最流行的开源数据库。55岁时，他藐视着对老年人的歧视，仍然是自己公司最好的程序员。</p>\n<p>Monty1962年出生于赫尔辛基，1978年他用暑假铺沥青挣来的钱买下自己的第一台个人计算机的。Monty迅速意识到自己相当擅长写代码——对于别人来说很复杂的事情他却觉得很简单，而且他对工作非常投入。Monty用一种在讲瑞典语的芬兰人中常见的浓厚口音说：“基本上这就像是在阅读一本真的非常非常好的书。或者像在玩视频游戏。你知道开始玩游戏然后嘣一声3小时的时间就过去了的那种感觉吗？写代码对我来说就是这种感觉。”</p>\n<p>当别人跑去聚会的时候，Monty却呆在家里编程。他把计算机从里到外都摸透了。他把BASIC的能力推到了极限。Monty说：“学校并不理解编程不是像语言或者历史这样的东西，它不是靠学就能学来的。所以学校是不够的。拔尖的黑客是万里挑一。他们奉献了所有能用的时间，10小时，16小时，每一天，年复一年周而复始。大多数人都不愿意做这样的事情。大多数人宁愿好好生活。”在Monty眼里，好的代码是写过一次就永远不需要再碰的那种。从性能角度来看它已经是最优化了，你可以不断增强，但永远都不需要重写。</p>\n<p>到1980年，17岁的Monty痴迷编程已经无法自拔，他需要把自己计算机的内存从8KB扩到16KB。由于芬兰没有商店卖他想要的东西，于是他弄了一条船去到瑞典Allan Larsson的计算机商店。通过Allan，Monty结识了David Axmark，三人沟通交流了多年，就各自项目互相帮忙，偶尔也会一起协作。1995年，他们一起成立了MySQL AB。Monty负责编程，David和Allan负责干完其他的事情。自1981年以来，Monty就一直以芬兰公司Tapio Laakso Oy程序员的身份在写MySQL前身的代码，他和Allan一起创办的数据仓库公司也要用到那个东西。然而，知道1995年，在Allan和David的游说之后Monty才决定在他写的东西之上增加一个SQL层。1996年10月，MySQL终于发布了，它得到了广泛的欢迎。MySQL快速、可靠并且易学，这主要是因为在多年的开发中Monty总是不断把正是客户的反馈整合进来。</p>\n<p>MySQL的初衷是存储和管理大数据。如果有人想要跟踪不同的数据点，他们互使用数据库，也就是有点像微软Excel那样的东西。然而，随着数据变得越来越大，查找Excel这样的数据库就会变得慢多了，也不再可靠。MySQL有能力存储大量数据，并且返回搜索结果极其迅速。“My”来自Monty女儿的名字，而“SQL”就是结构化查询语言（Structured Query Language）的意思，是一种跟数据库沟通的语言。</p>\n<p>对MySQL开源的决定出自1985年的另一次芬兰到瑞典的乘船旅行，这一次是在一场开源大会上。Monty说：“讨论没花多少分钟。我们都希望回馈给开源社区一点东西。哪怕有人想拷贝或者偷盗我们的代码，我们认为自己能挣的钱也不会比现在少。”开源项目使得开发者社区帮助把软件做得更好，但从商业角度来看不好的是货币化就要困难多了。为了避免这一点，Monty补充了一个条款，那就是如果任何企业用MySQL来赚钱的话，就需要付费授权。对此MySQL的代码里面并没有进行任何限制，但就靠这一荣誉制度MySQL实现了扩张并开始赚钱。Monty说：“我认为开源是开发软件的更好方式。但你仍然需要赚够钱来招聘员工，成立公司去跟闭源社区竞争。MySQL是第一款做到这一点的产品。”</p>\n<p>Monty在MySQL AB的职位是CTO，对于大多数成熟的公司来说，CTO其实已经很少再编程的了。然而，Monty从未停下来过，他的绝大部分时间都是在写代码。这种（很少管理的）做法会导致很多晚期阶段初创企业内爆，但哪怕公司人数已经达到550人，Monty在MySQL AB建立的独特文化也使得他可以避免天天开会的烦扰（事实上，Monty甚至都不接受议事日程邀请）。Monty说：“我总是招会自我驱动的人进来。所以我不需要告诉他们太多东西。而开源意味着你有开源社区，大家会给你提供代码，你可以看看那些代码的质量，看看他们是怎么跟社区互动的，跟你是怎么沟通的，他们会问什么问题，在这些情况下很容易就能看出一个人是好是坏。在一次面试里面是很难了解清楚编码者有多好的。”</p>\n<p>MySQL的成功是CTO Monty与CEO Mårten Mickos通力协作的结果。两人能力都很强且对公司非常重要，但方式不一样。Monty是技术专家，专注于员工生产出尽量完美的代码。Mårten是公司建设者，专注于交付东西并帮助团队发展。正是两人的联合愿景制造出了MySQL。但在一家没有免费洗衣、免费午餐、站立办公桌的公司里，是Monty的个人魅力吸引住了变成人才。Monty不是好交际的筹资人，讨好别人的人，博弈论大师，或者职业沟通者。他会写代码，而且写得很好。在Monty看来赢得开发者尊重是很简单的事情：“你干的是跟他们一样的事，而且干得更好。”</p>\n<p><strong>Monty给程序员的建议是，参与到开源社区去，花些时间到个人项目里面</strong>（“这些年来我开发了成百上千个程序：MySQL是其中被用得最多的一个，但其他的都只有我自己用。”）。他警告说，改变环境和代码库将意味着哪怕是最好的程序员也要去了解一堆的东西。在Sun被Oracle收购之后，Monty成立了MariaDB，这是MySQL的一个社区版的分支，开发的团队成员很多都是MySQL团队里面的，使用的也是一样的官方语言：“蹩脚的英语”。MySQL的许多热心的开源信徒跟着Monty去到了MariaDB。MariaDB更加面向开发者，允许由外人打补丁这样的事情发生，在很多Linux发行版中它都是默认的数据库。</p>\n<p>Monty对开源和开发者的承诺是坚定的——OpenOcean原先是Monty用自己在MySQL的所得成立的，使命是投身于开发者驱动、有技术深度的产品。他仍然在赫尔辛基自己家中主持开发者午餐，很快OpenOcean就将推出一个Slack频道让开发者可以直接向Monty提问。在几十年的时间里，Monty对塑造开源社区无私的形象做出的贡献无可争议的。但这里面大部分的功劳都应该归到成千上万无名的程序员和黑客身上，是他们投入的时间和能力造就了开源的繁荣，也是这批人才能确保开源革命的继续。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112366\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112366votetotal\">3</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112366\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 3 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": 1, "praise_nums": "3", "url_object_id": "883f88d012ee53f414b39b6c2be2e158", "front_image_url": ["https://pic.36krcnd.com/avatar/201708/31082811/du4b3zkobsgzg70e.jpeg!1200"], "front_image_path": "full/0c3f9ba3f4a5ba0b302eafe8fdee79036cb5f3b1.jpg", "title": "MySQL 创始人：写代码比打游戏还爽，程序员应该多泡开源社区"}
{"create_date": "2017/09/08 ", "url": "http://blog.jobbole.com/112320/", "fav_nums": 4, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/q1857502771\">暖日生烟</a> 翻译，<a href=\"http://www.jobbole.com/members/young605867996\">Lada</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"http://blog.fogus.me/2015/11/04/the-100101-method-my-approach-to-open-source/\">Michael Fogus</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>【导读】：据本文作者 Michael Fogus 博客上的简介，他是一位 Clojure 开发者和狂热用户，并且是 Clojure 的贡献者（Clojure 本身也是一个开源项目）。平常在 Clojure 和 ClojureScript 花费时间很多。他喜欢棒球、象棋、哲学、恐怖电影、阅读和写作。出过两本书《Functional JavaScript》和《The joy of Clojure》。</p>\n<p><img class=\"alignnone aligncenter\" src=\"http://wx1.sinaimg.cn/mw690/7cc829d3gy1fjbxewni6rj206y06ymx6.jpg\" width=\"250\" height=\"250\"></p>\n<hr>\n<p>许多年里我一直全心投入于开源运动，不过那时候我很少在空闲时写代码，在 Sourceforge、GoogleCode、GitHub 之类的代码托管平台，也找不到我的项目（repo）。<sup>【1】</sup>然而随着时间流逝，我逐渐意识到向全球公开代码的责任，毫不夸张的说，这吸引住了我。</p>\n<p>除了很多“已发布”的代码是低水准的这一事实之外，无论<a href=\"https://en.wikipedia.org/wiki/Authorial_intent\">有意</a>与<a href=\"https://en.wikipedia.org/wiki/Reader-response_criticism\">否</a>，将代码公布于众的行为意味着与某些人签订契约<sup>【2】</sup>，这些人可以为自己的目的使用公开的代码。当然，我并不一定反对这种社会契约，相反，在发布代码的时候我最终改变了主意，以致于我在我的方法中变得更保守了。这个我现在正在使用的方法叫做“100:10:1 方法”，此术语是由开发者 Nick Bentley 创造。<sup>【3】</sup></p>\n<h3>100:10:1 方法究竟是什么？</h3>\n<p>我不会重复赘述此方法的细节，你可以通过阅读 《<a href=\"https://nickbentleygames.wordpress.com/2014/05/12/the-100-10-1-method-for-game-design/\" target=\"_blank\">The 100:10:1 method – the heart of my game design process</a>》来了解。但我会试着从我的开源软件开发方法这一背景下来概括它。</p>\n<p>具体操作分三部分，步骤如下：</p>\n<h3>写下 100 种疯狂的想法</h3>\n<p>首先，准备一本笔记本和一支笔，为开发有意思的开源项目写下 100 种想法即可。这些有关项目的想法可以涉及各种主题，深度和质量。我想过的有，野生语言的创意、已有项目的新功能、系统设计、协议、缺损文件、有趣的 forks、代码简化、游戏、原型、论文想法的实现、第二个系统等等。</p>\n<p><img class=\"aligncenter\" src=\"http://wx2.sinaimg.cn/mw690/a17d6bb7gy1fisza9ufvoj208c03b3yl.jpg\"></p>\n<p>在使用 100:10:1 方法之前，我总是会用疯狂的想法填满我的笔记本。它们通常是东一点西一点，从不会聚集在一个地方。在几页纸上写下这 100个想法后，我的注意力立马集中在它们身上。这样我就可以好好筛选比较为第二步做准备。</p>\n<h3><span id=\"pos_placeholder\" style=\"width: 0px; height: 0px; margin: 0px; padding: 0px;\"></span>为这 10 个想法创造最小可行性产品（MVP）</h3>\n<p>我面前的这 100 个想法，让我了解到我不止当时对追求它们充满兴趣，并且我感觉它们可以使我和他人同时获益。<sup>【4】</sup>从原始的 100 个想法里，我挑出了确定想探索和专研下去的 10 个。在这 10 个项目里，我挑不出一个更好的了，因此我想同时为它们各自编写一个最小可行“项目”。</p>\n<p><img class=\"aligncenter\" src=\"http://wx4.sinaimg.cn/mw690/a17d6bb7gy1fisza9oxcdj208c04pjrl.jpg\" width=\"300\" height=\"169\"></p>\n<p>你可能马上会想到同时开发 10 个项目这件事本身就是一个负担。这不能说是一个错误的评估。然而，我意识到对于我选择的大多数项目，要找到最可行的实现方式是非常难的，如果有也得耗费几个月甚至数年时间。你看，我曾一度认为发布开源软件是把潜在可用的工具给予他人的一种方法。很遗憾的是，随着时间推移，这个观点已经退化到能做到将代码公开就不错了。我现在的想法是，在业余时间写代码仅仅是一个探索，有没有结果也无所谓了。</p>\n<p>同时开发 10 个项目有个好处就是，当我在一个上遇到了瓶颈可以轻易的转移到另一个更有灵感的项目去。作为一个除编程外拥有丰富爱好、社区和家庭生活的人，用一堆选择来对抗我的三分钟热度无疑是非常有用的。拥有 10 个并行的项目意味着总有一个能让我在短时间内感兴趣。我知道当所有兴趣集中在一个任务上时，工作会变的更有效率。无论怎样最后总有一个项目会见到希望<sup>【5】</sup>，当它到来时我已经准备好了进入最后一个阶段。</p>\n<h3>全力开发选中的项目，使其成为一个可以合法发布的软件</h3>\n<p>在开发 10 个项目的过程中，其中一个不可避免会成为有价值的东西。<sup>【6】</sup>万事俱备后，我会将其变为一个高质量的软件产品。<sup>【7】</sup>这意味着要完成所有内容，确保一个健壮的系统，有可靠的例子、测试、文档、稳定的API、博客文章或演讲，甚至可能有网络。<sup>【8】</sup></p>\n<p><img class=\"aligncenter\" src=\"http://wx3.sinaimg.cn/mw690/a17d6bb7gy1fiszaa656cj206004c3yj.jpg\" width=\"216\" height=\"156\"></p>\n<p>在此之前为了我自己而开发的项目，可能要经历大量的工作才能使其成为值得与他人分享的东西。这当然取决于软件本身的复杂度，很可能最后一步要花最长的时间来完成。同样最后阶段也是我最容易彻底放弃的时候。因为我发现了一个大麻烦，如果我不愿为我的代码写文档、例子和测试的话，在未来的数十年想要维护它是根本不可能的。</p>\n<h3>总结</h3>\n<p>这个方法我已经用了一段时间，在此之前，使用类似的方法同样取得了不错的成果。Zeder 和 Patagonia 也是用 100:10:1 方法或类似方法进行开发的。我现在有的一个叫 Tathata 的 Clojure 库，即将进入最后阶段。或许 10 个项目<sup>【9】</sup>里会有一个成功，不过即使失败了，我还会再挑选更多的 10 个去尝试。</p>\n<p><img class=\"aligncenter\" src=\"http://wx4.sinaimg.cn/mw690/a17d6bb7gy1fiszaaj4n9j208c04rt9y.jpg\" width=\"300\" height=\"171\"></p>\n<p>我有足够的时间，准确的说是一辈子。:F</p>\n<p>感谢 Carin Meier、Rich Hickey、Justin Gehtland 和 Paul deGrandis 阅读，并为这篇文章提供修改意见。</p>\n<hr>\n<p>1.事实证明，我的其他爱好(游戏设计、Sabremetrics、写作等)在过去也有类似的趋势，但就像开源编码一样，它们也已经达到100:10:1的理想状态。</p>\n<p>2.不幸的是，人们似乎也倾向于将开源视为一种道德声明。</p>\n<p>3.“100:10:1 方法”这个名字来自尼克·本特利在他的一篇文章中所描述的游戏设计方法。虽然我自己对开源代码的看法已经有点类似于尼克的观点，但他的文章让我的方法有了一个名字和基本结构。无论你在哪儿，Mr. Bentley，谢谢你!</p>\n<p>4.如果我们不创建开源代码来造福他人，那又有什么意义呢？</p>\n<p>5.有时候一个项目会从根上就腐烂，在这种情况下，我会毫不犹豫的废弃它，并将其他替代品放进 100 的列表中。100 的链表是一个动态链表，所有东西可以随存随取。</p>\n<p>6.或者不一定？我担心个啥！</p>\n<p>7.当那一个已经浮出水面了，我仍然不会放弃其他 9 个，不过仅仅是在更表层，MVP 式的水平上开发。如果某个想法失败了，我还会从 100 个中挑选其他的代替。这个方法当然是没有任何硬性规定的。</p>\n<p>8.当然还有最终的名字和标志:p。</p>\n<p>9.如你所见，我将100:10:1 方法应用于其他的创造性的爱好。从编码、音乐、写作到游戏设计，它适用于任何创造性事情。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112320\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112320votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112320\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 4 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/q1857502771\">暖日生烟</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/q1857502771\">\r\n\t\t\t<img src=\"http://q.qlogo.cn/qqapp/208656/06EB1B2C5C7835017E628CFB8E25D68F/100\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            简介还没来得及写 :）        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/q1857502771\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/q1857502771/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/q1857502771/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 14</a> · <a title=\"QQ：826672619\" target=\"_blank\" href=\"#\"><i class=\"fa fa-qq\"></i></a> <a title=\"个人微信：xzs826672619\" target=\"_blank\" href=\"#\"><i class=\"fa fa-weixin\"></i></a> <a title=\"GitHub主页\" target=\"_blank\" href=\"https://github.com/NinoMiao\"><i class=\"fa fa-github\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": 1, "praise_nums": "2", "url_object_id": "96e68d41a1e51a9614a929fce93c1d53", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/09/f1a3d556b79a7fae23ad3ecc6f972164.jpg"], "front_image_path": "full/70c7b887c37d9154dc2b5636ed919464c716d375.jpg", "title": "100:10:1方法 : 我是这样参与开源的"}
{"create_date": "2017/09/12 ", "url": "http://blog.jobbole.com/112321/", "fav_nums": 7, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/fengzhuang19940106\">iScream</a> 翻译，<a href=\"http://www.jobbole.com/members/hanxiaomax\">艾凌风</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://engineeringblog.yelp.com/2017/06/making-photos-smaller.html\">Yelp</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>Yelp 拥有超过 1 亿张由用户生成的照片，这些照片从晚餐、理发，到我们最新的功能之一：yelfies。这些图像占据了用户 APP 和网站的大部分带宽，这意味着存储和传输的巨大成本。为了向用户提供最好的体验，我们努力优化这些图片并将其平均大小缩小了 30%。这样节省了用户的时间和带宽，并降低了为这些图像提供服务的成本。哦，我们这样做都没有降低图像的质量呢！</p>\n<p><img class=\"alignnone\" src=\"http://wx1.sinaimg.cn/mw690/7cc829d3gy1fjgtf2uq3bj218s0rdwot.jpg\" width=\"690\" height=\"422\"></p>\n<h3>背景</h3>\n<p>Yelp 已经帮用户存储上传的照片超过 12 年了。我们那些将无损格式的图片（PNG，GIF）保存成 PNG 格式，而所有其他的格式的图片则保存成 JPEG 格式。我们保存图片用的是 Python 和 Pillow，并使用如下代码片段，开启了我们照片上传的故事：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f288991cf9d532374821\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# do a typical thumbnail, preserving aspect ratio\r\nnew_photo = photo.copy()\r\nnew_photo.thumbnail(\r\n    (width, height),\r\n    resample=PIL.Image.ANTIALIAS,\r\n)\r\nthumbfile = cStringIO.StringIO()\r\nsave_args = {'format': format}\r\nif format == 'JPEG':\r\n    save_args['quality'] = 85\r\nnew_photo.save(thumbfile, **save_args)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f288991cf9d532374821-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288991cf9d532374821-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f288991cf9d532374821-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288991cf9d532374821-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f288991cf9d532374821-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288991cf9d532374821-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f288991cf9d532374821-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288991cf9d532374821-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f288991cf9d532374821-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288991cf9d532374821-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f288991cf9d532374821-11\">11</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f288991cf9d532374821-1\"><span class=\"crayon-p\"># do a typical thumbnail, preserving aspect ratio</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288991cf9d532374821-2\"><span class=\"crayon-v\">new_photo</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">photo</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">copy</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f288991cf9d532374821-3\"><span class=\"crayon-v\">new_photo</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">thumbnail</span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288991cf9d532374821-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">width</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">height</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f288991cf9d532374821-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">resample</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">PIL</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Image</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">ANTIALIAS</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288991cf9d532374821-6\"><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f288991cf9d532374821-7\"><span class=\"crayon-v\">thumbfile</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cStringIO</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">StringIO</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288991cf9d532374821-8\"><span class=\"crayon-v\">save_args</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">'format'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">format</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-59f288991cf9d532374821-9\"><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">format</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'JPEG'</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288991cf9d532374821-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">save_args</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'quality'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">85</span></div><div class=\"crayon-line\" id=\"crayon-59f288991cf9d532374821-11\"><span class=\"crayon-v\">new_photo</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">save</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">thumbfile</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">save_args</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0018 seconds] -->\r\n<p>以此作为起点，我们开始研究潜在的文件大小优化方法，可以让我们在不损失质量的前提下使用。</p>\n<h3 id=\"optimizations\">优化</h3>\n<p>首先，我们不得不决定是自己来处理这个问题，还是让 CDN 提供商用他们的魔力来神奇地改变我们的照片。在优先保证高质量的内容前提下，去评估众多选项并使得潜在的尺寸与质量相互抵消是有意义的。我们先行调查了当前照片文件大小缩小的现状 – 可以做出什么改变，以及与每个改变相关联的大小/质量下降。随着这项调查的完成，我们决定从三大类方法来着手。这篇文章剩下的部分解释了我们做了什么，并在每项优化中获得了多少收益。</p>\n<p><strong>1.Pillow中的改变</strong></p>\n<ul>\n<li>优化标志</li>\n<li>渐进的JPEG</li>\n</ul>\n<p><strong>2.应用照片逻辑的更改</strong></p>\n<ul>\n<li>大型 PNG 格式图的检测</li>\n<li>动态 JPEG 质量</li>\n</ul>\n<p><strong>3.JPEG编码器更改</strong></p>\n<ul>\n<li>Mozjpeg（网格量化，自定义量化矩阵）</li>\n</ul>\n<h3 id=\"changes-in-pillow\">Pillow 中的改变</h3>\n<h3 id=\"optimize-flag\">标志位优化</h3>\n<p>这是我们最简单的更改之一：启用 Pillow 中的设置，以 CPU 耗时为代价（optimize = True）来节约更多的文件大小。 由于该权衡的本质，这样做并不会影响图像质量。</p>\n<p>对于 JPEG 格式的图片，该标志位会指示编码器，通过扫描每张图片做一次附加的遍历，来找到最佳霍夫曼编码。对每张图片的第一遍扫描，我们不是写入文件，而是计算每个值的出现统计，这是计算理想编码所需要信息。PNG 内部使用 zlib，因此在这种情况下，标志位优化能有效地指示编码器使用 gzip -9，而不是 gzip -6。</p>\n<p>这是一项简单的改进，但事实证明它并非灵丹妙药，只减少百分之几的文件大小。</p>\n<h3 id=\"progressive-jpeg\">渐进式 JPEG</h3>\n<p>将图像保存为 JPEG 格式时，你可以选择几种不同的类型：</p>\n<ul>\n<li>从上到下加载的 JPEG 标准图像。</li>\n<li>渐进式 JPEG 图像，从较模糊加载到较不模糊。Pillow（progressive = True）可以轻松地启用渐进式选项。 因而，人类肉眼可感知到性能有了提升（也就是说，当图像部分缺失时，更容易注意到它不是完全锐利的）。</li>\n</ul>\n<p>此外，渐进式文件打包方式通常会使得文件尺寸减少。如维基百科文章中所详尽解释的那样，JPEG 格式在 8×8 像素块上使用 Z 字形模式进行熵编码。当这些像素块的值被解包并按顺序排列时，我们通常首先得到的是非零数字，然后是 0 的序列，用该模式对于图像中的每个 8×8 块进行重复和交织。在使用渐进编码时，解开的像素块的顺序发生了改变。每个块值较高的数字会首先出现文件中（它给出了渐进式图像最早扫描到的不同阻塞），并且那些能增加出色细节的小数字（包括更多的 0），它们的跨度将更长，并一直持续到末位。图像数据的这种重新排序不会改变图像本身，而是增加了在一行中的可能存在的 0 的数量（这样可以更容易地压缩）。</p>\n<p>与由用户贡献的美味甜甜圈图像做比较（点击查看大图）：</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/06/7f058d53944b33506d3375138eca77b4.gif\"><img class=\"alignnone wp-image-65555\" src=\"http://jbcdn2.b0.upaiyun.com/2017/06/7f058d53944b33506d3375138eca77b4.gif\" alt=\"baseline-tiny\" width=\"299\" height=\"220\"></a></p>\n<p>（1）标准 JPEG 格式图渲染的模拟</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/06/2f553920cd4b568166bdbbfb5c0a3b40.gif\"><img class=\"alignnone wp-image-65554\" src=\"http://jbcdn2.b0.upaiyun.com/2017/06/2f553920cd4b568166bdbbfb5c0a3b40.gif\" alt=\"progressive-tiny\" width=\"299\" height=\"220\"></a></p>\n<p>（2）渐进式 JPEG 格式图渲染的模拟。</p>\n<h3 id=\"changes-to-application-photo-logic\">应用照片逻辑的改变</h3>\n<h3 id=\"large-png-detection\">大型 PNG 格式图片的检测</h3>\n<p>Yelp 为用户生成的内容提供了两种图像格式 –  JPEG 和 PNG。JPEG 是一种很好的照片格式，但通常会与高对比度设计内容（如 logo）相结合。相比之下，PNG 是完全无损的，非常适合图形，但对于那些小失真不可见的照片来说占用的空间太大了。在用户上传实际照片是 PNG 格式的情况下，我们识别这些文件并将其另存为 JPEG 格式，可节省下大量的存储空间。Yelp 上一些常见的 PNG 照片来源于移动设备由和应用程序拍摄的截图，这些照片是通过添加特效或边框修饰了的。</p>\n<p><img src=\"https://engineeringblog.yelp.com/images/posts/2017-05-31-making-images-smaller/example-pngs.png\"></p>\n<p>（左）一个典型的具有 logo 和边框的复合 PNG 格式的上传图。 （右）一个典型的来自于屏幕截图的 PNG 格式的上传图。</p>\n<p>我们想减少这些不必要的 PNG 格式的图片数量，但重要的是要避免矫枉过正或降低了 logo 和图形等的质量。我们应该如何区分出一张图片中属于照片的部分呢？从像素层面可以做到吗？</p>\n<p>使用了 2500 张图片作为实验样本后，我们发现文件大小和独特像素的结合可以很好地区分照片。我们用我们最大的分辨率生成候选缩略图，看看输出PNG文件是否大于 300 KiB。如果是，我们还将检查图像内容，查看是否有超过 2^16 种独特颜色（Yelp 将 RGBA 格式的上传图片转成 RGB 格式，但如果没这样做的话，我们也会检查）。</p>\n<p>在实验数据集中，那些手动调整阈值来定义成“ bigness ”占了有可能缩小的文件大小的 88％（即如果我们要转换所有图像，我们预期的文件大小的缩小），这是在不会导致转换后图形的任何假阳性的前提下进行的。</p>\n<p id=\"dynamic-jpeg-quality\"><strong>动态的 JPEG 质量</strong></p>\n<p>缩小 JPEG 文件大小的第一个也是最为人所知的一种方式是称为质量的设置。许多能保存 JPEG 格式图片的应用程序会将质量指定为一个数字。</p>\n<p>质量这个词有点抽象。事实上，一幅 JPEG 格式的图像的每个颜色通道都有单独的质量。质量等级从 0 到 100 映射到颜色通道的不同量化表，取决于丢失了多少数据（通常是高频成分）。信号域中的量化是 JPEG 编码过程中丢失信息的步骤之一。</p>\n<p>减小文件大小的最简单的方法是降低图像的质量，这会引入更多的噪声。不是每张图片在一个给定的相同质量水平上都会丢失相同的信息量。</p>\n<p>我们可以为每张图片动态地选择一种质量优化设置，找到质量和存储大小之间的理想平衡。有两种方法可以做到这一点：</p>\n<ul>\n<li>自下而上：这些是通过处理 8 x 8 像素块级别的图像生成调谐量化表的算法。它们计算出丢失了多少理论上的质量，以及丢失的数据如何放大或消除，对人眼可见失真的多或少。</li>\n<li>自上而下的：这些算法是将整张图片与其原始无失真版本进行比较，检测丢失了多少信息。通过迭代生成具有不同质量设置的候选图像，我们可以选择其中一张图片，作为满足某种评估算法的最低评估水平的图像。</li>\n</ul>\n<p style=\"text-align: left;\">我们评估了一种自下而上的算法，在实验中，在我们希望使用的质量范围的上限内没有产生合适的结果（尽管它似乎仍然具有中档图像质量的潜力， 这时编码器可以开始更冒险地去丢弃它的字节）。关于这一策略的众多学术论文在90年代初就有发表，该方法对计算能力要求很高，并且走了选项 B 地址这类的捷径，例如不评估块之间的交互。</p>\n<p>所以我们采取了第二种方法：使用对分的算法生成不同质量水平的候选图像，并通过使用 pyssim 函数来计算其结构相似性度量（SSIM），来评估每个候选图像的质量下降，直到该值处于可配置但阈值也还处于静态。这允许我们选择性地降低文件的平均大小（和平均质量），仅仅针对那些已经开始产生肉眼可识别的质量下降的图像。</p>\n<p>在下图中，我们绘制了用3种不同质量方法生成的 2500 张图像的SSIM值的表。</p>\n<p>1、用一种质量为 85 的初始方法作出原始图像，使用蓝线来绘制。</p>\n<p><span style=\"font-weight: normal; text-align: center;\">2、一种能降低文件大小，质量改为 80 的替代方法，用红线来绘制。</span></p>\n<p><span style=\"font-weight: normal; text-align: center;\">3、</span><span style=\"font-weight: normal; text-align: center;\">我们在最后选用了一种方法，使用橙色绘制动态质量的 SSIM 为 80 – 85 的图，即选择质量为 80 到 85（含）的图像，这是基于一种满足或超过的 SSIM 比率：该比率是预先计算的、使转换发生在图像范围中间的某个静态值。这样我们可以降低文件的平均大小，而不会降低那些质量最差的图片的质量。</span><strong style=\"text-align: center;\"><img src=\"https://engineeringblog.yelp.com/images/posts/2017-05-31-making-images-smaller/ssims-strategies.png\"></strong></p>\n<p style=\"text-align: center;\">3 种不同质量策略下 2500 张图片的 SSIM 值图</p>\n<h5 id=\"ssim\">SSIM？</h5>\n<p>有不少图像质量算法试图模仿人类视觉系统。我们已经评估过其中的许多算法，并认为 SSIM 虽然较为古老，但基于以下几个特征是最适合于迭代优化的：</p>\n<p>1、对 JPEG 量化误差敏感<br>\n2、快速，简单的算法<br>\n3、可以直接对 PIL 原生图像对象进行计算，而不是将图像转换为 PNG 格式并将其传递给 CLI 应用程序（参见＃2）</p>\n<p>动态质量的代码示例：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f288991cfaf104404979\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nimport cStringIO\r\nimport PIL.Image\r\nfrom ssim import compute_ssim\r\n \r\n \r\ndef get_ssim_at_quality(photo, quality):\r\n    \"\"\"Return the ssim for this JPEG image saved at the specified quality\"\"\"\r\n    ssim_photo = cStringIO.StringIO()\r\n    # optimize is omitted here as it doesn't affect\r\n    # quality but requires additional memory and cpu\r\n    photo.save(ssim_photo, format=\"JPEG\", quality=quality, progressive=True)\r\n    ssim_photo.seek(0)\r\n    ssim_score = compute_ssim(photo, PIL.Image.open(ssim_photo))\r\n    return ssim_score\r\n \r\n \r\ndef _ssim_iteration_count(lo, hi):\r\n    \"\"\"Return the depth of the binary search tree for this range\"\"\"\r\n    if lo &gt;= hi:\r\n        return 0\r\n    else:\r\n        return int(log(hi - lo, 2)) + 1\r\n \r\n \r\ndef jpeg_dynamic_quality(original_photo):\r\n    \"\"\"Return an integer representing the quality that this JPEG image should be\r\n    saved at to attain the quality threshold specified for this photo class.\r\n \r\n    Args:\r\n        original_photo - a prepared PIL JPEG image (only JPEG is supported)\r\n    \"\"\"\r\n    ssim_goal = 0.95\r\n    hi = 85\r\n    lo = 80\r\n \r\n    # working on a smaller size image doesn't give worse results but is faster\r\n    # changing this value requires updating the calculated thresholds\r\n    photo = original_photo.resize((400, 400))\r\n \r\n    if not _should_use_dynamic_quality():\r\n        default_ssim = get_ssim_at_quality(photo, hi)\r\n        return hi, default_ssim\r\n \r\n    # 95 is the highest useful value for JPEG. Higher values cause different behavior\r\n    # Used to establish the image's intrinsic ssim without encoder artifacts\r\n    normalized_ssim = get_ssim_at_quality(photo, 95)\r\n    selected_quality = selected_ssim = None\r\n \r\n    # loop bisection. ssim function increases monotonically so this will converge\r\n    for i in xrange(_ssim_iteration_count(lo, hi)):\r\n        curr_quality = (lo + hi) // 2\r\n        curr_ssim = get_ssim_at_quality(photo, curr_quality)\r\n        ssim_ratio = curr_ssim / normalized_ssim\r\n \r\n        if ssim_ratio &gt;= ssim_goal:\r\n            # continue to check whether a lower quality level also exceeds the goal\r\n            selected_quality = curr_quality\r\n            selected_ssim = curr_ssim\r\n            hi = curr_quality\r\n        else:\r\n            lo = curr_quality\r\n \r\n    if selected_quality:\r\n        return selected_quality, selected_ssim\r\n    else:\r\n        default_ssim = get_ssim_at_quality(photo, hi)\r\n        return hi, default_ssim</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f288991cfaf104404979-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288991cfaf104404979-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f288991cfaf104404979-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288991cfaf104404979-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f288991cfaf104404979-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288991cfaf104404979-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f288991cfaf104404979-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288991cfaf104404979-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f288991cfaf104404979-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288991cfaf104404979-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f288991cfaf104404979-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288991cfaf104404979-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59f288991cfaf104404979-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288991cfaf104404979-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59f288991cfaf104404979-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288991cfaf104404979-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-59f288991cfaf104404979-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288991cfaf104404979-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-59f288991cfaf104404979-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288991cfaf104404979-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-59f288991cfaf104404979-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288991cfaf104404979-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-59f288991cfaf104404979-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288991cfaf104404979-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-59f288991cfaf104404979-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288991cfaf104404979-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-59f288991cfaf104404979-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288991cfaf104404979-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-59f288991cfaf104404979-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288991cfaf104404979-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-59f288991cfaf104404979-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288991cfaf104404979-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-59f288991cfaf104404979-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288991cfaf104404979-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-59f288991cfaf104404979-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288991cfaf104404979-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-59f288991cfaf104404979-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288991cfaf104404979-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-59f288991cfaf104404979-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288991cfaf104404979-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-59f288991cfaf104404979-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288991cfaf104404979-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-59f288991cfaf104404979-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288991cfaf104404979-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-59f288991cfaf104404979-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288991cfaf104404979-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-59f288991cfaf104404979-47\">47</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288991cfaf104404979-48\">48</div><div class=\"crayon-num\" data-line=\"crayon-59f288991cfaf104404979-49\">49</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288991cfaf104404979-50\">50</div><div class=\"crayon-num\" data-line=\"crayon-59f288991cfaf104404979-51\">51</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288991cfaf104404979-52\">52</div><div class=\"crayon-num\" data-line=\"crayon-59f288991cfaf104404979-53\">53</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288991cfaf104404979-54\">54</div><div class=\"crayon-num\" data-line=\"crayon-59f288991cfaf104404979-55\">55</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288991cfaf104404979-56\">56</div><div class=\"crayon-num\" data-line=\"crayon-59f288991cfaf104404979-57\">57</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288991cfaf104404979-58\">58</div><div class=\"crayon-num\" data-line=\"crayon-59f288991cfaf104404979-59\">59</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288991cfaf104404979-60\">60</div><div class=\"crayon-num\" data-line=\"crayon-59f288991cfaf104404979-61\">61</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288991cfaf104404979-62\">62</div><div class=\"crayon-num\" data-line=\"crayon-59f288991cfaf104404979-63\">63</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288991cfaf104404979-64\">64</div><div class=\"crayon-num\" data-line=\"crayon-59f288991cfaf104404979-65\">65</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288991cfaf104404979-66\">66</div><div class=\"crayon-num\" data-line=\"crayon-59f288991cfaf104404979-67\">67</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f288991cfaf104404979-1\"><span class=\"crayon-e\">import </span><span class=\"crayon-e\">cStringIO</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288991cfaf104404979-2\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">PIL</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Image</span></div><div class=\"crayon-line\" id=\"crayon-59f288991cfaf104404979-3\"><span class=\"crayon-e\">from </span><span class=\"crayon-e\">ssim </span><span class=\"crayon-e\">import </span><span class=\"crayon-e\">compute_ssim</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288991cfaf104404979-4\"><span class=\"crayon-e\"> </span></div><div class=\"crayon-line\" id=\"crayon-59f288991cfaf104404979-5\"><span class=\"crayon-e\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288991cfaf104404979-6\"><span class=\"crayon-e\">def </span><span class=\"crayon-e\">get_ssim_at_quality</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">photo</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">quality</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-59f288991cfaf104404979-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">\"\"</span><span class=\"crayon-s\">\"Return the ssim for this JPEG image saved at the specified quality\"</span><span class=\"crayon-s\">\"\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288991cfaf104404979-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">ssim_photo</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cStringIO</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">StringIO</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f288991cfaf104404979-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\"># optimize is omitted here as it doesn't affect</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288991cfaf104404979-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\"># quality but requires additional memory and cpu</span></div><div class=\"crayon-line\" id=\"crayon-59f288991cfaf104404979-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">photo</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">save</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ssim_photo</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">format</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"JPEG\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">quality</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">quality</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">progressive</span><span class=\"crayon-o\">=</span><span class=\"crayon-t\">True</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288991cfaf104404979-12\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">ssim_photo</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">seek</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f288991cfaf104404979-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">ssim_score</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">compute_ssim</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">photo</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">PIL</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Image</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">open</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ssim_photo</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288991cfaf104404979-14\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ssim_score</span></div><div class=\"crayon-line\" id=\"crayon-59f288991cfaf104404979-15\"><span class=\"crayon-e\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288991cfaf104404979-16\"><span class=\"crayon-e\"> </span></div><div class=\"crayon-line\" id=\"crayon-59f288991cfaf104404979-17\"><span class=\"crayon-e\">def </span><span class=\"crayon-e\">_ssim_iteration_count</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">lo</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">hi</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288991cfaf104404979-18\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">\"\"</span><span class=\"crayon-s\">\"Return the depth of the binary search tree for this range\"</span><span class=\"crayon-s\">\"\"</span></div><div class=\"crayon-line\" id=\"crayon-59f288991cfaf104404979-19\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">lo</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">hi</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288991cfaf104404979-20\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line\" id=\"crayon-59f288991cfaf104404979-21\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">else</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288991cfaf104404979-22\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">hi</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">lo</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line\" id=\"crayon-59f288991cfaf104404979-23\"><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288991cfaf104404979-24\"><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-59f288991cfaf104404979-25\"><span class=\"crayon-e\">def </span><span class=\"crayon-e\">jpeg_dynamic_quality</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">original_photo</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288991cfaf104404979-26\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">\"\"</span><span class=\"crayon-s\">\"Return an integer representing the quality that this JPEG image should be</span></div><div class=\"crayon-line\" id=\"crayon-59f288991cfaf104404979-27\"><span class=\"crayon-s\">    saved at to attain the quality threshold specified for this photo class.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288991cfaf104404979-28\"><span class=\"crayon-s\"> </span></div><div class=\"crayon-line\" id=\"crayon-59f288991cfaf104404979-29\"><span class=\"crayon-s\">    Args:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288991cfaf104404979-30\"><span class=\"crayon-s\">        original_photo - a prepared PIL JPEG image (only JPEG is supported)</span></div><div class=\"crayon-line\" id=\"crayon-59f288991cfaf104404979-31\"><span class=\"crayon-s\">    \"</span><span class=\"crayon-s\">\"\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288991cfaf104404979-32\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">ssim_goal</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.95</span></div><div class=\"crayon-line\" id=\"crayon-59f288991cfaf104404979-33\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">hi</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">85</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288991cfaf104404979-34\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">lo</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">80</span></div><div class=\"crayon-line\" id=\"crayon-59f288991cfaf104404979-35\"><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288991cfaf104404979-36\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\"># working on a smaller size image doesn't give worse results but is faster</span></div><div class=\"crayon-line\" id=\"crayon-59f288991cfaf104404979-37\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\"># changing this value requires updating the calculated thresholds</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288991cfaf104404979-38\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">photo</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">original_photo</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">resize</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">400</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">400</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f288991cfaf104404979-39\"><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288991cfaf104404979-40\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">_should_use_dynamic_quality</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-59f288991cfaf104404979-41\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">default_ssim</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">get_ssim_at_quality</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">photo</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">hi</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288991cfaf104404979-42\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">hi</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">default_ssim</span></div><div class=\"crayon-line\" id=\"crayon-59f288991cfaf104404979-43\"><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288991cfaf104404979-44\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\"># 95 is the highest useful value for JPEG. Higher values cause different behavior</span></div><div class=\"crayon-line\" id=\"crayon-59f288991cfaf104404979-45\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\"># Used to establish the image's intrinsic ssim without encoder artifacts</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288991cfaf104404979-46\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">normalized_ssim</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">get_ssim_at_quality</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">photo</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">95</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f288991cfaf104404979-47\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">selected_quality</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">selected_ssim</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">None</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288991cfaf104404979-48\"><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-59f288991cfaf104404979-49\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\"># loop bisection. ssim function increases monotonically so this will converge</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288991cfaf104404979-50\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">xrange</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">_ssim_iteration_count</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">lo</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">hi</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-59f288991cfaf104404979-51\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">curr_quality</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">lo</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">hi</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 2</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288991cfaf104404979-52\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">curr_ssim</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">get_ssim_at_quality</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">photo</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">curr_quality</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f288991cfaf104404979-53\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">ssim_ratio</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">curr_ssim</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">normalized_ssim</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288991cfaf104404979-54\"><span class=\"crayon-e\"> </span></div><div class=\"crayon-line\" id=\"crayon-59f288991cfaf104404979-55\"><span class=\"crayon-e\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ssim_ratio</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ssim_goal</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288991cfaf104404979-56\"><span class=\"crayon-h\">            </span><span class=\"crayon-p\"># continue to check whether a lower quality level also exceeds the goal</span></div><div class=\"crayon-line\" id=\"crayon-59f288991cfaf104404979-57\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">selected_quality</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">curr_quality</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288991cfaf104404979-58\"><span class=\"crayon-e\">            </span><span class=\"crayon-v\">selected_ssim</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">curr_ssim</span></div><div class=\"crayon-line\" id=\"crayon-59f288991cfaf104404979-59\"><span class=\"crayon-e\">            </span><span class=\"crayon-v\">hi</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">curr_quality</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288991cfaf104404979-60\"><span class=\"crayon-e\">        </span><span class=\"crayon-st\">else</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-59f288991cfaf104404979-61\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">lo</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">curr_quality</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288991cfaf104404979-62\"><span class=\"crayon-e\"> </span></div><div class=\"crayon-line\" id=\"crayon-59f288991cfaf104404979-63\"><span class=\"crayon-e\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">selected_quality</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288991cfaf104404979-64\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">selected_quality</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">selected_ssim</span></div><div class=\"crayon-line\" id=\"crayon-59f288991cfaf104404979-65\"><span class=\"crayon-e\">    </span><span class=\"crayon-st\">else</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288991cfaf104404979-66\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">default_ssim</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">get_ssim_at_quality</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">photo</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">hi</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f288991cfaf104404979-67\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">hi</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">default_ssim</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0078 seconds] -->\r\n<p>还有一些关于这种技术的其他博客文章，这里是柯尔特·麦卡尼斯（Colt Mcanlis）的一篇博文。当我们发布这篇博客的时候，Etsy 已经发表了一篇了！击掌吧，更快的网络！</p>\n<h3 id=\"changes-to-jpeg-encoder\">JPEG 编码器的更改</h3>\n<p id=\"mozjpeg\">Mozjpeg 是 libjpeg-turbo 的一个开源分支，它采取以时间换空间的方法，通过更长时间的运算换取更加优化的文件尺寸。这种方法很好地与离线批处理方法结合以重新生成图像。一些更昂贵的算法用了比 libjpeg-turbo 多出 3 – 5 倍的时间，使得图像更小了一些！</p>\n<p>mozjpeg 的区别之一是使用一种替代量化表。如上所述，质量是用于每个颜色通道的量化表的抽象。所有符号都指向默认的 JPEG 量化表，因而它很容易被击败。用这个词来说，</p>\n<p><a href=\"https://www.w3.org/Graphics/JPEG/itu-t81.pdf\">JPEG spec</a>:</p>\n<blockquote><p>这些表仅作为示例，并不一定适用于任何特定应用。</p></blockquote>\n<p>那么自然地，不要惊讶于你知道这些表是大多数编码器使用的默认值…</p>\n<p>Mozjpeg 经历了为我们的替代表做基准测试的麻烦时期，并在之后成为了它所创建的图像中，能用到的性能最好的通用替代品。</p>\n<h3 id=\"mozjpeg--pillow\">Mozjpeg + Pillow</h3>\n<p>大多数的 Linux 发行版都默认安装了 libjpeg。所以在 Pillow 下使用 mozjpeg 在默认情况下不起作用，但配置起来也不是很困难。当您构建 mozjpeg 时，请使用–with-jpeg8 标志位，并确保可以通过 Pillow 链接到它。如果您使用Docker，您可能会有一个 Dockerfile，如：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f288991cfb6731403514\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nFROM ubuntu:xenial\r\n \r\nRUN apt-get update \r\n\t&amp;&amp; DEBIAN_FRONTEND=noninteractive apt-get -y --no-install-recommends install \r\n\t# build tools\r\n\tnasm \r\n\tbuild-essential \r\n\tautoconf \r\n\tautomake \r\n\tlibtool \r\n\tpkg-config \r\n\t# python tools\r\n\tpython \r\n\tpython-dev \r\n\tpython-pip \r\n\tpython-setuptools \r\n\t# cleanup\r\n\t&amp;&amp; apt-get clean \r\n\t&amp;&amp; rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*\r\n \r\n# Download and compile mozjpeg\r\nADD https://github.com/mozilla/mozjpeg/archive/v3.2-pre.tar.gz /mozjpeg-src/v3.2-pre.tar.gz\r\nRUN tar -xzf /mozjpeg-src/v3.2-pre.tar.gz -C /mozjpeg-src/\r\nWORKDIR /mozjpeg-src/mozjpeg-3.2-pre\r\nRUN autoreconf -fiv \r\n\t&amp;&amp; ./configure --with-jpeg8 \r\n\t&amp;&amp; make install prefix=/usr libdir=/usr/lib64\r\nRUN echo \"/usr/lib64n\" &gt; /etc/ld.so.conf.d/mozjpeg.conf\r\nRUN ldconfig\r\n \r\n# Build Pillow\r\nRUN pip install virtualenv \r\n\t&amp;&amp; virtualenv /virtualenv_run \r\n\t&amp;&amp; /virtualenv_run/bin/pip install --upgrade pip \r\n\t&amp;&amp; /virtualenv_run/bin/pip install --no-binary=:all: Pillow==4.0.0</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f288991cfb6731403514-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288991cfb6731403514-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f288991cfb6731403514-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288991cfb6731403514-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f288991cfb6731403514-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288991cfb6731403514-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f288991cfb6731403514-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288991cfb6731403514-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f288991cfb6731403514-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288991cfb6731403514-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f288991cfb6731403514-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288991cfb6731403514-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59f288991cfb6731403514-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288991cfb6731403514-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59f288991cfb6731403514-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288991cfb6731403514-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-59f288991cfb6731403514-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288991cfb6731403514-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-59f288991cfb6731403514-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288991cfb6731403514-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-59f288991cfb6731403514-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288991cfb6731403514-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-59f288991cfb6731403514-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288991cfb6731403514-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-59f288991cfb6731403514-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288991cfb6731403514-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-59f288991cfb6731403514-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288991cfb6731403514-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-59f288991cfb6731403514-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288991cfb6731403514-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-59f288991cfb6731403514-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288991cfb6731403514-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-59f288991cfb6731403514-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288991cfb6731403514-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-59f288991cfb6731403514-35\">35</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f288991cfb6731403514-1\"><span class=\"crayon-e\">FROM </span><span class=\"crayon-v\">ubuntu</span><span class=\"crayon-o\">:</span><span class=\"crayon-e\">xenial</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288991cfb6731403514-2\"><span class=\"crayon-e\"> </span></div><div class=\"crayon-line\" id=\"crayon-59f288991cfb6731403514-3\"><span class=\"crayon-e\">RUN </span><span class=\"crayon-v\">apt</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">get </span><span class=\"crayon-v\">update</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288991cfb6731403514-4\"><span class=\"crayon-h\">\t</span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">DEBIAN_FRONTEND</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">noninteractive </span><span class=\"crayon-v\">apt</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">get</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">y</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">no</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">install</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">recommends </span><span class=\"crayon-v\">install</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-59f288991cfb6731403514-5\"><span class=\"crayon-h\">\t</span><span class=\"crayon-p\"># build tools</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288991cfb6731403514-6\"><span class=\"crayon-h\">\t</span><span class=\"crayon-e\">nasm </span></div><div class=\"crayon-line\" id=\"crayon-59f288991cfb6731403514-7\"><span class=\"crayon-e\">\t</span><span class=\"crayon-v\">build</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">essential </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288991cfb6731403514-8\"><span class=\"crayon-e\">\t</span><span class=\"crayon-e\">autoconf </span></div><div class=\"crayon-line\" id=\"crayon-59f288991cfb6731403514-9\"><span class=\"crayon-e\">\t</span><span class=\"crayon-e\">automake </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288991cfb6731403514-10\"><span class=\"crayon-e\">\t</span><span class=\"crayon-e\">libtool </span></div><div class=\"crayon-line\" id=\"crayon-59f288991cfb6731403514-11\"><span class=\"crayon-e\">\t</span><span class=\"crayon-v\">pkg</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">config</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288991cfb6731403514-12\"><span class=\"crayon-h\">\t</span><span class=\"crayon-p\"># python tools</span></div><div class=\"crayon-line\" id=\"crayon-59f288991cfb6731403514-13\"><span class=\"crayon-h\">\t</span><span class=\"crayon-e\">python </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288991cfb6731403514-14\"><span class=\"crayon-e\">\t</span><span class=\"crayon-v\">python</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">dev </span></div><div class=\"crayon-line\" id=\"crayon-59f288991cfb6731403514-15\"><span class=\"crayon-e\">\t</span><span class=\"crayon-v\">python</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">pip </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288991cfb6731403514-16\"><span class=\"crayon-e\">\t</span><span class=\"crayon-v\">python</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">setuptools</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-59f288991cfb6731403514-17\"><span class=\"crayon-h\">\t</span><span class=\"crayon-p\"># cleanup</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288991cfb6731403514-18\"><span class=\"crayon-h\">\t</span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">apt</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">get </span><span class=\"crayon-v\">clean</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-59f288991cfb6731403514-19\"><span class=\"crayon-h\">\t</span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rm</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rf</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-t\">var</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">lib</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">apt</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">lists</span><span class=\"crayon-o\">/</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">tmp</span><span class=\"crayon-o\">/</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-t\">var</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">tmp</span><span class=\"crayon-o\">/</span><span class=\"crayon-o\">*</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288991cfb6731403514-20\"><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-59f288991cfb6731403514-21\"><span class=\"crayon-p\"># Download and compile mozjpeg</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288991cfb6731403514-22\"><span class=\"crayon-e\">ADD </span><span class=\"crayon-v\">https</span><span class=\"crayon-o\">:</span><span class=\"crayon-c\">//github.com/mozilla/mozjpeg/archive/v3.2-pre.tar.gz /mozjpeg-src/v3.2-pre.tar.gz</span></div><div class=\"crayon-line\" id=\"crayon-59f288991cfb6731403514-23\"><span class=\"crayon-e\">RUN </span><span class=\"crayon-v\">tar</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">xzf</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">mozjpeg</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">src</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">v3</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">2</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">pre</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">tar</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">gz</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">C</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">mozjpeg</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">src</span><span class=\"crayon-o\">/</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288991cfb6731403514-24\"><span class=\"crayon-v\">WORKDIR</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">mozjpeg</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">src</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">mozjpeg</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">3.2</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">pre</span></div><div class=\"crayon-line\" id=\"crayon-59f288991cfb6731403514-25\"><span class=\"crayon-e\">RUN </span><span class=\"crayon-v\">autoreconf</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">fiv</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288991cfb6731403514-26\"><span class=\"crayon-h\">\t</span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">configure</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">with</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">jpeg8</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-59f288991cfb6731403514-27\"><span class=\"crayon-h\">\t</span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">make </span><span class=\"crayon-e\">install </span><span class=\"crayon-v\">prefix</span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">usr </span><span class=\"crayon-v\">libdir</span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">lib64</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288991cfb6731403514-28\"><span class=\"crayon-e\">RUN </span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"/usr/lib64n\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">etc</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">ld</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">so</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">conf</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">d</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">mozjpeg</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">conf</span></div><div class=\"crayon-line\" id=\"crayon-59f288991cfb6731403514-29\"><span class=\"crayon-e\">RUN </span><span class=\"crayon-v\">ldconfig</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288991cfb6731403514-30\"><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-59f288991cfb6731403514-31\"><span class=\"crayon-p\"># Build Pillow</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288991cfb6731403514-32\"><span class=\"crayon-e\">RUN </span><span class=\"crayon-e\">pip </span><span class=\"crayon-e\">install </span><span class=\"crayon-v\">virtualenv</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-59f288991cfb6731403514-33\"><span class=\"crayon-h\">\t</span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">virtualenv</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">virtualenv_run</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288991cfb6731403514-34\"><span class=\"crayon-h\">\t</span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">virtualenv_run</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">pip </span><span class=\"crayon-v\">install</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-e\">upgrade </span><span class=\"crayon-v\">pip</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-59f288991cfb6731403514-35\"><span class=\"crayon-h\">\t</span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">virtualenv_run</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">pip </span><span class=\"crayon-v\">install</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">no</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">binary</span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">all</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Pillow</span><span class=\"crayon-o\">==</span><span class=\"crayon-cn\">4.0.0</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0056 seconds] -->\r\n<p>以上！使用它，您将可以在正常图片工作流程中，使用由 mozjpeg 支持的 Pillow。</p>\n<h3 id=\"impact\">影响</h3>\n<p>这些改进中的每一项对我们的提升分别是多少呢？我们随机抽取 2,500 张 Yelp 上的商业照片开始了此项研究，测试照片大小在经过我们的处理流程后有怎样的变化。</p>\n<p>1、通过改变 Pillow 的设置，可以将图片大小减小 4.5%<br>\n2、大型 PNG 格式图片检测可以将图片大小减小 6.2%<br>\n3、动态质量可以将图片大小减小 4.5%<br>\n4、切换到 mozjpeg 编码器可以将图片大小减小 13.8%</p>\n<p>这些改进使得图像文件的平均大小减少了约 30％，并被我们应用到我们最大和最常见的图像分辨率上，使网站能为用户提供更快速的服务，并且每天在数据传输上节省了 TB 级别的容量。按照 CDN 来衡量：</p>\n<p><img src=\"https://engineeringblog.yelp.com/images/posts/2017-05-31-making-images-smaller/Filesize-over-time.png\"></p>\n<p style=\"text-align: center;\">从 CDN（结合非图像静态内容）测量的平均文件大小。</p>\n<h3 id=\"what-we-didnt-do\">我们还没做的</h3>\n<p>本节旨在向您介绍可能能够做出的一些常见改进，有的是因为它们和 Yelp 使用的工具并无关系，有些是因为我们权衡后决定不做。</p>\n<h3 id=\"subsampling\">子采样</h3>\n<p>子采样是决定网页图像的质量和文件大小的主要因素。对于子抽样的更详尽的描述可以在网上找到，但在这个博客文章我们只要说以 4：1：1（这是 Pillow 的默认值，没有指定任何其他内容）进行子采样就够了，所以我们无法了解能进一步缩小多少。</p>\n<h3 id=\"lossy-png-encoding\">有损的 PNG 编码</h3>\n<p>在了解我们对 PNG 格式图片做了什么之后，用例如 pngmini 这样的有损编码器，选择将这些图片中一部分保留为 PNG 格式，可能是有意义的，但是我们选择将其重新保存成 JPEG 格式。这是一个结果看来合理的替代选项，根据作者的说法，未修改的 PNG 格式图片的文件大小缩小了 72-85 ％。</p>\n<h3 id=\"dynamic-content-types\">动态内容类型</h3>\n<p>为更多的现代化内容类型提供支持，如 WebP 或 JPEG2k 肯定是我们的未来要做的。而一旦这个假设的项目实行了，就会有大量的用户要求为现有已优化的 JPEG / PNG 图像做这些，这将继续使该项工作非常值得做。</p>\n<h3 id=\"svg\">SVG</h3>\n<p>我们在网站上的许多地方使用 SVG，就像我们设计师创建的静态资产，这已成为我们的指导风格。虽然这种格式和优化工具（如 svgo）有助于减少网站页面的开销，但它与我们在这里所做的工作无关。</p>\n<h3 id=\"vendor-magic\">供应商的魔术</h3>\n<p>能提供图像传送/调整大小/裁剪/转码服务的供应商太多，包括开源的 thumbor。也许这是支持响应式图像，动态内容类型的最简单方法，并且在将来仍然能让我们保持在技术前沿。而现在我们的解决方案仍然是独立的。</p>\n<h3 id=\"further-reading\">拓展阅读</h3>\n<p>这里列出的两本书在这个领域历史上是绝对能站稳脚跟的，强烈建议您进一步阅读这些书籍。</p>\n<ul>\n<li><a href=\"https://content.akamai.com/pg6293-high-performance-images-ebook.html\">High Performance Images</a></li>\n<li><a href=\"http://designingforperformance.com/\">Designing for Performance</a></li>\n</ul>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112321\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112321votetotal\">3</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112321\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 7 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/fengzhuang19940106\">iScream</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/fengzhuang19940106\">\r\n\t\t\t<img src=\"http://q.qlogo.cn/qqapp/208656/91B5C8EB0B449C2B9F52CCED48C6B4CD/100\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            一个大的学生        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/fengzhuang19940106\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/fengzhuang19940106/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/fengzhuang19940106/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 16</a> · <a title=\"QQ：295039571\" target=\"_blank\" href=\"#\"><i class=\"fa fa-qq\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": "  评论", "praise_nums": "3", "url_object_id": "fc531aa1eebe55fcb9eee070c03a6911", "front_image_url": ["http://wx1.sinaimg.cn/mw690/7cc829d3gy1fjgtf2uq3bj218s0rdwot.jpg"], "front_image_path": "full/b0c88078f0ce26552ba79f72b93aa170e681bc91.jpg", "title": "为提高用户体验，Yelp 是如何无损压缩图片的"}
{"create_date": "2017/09/05 ", "url": "http://blog.jobbole.com/112368/", "fav_nums": "  收藏", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://my.oschina.net/feicuigu/blog/1512275\">o翡翠谷o</a>   </div><h2>一、问题说明</h2>\n<p>公司开发人员在更新数据时使用了 replace into 语句，由于使用不当导致了数据的大量丢失，到底是如何导致的数据丢失？现分析如下。</p>\n<h2>二、问题分析</h2>\n<h3>a. REPLACE 原理</h3>\n<p>REPLACE INTO 原理的官方解释为：</p>\n<blockquote><p>REPLACE works exactly like INSERT, except that if an old row in the table has the same value as a new row for a PRIMARY KEY or a UNIQUE index, the old row is deleted before the new row is inserted.</p></blockquote>\n<blockquote><p>如果新插入行的主键或唯一键在表中已经存在，则会删除原有记录并插入新行；如果在表中不存在，则直接插入</p></blockquote>\n<p>地址：https://dev.mysql.com/doc/refman/5.6/en/replace.html</p>\n<h3>b. 问题现象</h3>\n<p>丢失数据的表结构如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f288cd89249708087910\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nCREATE TABLE `active_items` (\r\n  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '主键',\r\n  `ad_id` char(32) NOT NULL DEFAULT '' COMMENT 'XXX',\r\n  `ap_id` tinyint(4) NOT NULL DEFAULT '1' COMMENT 'XXX',\r\n  `price` bigint(20) NOT NULL DEFAULT '0' COMMENT 'xxx',\r\n  `rate` int(11) NOT NULL DEFAULT '0' COMMENT 'XXX',\r\n  `cc_price` bigint(20) NOT NULL DEFAULT '0' COMMENT 'XXX',\r\n  `sale_count` int(11) NOT NULL DEFAULT '0' COMMENT 'XXX',\r\n  `prom_count` int(11) NOT NULL DEFAULT '0' COMMENT 'XXX',\r\n  `c1` int(11) NOT NULL DEFAULT '0' COMMENT 'XXX',\r\n  `status` tinyint(4) NOT NULL DEFAULT '0' COMMENT 'XXX',\r\n  `order_num` int(11) NOT NULL DEFAULT '0' COMMENT 'XXX',\r\n  `score` int(11) NOT NULL DEFAULT '0' COMMENT 'XXX',\r\n  `audit_time` int(11) NOT NULL DEFAULT '0' COMMENT 'XXX',\r\n  `prom_modify_time` int(11) NOT NULL DEFAULT '0' COMMENT 'XXX',\r\n  `sales_modify_time` int(11) NOT NULL DEFAULT '0' COMMENT 'XXX',\r\n  `create_time` int(11) NOT NULL DEFAULT '0' COMMENT '创建时间',\r\n  `modify_time` int(11) NOT NULL DEFAULT '0' COMMENT '最后修改时间',\r\n  `score_modify_time` int(11) NOT NULL DEFAULT '0' COMMENT 'XXX',\r\n  `brand_id` int(11) NOT NULL DEFAULT '0' COMMENT 'XXX',\r\n  `freight_status` tinyint(1) NOT NULL DEFAULT '0' COMMENT 'XXX',\r\n  `flag` tinyint(4) NOT NULL DEFAULT '0' COMMENT 'XXX',\r\n  PRIMARY KEY (`id`),\r\n  UNIQUE KEY `idx_ad_id` (`ad_id`) USING BTREE,\r\n  ...\r\n) ENGINE=InnoDB AUTO_INCREMENT=2699 DEFAULT CHARSET=utf8 COMMENT='XXXXX'\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f288cd89249708087910-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd89249708087910-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f288cd89249708087910-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd89249708087910-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f288cd89249708087910-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd89249708087910-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f288cd89249708087910-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd89249708087910-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f288cd89249708087910-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd89249708087910-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f288cd89249708087910-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd89249708087910-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59f288cd89249708087910-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd89249708087910-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59f288cd89249708087910-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd89249708087910-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-59f288cd89249708087910-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd89249708087910-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-59f288cd89249708087910-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd89249708087910-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-59f288cd89249708087910-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd89249708087910-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-59f288cd89249708087910-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd89249708087910-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-59f288cd89249708087910-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd89249708087910-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-59f288cd89249708087910-27\">27</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f288cd89249708087910-1\"><span class=\"crayon-e\">CREATE </span><span class=\"crayon-i\">TABLE</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">active_items</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd89249708087910-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">id</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">bigint</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">20</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">NOT</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">AUTO_INCREMENT </span><span class=\"crayon-i\">COMMENT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'主键'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f288cd89249708087910-3\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">ad_id</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">char</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">32</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">NOT</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">''</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">COMMENT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'XXX'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd89249708087910-4\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">ap_id</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">tinyint</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">NOT</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'1'</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">COMMENT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'XXX'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f288cd89249708087910-5\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">price</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">bigint</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">20</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">NOT</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'0'</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">COMMENT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'xxx'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd89249708087910-6\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">rate</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">NOT</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'0'</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">COMMENT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'XXX'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f288cd89249708087910-7\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">cc_price</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">bigint</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">20</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">NOT</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'0'</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">COMMENT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'XXX'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd89249708087910-8\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">sale_count</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">NOT</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'0'</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">COMMENT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'XXX'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f288cd89249708087910-9\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">prom_count</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">NOT</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'0'</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">COMMENT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'XXX'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd89249708087910-10\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">c1</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">NOT</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'0'</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">COMMENT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'XXX'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f288cd89249708087910-11\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">status</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">tinyint</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">NOT</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'0'</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">COMMENT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'XXX'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd89249708087910-12\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">order_num</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">NOT</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'0'</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">COMMENT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'XXX'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f288cd89249708087910-13\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">score</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">NOT</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'0'</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">COMMENT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'XXX'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd89249708087910-14\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">audit_time</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">NOT</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'0'</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">COMMENT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'XXX'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f288cd89249708087910-15\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">prom_modify_time</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">NOT</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'0'</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">COMMENT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'XXX'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd89249708087910-16\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">sales_modify_time</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">NOT</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'0'</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">COMMENT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'XXX'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f288cd89249708087910-17\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">create_time</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">NOT</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'0'</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">COMMENT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'创建时间'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd89249708087910-18\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">modify_time</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">NOT</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'0'</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">COMMENT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'最后修改时间'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f288cd89249708087910-19\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">score_modify_time</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">NOT</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'0'</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">COMMENT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'XXX'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd89249708087910-20\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">brand_id</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">NOT</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'0'</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">COMMENT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'XXX'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f288cd89249708087910-21\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">freight_status</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">tinyint</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">NOT</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'0'</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">COMMENT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'XXX'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd89249708087910-22\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">flag</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">tinyint</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">NOT</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'0'</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">COMMENT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'XXX'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f288cd89249708087910-23\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">PRIMARY </span><span class=\"crayon-e\">KEY</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">id</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd89249708087910-24\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">UNIQUE </span><span class=\"crayon-i\">KEY</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">idx_ad_id</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">ad_id</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">USING </span><span class=\"crayon-v\">BTREE</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f288cd89249708087910-25\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd89249708087910-26\"><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ENGINE</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">InnoDB </span><span class=\"crayon-v\">AUTO_INCREMENT</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">2699</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">CHARSET</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">utf8 </span><span class=\"crayon-v\">COMMENT</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'XXXXX'</span></div><div class=\"crayon-line\" id=\"crayon-59f288cd89249708087910-27\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0109 seconds] -->\r\n<p>执行的replace语句如下（多条）：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f288cd89253280808001\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nREPLACE INTO active_items(ad_id,score) VALUES('XXXXXXX', 1800);\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f288cd89253280808001-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd89253280808001-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f288cd89253280808001-1\"><span class=\"crayon-e\">REPLACE </span><span class=\"crayon-e\">INTO </span><span class=\"crayon-e\">active_items</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ad_id</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">score</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">VALUES</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'XXXXXXX'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1800</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd89253280808001-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>通过查询binlog找到执行记录，部分如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f288cd89257459389260\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n### UPDATE `items`.`active_items`\r\n### WHERE\r\n###   @1=21926 /* LONGINT meta=0 nullable=0 is_null=0 */\r\n###   @2='XXXXXXX' /* STRING(96) meta=65120 nullable=0 is_null=0 */\r\n###   @3=1 /* TINYINT meta=0 nullable=0 is_null=0 */\r\n###   @4=3900 /* LONGINT meta=0 nullable=0 is_null=0 */\r\n###   @5=315 /* INT meta=0 nullable=0 is_null=0 */\r\n###   @6=1228 /* LONGINT meta=0 nullable=0 is_null=0 */\r\n###   @7=19 /* INT meta=0 nullable=0 is_null=0 */\r\n###   @8=0 /* INT meta=0 nullable=0 is_null=0 */\r\n###   @9=-6 (4294967290) /* INT meta=0 nullable=0 is_null=0 */\r\n###   @10=0 /* TINYINT meta=0 nullable=0 is_null=0 */\r\n###   @11=0 /* INT meta=0 nullable=0 is_null=0 */\r\n###   @12=8 /* INT meta=0 nullable=0 is_null=0 */\r\n###   @13=1489997272 /* INT meta=0 nullable=0 is_null=0 */\r\n###   @14=1495765800 /* INT meta=0 nullable=0 is_null=0 */\r\n###   @15=1495728000 /* INT meta=0 nullable=0 is_null=0 */\r\n###   @16=1489996426 /* INT meta=0 nullable=0 is_null=0 */\r\n###   @17=1489997272 /* INT meta=0 nullable=0 is_null=0 */\r\n###   @18=1495728725 /* INT meta=0 nullable=0 is_null=0 */\r\n###   @19=0 /* INT meta=0 nullable=0 is_null=0 */\r\n###   @20=1 /* TINYINT meta=0 nullable=0 is_null=0 */\r\n###   @21=0 /* TINYINT meta=0 nullable=0 is_null=0 */\r\n### SET\r\n###   @1=35313 /* LONGINT meta=0 nullable=0 is_null=0 */\r\n###   @2='XXXXXXX' /* STRING(96) meta=65120 nullable=0 is_null=0 */\r\n###   @3=1 /* TINYINT meta=0 nullable=0 is_null=0 */\r\n###   @4=0 /* LONGINT meta=0 nullable=0 is_null=0 */\r\n###   @5=0 /* INT meta=0 nullable=0 is_null=0 */\r\n###   @6=0 /* LONGINT meta=0 nullable=0 is_null=0 */\r\n###   @7=0 /* INT meta=0 nullable=0 is_null=0 */\r\n###   @8=0 /* INT meta=0 nullable=0 is_null=0 */\r\n###   @9=0 /* INT meta=0 nullable=0 is_null=0 */\r\n###   @10=0 /* TINYINT meta=0 nullable=0 is_null=0 */\r\n###   @11=0 /* INT meta=0 nullable=0 is_null=0 */\r\n###   @12=3150 /* INT meta=0 nullable=0 is_null=0 */\r\n###   @13=0 /* INT meta=0 nullable=0 is_null=0 */\r\n###   @14=0 /* INT meta=0 nullable=0 is_null=0 */\r\n###   @15=0 /* INT meta=0 nullable=0 is_null=0 */\r\n###   @16=0 /* INT meta=0 nullable=0 is_null=0 */\r\n###   @17=0 /* INT meta=0 nullable=0 is_null=0 */\r\n###   @18=0 /* INT meta=0 nullable=0 is_null=0 */\r\n###   @19=0 /* INT meta=0 nullable=0 is_null=0 */\r\n###   @20=0 /* TINYINT meta=0 nullable=0 is_null=0 */\r\n###   @21=0 /* TINYINT meta=0 nullable=0 is_null=0 */\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f288cd89257459389260-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd89257459389260-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f288cd89257459389260-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd89257459389260-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f288cd89257459389260-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd89257459389260-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f288cd89257459389260-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd89257459389260-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f288cd89257459389260-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd89257459389260-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f288cd89257459389260-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd89257459389260-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59f288cd89257459389260-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd89257459389260-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59f288cd89257459389260-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd89257459389260-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-59f288cd89257459389260-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd89257459389260-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-59f288cd89257459389260-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd89257459389260-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-59f288cd89257459389260-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd89257459389260-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-59f288cd89257459389260-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd89257459389260-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-59f288cd89257459389260-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd89257459389260-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-59f288cd89257459389260-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd89257459389260-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-59f288cd89257459389260-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd89257459389260-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-59f288cd89257459389260-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd89257459389260-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-59f288cd89257459389260-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd89257459389260-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-59f288cd89257459389260-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd89257459389260-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-59f288cd89257459389260-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd89257459389260-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-59f288cd89257459389260-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd89257459389260-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-59f288cd89257459389260-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd89257459389260-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-59f288cd89257459389260-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd89257459389260-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-59f288cd89257459389260-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd89257459389260-46\">46</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f288cd89257459389260-1\"><span class=\"crayon-p\">### UPDATE `items`.`active_items`</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd89257459389260-2\"><span class=\"crayon-p\">### WHERE</span></div><div class=\"crayon-line\" id=\"crayon-59f288cd89257459389260-3\"><span class=\"crayon-p\">###   @1=21926 /* LONGINT meta=0 nullable=0 is_null=0 */</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd89257459389260-4\"><span class=\"crayon-p\">###   @2='XXXXXXX' /* STRING(96) meta=65120 nullable=0 is_null=0 */</span></div><div class=\"crayon-line\" id=\"crayon-59f288cd89257459389260-5\"><span class=\"crayon-p\">###   @3=1 /* TINYINT meta=0 nullable=0 is_null=0 */</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd89257459389260-6\"><span class=\"crayon-p\">###   @4=3900 /* LONGINT meta=0 nullable=0 is_null=0 */</span></div><div class=\"crayon-line\" id=\"crayon-59f288cd89257459389260-7\"><span class=\"crayon-p\">###   @5=315 /* INT meta=0 nullable=0 is_null=0 */</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd89257459389260-8\"><span class=\"crayon-p\">###   @6=1228 /* LONGINT meta=0 nullable=0 is_null=0 */</span></div><div class=\"crayon-line\" id=\"crayon-59f288cd89257459389260-9\"><span class=\"crayon-p\">###   @7=19 /* INT meta=0 nullable=0 is_null=0 */</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd89257459389260-10\"><span class=\"crayon-p\">###   @8=0 /* INT meta=0 nullable=0 is_null=0 */</span></div><div class=\"crayon-line\" id=\"crayon-59f288cd89257459389260-11\"><span class=\"crayon-p\">###   @9=-6 (4294967290) /* INT meta=0 nullable=0 is_null=0 */</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd89257459389260-12\"><span class=\"crayon-p\">###   @10=0 /* TINYINT meta=0 nullable=0 is_null=0 */</span></div><div class=\"crayon-line\" id=\"crayon-59f288cd89257459389260-13\"><span class=\"crayon-p\">###   @11=0 /* INT meta=0 nullable=0 is_null=0 */</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd89257459389260-14\"><span class=\"crayon-p\">###   @12=8 /* INT meta=0 nullable=0 is_null=0 */</span></div><div class=\"crayon-line\" id=\"crayon-59f288cd89257459389260-15\"><span class=\"crayon-p\">###   @13=1489997272 /* INT meta=0 nullable=0 is_null=0 */</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd89257459389260-16\"><span class=\"crayon-p\">###   @14=1495765800 /* INT meta=0 nullable=0 is_null=0 */</span></div><div class=\"crayon-line\" id=\"crayon-59f288cd89257459389260-17\"><span class=\"crayon-p\">###   @15=1495728000 /* INT meta=0 nullable=0 is_null=0 */</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd89257459389260-18\"><span class=\"crayon-p\">###   @16=1489996426 /* INT meta=0 nullable=0 is_null=0 */</span></div><div class=\"crayon-line\" id=\"crayon-59f288cd89257459389260-19\"><span class=\"crayon-p\">###   @17=1489997272 /* INT meta=0 nullable=0 is_null=0 */</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd89257459389260-20\"><span class=\"crayon-p\">###   @18=1495728725 /* INT meta=0 nullable=0 is_null=0 */</span></div><div class=\"crayon-line\" id=\"crayon-59f288cd89257459389260-21\"><span class=\"crayon-p\">###   @19=0 /* INT meta=0 nullable=0 is_null=0 */</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd89257459389260-22\"><span class=\"crayon-p\">###   @20=1 /* TINYINT meta=0 nullable=0 is_null=0 */</span></div><div class=\"crayon-line\" id=\"crayon-59f288cd89257459389260-23\"><span class=\"crayon-p\">###   @21=0 /* TINYINT meta=0 nullable=0 is_null=0 */</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd89257459389260-24\"><span class=\"crayon-p\">### SET</span></div><div class=\"crayon-line\" id=\"crayon-59f288cd89257459389260-25\"><span class=\"crayon-p\">###   @1=35313 /* LONGINT meta=0 nullable=0 is_null=0 */</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd89257459389260-26\"><span class=\"crayon-p\">###   @2='XXXXXXX' /* STRING(96) meta=65120 nullable=0 is_null=0 */</span></div><div class=\"crayon-line\" id=\"crayon-59f288cd89257459389260-27\"><span class=\"crayon-p\">###   @3=1 /* TINYINT meta=0 nullable=0 is_null=0 */</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd89257459389260-28\"><span class=\"crayon-p\">###   @4=0 /* LONGINT meta=0 nullable=0 is_null=0 */</span></div><div class=\"crayon-line\" id=\"crayon-59f288cd89257459389260-29\"><span class=\"crayon-p\">###   @5=0 /* INT meta=0 nullable=0 is_null=0 */</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd89257459389260-30\"><span class=\"crayon-p\">###   @6=0 /* LONGINT meta=0 nullable=0 is_null=0 */</span></div><div class=\"crayon-line\" id=\"crayon-59f288cd89257459389260-31\"><span class=\"crayon-p\">###   @7=0 /* INT meta=0 nullable=0 is_null=0 */</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd89257459389260-32\"><span class=\"crayon-p\">###   @8=0 /* INT meta=0 nullable=0 is_null=0 */</span></div><div class=\"crayon-line\" id=\"crayon-59f288cd89257459389260-33\"><span class=\"crayon-p\">###   @9=0 /* INT meta=0 nullable=0 is_null=0 */</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd89257459389260-34\"><span class=\"crayon-p\">###   @10=0 /* TINYINT meta=0 nullable=0 is_null=0 */</span></div><div class=\"crayon-line\" id=\"crayon-59f288cd89257459389260-35\"><span class=\"crayon-p\">###   @11=0 /* INT meta=0 nullable=0 is_null=0 */</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd89257459389260-36\"><span class=\"crayon-p\">###   @12=3150 /* INT meta=0 nullable=0 is_null=0 */</span></div><div class=\"crayon-line\" id=\"crayon-59f288cd89257459389260-37\"><span class=\"crayon-p\">###   @13=0 /* INT meta=0 nullable=0 is_null=0 */</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd89257459389260-38\"><span class=\"crayon-p\">###   @14=0 /* INT meta=0 nullable=0 is_null=0 */</span></div><div class=\"crayon-line\" id=\"crayon-59f288cd89257459389260-39\"><span class=\"crayon-p\">###   @15=0 /* INT meta=0 nullable=0 is_null=0 */</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd89257459389260-40\"><span class=\"crayon-p\">###   @16=0 /* INT meta=0 nullable=0 is_null=0 */</span></div><div class=\"crayon-line\" id=\"crayon-59f288cd89257459389260-41\"><span class=\"crayon-p\">###   @17=0 /* INT meta=0 nullable=0 is_null=0 */</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd89257459389260-42\"><span class=\"crayon-p\">###   @18=0 /* INT meta=0 nullable=0 is_null=0 */</span></div><div class=\"crayon-line\" id=\"crayon-59f288cd89257459389260-43\"><span class=\"crayon-p\">###   @19=0 /* INT meta=0 nullable=0 is_null=0 */</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd89257459389260-44\"><span class=\"crayon-p\">###   @20=0 /* TINYINT meta=0 nullable=0 is_null=0 */</span></div><div class=\"crayon-line\" id=\"crayon-59f288cd89257459389260-45\"><span class=\"crayon-p\">###   @21=0 /* TINYINT meta=0 nullable=0 is_null=0 */</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd89257459389260-46\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0021 seconds] -->\r\n<p></p>\n<ul>\n<li>操作的ad_id已经存在，因此先删除后插入，可以看到除了指定的 ad_id,score，其他字段都变为默认值，导致原有数据丢失（虽然在日志中转为了update）</li>\n</ul>\n<h3>c. 对比测试</h3>\n<p>接下来我进行了如下测试：</p>\n<p><img title=\"test_duibi\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/bc1c5405e9f04bdf942d13b7e34928ef.png\" alt=\"测试对比\"></p>\n<ul>\n<li>左侧使用 <code>REPLACE</code> 语句，右侧使用 <code>DELETE</code> + <code>INSERT</code> 语句，最后结果完全相同</li>\n<li>原主键id为1的行被删除，新插入行主键id更新为4，<strong>没有指定内容的字段c则插入了默认值</strong></li>\n<li>使用 <code>REPLACE</code> 更新了一行数据，MySQL提示受影响行数为2行</li>\n<li>综上所述，说明确实是删除一行，插入一行</li>\n</ul>\n<h2>三、数据恢复</h2>\n<p>数据丢失或数据错误后，可以有如下几种方式恢复：</p>\n<ol>\n<li>业务方自己写脚本恢复</li>\n<li>通过MySQL的binlog查出误操作sql，生成反向sql进行数据恢复（适合sql数据量较小的情况）</li>\n<li>通过历史备份文件+增量binlog将数据状态恢复到误操作的前一刻</li>\n</ol>\n<h2>四、问题扩展</h2>\n<p>通过上述分析可以发现，<code>REPLACE</code> 会删除旧行并插入新行，但是binlog中是以update形式记录，这样就带来另一个问题：</p>\n<blockquote><p><strong>从库自增长值小于主库</strong></p></blockquote>\n<h3>1. 测试</h3>\n<p><strong>a. 主从一致：</strong></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f288cd8925c893097533\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n主库：\r\nmysql&gt; show create table t\\G\r\n*************************** 1. row ***************************\r\n       Table: t\r\nCreate Table: CREATE TABLE `t` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `a` int(11) DEFAULT '0',\r\n  `b` int(11) DEFAULT '0',\r\n  `c` int(11) DEFAULT '0',\r\n  PRIMARY KEY (`id`),\r\n  UNIQUE KEY `a` (`a`)\r\n) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8\r\n1 row in set (0.00 sec)\r\n\r\n从库：\r\nmysql&gt; show create table t\\G\r\n*************************** 1. row ***************************\r\n       Table: t\r\nCreate Table: CREATE TABLE `t` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `a` int(11) DEFAULT '0',\r\n  `b` int(11) DEFAULT '0',\r\n  `c` int(11) DEFAULT '0',\r\n  PRIMARY KEY (`id`),\r\n  UNIQUE KEY `a` (`a`)\r\n) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8\r\n1 row in set (0.00 sec)\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f288cd8925c893097533-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd8925c893097533-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f288cd8925c893097533-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd8925c893097533-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f288cd8925c893097533-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd8925c893097533-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f288cd8925c893097533-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd8925c893097533-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f288cd8925c893097533-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd8925c893097533-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f288cd8925c893097533-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd8925c893097533-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59f288cd8925c893097533-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd8925c893097533-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59f288cd8925c893097533-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd8925c893097533-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-59f288cd8925c893097533-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd8925c893097533-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-59f288cd8925c893097533-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd8925c893097533-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-59f288cd8925c893097533-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd8925c893097533-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-59f288cd8925c893097533-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd8925c893097533-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-59f288cd8925c893097533-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd8925c893097533-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-59f288cd8925c893097533-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd8925c893097533-28\">28</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f288cd8925c893097533-1\">主库：</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd8925c893097533-2\"><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">show </span><span class=\"crayon-e\">create </span><span class=\"crayon-i\">table</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">t</span><span class=\"crayon-sy\">\\</span><span class=\"crayon-e \">G</span></div><div class=\"crayon-line\" id=\"crayon-59f288cd8925c893097533-3\"><span class=\"crayon-e \">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">row *</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd8925c893097533-4\"><span class=\"crayon-h\">       </span><span class=\"crayon-v\">Table</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">t</span></div><div class=\"crayon-line\" id=\"crayon-59f288cd8925c893097533-5\"><span class=\"crayon-e\">Create </span><span class=\"crayon-v\">Table</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">CREATE </span><span class=\"crayon-i\">TABLE</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">t</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd8925c893097533-6\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">id</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">NOT</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">AUTO_INCREMENT</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f288cd8925c893097533-7\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'0'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd8925c893097533-8\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'0'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f288cd8925c893097533-9\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">c</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'0'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd8925c893097533-10\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">PRIMARY </span><span class=\"crayon-e\">KEY</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">id</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f288cd8925c893097533-11\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">UNIQUE </span><span class=\"crayon-i\">KEY</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd8925c893097533-12\"><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ENGINE</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">InnoDB </span><span class=\"crayon-v\">AUTO_INCREMENT</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">4</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">CHARSET</span><span class=\"crayon-o\">=</span><span class=\"crayon-i\">utf8</span></div><div class=\"crayon-line\" id=\"crayon-59f288cd8925c893097533-13\"><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">row </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">set</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sec</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd8925c893097533-14\"> </div><div class=\"crayon-line\" id=\"crayon-59f288cd8925c893097533-15\">从库：</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd8925c893097533-16\"><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">show </span><span class=\"crayon-e\">create </span><span class=\"crayon-i\">table</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">t</span><span class=\"crayon-sy\">\\</span><span class=\"crayon-e \">G</span></div><div class=\"crayon-line\" id=\"crayon-59f288cd8925c893097533-17\"><span class=\"crayon-e \">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">row *</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd8925c893097533-18\"><span class=\"crayon-h\">       </span><span class=\"crayon-v\">Table</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">t</span></div><div class=\"crayon-line\" id=\"crayon-59f288cd8925c893097533-19\"><span class=\"crayon-e\">Create </span><span class=\"crayon-v\">Table</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">CREATE </span><span class=\"crayon-i\">TABLE</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">t</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd8925c893097533-20\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">id</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">NOT</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">AUTO_INCREMENT</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f288cd8925c893097533-21\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'0'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd8925c893097533-22\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'0'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f288cd8925c893097533-23\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">c</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'0'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd8925c893097533-24\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">PRIMARY </span><span class=\"crayon-e\">KEY</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">id</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f288cd8925c893097533-25\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">UNIQUE </span><span class=\"crayon-i\">KEY</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd8925c893097533-26\"><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ENGINE</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">InnoDB </span><span class=\"crayon-v\">AUTO_INCREMENT</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">4</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">CHARSET</span><span class=\"crayon-o\">=</span><span class=\"crayon-i\">utf8</span></div><div class=\"crayon-line\" id=\"crayon-59f288cd8925c893097533-27\"><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">row </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">set</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sec</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd8925c893097533-28\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0080 seconds] -->\r\n<p><strong>b. 主库REPLACE：</strong></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f288cd89260383626502\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n主库：\r\nmysql&gt; replace into t (a,b)values(1,7);\r\nQuery OK, 2 rows affected (0.01 sec)\r\n\r\nmysql&gt; show create table t\\G           \r\n*************************** 1. row ***************************\r\n       Table: t\r\nCreate Table: CREATE TABLE `t` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `a` int(11) DEFAULT '0',\r\n  `b` int(11) DEFAULT '0',\r\n  `c` int(11) DEFAULT '0',\r\n  PRIMARY KEY (`id`),\r\n  UNIQUE KEY `a` (`a`)\r\n) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=utf8\r\n1 row in set (0.00 sec)\r\n\r\n从库：\r\nmysql&gt; show create table t\\G\r\n*************************** 1. row ***************************\r\n       Table: t\r\nCreate Table: CREATE TABLE `t` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `a` int(11) DEFAULT '0',\r\n  `b` int(11) DEFAULT '0',\r\n  `c` int(11) DEFAULT '0',\r\n  PRIMARY KEY (`id`),\r\n  UNIQUE KEY `a` (`a`)\r\n) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8\r\n1 row in set (0.00 sec)\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f288cd89260383626502-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd89260383626502-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f288cd89260383626502-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd89260383626502-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f288cd89260383626502-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd89260383626502-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f288cd89260383626502-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd89260383626502-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f288cd89260383626502-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd89260383626502-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f288cd89260383626502-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd89260383626502-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59f288cd89260383626502-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd89260383626502-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59f288cd89260383626502-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd89260383626502-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-59f288cd89260383626502-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd89260383626502-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-59f288cd89260383626502-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd89260383626502-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-59f288cd89260383626502-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd89260383626502-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-59f288cd89260383626502-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd89260383626502-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-59f288cd89260383626502-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd89260383626502-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-59f288cd89260383626502-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd89260383626502-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-59f288cd89260383626502-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd89260383626502-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-59f288cd89260383626502-31\">31</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f288cd89260383626502-1\">主库：</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd89260383626502-2\"><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">replace </span><span class=\"crayon-i\">into</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">t</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">)</span><span class=\"crayon-e\">values</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f288cd89260383626502-3\"><span class=\"crayon-e\">Query </span><span class=\"crayon-v\">OK</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">rows </span><span class=\"crayon-e\">affected</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0.01</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sec</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd89260383626502-4\"> </div><div class=\"crayon-line\" id=\"crayon-59f288cd89260383626502-5\"><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">show </span><span class=\"crayon-e\">create </span><span class=\"crayon-i\">table</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">t</span><span class=\"crayon-sy\">\\</span><span class=\"crayon-e \">G           </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd89260383626502-6\"><span class=\"crayon-e \">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">row *</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span></div><div class=\"crayon-line\" id=\"crayon-59f288cd89260383626502-7\"><span class=\"crayon-h\">       </span><span class=\"crayon-v\">Table</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">t</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd89260383626502-8\"><span class=\"crayon-e\">Create </span><span class=\"crayon-v\">Table</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">CREATE </span><span class=\"crayon-i\">TABLE</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">t</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line\" id=\"crayon-59f288cd89260383626502-9\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">id</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">NOT</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">AUTO_INCREMENT</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd89260383626502-10\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'0'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f288cd89260383626502-11\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'0'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd89260383626502-12\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">c</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'0'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f288cd89260383626502-13\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">PRIMARY </span><span class=\"crayon-e\">KEY</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">id</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd89260383626502-14\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">UNIQUE </span><span class=\"crayon-i\">KEY</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f288cd89260383626502-15\"><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ENGINE</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">InnoDB </span><span class=\"crayon-v\">AUTO_INCREMENT</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">5</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">CHARSET</span><span class=\"crayon-o\">=</span><span class=\"crayon-i\">utf8</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd89260383626502-16\"><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">row </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">set</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sec</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f288cd89260383626502-17\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd89260383626502-18\">从库：</div><div class=\"crayon-line\" id=\"crayon-59f288cd89260383626502-19\"><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">show </span><span class=\"crayon-e\">create </span><span class=\"crayon-i\">table</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">t</span><span class=\"crayon-sy\">\\</span><span class=\"crayon-e \">G</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd89260383626502-20\"><span class=\"crayon-e \">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">row *</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span></div><div class=\"crayon-line\" id=\"crayon-59f288cd89260383626502-21\"><span class=\"crayon-h\">       </span><span class=\"crayon-v\">Table</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">t</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd89260383626502-22\"><span class=\"crayon-e\">Create </span><span class=\"crayon-v\">Table</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">CREATE </span><span class=\"crayon-i\">TABLE</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">t</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line\" id=\"crayon-59f288cd89260383626502-23\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">id</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">NOT</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">AUTO_INCREMENT</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd89260383626502-24\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'0'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f288cd89260383626502-25\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'0'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd89260383626502-26\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">c</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'0'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f288cd89260383626502-27\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">PRIMARY </span><span class=\"crayon-e\">KEY</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">id</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd89260383626502-28\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">UNIQUE </span><span class=\"crayon-i\">KEY</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f288cd89260383626502-29\"><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ENGINE</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">InnoDB </span><span class=\"crayon-v\">AUTO_INCREMENT</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">4</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">CHARSET</span><span class=\"crayon-o\">=</span><span class=\"crayon-i\">utf8</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd89260383626502-30\"><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">row </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">set</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sec</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f288cd89260383626502-31\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0091 seconds] -->\r\n<p></p>\n<ul>\n<li>注意此时主从两个表的AUTO_INCREMENT值已经不同了</li>\n</ul>\n<p><strong>c. 模拟从升主，在从库进行INSERT：</strong></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f288cd89264612117465\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nmysql&gt; insert into t (a,b,c)values(4,4,4);\r\nERROR 1062 (23000): Duplicate entry '4' for key 'PRIMARY'\r\nmysql&gt; show create table t\\G\r\n*************************** 1. row ***************************\r\n       Table: t\r\nCreate Table: CREATE TABLE `t` (\r\n  `id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `a` int(11) DEFAULT '0',\r\n  `b` int(11) DEFAULT '0',\r\n  `c` int(11) DEFAULT '0',\r\n  PRIMARY KEY (`id`),\r\n  UNIQUE KEY `a` (`a`)\r\n) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=utf8\r\n1 row in set (0.00 sec)\r\n\r\nmysql&gt; insert into t (a,b,c)values(4,4,4);\r\nQuery OK, 1 row affected (0.00 sec)\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f288cd89264612117465-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd89264612117465-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f288cd89264612117465-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd89264612117465-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f288cd89264612117465-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd89264612117465-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f288cd89264612117465-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd89264612117465-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f288cd89264612117465-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd89264612117465-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f288cd89264612117465-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd89264612117465-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59f288cd89264612117465-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd89264612117465-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59f288cd89264612117465-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd89264612117465-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-59f288cd89264612117465-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288cd89264612117465-18\">18</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f288cd89264612117465-1\"><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">insert </span><span class=\"crayon-i\">into</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">t</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">c</span><span class=\"crayon-sy\">)</span><span class=\"crayon-e\">values</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd89264612117465-2\"><span class=\"crayon-i\">ERROR</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1062</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">23000</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Duplicate </span><span class=\"crayon-i\">entry</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'4'</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">key</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'PRIMARY'</span></div><div class=\"crayon-line\" id=\"crayon-59f288cd89264612117465-3\"><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">show </span><span class=\"crayon-e\">create </span><span class=\"crayon-i\">table</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">t</span><span class=\"crayon-sy\">\\</span><span class=\"crayon-e \">G</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd89264612117465-4\"><span class=\"crayon-e \">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">row *</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span></div><div class=\"crayon-line\" id=\"crayon-59f288cd89264612117465-5\"><span class=\"crayon-h\">       </span><span class=\"crayon-v\">Table</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">t</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd89264612117465-6\"><span class=\"crayon-e\">Create </span><span class=\"crayon-v\">Table</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">CREATE </span><span class=\"crayon-i\">TABLE</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">t</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line\" id=\"crayon-59f288cd89264612117465-7\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">id</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">NOT</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">AUTO_INCREMENT</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd89264612117465-8\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'0'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f288cd89264612117465-9\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'0'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd89264612117465-10\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">c</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'0'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f288cd89264612117465-11\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">PRIMARY </span><span class=\"crayon-e\">KEY</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">id</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd89264612117465-12\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">UNIQUE </span><span class=\"crayon-i\">KEY</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f288cd89264612117465-13\"><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ENGINE</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">InnoDB </span><span class=\"crayon-v\">AUTO_INCREMENT</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">5</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">CHARSET</span><span class=\"crayon-o\">=</span><span class=\"crayon-i\">utf8</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd89264612117465-14\"><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">row </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">set</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sec</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f288cd89264612117465-15\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd89264612117465-16\"><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">insert </span><span class=\"crayon-i\">into</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">t</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">c</span><span class=\"crayon-sy\">)</span><span class=\"crayon-e\">values</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f288cd89264612117465-17\"><span class=\"crayon-e\">Query </span><span class=\"crayon-v\">OK</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">row </span><span class=\"crayon-e\">affected</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sec</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288cd89264612117465-18\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0052 seconds] -->\r\n<p></p>\n<ul>\n<li>从库插入时会报错，主键重复，报错后AUTO_INCREMENT会 +1，因此再次执行就可以成功插入</li>\n</ul>\n<h3>2. 结论</h3>\n<p>这个问题在平时不会有丝毫影响，但是：</p>\n<blockquote><p><strong>如果主库平时大量使用 <code>REPLACE</code> 语句，造成从库 <code>AUTO_INCREMENT</code> 值落后主库太大，当主从发生切换后，再次插入数据时新的主库就会出现大量主键重复报错，导致数据无法插入。</strong></p></blockquote>\n<h3>3. 参考文章</h3>\n<p>http://www.cnblogs.com/monian/archive/2014/10/09/4013784.html</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112368\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112368votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112368\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": "  评论", "praise_nums": "1", "url_object_id": "7ece3c421e6d88d9a3f6f10d0d7c8a34", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2015/11/e78e36715813f49e9e62fe0c6050075c.png"], "front_image_path": "full/35011d6168be00e949624c665041dc724e3ad786.jpg", "title": "MySQL 进行 Replace 操作时造成数据丢失——那些坑你踩了吗？"}
{"create_date": "2017/09/11 ", "url": "http://blog.jobbole.com/112411/", "fav_nums": 4, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://www.cnblogs.com/tdfblog/p/best-csharp-tools.html\">Sweet-Tang</a>   </div><p>C#是企业中广泛使用的编程语言，特别是那些依赖微软的程序语言。如果您使用C#构建应用程序，则最有可能使用Visual Studio，并且已经寻找了一些扩展来对您的开发进行管理。但是，这个工具列表可能会改变您编写C#代码的方式。</p>\n<h1 id=\"c编程的最佳工具有以下几类\">C#编程的最佳工具有以下几类：</h1>\n<ul>\n<li><a href=\"#IDEs\">IDE</a></li>\n<li><a href=\"#Extensions\">VS扩展</a></li>\n<li><a href=\"#Compilers\">编译器、编辑器和序列化</a></li>\n<li><a href=\"#Decompilers\">反编译和代码转换工具</a></li>\n<li><a href=\"#Automation\">构建自动化和合并工具</a></li>\n<li><a href=\"#VersionControl\">版本控制</a></li>\n<li><a href=\"#Testing\">测试工具和VS扩展</a></li>\n<li><a href=\"#Profilers\">性能分析</a></li>\n<li><a href=\"#APM\">APM</a></li>\n<li><a href=\"#Deployment\">部署自动化</a></li>\n<li><a href=\"#Containerization\">容器</a></li>\n</ul>\n<p>使用上面的链接直接跳转到特定工具，或继续阅读以浏览完整列表。</p>\n<h1>IDE</h1>\n<h2 id=\"visual-studio-code\">1. <a href=\"https://code.visualstudio.com/\">Visual Studio Code</a></h2>\n<h2><a href=\"http://jbcdn2.b0.upaiyun.com/2017/09/ab7cd9d2dc2e1643611ad6d6dc17a94b.jpg\"><img class=\"aligncenter size-full wp-image-112412\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/ab7cd9d2dc2e1643611ad6d6dc17a94b.jpg\" alt=\"162090-20170910205052272-559220882\"></a></h2>\n<p>Visual Studio Code是C#开发人员最受欢迎的代码编辑器。您可以使用Visual Studio Code与C#扩展功能实现强大的编辑功能，并完全支持C# IntelliSense和调试。</p>\n<p><strong>主要特征：</strong></p>\n<ul>\n<li>优秀的自动完成与上下文感知提示</li>\n<li>内置Git集成，实现更好的版本控制</li>\n<li>大量的扩展进一步增强平台</li>\n</ul>\n<h2 id=\"monodevelop\">2. <a href=\"http://www.monodevelop.com/\">MonoDevelop</a></h2>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/09/cdbf06f5a31bed35d6e8e99501364c76.jpg\"><img class=\"aligncenter size-full wp-image-112413\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/cdbf06f5a31bed35d6e8e99501364c76.jpg\" alt=\"162090-20170910205052272-559220882\"></a></p>\n<p>由Xamarin开发，MonoDevelop具有许多与VS Code相似的功能，也是跨平台的。使用MonoDevelop，您可以在Windows，Linux和Mac OS X上快速编写桌面和Web应用程序。</p>\n<p><strong>主要特征：</strong></p>\n<ul>\n<li>标准功能，如代码提示和调试</li>\n<li>还配有<a href=\"https://unity3d.com/\">Unity</a>，一个游戏引擎，可以为视频游戏等应用程序实现高级C#编程</li>\n<li>支持C#代码提示</li>\n<li>代码模板和代码折叠</li>\n<li>多语言支持</li>\n</ul>\n<h2 id=\"sharpdevelop\">3. <a href=\"http://www.icsharpcode.net/\">SharpDevelop</a></h2>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/09/56e59653b98d56cb5a410d98cb7bedf7.jpg\"><img class=\"aligncenter size-full wp-image-112414\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/56e59653b98d56cb5a410d98cb7bedf7.jpg\" alt=\"162090-20170910205052272-559220882\"></a></p>\n<p>一个用于C#、VB.net和Boo项目的免费开源IDE，#develop（SharpDevelop）是VS Code的轻量级替代品。</p>\n<p><strong>主要特征：</strong></p>\n<ul>\n<li>Visual Studio提供的通常功能，包括代码编辑，编译和调试</li>\n<li>一些高级功能包括上下文操作和后台语法检查</li>\n</ul>\n<h2 id=\"rider\">4. <a href=\"https://www.jetbrains.com/rider/\">Rider</a></h2>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/09/9d3f920744876bd8d1a24134838ba714.jpg\"><img class=\"aligncenter size-full wp-image-112415\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/9d3f920744876bd8d1a24134838ba714.jpg\" alt=\"162090-20170910205052272-559220882\"></a></p>\n<p>Jet Brains产品套件中一个成员，Rider是基于IntelliJ平台和ReSharper的跨平台.NET IDE。</p>\n<p><strong>主要特征：</strong></p>\n<ul>\n<li>与其他JetBrains产品无缝集成</li>\n<li>2000多种代码检查</li>\n<li>上下文操作</li>\n<li>支持Unity游戏引擎</li>\n<li>支持.NET Framework和.NET Core</li>\n</ul>\n<h1 id=\"visual-studio-扩展\">Visual Studio 扩展</h1>\n<h2 id=\"productivity-power-tools-2017\">5. <a href=\"https://marketplace.visualstudio.com/items?itemName=VisualStudioProductTeam.ProductivityPowerPack2017\">Productivity Power Tools 2017</a></h2>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/09/b6ea07eb5999a3e0136e07a09f122f49.jpg\"><img class=\"aligncenter size-full wp-image-112416\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/b6ea07eb5999a3e0136e07a09f122f49.jpg\" alt=\"162090-20170910205052272-559220882\"></a></p>\n<p>由Microsoft提供，这是一个很好的扩展，以加快Visual Studio的开发。</p>\n<p><strong>主要特征：</strong></p>\n<ul>\n<li>中间点击滚动</li>\n<li>快速查找</li>\n<li>解决方案错误可视化</li>\n<li>直观的界面</li>\n<li>其它版本可用于旧版Visual Studio版本</li>\n</ul>\n<h2 id=\"jquery-code-snippets\">6. <a href=\"https://github.com/kspearrin/Visual-Studio-jQuery-Code-Snippets\">jQuery Code Snippets</a></h2>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/09/3e8c0688d1b43afcb054ae41872c6ed4.jpg\"><img class=\"aligncenter size-full wp-image-112417\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/3e8c0688d1b43afcb054ae41872c6ed4.jpg\" alt=\"162090-20170910205052272-559220882\"></a></p>\n<p>简化jQuery框架编码，jQuery Code Snippets为Visual Studio 2012，2013，2015和2017提供了超过130个代码段。</p>\n<p><strong>主要特征：</strong></p>\n<ul>\n<li>130多种jQuery代码片段</li>\n<li>支持所有版本的Visual Studio</li>\n<li>对于那些刚入门jQuery开发人员来说非常棒，可以使用这个扩展来学习jQuery的门道</li>\n</ul>\n<h2 id=\"codemaid\">7. <a href=\"http://www.codemaid.net/\">CodeMaid</a></h2>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/09/2864e73047c391392c93c64b6f0e91cd.jpg\"><img class=\"aligncenter size-full wp-image-112418\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/2864e73047c391392c93c64b6f0e91cd.jpg\" alt=\"162090-20170910205052272-559220882\"></a></p>\n<p>CodeMaid是一个开源的VS扩展，可以帮助您清理和简化除C#之外各种支持语言的代码。</p>\n<p><strong>主要特征：</strong></p>\n<ul>\n<li>从代码中删除不必要的字符，如空格</li>\n<li>代码整理</li>\n<li>使用树型结构视图轻松浏览代码</li>\n<li>支持多种语言</li>\n<li>注释格式</li>\n</ul>\n<h2 id=\"refactoring-essentials\">8. <a href=\"http://vsrefactoringessentials.com/\">Refactoring Essentials</a></h2>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/09/9c0f0877240c4e938221ed3b681237e4.jpg\"><img class=\"aligncenter size-full wp-image-112419\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/9c0f0877240c4e938221ed3b681237e4.jpg\" alt=\"162090-20170910205052272-559220882\"></a></p>\n<p>使用Refactoring Essentials，一个具有内置的C#和VB代码转换器的VS扩展，使您的C#代码更容易阅读和修复常见错误。</p>\n<p><strong>主要特征：</strong></p>\n<ul>\n<li>修复常见的错字和编码错误</li>\n<li>在代码库中找到每种不匹配的样式</li>\n<li>开源代码，您可以扩展或改进它</li>\n</ul>\n<h1 id=\"编译器编辑器和序列化\">编译器、编辑器和序列化</h1>\n<h3 id=\"slickedit\">9. <a href=\"https://www.slickedit.com/\">SlickEdit</a></h3>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/09/a1333c638778be745f8795863f76f2b9.jpg\"><img class=\"aligncenter size-full wp-image-112420\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/a1333c638778be745f8795863f76f2b9.jpg\" alt=\"162090-20170910205052272-559220882\"></a></p>\n<p>SlickEdit是一个代码编辑工具，可以提高生产力并提高代码质量。它是一个跨平台的代码编辑器，可在九个平台上支持超过60种语言（包括C#）。</p>\n<p><strong>主要特征：</strong></p>\n<ul>\n<li>编译并调试您的代码，显示所有错误以便行快速访问</li>\n<li>可以处理非常大的代码文件，大到2TB</li>\n<li>语法扩展和缩进</li>\n<li>按键模拟</li>\n<li>备份历史记录</li>\n<li>多个光标和选择</li>\n<li>标准和专业版可用于满足您的需求</li>\n</ul>\n<h2 id=\"rextester\">10. <a href=\"http://rextester.com/\">Rextester</a></h2>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/09/aa72d6d1d2d6d850b8bc04e757da51dc.jpg\"><img class=\"aligncenter size-full wp-image-112421\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/aa72d6d1d2d6d850b8bc04e757da51dc.jpg\" alt=\"162090-20170910205052272-559220882\"></a></p>\n<p>Rextester（代表正则表达式测试器）是C#的简单在线编译器。</p>\n<p><strong>主要特征：</strong></p>\n<ul>\n<li>每段代码运行CPU时间最多为5秒</li>\n<li>每段代码最多可以占用150MB内存</li>\n<li>代码在应用程序域中运行，具有基本的执行、反射、线程控制和web权限</li>\n</ul>\n<h2 id=\"c-pad\">11. <a href=\"https://csharppad.com/\">C# Pad</a></h2>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/09/4fac2d2f11390ea2e6dd24c61717f926.jpg\"><img class=\"aligncenter size-full wp-image-112422\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/4fac2d2f11390ea2e6dd24c61717f926.jpg\" alt=\"162090-20170910205052272-559220882\"></a></p>\n<p>C# Pad是C#的一个方便的REPL工具。使用起来很简单：输入代码，点击“Go”执行。</p>\n<p><strong>主要特征：</strong></p>\n<ul>\n<li>在线快速测试C#代码</li>\n<li>包括代码自动完成</li>\n<li>可嵌入其它网站</li>\n</ul>\n<h2 id=\"jdoodle\">12. <a href=\"https://www.jdoodle.com/\">Jdoodle</a></h2>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/09/085e042ba82da71329d3f2acc3a697b8.jpg\"><img class=\"aligncenter size-full wp-image-112423\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/085e042ba82da71329d3f2acc3a697b8.jpg\" alt=\"162090-20170910205052272-559220882\"></a></p>\n<p>另一个轻量级代码编译器，Jdoodle支持63种语言（包括C#），并允许您保存程序并与其他人共享URL。您可以将Jdoodle中创建的代码嵌入到您的网站，用于协作，在线访问等。</p>\n<p><strong>主要特征：</strong></p>\n<ul>\n<li>在线快速测试一小段代码，而无需打开IDE</li>\n<li>轻松地与他人分享您的代码</li>\n<li>API即将推出</li>\n</ul>\n<h2 id=\"net-fiddle\">13. <a href=\"https://dotnetfiddle.net/\">.NET Fiddle</a></h2>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/09/c1c4f3caf8dc79a543e7fc07eb0431b9.jpg\"><img class=\"aligncenter size-full wp-image-112424\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/c1c4f3caf8dc79a543e7fc07eb0431b9.jpg\" alt=\"162090-20170910205052272-559220882\"></a></p>\n<p>C#的一个流行的调试工具，.NET Fiddle的灵感来自于JSFiddle.net，旨在快速，简单的代码测试，而无需打开Visual Studio并创建一个新的项目。</p>\n<p><strong>主要特征：</strong></p>\n<ul>\n<li>让您编写，保存和协作C#代码</li>\n<li>支持4种项目类型：控制台，Script，MVC，Nancy</li>\n<li>还支持VB.NET和F＃</li>\n</ul>\n<h2 id=\"telerik-fiddler\">14. <a href=\"http://www.telerik.com/fiddler\">Telerik Fiddler</a></h2>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/09/1ba1c74d48a3197be5ea9a54663bf102.jpg\"><img class=\"aligncenter size-full wp-image-112425\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/1ba1c74d48a3197be5ea9a54663bf102.jpg\" alt=\"162090-20170910205052272-559220882\"></a></p>\n<p>Telerik Fiddler允许您在线执行代码。它提供了一系列功能，包括Web调试、Web会话操作、性能测试、安全测试等。</p>\n<p><strong>主要特征：</strong></p>\n<ul>\n<li>运行一系列测试，如性能测试、Web调试和安全测试</li>\n<li>FiddlerCore可让您将Fiddler应用程序嵌入到您自己的应用程序中，以便您可以避免整个Fiddler UI，还可以获得Fiddler的所有功能</li>\n</ul>\n<h2 id=\"json.net\">15. <a href=\"http://www.newtonsoft.com/json\">Json.NET</a></h2>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/09/00105e5bd3b3bcdbfe502aaacf9526dc.jpg\"><img class=\"aligncenter size-full wp-image-112426\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/00105e5bd3b3bcdbfe502aaacf9526dc.jpg\" alt=\"162090-20170910205052272-559220882\"></a></p>\n<p>Json.NET是一个流行的JSON框架。使用它，您可以在任何地方（Windows，Windows Store，Windows Phone，Mono和Xamarin）运行它时，创建、解析、查询和修改JSON，在XML和JSON之间进行转换。</p>\n<p><strong>主要特征：</strong></p>\n<ul>\n<li>对.NET对象进行序列化和反序列化</li>\n<li>查询JSON数据库</li>\n<li>使用JObject，JArray和JValue对象创建、解析、查询和修改JSON</li>\n<li>开源</li>\n</ul>\n<h2 id=\"scriptcs\">16. <a href=\"http://scriptcs.net/\">Scriptcs</a></h2>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/09/fb23c062ff12d10ad60fb4e3e65407be.jpg\"><img class=\"aligncenter size-full wp-image-112427\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/fb23c062ff12d10ad60fb4e3e65407be.jpg\" alt=\"162090-20170910205052272-559220882\"></a></p>\n<p>一个简单的在线编辑器，编写和执行C#代码，Scriptcs被设计为非常简单，以避免使用过于复杂的工具和解决方案阻碍您的工作效率。</p>\n<p><strong>主要特征：</strong></p>\n<ul>\n<li>避免完整IDE的臃肿</li>\n<li>为您提供简单的C#编码任务的灵活性和速度</li>\n<li>管理与NuGet的依赖关系</li>\n<li>优雅的C#脚本语法</li>\n</ul>\n<h1 id=\"反编译和代码转换工具\">反编译和代码转换工具</h1>\n<h2 id=\"dotpeek\">17. <a href=\"https://www.jetbrains.com/decompiler/\">dotPeek</a></h2>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/09/5d1169da0b608f78a20702bff1909a77.jpg\"><img class=\"aligncenter size-full wp-image-112428\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/5d1169da0b608f78a20702bff1909a77.jpg\" alt=\"162090-20170910205052272-559220882\"></a></p>\n<p>dotPeek允许您将.NET程序集反编译为C#。dotBeek是JetBrains提供的免费独立工具，基于ReSharper捆绑的反编译器。</p>\n<p><strong>主要特征：</strong></p>\n<ul>\n<li>强大的搜索和导航功能</li>\n<li>将任何.NET程序集解码为等效的C#或IL代码</li>\n<li>支持多种格式（.dll、.exe、.winmd）</li>\n<li>将反编译的程序集保存为Visual Studio项目</li>\n</ul>\n<h2 id=\"ilspy\">18. <a href=\"http://ilspy.net/\">ILspy</a></h2>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/09/b14c6254b53a1eef405a965f7e857a35.jpg\"><img class=\"aligncenter size-full wp-image-112429\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/b14c6254b53a1eef405a965f7e857a35.jpg\" alt=\"162090-20170910205052272-559220882\"></a></p>\n<p>基于Red Gate的.NET Reflector开源反编译器，在2011年停止维护，ILspy需要.NET Framework 4.0。</p>\n<p><strong>主要特征：</strong></p>\n<ul>\n<li>浏览程序集并将其反编译为C#</li>\n<li>将程序集保存为C#项目</li>\n<li>直观的搜索和导航功能</li>\n<li>导航历史</li>\n<li>支持C#5.0 “async”</li>\n<li>反编译为VB和C#</li>\n</ul>\n<h2 id=\"justdecompile\">19. <a href=\"http://www.telerik.com/products/decompiler.aspx\">JustDecompile</a></h2>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/09/d93095d5cb7fe7a91e8e683a757068d8.jpg\"><img class=\"aligncenter size-full wp-image-112430\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/d93095d5cb7fe7a91e8e683a757068d8.jpg\" alt=\"162090-20170910205052272-559220882\"></a></p>\n<p>一个来自Telerik的反编译器，JustDecompile是一个免费的开源反编译引擎。</p>\n<p><strong>主要特征：</strong></p>\n<ul>\n<li>可扩展的开放API</li>\n<li>快速代码导航</li>\n<li>轻松地在标签页中切换方法和程序集</li>\n<li>在加载程序集中使用书签</li>\n<li>从反编译的程序集创建一个Visual Studio项目</li>\n<li>Visual Studio扩展在VS项目中进行反编译</li>\n</ul>\n<h2 id=\"telerik-code-converter\">20. <a href=\"http://converter.telerik.com/\">Telerik Code Converter</a></h2>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/09/55f1c5759c01a823a8cd152e67e9fa28.jpg\"><img class=\"aligncenter size-full wp-image-112431\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/55f1c5759c01a823a8cd152e67e9fa28.jpg\" alt=\"162090-20170910205052272-559220882\"></a></p>\n<p>Telerik代码转换器将VB代码转换为C#，反之亦然。一个简单而强大的工具，Telerik代码转换器易于使用，具有直观的界面。</p>\n<p><strong>主要特征：</strong></p>\n<ul>\n<li>基于云的转换，快速和轻松的</li>\n<li>使用NRefactory库进行复杂的代码转换</li>\n<li>使用ASP.NET AJAX的Telerik UI</li>\n</ul>\n<h1 id=\"构建自动化和合并工具\">构建自动化和合并工具</h1>\n<h3 id=\"cake-build\">21. <a href=\"http://cakebuild.net/\">Cake Build</a></h3>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/09/710b109b667b0a2a4c754815d85c73b8.jpg\"><img class=\"aligncenter size-full wp-image-112432\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/710b109b667b0a2a4c754815d85c73b8.jpg\" alt=\"162090-20170910205052272-559220882\"></a></p>\n<p>Cake（C#Make）是C#版的开源Make Build自动化工具。一个跨平台构建自动化系统，Cake使用C# DSL来编写代码，运行单元测试，复制文件和文件夹，压缩文件和构建NuGet软件包等任务。</p>\n<p><strong>主要特征：</strong></p>\n<ul>\n<li>在Windows，Linux和OS X上可用</li>\n<li>建立与其他CI系统相同的方式</li>\n<li>支持构建工具，包括MSBuild，MSTest，xUnit，NUnit，NuGet，ILMerge，WiX和SignTool</li>\n<li>高可扩展</li>\n</ul>\n<h2 id=\"msbuild\">22. <a href=\"https://www.visualstudio.com/en-us/docs/build/steps/build/msbuild\">MSBuild</a></h2>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/09/dc18c33a85da75cdb5e9e497dfc15020.jpg\"><img class=\"aligncenter size-full wp-image-112433\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/dc18c33a85da75cdb5e9e497dfc15020.jpg\" alt=\"162090-20170910205052272-559220882\"></a></p>\n<p>MSBuild是由Microsoft于2008年推出的。它不是Visual Studio平台的一部分，但它是您的C#开发工具包的一个很好的资源，例如在您构建代码项目时，除了解决方案之外。</p>\n<p><strong>主要特征：</strong></p>\n<ul>\n<li>来自微软，它被许多MS商店广泛使用</li>\n<li>微软把它放到了Visual Studio中确保它不会成单独存</li>\n<li>构建多个项目</li>\n<li>构建Win32，x86，x64或任何cpu平台</li>\n<li>为多个平台构建多个配置</li>\n</ul>\n<h2 id=\"finalbuilder\">23. <a href=\"https://www.finalbuilder.com/finalbuilder\">FinalBuilder</a></h2>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/09/76cc136d56bf28d5f660a00e8dd0f20c.jpg\"><img class=\"aligncenter size-full wp-image-112434\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/76cc136d56bf28d5f660a00e8dd0f20c.jpg\" alt=\"162090-20170910205052272-559220882\"></a></p>\n<p>FinalBuilder是构建自动化工具的一个很好的商业选择。使用FinalBuilder，您不需要编辑XML或编写脚本来自动完成构建过程。</p>\n<p><strong>主要特征：</strong></p>\n<ul>\n<li>通过包括可视化调试，使构建变得容易</li>\n<li>可视地定义和调试构建脚本</li>\n<li>使用Windows调度程序安排脚本</li>\n<li>与Continua CI，Jenkins或任何其它CI服务器集成</li>\n</ul>\n<h2 id=\"semanticmerge\">24. <a href=\"http://www.semanticmerge.com/\">SemanticMerge</a></h2>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/09/27c5f88a28199621439e8d5f121cf978.jpg\"><img class=\"aligncenter size-full wp-image-112435\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/27c5f88a28199621439e8d5f121cf978.jpg\" alt=\"162090-20170910205052272-559220882\"></a></p>\n<p>SemanticMerge分析您的代码，旨在处理已被移动或修改的代码，使其成为团队协作的强大工具。</p>\n<p><strong>主要特征：</strong></p>\n<ul>\n<li>实现协作和分布式开发</li>\n<li>从结构合并开始，然后在发生冲突时移动到更具体的基于文本的合并</li>\n<li>基于结构而不是位置合并</li>\n<li>处理特定于语言的冲突</li>\n<li>避免错误地识别自动合并</li>\n<li>保持清洁的代码并分析更改</li>\n</ul>\n<h1 id=\"版本控制\">版本控制</h1>\n<h2 id=\"git\">25. <a href=\"https://git-scm.com/\">Git</a></h2>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/09/2ebd63d78a68b858493da22210f0a2bb.jpg\"><img class=\"aligncenter size-full wp-image-112436\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/2ebd63d78a68b858493da22210f0a2bb.jpg\" alt=\"162090-20170910205052272-559220882\"></a></p>\n<p>Git就不需要介绍了。这是一个免费的开源版本控制系统，也是当今最流行的版本控制系统。</p>\n<p><strong>主要特征：</strong></p>\n<ul>\n<li>现代版本控制工具，适用于当今地理位置分布的团队</li>\n<li>包括强大的默认值，用于解决冲突，自动恢复等</li>\n<li>便宜的本地分支</li>\n<li>方便的暂存区</li>\n<li>多个工作流程</li>\n</ul>\n<h2 id=\"team-foundation-version-control\">26. <a href=\"https://www.visualstudio.com/team-services/tfvc/\">Team Foundation Version Control</a></h2>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/09/328f6f58124bcf89625bc7bc2aa43639.jpg\"><img class=\"aligncenter size-full wp-image-112437\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/328f6f58124bcf89625bc7bc2aa43639.jpg\" alt=\"162090-20170910205052272-559220882\"></a></p>\n<p>TFS版本控制是Microsoft替代Git的一种，它集成到Visual Studio中。它是企业准备的，所以对于使用VS项目的任何规模的团队来说，这是一个不错的选择。</p>\n<p><strong>主要特征：</strong></p>\n<ul>\n<li>利用Visual Studio功能提供本地体验</li>\n<li>跟踪分支机构的代码更改</li>\n<li>在代码签入之前提供反馈</li>\n<li>集成最流行的CI和自动化构建工具</li>\n</ul>\n<h2 id=\"bitbucket\">27. <a href=\"https://bitbucket.org/\">BitBucket</a></h2>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/09/83bb4073ba4ba43ec8f09f7221898316.jpg\"><img class=\"aligncenter size-full wp-image-112438\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/83bb4073ba4ba43ec8f09f7221898316.jpg\" alt=\"162090-20170910205052272-559220882\"></a></p>\n<p>BitBucket是Jira的Git替代品，也是一个有能力的版本控制工具——“唯一一个大规模的协作的Git解决方案。”</p>\n<p><strong>主要特征：</strong></p>\n<ul>\n<li>使用内联注释选项更快地协作</li>\n<li>由于代码是开源的，还是让Jira为您管理代码</li>\n<li>拉请求允许更有效的代码审查批准</li>\n<li>使用BitBucket数据中心进行不间断的访问</li>\n<li>无限私有存储库</li>\n</ul>\n<h2 id=\"sourcetree\">28. <a href=\"https://www.sourcetreeapp.com/\">SourceTree</a></h2>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/09/6dbc13b3a314cec4fe0c7366d37abb2c.jpg\"><img class=\"aligncenter size-full wp-image-112439\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/6dbc13b3a314cec4fe0c7366d37abb2c.jpg\" alt=\"162090-20170910205052272-559220882\"></a></p>\n<p>SourceTree是另一个Jira产品，一个用于Windows和Mac的免费Git客户端，具有简单的Git GUI来管理您的仓库。</p>\n<p><strong>主要特征：</strong></p>\n<ul>\n<li>支持Windows和Mac</li>\n<li>与您的存储库进行视觉交互</li>\n<li>简化分布式版本控制</li>\n<li>对初学者来说足够简单 足够强大的专家</li>\n</ul>\n<h1 id=\"测试工具和vs扩展\">测试工具和VS扩展</h1>\n<h3 id=\"linqpad\">29. <a href=\"http://www.linqpad.net/\">LINQPad</a></h3>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/09/8b84ef5c25005a19e0d25f7e19706ac6.jpg\"><img class=\"aligncenter size-full wp-image-112440\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/8b84ef5c25005a19e0d25f7e19706ac6.jpg\" alt=\"162090-20170910205052272-559220882\"></a></p>\n<p>一个用于即时测试C#，F#和VB中的代码片段的工具，LINQPad可以让您以交互方式查询数据库。</p>\n<p><strong>主要特征：</strong></p>\n<ul>\n<li>有自己的查询语言 – LINQ，这是一个强大的查询数据库的方法</li>\n<li>非常适合学习C#，因为它为您提供了IDE的许多功能，而不臃肿</li>\n<li>在LINQ（或SQL） – SQL/CE/Azure、Oracle、SQLite和MySQL中查询数据库</li>\n<li>丰富的输出格式</li>\n<li>脚本并以您首选的.NET语言自动化</li>\n</ul>\n<h2 id=\"selenium\">30. <a href=\"http://www.seleniumhq.org/\">Selenium</a></h2>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/09/30d2148445af4f7ae6568772fc5ccae8.jpg\"><img class=\"aligncenter size-full wp-image-112441\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/30d2148445af4f7ae6568772fc5ccae8.jpg\" alt=\"162090-20170910205052272-559220882\"></a></p>\n<p>Selenium是目前最流行的测试工具之一。它可以自动化Web浏览器，以便您可以在规模和精度上运行测试。</p>\n<p><strong>主要特征：</strong></p>\n<ul>\n<li>自动化的基于Web的管理任务</li>\n<li>创建强大的回归自动化套件和测试</li>\n<li>跨环境和脚本分发</li>\n<li>构建您自己的Selenium服务器或使用供应商提供的托管选项</li>\n</ul>\n<h2 id=\"resharper\">31. <a href=\"https://www.jetbrains.com/resharper/\">ReSharper</a></h2>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/09/e0d310155483608ebc407ab9a28c6fda.jpg\"><img class=\"aligncenter size-full wp-image-112442\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/e0d310155483608ebc407ab9a28c6fda.jpg\" alt=\"162090-20170910205052272-559220882\"></a></p>\n<p>由JetBrains创建的，ReSharper是.NET开发人员的Visual Studio扩展。使用它来即时分析代码质量，消除错误，安全地更改代码库等。</p>\n<p><strong>主要特征：</strong></p>\n<ul>\n<li>提供即时代码分析</li>\n<li>快速修复错误</li>\n<li>帮助复杂重构</li>\n<li>多个代码编辑助手</li>\n</ul>\n<h2 id=\"ozcode\">32. <a href=\"https://oz-code.com/\">OzCode</a></h2>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/09/5aad95b7d82740b30d92429af2aa9bcb.jpg\"><img class=\"aligncenter size-full wp-image-112443\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/5aad95b7d82740b30d92429af2aa9bcb.jpg\" alt=\"162090-20170910205052272-559220882\"></a></p>\n<p>OzCode是C#的Visual Studio扩展，提供强大的调试工具，因此您可以花更多的时间开发和更少的时间调试。</p>\n<p><strong>主要特征：</strong></p>\n<ul>\n<li>使Visual Studio中更容易找到并修复错误</li>\n<li>与ReSharper合作</li>\n<li>用Magic Glance来绘制出复杂的表达式</li>\n<li>强大的搜索，显示和比较功能</li>\n</ul>\n<h2 id=\"coderush\">33. <a href=\"https://www.devexpress.com/products/coderush/\">CodeRush</a></h2>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/09/afb8749eb07de32dd5886f8121b86baf.jpg\"><img class=\"aligncenter size-full wp-image-112444\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/afb8749eb07de32dd5886f8121b86baf.jpg\" alt=\"162090-20170910205052272-559220882\"></a></p>\n<p>CodeRush可以帮助您轻松找到并修复问题，像本节中的其它测试工具一样，是一个VS扩展。</p>\n<p><strong>主要特征：</strong></p>\n<ul>\n<li>视觉突出显示代码库中的问题，并帮助您快速发现问题</li>\n<li>快速创建新的测试和测试套件与快捷方式</li>\n<li>容易重构</li>\n</ul>\n<h1 id=\"性能分析\">性能分析</h1>\n<h3 id=\"prefix\">34. <a href=\"https://stackify.com/prefix/\">Prefix</a></h3>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/09/03b06f5d1cb589306d5795789ad8d54d.png\"><img class=\"aligncenter size-full wp-image-112445\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/03b06f5d1cb589306d5795789ad8d54d.png\" alt=\"162090-20170910211007866-1263253556\"></a></p>\n<p>一个用于.NET和Java的轻量级开发工具，Prefix会实时显示日志、错误、查询等。它可以在您现有的工作站内使用 – 它是免费的。</p>\n<p><strong>主要特征：</strong></p>\n<ul>\n<li>提供每个Web请求的详细跟踪</li>\n<li>没有凌乱的配置或代码更改</li>\n<li>立即下载; 立即获得代码分析结果</li>\n<li>按要求查看日志</li>\n<li>查找隐藏的异常</li>\n<li>查看SQL查询</li>\n<li>快速找出可疑行为</li>\n</ul>\n<h2 id=\"dottrace\">35. <a href=\"https://www.jetbrains.com/profiler/\">dotTrace</a></h2>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/09/d305e83fd3ff97da47bbcbd688abb102.jpg\"><img class=\"aligncenter size-full wp-image-112446\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/d305e83fd3ff97da47bbcbd688abb102.jpg\" alt=\"162090-20170910205052272-559220882\"></a></p>\n<p>来自JetBrains，dotTrace是一个分析器，可帮助排除性能问题并加快应用程序的速度。</p>\n<p><strong>主要特征：</strong></p>\n<ul>\n<li>了解SQL查询和HTTP请求如何影响应用程序性能</li>\n<li>查看逐行剖析数据并获取特定的绩效指标</li>\n<li>获取调用执行时间的数据</li>\n<li>配置文件SQL查询和HTTP请求</li>\n<li>简介静态方法和单元测试</li>\n<li>在Visual Studio中配置和可视化结果</li>\n</ul>\n<h2 id=\"ants-performance-profiler\">36. <a href=\"https://www.red-gate.com/products/dotnet-development/ants-performance-profiler/\">ANTS Performance Profiler</a></h2>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/09/421d2c22e18956d4c7d759d2189ddb2a.jpg\"><img class=\"aligncenter size-full wp-image-112447\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/421d2c22e18956d4c7d759d2189ddb2a.jpg\" alt=\"162090-20170910205052272-559220882\"></a></p>\n<p>ANTS性能分析器是.NET代码的分析工具，包括提供逐行分析统计信息。</p>\n<p><strong>主要特征：</strong></p>\n<ul>\n<li>查看SQL查询和HTTP请求的性能数据</li>\n<li>提供逐行结果</li>\n<li>显示历史性的表现</li>\n<li>深入了解长期分析结果</li>\n</ul>\n<h2 id=\"n-profiler\">37.<a href=\"https://www.nprofiler.com/\">N Profiler</a></h2>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/09/193d29df37f2c0a6de25bb5f83b8c30c.jpg\"><img class=\"aligncenter size-full wp-image-112448\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/193d29df37f2c0a6de25bb5f83b8c30c.jpg\" alt=\"162090-20170910205052272-559220882\"></a></p>\n<p>一个分析工具声称比任何其培训分析器更快，N Profiler提供丰富的.NET性能数据，可以节省90%的优化时间。</p>\n<p><strong>主要特征：</strong></p>\n<ul>\n<li>了解性能问题的真实原因 – 数据库查询或I/O时间</li>\n<li>性能指标组织在调用树中，可以在概述或细节级别查看</li>\n</ul>\n<h1 id=\"apm\">APM</h1>\n<h2 id=\"retrace\">38. <a href=\"https://stackify.com/retrace/\">Retrace</a></h2>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/09/54b4463f786af4d51a64b9624ce703e3.png\"><img class=\"aligncenter size-full wp-image-112450\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/54b4463f786af4d51a64b9624ce703e3.png\" alt=\"162090-20170910211007866-1263253556\"></a></p>\n<p>Retrace是唯一将APM、日志、错误、指标和监控结合在一个平台上的开发者工具，可帮助您更好地构建。它专为生产和预生产服务器而设计，每月只需10美元。</p>\n<p><strong>主要特征：</strong></p>\n<ul>\n<li>在代码级收集性能数据</li>\n<li>应用程序和服务器记录</li>\n<li>各种来源的应用指标</li>\n<li>错误跟踪和监控</li>\n<li>与现有堆栈一起工作</li>\n<li>免费试用</li>\n</ul>\n<h1 id=\"部署自动化\">部署自动化</h1>\n<h2 id=\"octopus\">39. <a href=\"https://octopus.com/\">Octopus</a></h2>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/09/1143dc56d334c82c08d0e6e076190eb0.jpg\"><img class=\"aligncenter size-full wp-image-112451\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/1143dc56d334c82c08d0e6e076190eb0.jpg\" alt=\"162090-20170910205052272-559220882\"></a></p>\n<p>C#主要部署自动化工具，这使得自动化复杂的应用程序部署成为可能。</p>\n<p><strong>主要特征：</strong></p>\n<ul>\n<li>提供和配置新机器来部署您的应用程序</li>\n<li>与CI服务器集成，将构建自动化和CI进程扩展到部署中</li>\n<li>精简各环境之间的版本</li>\n<li>可重复，可靠的部署</li>\n</ul>\n<h2 id=\"appveyor\">40. <a href=\"https://www.appveyor.com/\">Appveyor</a></h2>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/09/541566723eb5308d235dcfc63e057987.jpg\"><img class=\"aligncenter size-full wp-image-112452\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/541566723eb5308d235dcfc63e057987.jpg\" alt=\"162090-20170910205052272-559220882\"></a></p>\n<p>一个CI构建服务器，不仅可以处理构建，而且还可以进行部署，Appveyor非常强大，安全，并且无需设置即可开始使用。</p>\n<p><strong>主要特征：</strong></p>\n<ul>\n<li>用于构建，测试和部署端到端解决方案</li>\n<li>易于使用，无需设置</li>\n<li>隔离构建环境</li>\n<li>使用UI或YAML的开发人员友好的构建配置</li>\n<li>内置部署和NuGet服务器</li>\n<li>多分支构建</li>\n</ul>\n<h2 id=\"appharbor\">41.<a href=\"https://appharbor.com/\">AppHarbor</a></h2>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/09/38343a06fc098841a183e68f8dc5c71e.jpg\"><img class=\"aligncenter size-full wp-image-112453\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/38343a06fc098841a183e68f8dc5c71e.jpg\" alt=\"162090-20170910205052272-559220882\"></a></p>\n<p>AppHarbor不仅仅是部署：它是一个完全托管的.NET 平台服务。它用于托管从个人博客到高流量网络应用程序的所有内容。</p>\n<p><strong>主要特征：</strong></p>\n<ul>\n<li>从源代码存储库获取代码，并将其部署在自己的托管平台上</li>\n<li>使用您最喜欢的版本控制工具即时部署和扩展.NET应用程序</li>\n<li>不用担心扩展您的基础架构来跟上负载，AppHarbor会为您处理这一切</li>\n</ul>\n<h2 id=\"jenkins\">42. <a href=\"https://jenkins.io/\">Jenkins</a></h2>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/09/74f7d0aa59c2d8ac0aad93e8ef7cfe4a.jpg\"><img class=\"aligncenter size-full wp-image-112454\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/74f7d0aa59c2d8ac0aad93e8ef7cfe4a.jpg\" alt=\"162090-20170910205052272-559220882\"></a></p>\n<p>Jenkins不仅仅是部署自动化工具，也是最受欢迎的CI服务器，它将其覆盖面扩展到部署和交付阶段。</p>\n<p><strong>主要特征：</strong></p>\n<ul>\n<li>丰富的收集扩展，以适应每个堆栈</li>\n<li>从构建到部署的端到端解决方案</li>\n<li>数以百计的插件来支持构建，部署和自动化</li>\n</ul>\n<h1 id=\"容器\">容器</h1>\n<h2 id=\"docker.dotnet\">43. <a href=\"https://www.nuget.org/packages/Docker.DotNet/\">Docker.DotNet</a></h2>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/09/15f470b4e14bc30557d58f71c8372b3f.jpg\"><img class=\"aligncenter size-full wp-image-112458\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/15f470b4e14bc30557d58f71c8372b3f.jpg\" alt=\"162090-20170910205052272-559220882\"></a></p>\n<p>Docker.DotNet是Docker API的C#客户端库。通过它，您可以通过编程方式与Docker Remote API进行交互。</p>\n<p><strong>主要特征：</strong></p>\n<ul>\n<li>可以通过Visual Studio的NuGet库管理器进行安装</li>\n<li>在.NET中启用完全异步，非阻塞，面向对象的代码</li>\n</ul>\n<h2 id=\"distelli\">44. <a href=\"https://www.distelli.com/\">Distelli</a></h2>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/09/34cc483c247ca99f52ba7cb37d0c2f07.jpg\"><img class=\"aligncenter size-full wp-image-112459\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/34cc483c247ca99f52ba7cb37d0c2f07.jpg\" alt=\"162090-20170910205052272-559220882\"></a></p>\n<p>一个强大的工具来集中化C#应用程序，Distelli帮助您从头到尾自动化您的容器工作流程。有关如何使用Distelli构建和部署C#应用程序，请参阅<a href=\"https://www.distelli.com/docs/tutorials/build-and-deploy-c-sharp-application/\">此有用的教程</a> 。本教程提供了构建和部署Docker C#应用程序的分步说明。</p>\n<p><strong>主要特征：</strong></p>\n<ul>\n<li>使用Distelli自动化您的容器工作流端到端</li>\n<li>部署到Kubernetes，用于最先进的容器编排</li>\n</ul>\n<p>C#和.NET Core 将在2018年及以后的得到巨大的发展，磨练C#技能将在未来几年内为您服务。我们希望您已经找到了一两种可以使用的工具，并提高了C#开发的质量和生产力。如果有什么工具我们遗漏了，请告诉我们，这个工具应该在这个工具包中有一席之地。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112411\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112411votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112411\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 4 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": 1, "praise_nums": "2", "url_object_id": "7070d04f4a541626ef95b5e9985670fc", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2015/08/297e7ca127d2eef674c119331fe30dff1.jpg"], "front_image_path": "full/3a56199c6566a8aab31f53637473d3ac298f003f.jpg", "title": "C# 最佳工具集合： IDE 、分析、自动化工具等"}
{"create_date": "2017/09/06 ", "url": "http://blog.jobbole.com/112372/", "fav_nums": 3, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/zhj318\">飞哥的咖啡</a> 翻译。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://medium.freecodecamp.org/why-striving-for-perfection-might-be-holding-you-back-as-a-newbie-web-developer-6e8ae257751f\">Rick West</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>我是一个完美主义者，或者，至少我喜欢这样自居。不管怎样，我绝对离完美主义者不远了。</p>\n<p>这样本来挺好的。然而，我最近意识到，它实际上阻碍我成为一个更出色的开发者。至少，它阻碍了我的进步，并妨碍了我的学习。</p>\n<p>像很多初级开发者和普通开发者，我有一个不完成副项目（side projects）的习惯。不是因为我懒或没时间，出于某种原因，我似乎从来不会把事情做完。</p>\n<p>然后就是受打击的地方了。</p>\n<p>在进行项目时，我一直努力追求完美，</p>\n<p>这就是问题的所在。</p>\n<p><em>怎么定义完美？完美是什么意思？完美真的是一个可以实现的目标吗？</em></p>\n<p>对我来说，我想交出一些了不起的东西，尽自己所能做出一些东西。</p>\n<p>想法是好的，但作为一个初级开发者，我面对的困境是，因为我每天都在学习，我的能力在不断增强。</p>\n<p>这样的话，我如何才能尽自己最大（且不断提高的）能力，将一个项目做到最好？！</p>\n<p>作为开发者，这是阻碍我进步的关键因素。我不知道要在哪里确定一条底线。我觉得很难对自己说“够了，可以继续前进了”。</p>\n<p><strong>而有时候，情况甚至会变得有些愚蠢…</strong></p>\n<p>6 个月前，我写了一个简单的 URL 缩短器，以熟悉 Symfony 框架。我花了几个晚上的时间，做出了一个基本的工作产品（Working Product），以及一个大的框架介绍。做得很开心？好吧，不尽然。</p>\n<p>信不信由你，3 个月后，我仍在对这个小项目修修补补：修改样式，用 Ajax 改进表单提交，我甚至考虑过用 Vue 或 React 来实现。</p>\n<p>随着我的能力和知识的不断增加，<strong>我完全无法继续前进</strong>。我不断看到能够改进的地方，并有了更好的改进方法。</p>\n<p>这在商业环境中是好事。在产品或项目上不断进行改进和迭代非常赞。</p>\n<p>但是，作为一个小小的学习项目，我明显用力过猛了，正在努力解决一个并不存在的问题。这不是尝试给 Bitly（知名短网址服务）造一个竞争对手，我只是利用这个小项目来加强自身的学习。事实上，根本没有人会看到这个项目！</p>\n<p>我并不是唯一会这么做的人，即使最有经验的开发者，也会在某个时候遇到类似的情况。当他们回顾几年前写的代码，他们可能会羞愧难当，甚至可能会对自己几个月前写的代码感到震惊。</p>\n<p><em><img id=\"pic\" class=\"M_cur_zoom_out aligncenter\" src=\"http://wx1.sinaimg.cn/large/7cc829d3gy1fj5iolq237j20je0j6nav.jpg\" width=\"572\" height=\"565\"></em></p>\n<p style=\"text-align: center;\"><em>（伯乐在线补充配图，Via：程序员的那些事）</em></p>\n<p>作为开发者，无论处于什么水平，你都在不断学习，这是野兽的天性。而经验告诉我们，你只有学会放手，才能继续前进。</p>\n<p>但说起来容易做起来难。作为一个初级的，或有抱负的开发者，“单单”继续前进就显得难得多了。在现实中，除非你的代码接受他人的审查，否则你完全不知道好与坏的标准。</p>\n<p>我的建议是，在你学习时，要创建一些东西，直到它看起来很得体，并能正常工作，此时你需要忘掉它继续前进。不要寻求完美，这是不存在的~ 你应该将时间花在学习并钻研更大、更好的事情上，而不是花在类似调整无关要紧的内边距这一类事情上。请务必相信我这个过来人的经验之谈！</p>\n<p><img id=\"pic\" class=\"aligncenter\" src=\"http://wx1.sinaimg.cn/large/7cc829d3gy1fj9xymo8v2j20h70b3dj7.jpg\"></p>\n<p>我最终明白了“<strong>完成比完美更好</strong>”这句话，这也是二八定律告诉我们的道理。（原因与结果、投入与产出、努力与报酬之间的关系往往是不平衡的，结果、产出或报酬的 80％ 取决于 20％ 的原因、投入或努力。）</p>\n<p>当你处于学习阶段时，所有的项目都不需要做到“完美”。它们本身就是用于学习的项目，做完尽管放手让它们去。</p>\n<p>瞎搞瞎弄、缝缝补补、或者试图压缩最后 10％ 的时间，这些都不是对有限时间的合理使用方式。</p>\n<p>在 Web 开发中，完美是不存在的。</p>\n<p>只有一种情况除外，那就是…完成，因为“完成即完美（done === perfect）”。</p>\n<p>随着时间的推移，你能做出更大、更好的东西！</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112372\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112372votetotal\">3</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112372\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 3 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 3 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/zhj318\">飞哥的咖啡</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/zhj318\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2016/09/9667abaa540914200edd449974fb5538.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            我见青山多妩媚，料青山见我应如是        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/zhj318\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/zhj318/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/zhj318/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 41</a> · <a title=\"QQ：574375911\" target=\"_blank\" href=\"#\"><i class=\"fa fa-qq\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": 3, "praise_nums": "3", "url_object_id": "858cdc33a650f25a8a2a59f7c919b4b8", "front_image_url": ["http://wx1.sinaimg.cn/large/7cc829d3gy1fj9xymo8v2j20h70b3dj7.jpg"], "front_image_path": "full/b906ccd28196f4dac2561cbd4120d442b442de87.jpg", "title": "完美主义对新手程序员的影响"}
{"create_date": "2017/09/04 ", "url": "http://blog.jobbole.com/112358/", "fav_nums": 2, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://my.oschina.net/u/1469495/blog/1504818\">qiujiayu</a>   </div><p>最近因业务需要，研究了一下树数据结果的存储及查询解决方案。 最初的想法是使用neo4j,可是在网上看了一下开源的不支持集群，感觉用的人不多。</p>\n<p>网上也查了一些 <a href=\"http://blog.jobbole.com/112309/\">树形结构数据存储方案</a> 但每种实现方案都有它的一定局限性。</p>\n<p>想了一短时间后，想出了下面的方案：</p>\n<p>一、 因为复杂的查询都由Redis来处理，所以数据库表的设计就变得非常简单：tree 表</p>\n<p>| 字段名称 | 数据类型 | 备注说明 | | —- | —- | —- | | id | int | 主键 | | parent_id | int | 上级节点ID |</p>\n<p>二、Redis的数据存储方案：</p>\n<p>把表的数据存储到一个Hash表中，使用表中的id值做为此hash表的key, value值为：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33e73d9d27191667775\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n{\r\n   id: 10,\r\n   parentId: 9,\r\n   childIds: [11]\r\n}\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d27191667775-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d27191667775-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d27191667775-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d27191667775-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d27191667775-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d27191667775-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33e73d9d27191667775-1\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d27191667775-2\"><span class=\"crayon-h\">   </span><span class=\"crayon-v\">id</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d27191667775-3\"><span class=\"crayon-h\">   </span><span class=\"crayon-v\">parentId</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d27191667775-4\"><span class=\"crayon-h\">   </span><span class=\"crayon-v\">childIds</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d27191667775-5\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d27191667775-6\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p></p>\n<h3>代码实现</h3>\n<p>为了简化测试，这里只演示Redis相关的操作</p>\n<ol>\n<li>Tree 类定义<br>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33e73d9d32844738387\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n public class Tree {\r\n     private Integer id;\r\n     private String name;\r\n     private Integer parentId;\r\n     private List&lt;Integer&gt; childIds;\r\n }\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d32844738387-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d32844738387-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d32844738387-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d32844738387-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d32844738387-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d32844738387-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d32844738387-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33e73d9d32844738387-1\"><span class=\"crayon-h\"> </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Tree</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d32844738387-2\"><span class=\"crayon-h\">     </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Integer</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">id</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d32844738387-3\"><span class=\"crayon-h\">     </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d32844738387-4\"><span class=\"crayon-h\">     </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Integer</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">parentId</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d32844738387-5\"><span class=\"crayon-h\">     </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">List</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-t\">Integer</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">childIds</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d32844738387-6\"><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d32844738387-7\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n\n</li>\n<li>往Redis中添加测试数据：<br>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33e73d9d37540250674\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n [@Test](https://my.oschina.net/azibug)\r\n public void addTestData() throws Exception {\r\n     String key = \"tree-test-key\";\r\n     Tree tree = new Tree();\r\n     List&lt;Integer&gt; childIds = new ArrayList&lt;&gt;();\r\n     int max = 100000\r\n     tree.setChildIds(childIds);\r\n     for (int i = 0; i &lt; max; i++) {\r\n         tree.setId(i);\r\n         tree.setName(\"tree\" + i);\r\n         if (i &gt; 0) {\r\n             tree.setParentId(i - 1);\r\n         }\r\n         childIds.clear();\r\n         if(i &lt; (max - 1)){\r\n             childIds.add(i + 1);\r\n         }\r\n         redis.setHash(key, \"\" + i, JsonUtil.toJson(tree));\r\n     }\r\n }</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d37540250674-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d37540250674-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d37540250674-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d37540250674-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d37540250674-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d37540250674-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d37540250674-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d37540250674-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d37540250674-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d37540250674-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d37540250674-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d37540250674-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d37540250674-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d37540250674-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d37540250674-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d37540250674-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d37540250674-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d37540250674-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d37540250674-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d37540250674-20\">20</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33e73d9d37540250674-1\"><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">Test</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">https</span><span class=\"crayon-o\">:</span><span class=\"crayon-c\">//my.oschina.net/azibug)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d37540250674-2\"><span class=\"crayon-h\"> </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">addTestData</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">throws</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Exception</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d37540250674-3\"><span class=\"crayon-h\">     </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">key</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"tree-test-key\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d37540250674-4\"><span class=\"crayon-h\">     </span><span class=\"crayon-e\">Tree </span><span class=\"crayon-v\">tree</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Tree</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d37540250674-5\"><span class=\"crayon-h\">     </span><span class=\"crayon-v\">List</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-t\">Integer</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">childIds</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ArrayList</span><span class=\"crayon-o\">&lt;&gt;</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d37540250674-6\"><span class=\"crayon-h\">     </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">max</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">100000</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d37540250674-7\"><span class=\"crayon-h\">     </span><span class=\"crayon-v\">tree</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setChildIds</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">childIds</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d37540250674-8\"><span class=\"crayon-h\">     </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">max</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d37540250674-9\"><span class=\"crayon-h\">         </span><span class=\"crayon-v\">tree</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setId</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d37540250674-10\"><span class=\"crayon-h\">         </span><span class=\"crayon-v\">tree</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setName</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"tree\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d37540250674-11\"><span class=\"crayon-h\">         </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d37540250674-12\"><span class=\"crayon-h\">             </span><span class=\"crayon-v\">tree</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setParentId</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d37540250674-13\"><span class=\"crayon-h\">         </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d37540250674-14\"><span class=\"crayon-h\">         </span><span class=\"crayon-v\">childIds</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">clear</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d37540250674-15\"><span class=\"crayon-h\">         </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">max</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d37540250674-16\"><span class=\"crayon-h\">             </span><span class=\"crayon-v\">childIds</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">add</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d37540250674-17\"><span class=\"crayon-h\">         </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d37540250674-18\"><span class=\"crayon-h\">         </span><span class=\"crayon-v\">redis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setHash</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">JsonUtil</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">toJson</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">tree</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d37540250674-19\"><span class=\"crayon-h\">     </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d37540250674-20\"><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0043 seconds] -->\r\n\n</li>\n<li>Lua 代码的实现</li>\n</ol>\n<p>在Lua中使用递归时，需要使用“尾调用”来优化代码。关于尾调用的知识，大家可以上网去搜索。</p>\n<h4>获取所有子节点 get-tree-childs.lua</h4>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33e73d9d3b086559798\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nlocal treeKey = KEYS[1]\r\nlocal fnodeId  = ARGV[1]\r\n\r\nlocal function getTreeChild(currentnode, t, res)\r\n  if currentnode == nil or t == nil  then\r\n    return res\r\n  end\r\n\r\n  local nextNode = nil\r\n  local nextType = nil\r\n  if t == \"id\" and (type(currentnode) == \"number\" or type(currentnode) == \"string\") then\r\n    local treeNode = redis.call(\"HGET\", treeKey, currentnode)\r\n    if treeNode then\r\n      local node = cjson.decode(treeNode)\r\n      table.insert(res, treeNode)\r\n      if node and node.childIds then\r\n        nextNode = node.childIds\r\n        nextType = \"childIds\"\r\n      end\r\n    end\r\n  elseif t == \"childIds\" then\r\n    nextNode = {}\r\n    nextType = \"childIds\"\r\n    local treeNode  = nil\r\n    local node = nil\r\n    local cnt = 0\r\n    for _, val in ipairs(currentnode) do\r\n      treeNode = redis.call(\"HGET\", treeKey, tostring(val))\r\n      if treeNode then\r\n        node = cjson.decode(treeNode)\r\n        table.insert(res, treeNode)\r\n        if node and node.childIds then\r\n          for _, val2 in ipairs(node.childIds) do\r\n            table.insert(nextNode, val2)\r\n            cnt = cnt + 1\r\n          end\r\n        end\r\n      end\r\n    end\r\n    if cnt == 0 then\r\n      nextNode = nil\r\n      nextType = nil\r\n    end\r\n  end\r\n  return getTreeChild(nextNode, nextType, res)\r\nend\r\n\r\n\r\nif treeKey and fnodeId then\r\n  return getTreeChild(fnodeId, \"id\", {})\r\nend\r\n\r\nreturn {}\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d3b086559798-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d3b086559798-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d3b086559798-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d3b086559798-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d3b086559798-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d3b086559798-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d3b086559798-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d3b086559798-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d3b086559798-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d3b086559798-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d3b086559798-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d3b086559798-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d3b086559798-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d3b086559798-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d3b086559798-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d3b086559798-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d3b086559798-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d3b086559798-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d3b086559798-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d3b086559798-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d3b086559798-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d3b086559798-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d3b086559798-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d3b086559798-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d3b086559798-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d3b086559798-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d3b086559798-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d3b086559798-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d3b086559798-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d3b086559798-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d3b086559798-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d3b086559798-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d3b086559798-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d3b086559798-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d3b086559798-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d3b086559798-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d3b086559798-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d3b086559798-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d3b086559798-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d3b086559798-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d3b086559798-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d3b086559798-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d3b086559798-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d3b086559798-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d3b086559798-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d3b086559798-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d3b086559798-47\">47</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d3b086559798-48\">48</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d3b086559798-49\">49</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d3b086559798-50\">50</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d3b086559798-51\">51</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d3b086559798-52\">52</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d3b086559798-53\">53</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d3b086559798-54\">54</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33e73d9d3b086559798-1\"><span class=\"crayon-e\">local </span><span class=\"crayon-v\">treeKey</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">KEYS</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d3b086559798-2\"><span class=\"crayon-e\">local </span><span class=\"crayon-v\">fnodeId</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ARGV</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d3b086559798-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d3b086559798-4\"><span class=\"crayon-e\">local </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getTreeChild</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">currentnode</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">t</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">res</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d3b086559798-5\"><span class=\"crayon-h\">  </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">currentnode</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">nil </span><span class=\"crayon-st\">or</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">t</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">nil  </span><span class=\"crayon-st\">then</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d3b086559798-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">res</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d3b086559798-7\"><span class=\"crayon-e\">  </span><span class=\"crayon-st\">end</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d3b086559798-8\"> </div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d3b086559798-9\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">local </span><span class=\"crayon-v\">nextNode</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">nil</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d3b086559798-10\"><span class=\"crayon-e\">  </span><span class=\"crayon-e\">local </span><span class=\"crayon-v\">nextType</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">nil</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d3b086559798-11\"><span class=\"crayon-e\">  </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">t</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"id\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">type</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">currentnode</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"number\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">or</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">type</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">currentnode</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"string\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">then</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d3b086559798-12\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">local </span><span class=\"crayon-v\">treeNode</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">redis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">call</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"HGET\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">treeKey</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">currentnode</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d3b086559798-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">treeNode </span><span class=\"crayon-st\">then</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d3b086559798-14\"><span class=\"crayon-h\">      </span><span class=\"crayon-e\">local </span><span class=\"crayon-v\">node</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cjson</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">decode</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">treeNode</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d3b086559798-15\"><span class=\"crayon-h\">      </span><span class=\"crayon-v\">table</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">insert</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">res</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">treeNode</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d3b086559798-16\"><span class=\"crayon-h\">      </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">node </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">node</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">childIds </span><span class=\"crayon-st\">then</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d3b086559798-17\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">nextNode</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">node</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">childIds</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d3b086559798-18\"><span class=\"crayon-e\">        </span><span class=\"crayon-v\">nextType</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"childIds\"</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d3b086559798-19\"><span class=\"crayon-h\">      </span><span class=\"crayon-st\">end</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d3b086559798-20\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">end</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d3b086559798-21\"><span class=\"crayon-h\">  </span><span class=\"crayon-st\">elseif</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">t</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"childIds\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">then</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d3b086559798-22\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">nextNode</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d3b086559798-23\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">nextType</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"childIds\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d3b086559798-24\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">local </span><span class=\"crayon-v\">treeNode</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">nil</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d3b086559798-25\"><span class=\"crayon-e\">    </span><span class=\"crayon-e\">local </span><span class=\"crayon-v\">node</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">nil</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d3b086559798-26\"><span class=\"crayon-e\">    </span><span class=\"crayon-e\">local </span><span class=\"crayon-v\">cnt</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d3b086559798-27\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">_</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">val </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ipairs</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">currentnode</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">do</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d3b086559798-28\"><span class=\"crayon-h\">      </span><span class=\"crayon-v\">treeNode</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">redis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">call</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"HGET\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">treeKey</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">tostring</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">val</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d3b086559798-29\"><span class=\"crayon-h\">      </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">treeNode </span><span class=\"crayon-st\">then</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d3b086559798-30\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">node</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cjson</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">decode</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">treeNode</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d3b086559798-31\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">table</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">insert</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">res</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">treeNode</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d3b086559798-32\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">node </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">node</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">childIds </span><span class=\"crayon-st\">then</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d3b086559798-33\"><span class=\"crayon-h\">          </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">_</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">val2 </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ipairs</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">node</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">childIds</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">do</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d3b086559798-34\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">table</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">insert</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">nextNode</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">val2</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d3b086559798-35\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">cnt</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cnt</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d3b086559798-36\"><span class=\"crayon-h\">          </span><span class=\"crayon-st\">end</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d3b086559798-37\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">end</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d3b086559798-38\"><span class=\"crayon-h\">      </span><span class=\"crayon-st\">end</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d3b086559798-39\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">end</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d3b086559798-40\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cnt</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">then</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d3b086559798-41\"><span class=\"crayon-h\">      </span><span class=\"crayon-v\">nextNode</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">nil</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d3b086559798-42\"><span class=\"crayon-e\">      </span><span class=\"crayon-v\">nextType</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">nil</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d3b086559798-43\"><span class=\"crayon-e\">    </span><span class=\"crayon-st\">end</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d3b086559798-44\"><span class=\"crayon-h\">  </span><span class=\"crayon-st\">end</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d3b086559798-45\"><span class=\"crayon-h\">  </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getTreeChild</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">nextNode</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nextType</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">res</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d3b086559798-46\"><span class=\"crayon-st\">end</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d3b086559798-47\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d3b086559798-48\"> </div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d3b086559798-49\"><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">treeKey </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">fnodeId </span><span class=\"crayon-st\">then</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d3b086559798-50\"><span class=\"crayon-h\">  </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getTreeChild</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">fnodeId</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"id\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d3b086559798-51\"><span class=\"crayon-st\">end</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d3b086559798-52\"> </div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d3b086559798-53\"><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d3b086559798-54\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0076 seconds] -->\r\n<p></p>\n<h4>获取所有子节点数目 get-tree-childs-cnt.lua</h4>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33e73d9d3f678036988\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nlocal treeKey = KEYS[1]\r\nlocal fnodeId  = ARGV[1]\r\n\r\nlocal function getTreeChildCnt(currentnode, t, res)\r\n  if currentnode == nil or t == nil  then\r\n    return res\r\n  end\r\n\r\n  local nextNode = nil\r\n  local nextType = nil\r\n  if t == \"id\" and (type(currentnode) == \"number\" or type(currentnode) == \"string\") then\r\n    local treeNode = redis.call(\"HGET\", treeKey, currentnode)\r\n    if treeNode then\r\n      local node = cjson.decode(treeNode)\r\n      res = res + 1\r\n      if node and node.childIds then\r\n        nextNode = node.childIds\r\n        nextType = \"childIds\"\r\n      end\r\n    end\r\n  elseif t == \"childIds\" then\r\n    nextNode = {}\r\n    nextType = \"childIds\"\r\n    local treeNode  = nil\r\n    local cnt = 0\r\n    for _, val in ipairs(currentnode) do\r\n      treeNode = redis.call(\"HGET\", treeKey, tostring(val))\r\n      if treeNode then\r\n        local node = cjson.decode(treeNode)\r\n        res = res + 1\r\n        if node and node.childIds then\r\n          for _, val2 in ipairs(node.childIds) do\r\n            table.insert(nextNode, val2)\r\n            cnt = cnt + 1\r\n          end\r\n        end\r\n      end\r\n    end\r\n    if cnt == 0 then\r\n      nextNode = nil\r\n      nextType = nil\r\n    end\r\n  end\r\n  return getTreeChildCnt(nextNode, nextType, res)\r\nend\r\n\r\n\r\nif treeKey and fnodeId then\r\n  return getTreeChildCnt(fnodeId, \"id\", 0)\r\nend\r\n\r\nreturn 0\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d3f678036988-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d3f678036988-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d3f678036988-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d3f678036988-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d3f678036988-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d3f678036988-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d3f678036988-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d3f678036988-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d3f678036988-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d3f678036988-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d3f678036988-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d3f678036988-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d3f678036988-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d3f678036988-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d3f678036988-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d3f678036988-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d3f678036988-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d3f678036988-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d3f678036988-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d3f678036988-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d3f678036988-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d3f678036988-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d3f678036988-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d3f678036988-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d3f678036988-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d3f678036988-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d3f678036988-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d3f678036988-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d3f678036988-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d3f678036988-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d3f678036988-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d3f678036988-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d3f678036988-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d3f678036988-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d3f678036988-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d3f678036988-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d3f678036988-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d3f678036988-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d3f678036988-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d3f678036988-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d3f678036988-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d3f678036988-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d3f678036988-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d3f678036988-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d3f678036988-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d3f678036988-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d3f678036988-47\">47</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d3f678036988-48\">48</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d3f678036988-49\">49</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d3f678036988-50\">50</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d3f678036988-51\">51</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d3f678036988-52\">52</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d3f678036988-53\">53</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33e73d9d3f678036988-1\"><span class=\"crayon-e\">local </span><span class=\"crayon-v\">treeKey</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">KEYS</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d3f678036988-2\"><span class=\"crayon-e\">local </span><span class=\"crayon-v\">fnodeId</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ARGV</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d3f678036988-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d3f678036988-4\"><span class=\"crayon-e\">local </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getTreeChildCnt</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">currentnode</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">t</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">res</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d3f678036988-5\"><span class=\"crayon-h\">  </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">currentnode</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">nil </span><span class=\"crayon-st\">or</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">t</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">nil  </span><span class=\"crayon-st\">then</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d3f678036988-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">res</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d3f678036988-7\"><span class=\"crayon-e\">  </span><span class=\"crayon-st\">end</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d3f678036988-8\"> </div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d3f678036988-9\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">local </span><span class=\"crayon-v\">nextNode</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">nil</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d3f678036988-10\"><span class=\"crayon-e\">  </span><span class=\"crayon-e\">local </span><span class=\"crayon-v\">nextType</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">nil</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d3f678036988-11\"><span class=\"crayon-e\">  </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">t</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"id\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">type</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">currentnode</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"number\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">or</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">type</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">currentnode</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"string\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">then</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d3f678036988-12\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">local </span><span class=\"crayon-v\">treeNode</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">redis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">call</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"HGET\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">treeKey</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">currentnode</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d3f678036988-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">treeNode </span><span class=\"crayon-st\">then</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d3f678036988-14\"><span class=\"crayon-h\">      </span><span class=\"crayon-e\">local </span><span class=\"crayon-v\">node</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cjson</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">decode</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">treeNode</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d3f678036988-15\"><span class=\"crayon-h\">      </span><span class=\"crayon-v\">res</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">res</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d3f678036988-16\"><span class=\"crayon-h\">      </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">node </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">node</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">childIds </span><span class=\"crayon-st\">then</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d3f678036988-17\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">nextNode</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">node</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">childIds</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d3f678036988-18\"><span class=\"crayon-e\">        </span><span class=\"crayon-v\">nextType</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"childIds\"</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d3f678036988-19\"><span class=\"crayon-h\">      </span><span class=\"crayon-st\">end</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d3f678036988-20\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">end</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d3f678036988-21\"><span class=\"crayon-h\">  </span><span class=\"crayon-st\">elseif</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">t</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"childIds\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">then</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d3f678036988-22\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">nextNode</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d3f678036988-23\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">nextType</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"childIds\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d3f678036988-24\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">local </span><span class=\"crayon-v\">treeNode</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">nil</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d3f678036988-25\"><span class=\"crayon-e\">    </span><span class=\"crayon-e\">local </span><span class=\"crayon-v\">cnt</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d3f678036988-26\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">_</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">val </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ipairs</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">currentnode</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">do</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d3f678036988-27\"><span class=\"crayon-h\">      </span><span class=\"crayon-v\">treeNode</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">redis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">call</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"HGET\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">treeKey</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">tostring</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">val</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d3f678036988-28\"><span class=\"crayon-h\">      </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">treeNode </span><span class=\"crayon-st\">then</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d3f678036988-29\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">local </span><span class=\"crayon-v\">node</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cjson</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">decode</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">treeNode</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d3f678036988-30\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">res</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">res</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d3f678036988-31\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">node </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">node</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">childIds </span><span class=\"crayon-st\">then</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d3f678036988-32\"><span class=\"crayon-h\">          </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">_</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">val2 </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ipairs</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">node</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">childIds</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">do</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d3f678036988-33\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">table</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">insert</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">nextNode</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">val2</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d3f678036988-34\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">cnt</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cnt</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d3f678036988-35\"><span class=\"crayon-h\">          </span><span class=\"crayon-st\">end</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d3f678036988-36\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">end</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d3f678036988-37\"><span class=\"crayon-h\">      </span><span class=\"crayon-st\">end</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d3f678036988-38\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">end</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d3f678036988-39\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cnt</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">then</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d3f678036988-40\"><span class=\"crayon-h\">      </span><span class=\"crayon-v\">nextNode</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">nil</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d3f678036988-41\"><span class=\"crayon-e\">      </span><span class=\"crayon-v\">nextType</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">nil</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d3f678036988-42\"><span class=\"crayon-e\">    </span><span class=\"crayon-st\">end</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d3f678036988-43\"><span class=\"crayon-h\">  </span><span class=\"crayon-st\">end</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d3f678036988-44\"><span class=\"crayon-h\">  </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getTreeChildCnt</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">nextNode</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nextType</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">res</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d3f678036988-45\"><span class=\"crayon-st\">end</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d3f678036988-46\"> </div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d3f678036988-47\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d3f678036988-48\"><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">treeKey </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">fnodeId </span><span class=\"crayon-st\">then</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d3f678036988-49\"><span class=\"crayon-h\">  </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getTreeChildCnt</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">fnodeId</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"id\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d3f678036988-50\"><span class=\"crayon-st\">end</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d3f678036988-51\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d3f678036988-52\"><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d3f678036988-53\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0082 seconds] -->\r\n<p></p>\n<h4>获取所有子节点数目 get-tree-parent.lua</h4>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33e73d9d43129473483\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nlocal treeKey = KEYS[1]\r\nlocal nodeId  = ARGV[1]\r\n\r\nlocal function getTreeParent(treeKey, res, nodeId)\r\n  if nodeId == nil or not (type(nodeId) == \"number\" or type(nodeId) == \"string\") then\r\n    return res\r\n  end\r\n  local treeNode = redis.call(\"HGET\", treeKey, nodeId)\r\n  local nextNodeId = nil\r\n  if treeNode then\r\n    local node = cjson.decode(treeNode)\r\n    table.insert(res, treeNode)\r\n    if node then\r\n      nextNodeId = node.parentId\r\n    end\r\n  end\r\n  return getTreeParent(treeKey, res, nextNodeId)\r\nend\r\n\r\n\r\nif treeKey and nodeId then\r\n  return getTreeParent(treeKey, {}, nodeId)\r\nend\r\n\r\nreturn {}\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d43129473483-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d43129473483-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d43129473483-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d43129473483-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d43129473483-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d43129473483-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d43129473483-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d43129473483-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d43129473483-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d43129473483-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d43129473483-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d43129473483-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d43129473483-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d43129473483-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d43129473483-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d43129473483-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d43129473483-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d43129473483-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d43129473483-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d43129473483-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d43129473483-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d43129473483-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d43129473483-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d43129473483-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d43129473483-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d43129473483-26\">26</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33e73d9d43129473483-1\"><span class=\"crayon-e\">local </span><span class=\"crayon-v\">treeKey</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">KEYS</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d43129473483-2\"><span class=\"crayon-e\">local </span><span class=\"crayon-v\">nodeId</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ARGV</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d43129473483-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d43129473483-4\"><span class=\"crayon-e\">local </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getTreeParent</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">treeKey</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">res</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nodeId</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d43129473483-5\"><span class=\"crayon-h\">  </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nodeId</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">nil </span><span class=\"crayon-st\">or</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">type</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">nodeId</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"number\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">or</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">type</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">nodeId</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"string\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">then</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d43129473483-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">res</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d43129473483-7\"><span class=\"crayon-e\">  </span><span class=\"crayon-st\">end</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d43129473483-8\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">local </span><span class=\"crayon-v\">treeNode</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">redis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">call</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"HGET\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">treeKey</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nodeId</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d43129473483-9\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">local </span><span class=\"crayon-v\">nextNodeId</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">nil</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d43129473483-10\"><span class=\"crayon-e\">  </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">treeNode </span><span class=\"crayon-st\">then</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d43129473483-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">local </span><span class=\"crayon-v\">node</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cjson</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">decode</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">treeNode</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d43129473483-12\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">table</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">insert</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">res</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">treeNode</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d43129473483-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">node </span><span class=\"crayon-st\">then</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d43129473483-14\"><span class=\"crayon-h\">      </span><span class=\"crayon-v\">nextNodeId</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">node</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">parentId</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d43129473483-15\"><span class=\"crayon-e\">    </span><span class=\"crayon-st\">end</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d43129473483-16\"><span class=\"crayon-h\">  </span><span class=\"crayon-st\">end</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d43129473483-17\"><span class=\"crayon-h\">  </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getTreeParent</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">treeKey</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">res</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nextNodeId</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d43129473483-18\"><span class=\"crayon-st\">end</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d43129473483-19\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d43129473483-20\"> </div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d43129473483-21\"><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">treeKey </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">nodeId </span><span class=\"crayon-st\">then</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d43129473483-22\"><span class=\"crayon-h\">  </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getTreeParent</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">treeKey</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nodeId</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d43129473483-23\"><span class=\"crayon-st\">end</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d43129473483-24\"> </div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d43129473483-25\"><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d43129473483-26\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0037 seconds] -->\r\n<p></p>\n<h4>获取所有子节点数目 get-tree-parent-cnt.lua</h4>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33e73d9d49495532973\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nlocal treeKey = KEYS[1]\r\nlocal nodeId  = ARGV[1]\r\n\r\nlocal function getTreeParentCnt(treeKey, nodeId, res)\r\n  if nodeId == nil or not (type(nodeId) == \"number\" or type(nodeId) == \"string\") then\r\n    return res\r\n  end\r\n  local treeNode = redis.call(\"HGET\", treeKey, nodeId)\r\n  local nextNodeId = nil\r\n  if treeNode then\r\n    local node = cjson.decode(treeNode)\r\n    res = res + 1\r\n    if node then\r\n      nextNodeId = node.parentId\r\n    end\r\n  end\r\n  return getTreeParentCnt(treeKey, nextNodeId, res)\r\nend\r\n\r\n\r\nif treeKey and nodeId then\r\n  return getTreeParentCnt(treeKey, nodeId, 0)\r\nend\r\n\r\nreturn 0\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d49495532973-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d49495532973-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d49495532973-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d49495532973-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d49495532973-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d49495532973-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d49495532973-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d49495532973-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d49495532973-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d49495532973-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d49495532973-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d49495532973-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d49495532973-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d49495532973-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d49495532973-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d49495532973-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d49495532973-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d49495532973-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d49495532973-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d49495532973-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d49495532973-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d49495532973-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d49495532973-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d49495532973-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-59f33e73d9d49495532973-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e73d9d49495532973-26\">26</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33e73d9d49495532973-1\"><span class=\"crayon-e\">local </span><span class=\"crayon-v\">treeKey</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">KEYS</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d49495532973-2\"><span class=\"crayon-e\">local </span><span class=\"crayon-v\">nodeId</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ARGV</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d49495532973-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d49495532973-4\"><span class=\"crayon-e\">local </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getTreeParentCnt</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">treeKey</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nodeId</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">res</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d49495532973-5\"><span class=\"crayon-h\">  </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nodeId</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">nil </span><span class=\"crayon-st\">or</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">type</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">nodeId</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"number\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">or</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">type</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">nodeId</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"string\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">then</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d49495532973-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">res</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d49495532973-7\"><span class=\"crayon-e\">  </span><span class=\"crayon-st\">end</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d49495532973-8\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">local </span><span class=\"crayon-v\">treeNode</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">redis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">call</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"HGET\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">treeKey</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nodeId</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d49495532973-9\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">local </span><span class=\"crayon-v\">nextNodeId</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">nil</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d49495532973-10\"><span class=\"crayon-e\">  </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">treeNode </span><span class=\"crayon-st\">then</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d49495532973-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">local </span><span class=\"crayon-v\">node</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cjson</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">decode</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">treeNode</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d49495532973-12\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">res</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">res</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d49495532973-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">node </span><span class=\"crayon-st\">then</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d49495532973-14\"><span class=\"crayon-h\">      </span><span class=\"crayon-v\">nextNodeId</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">node</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">parentId</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d49495532973-15\"><span class=\"crayon-e\">    </span><span class=\"crayon-st\">end</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d49495532973-16\"><span class=\"crayon-h\">  </span><span class=\"crayon-st\">end</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d49495532973-17\"><span class=\"crayon-h\">  </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getTreeParentCnt</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">treeKey</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nextNodeId</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">res</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d49495532973-18\"><span class=\"crayon-st\">end</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d49495532973-19\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d49495532973-20\"> </div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d49495532973-21\"><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">treeKey </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">nodeId </span><span class=\"crayon-st\">then</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d49495532973-22\"><span class=\"crayon-h\">  </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getTreeParentCnt</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">treeKey</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nodeId</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d49495532973-23\"><span class=\"crayon-st\">end</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d49495532973-24\"> </div><div class=\"crayon-line\" id=\"crayon-59f33e73d9d49495532973-25\"><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e73d9d49495532973-26\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0036 seconds] -->\r\n<p>以上代码因为使用了“尾调用”，所以变得相对比较复杂</p>\n<h3>总结</h3>\n<p>此方案相对比较灵活，能支持相对比较大量的数据。</p>\n<p>缺点：过于依赖Redis。数据同步会麻烦些，好在操作不是很复杂。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112358\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112358votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112358\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": "  评论", "praise_nums": "1", "url_object_id": "8e71395dfec60b991d278a434c35a1da", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2016/04/49961db8952e63d98b519b76a2daa5e2.png"], "front_image_path": "full/c766feed221138f7946130756cddfc7e86e388b4.jpg", "title": "使用 Redis 解决“树”形数据的复杂查询"}
{"create_date": "2017/09/02 ", "url": "http://blog.jobbole.com/112323/", "fav_nums": 1, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://www.biaodianfu.com/the-nested-set-model.html\">标点符</a>   </div><p>在基于数据库的一般应用中，查询的需求总要大于删除和修改。为了避免对于树形结构查询时的“<a href=\"http://blog.jobbole.com/112309/\">递归</a>”过程，基于Tree的前序遍历设计一种全新的无递归查询、无限分组的左右值编码方案，来保存该树的数据。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/1e2e2b27dafbace20975589812804590.jpg\" alt=\"Nested-Set\" width=\"383\" height=\"216\"></p>\n<p>第一次看见这种表结构，相信大部分人都不清楚左值（Lft）和右值（Rgt）是如何计算出来的，而且这种表设计似乎并没有保存父子节点的继承关系。但当你用手指指着表中的数字从1数到18，你应该会发现点什么吧。对，你手指移动的顺序就是对这棵树进行前序遍历的顺序，如下图所示。当我们从根节点Food左侧开始，标记为1，并沿前序遍历的方向，依次在遍历的路径上标注数字，最后我们回到了根节点Food，并在右边写上了18。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/a3d57449cc2b5c29854f79f0be69725c.jpg\" alt=\"lft-rgt\" width=\"411\" height=\"166\"></p>\n<p>依据此设计，我们可以推断出所有左值大于2，并且右值小于11的节点都是Fruit的后续节点，整棵树的结构通过左值和右值存储了下来。然而，这还不够，我们的目的是能够对树进行CRUD操作，即需要构造出与之配套的相关算法。按照深度优先，由左到右的原则遍历整个树，从1开始给每个节点标注上left值和right值，并将这两个值存入对应的name之中。</p>\n<p><strong>如何查询？</strong></p>\n<p>1、获取某个节点下的所有子孙节点，以Fruit为例：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f27b18a12a7790155990\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSELECT * FROM Tree WHERE Lft &gt; 2 AND Lft &lt; 11 ORDER BY Lft ASC</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f27b18a12a7790155990-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f27b18a12a7790155990-1\"><span class=\"crayon-e \">SELECT *</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">FROM </span><span class=\"crayon-e\">Tree </span><span class=\"crayon-e\">WHERE </span><span class=\"crayon-v\">Lft</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">AND</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Lft</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ORDER </span><span class=\"crayon-e\">BY </span><span class=\"crayon-e\">Lft </span><span class=\"crayon-v\">ASC</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>2、获取子孙节点总数</p>\n<p>子孙总数 = (右值–左值–1)/2，以Fruit为例，其子孙总数为：(11–2–1)/2 = 4</p>\n<p>3、 获取节点在树中所处的层数，以Fruit为例：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f27b18a12b0339271470\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSELECT COUNT(*) FROM Tree WHERE Lft &lt;= 2 AND Rgt &gt;=11</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f27b18a12b0339271470-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f27b18a12b0339271470-1\"><span class=\"crayon-e\">SELECT </span><span class=\"crayon-e\">COUNT</span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">FROM </span><span class=\"crayon-e\">Tree </span><span class=\"crayon-e\">WHERE </span><span class=\"crayon-v\">Lft</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">AND</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Rgt</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;=</span><span class=\"crayon-cn\">11</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>4、 获取当前节点所在路径，以Fruit为例：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f27b18a12b4531879859\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSELECT * FROM Tree WHERE Lft &lt;= 2 AND Rgt &gt;=11 ORDER BY Lft ASC</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f27b18a12b4531879859-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f27b18a12b4531879859-1\"><span class=\"crayon-e \">SELECT *</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">FROM </span><span class=\"crayon-e\">Tree </span><span class=\"crayon-e\">WHERE </span><span class=\"crayon-v\">Lft</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">AND</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Rgt</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;=</span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ORDER </span><span class=\"crayon-e\">BY </span><span class=\"crayon-e\">Lft </span><span class=\"crayon-v\">ASC</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>在日常的处理中我们经常还会遇到的需要获取某一个节点的直属上级、同级、直属下级。为了更好的描述层级关系，我们可以为Tree建立一个视图，添加一个层次列，该列数值可以编写一个自定义函数来计算：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f27b18a12b8519091666\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nCREATE FUNCTION `CountLayer`(`_node_id` int)\r\n RETURNS int(11)\r\nBEGIN\r\n\tDECLARE _result INT;\r\n\tDECLARE _lft INT;\r\n\tDECLARE _rgt INT;\r\n\tIF EXISTS(SELECT Node_id FROM Tree WHERE Node_id = _node_id)\r\n\tTHEN\r\n\t\tSELECT Lft,Rgt FROM Tree WHERE Node_id = _node_id INTO _lft,_rgt;\r\n\t\tSET _result = (SELECT COUNT(1) FROM Tree WHERE Lft &lt;= _lft AND Rgt &gt;= _rgt);\t\r\n\t\tRETURN _result;\r\n\tELSE\r\n\t\tRETURN 0;\r\n\tEND IF;\r\nEND;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f27b18a12b8519091666-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27b18a12b8519091666-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f27b18a12b8519091666-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27b18a12b8519091666-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f27b18a12b8519091666-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27b18a12b8519091666-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f27b18a12b8519091666-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27b18a12b8519091666-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f27b18a12b8519091666-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27b18a12b8519091666-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f27b18a12b8519091666-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27b18a12b8519091666-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59f27b18a12b8519091666-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27b18a12b8519091666-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59f27b18a12b8519091666-15\">15</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f27b18a12b8519091666-1\"><span class=\"crayon-e\">CREATE </span><span class=\"crayon-t\">FUNCTION</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">CountLayer</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">_node_id</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27b18a12b8519091666-2\"><span class=\"crayon-h\"> </span><span class=\"crayon-e\">RETURNS </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f27b18a12b8519091666-3\"><span class=\"crayon-e\">BEGIN</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27b18a12b8519091666-4\"><span class=\"crayon-e\">\t</span><span class=\"crayon-r\">DECLARE</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">_result </span><span class=\"crayon-t\">INT</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f27b18a12b8519091666-5\"><span class=\"crayon-h\">\t</span><span class=\"crayon-r\">DECLARE</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">_lft </span><span class=\"crayon-t\">INT</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27b18a12b8519091666-6\"><span class=\"crayon-h\">\t</span><span class=\"crayon-r\">DECLARE</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">_rgt </span><span class=\"crayon-t\">INT</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f27b18a12b8519091666-7\"><span class=\"crayon-h\">\t</span><span class=\"crayon-st\">IF</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">EXISTS</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">SELECT </span><span class=\"crayon-e\">Node_id </span><span class=\"crayon-e\">FROM </span><span class=\"crayon-e\">Tree </span><span class=\"crayon-e\">WHERE </span><span class=\"crayon-v\">Node_id</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">_node_id</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27b18a12b8519091666-8\"><span class=\"crayon-h\">\t</span><span class=\"crayon-st\">THEN</span></div><div class=\"crayon-line\" id=\"crayon-59f27b18a12b8519091666-9\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">SELECT </span><span class=\"crayon-v\">Lft</span><span class=\"crayon-sy\">,</span><span class=\"crayon-e\">Rgt </span><span class=\"crayon-e\">FROM </span><span class=\"crayon-e\">Tree </span><span class=\"crayon-e\">WHERE </span><span class=\"crayon-v\">Node_id</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">_node_id </span><span class=\"crayon-e\">INTO </span><span class=\"crayon-v\">_lft</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">_rgt</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27b18a12b8519091666-10\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">_result</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">SELECT </span><span class=\"crayon-e\">COUNT</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">FROM </span><span class=\"crayon-e\">Tree </span><span class=\"crayon-e\">WHERE </span><span class=\"crayon-v\">Lft</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">_lft </span><span class=\"crayon-st\">AND</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Rgt</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">_rgt</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">\t</span></div><div class=\"crayon-line\" id=\"crayon-59f27b18a12b8519091666-11\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-st\">RETURN</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">_result</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27b18a12b8519091666-12\"><span class=\"crayon-h\">\t</span><span class=\"crayon-st\">ELSE</span></div><div class=\"crayon-line\" id=\"crayon-59f27b18a12b8519091666-13\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-st\">RETURN</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27b18a12b8519091666-14\"><span class=\"crayon-h\">\t</span><span class=\"crayon-st\">END</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">IF</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f27b18a12b8519091666-15\"><span class=\"crayon-st\">END</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0026 seconds] -->\r\n<p>在添加完函数以后，我们创建一个a视图，添加新的层次列：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f27b18a12bc264790249\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nCREATE VIEW `NewView`AS \r\nSELECT Node_id, Name, Lft, Rgt, CountLayer(Node_id) AS Layer FROM Tree ORDER BY Lft ;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f27b18a12bc264790249-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27b18a12bc264790249-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f27b18a12bc264790249-1\"><span class=\"crayon-e\">CREATE </span><span class=\"crayon-i\">VIEW</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">NewView</span><span class=\"crayon-sy\">`</span><span class=\"crayon-st\">AS</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27b18a12bc264790249-2\"><span class=\"crayon-e\">SELECT </span><span class=\"crayon-v\">Node_id</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Name</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Lft</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Rgt</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">CountLayer</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">Node_id</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">AS</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Layer </span><span class=\"crayon-e\">FROM </span><span class=\"crayon-e\">Tree </span><span class=\"crayon-e\">ORDER </span><span class=\"crayon-e\">BY </span><span class=\"crayon-i\">Lft</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p>5、 获取当前节点父节点,以Fruit为例：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f27b18a12bf248580613\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSELECT * FROM treeview WHERE Lft &lt;= 2 AND Rgt &gt;=11 AND Layer=1</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f27b18a12bf248580613-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f27b18a12bf248580613-1\"><span class=\"crayon-e \">SELECT *</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">FROM </span><span class=\"crayon-e\">treeview </span><span class=\"crayon-e\">WHERE </span><span class=\"crayon-v\">Lft</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">AND</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Rgt</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;=</span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">AND</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Layer</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">1</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>6、 获取所有直属子节点，以Fruit为例：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f27b18a12c2935989663\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSELECT * FROM treeview WHERE Lft BETWEEN 2 AND 11 AND Layer=3</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f27b18a12c2935989663-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f27b18a12c2935989663-1\"><span class=\"crayon-e \">SELECT *</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">FROM </span><span class=\"crayon-e\">treeview </span><span class=\"crayon-e\">WHERE </span><span class=\"crayon-e\">Lft </span><span class=\"crayon-i\">BETWEEN</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">AND</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">AND</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Layer</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">3</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>7、 获取所有兄弟节点，以Fruit为例：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f27b18a12c5157652005\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSELECT * FROM treeview WHERE Rgt &gt; 11 AND Rgt &lt; (SELECT Rgt FROM treeview WHERE Lft &lt;= 2 AND Rgt &gt;=11 AND Layer=1) AND Layer=2</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f27b18a12c5157652005-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f27b18a12c5157652005-1\"><span class=\"crayon-e \">SELECT *</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">FROM </span><span class=\"crayon-e\">treeview </span><span class=\"crayon-e\">WHERE </span><span class=\"crayon-v\">Rgt</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">AND</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Rgt</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">SELECT </span><span class=\"crayon-e\">Rgt </span><span class=\"crayon-e\">FROM </span><span class=\"crayon-e\">treeview </span><span class=\"crayon-e\">WHERE </span><span class=\"crayon-v\">Lft</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">AND</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Rgt</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;=</span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">AND</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Layer</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">AND</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Layer</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">2</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p>8、 返回所有叶子节点</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f27b18a12c8067373568\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSELECT * FROM Tree WHERE Rgt = Lft + 1</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f27b18a12c8067373568-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f27b18a12c8067373568-1\"><span class=\"crayon-e \">SELECT *</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">FROM </span><span class=\"crayon-e\">Tree </span><span class=\"crayon-e\">WHERE </span><span class=\"crayon-v\">Rgt</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Lft</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p><strong>如何创建树？如何新增数据？</strong></p>\n<p>上面已经介绍了如何检索结果，那么如何才能增加新的节点呢？Nested set 最重要是一定要有一个根节点作为所有节点的起点，而且通常这个节点是不被使用的。为了便于控制查询级别，在建表的时候建议添加parent_id配合之联结列表方式一起使用。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f27b18a12cc894218015\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nCREATE TABLE IF NOT EXISTS `Tree` (\r\n  `node_id` int(11) NOT NULL AUTO_INCREMENT,\r\n  `parent_id` int(10) UNSIGNED NOT NULL DEFAULT '0',\r\n  `name` varchar(255) NOT NULL,\r\n  `lft` int(11) NOT NULL DEFAULT '0',\r\n  `rgt` int(11) NOT NULL DEFAULT '0',\r\n  PRIMARY KEY (`node_id`),\r\n  KEY `idx_left_right` (`lft`,`rgt`)\r\n) DEFAULT CHARSET=utf8;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f27b18a12cc894218015-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27b18a12cc894218015-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f27b18a12cc894218015-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27b18a12cc894218015-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f27b18a12cc894218015-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27b18a12cc894218015-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f27b18a12cc894218015-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27b18a12cc894218015-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f27b18a12cc894218015-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f27b18a12cc894218015-1\"><span class=\"crayon-e\">CREATE </span><span class=\"crayon-e\">TABLE </span><span class=\"crayon-st\">IF</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">NOT</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">EXISTS</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">Tree</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27b18a12cc894218015-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">node_id</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">NOT</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">AUTO_INCREMENT</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f27b18a12cc894218015-3\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">parent_id</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">UNSIGNED</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">NOT</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'0'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27b18a12cc894218015-4\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">varchar</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">255</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">NOT</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f27b18a12cc894218015-5\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">lft</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">NOT</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'0'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27b18a12cc894218015-6\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">rgt</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">NOT</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'0'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f27b18a12cc894218015-7\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">PRIMARY </span><span class=\"crayon-e\">KEY</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">node_id</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27b18a12cc894218015-8\"><span class=\"crayon-h\">  </span><span class=\"crayon-i\">KEY</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">idx_left_right</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">lft</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">,</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">rgt</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f27b18a12cc894218015-9\"><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">CHARSET</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">utf8</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0029 seconds] -->\r\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f27b18a12cf060774880\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nINSERT INTO `Tree` (parent_id,name,lft,rgt) VALUES ( 0,'Food',1,2)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f27b18a12cf060774880-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f27b18a12cf060774880-1\"><span class=\"crayon-e\">INSERT </span><span class=\"crayon-i\">INTO</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">Tree</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">parent_id</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">lft</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">rgt</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">VALUES</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'Food'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p>添加子节点（子节点起始处），以在Food下添加子节点Fruit为例：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f27b18a12d2500918485\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nLOCK TABLE Tree WRITE;\r\nSELECT @parent_id := node_id, @myLeft := lft FROM Tree WHERE name = 'Food';\r\nUPDATE Tree SET rgt = rgt + 2 WHERE rgt &gt; @myLeft;\r\nUPDATE Tree SET lft = lft + 2 WHERE lft &gt; @myLeft;\r\nINSERT INTO Tree(parent_id, name, lft, rgt) VALUES(@parent_id, 'Fruit', @myLeft + 1, @myLeft + 2);\r\nUNLOCK TABLES;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f27b18a12d2500918485-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27b18a12d2500918485-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f27b18a12d2500918485-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27b18a12d2500918485-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f27b18a12d2500918485-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27b18a12d2500918485-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f27b18a12d2500918485-1\"><span class=\"crayon-e\">LOCK </span><span class=\"crayon-e\">TABLE </span><span class=\"crayon-e\">Tree </span><span class=\"crayon-v\">WRITE</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27b18a12d2500918485-2\"><span class=\"crayon-i\">SELECT</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">parent_id</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">node_id</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">myLeft</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">lft </span><span class=\"crayon-e\">FROM </span><span class=\"crayon-e\">Tree </span><span class=\"crayon-e\">WHERE </span><span class=\"crayon-v\">name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Food'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f27b18a12d2500918485-3\"><span class=\"crayon-e\">UPDATE </span><span class=\"crayon-e\">Tree </span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">rgt</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rgt</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">WHERE </span><span class=\"crayon-v\">rgt</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">myLeft</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27b18a12d2500918485-4\"><span class=\"crayon-e\">UPDATE </span><span class=\"crayon-e\">Tree </span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">lft</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">lft</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">WHERE </span><span class=\"crayon-v\">lft</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">myLeft</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f27b18a12d2500918485-5\"><span class=\"crayon-e\">INSERT </span><span class=\"crayon-e\">INTO </span><span class=\"crayon-e\">Tree</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">parent_id</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">lft</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rgt</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">VALUES</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">parent_id</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Fruit'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">myLeft</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">myLeft</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27b18a12d2500918485-6\"><span class=\"crayon-e\">UNLOCK </span><span class=\"crayon-v\">TABLES</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0027 seconds] -->\r\n<p>如需在末尾追加就需要以下方式进行（以在Red下添加Apple为例）：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f27b18a12d5919048726\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nLOCK TABLE Tree WRITE;\r\nSELECT @parent_id := node_id , @myRight := rgt FROM Tree WHERE name = 'Red';\r\nUPDATE Tree SET rgt = rgt + 2 WHERE rgt &gt;= @myRight;\r\nUPDATE Tree SET lft = lft + 2 WHERE lft &gt; @myRight;\r\nINSERT INTO Tree(parent_id, name, lft, rgt) VALUES(@parent_id, 'Apple', @myRight, @myRight + 1);\r\nUNLOCK TABLES;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f27b18a12d5919048726-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27b18a12d5919048726-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f27b18a12d5919048726-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27b18a12d5919048726-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f27b18a12d5919048726-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27b18a12d5919048726-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f27b18a12d5919048726-1\"><span class=\"crayon-e\">LOCK </span><span class=\"crayon-e\">TABLE </span><span class=\"crayon-e\">Tree </span><span class=\"crayon-v\">WRITE</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27b18a12d5919048726-2\"><span class=\"crayon-i\">SELECT</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">parent_id</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">node</span><span class=\"crayon-sy\">_</span>id<span class=\"crayon-h\"> </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">myRight</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">rgt </span><span class=\"crayon-e\">FROM </span><span class=\"crayon-e\">Tree </span><span class=\"crayon-e\">WHERE </span><span class=\"crayon-v\">name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Red'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f27b18a12d5919048726-3\"><span class=\"crayon-e\">UPDATE </span><span class=\"crayon-e\">Tree </span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">rgt</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rgt</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">WHERE </span><span class=\"crayon-v\">rgt</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">myRight</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27b18a12d5919048726-4\"><span class=\"crayon-e\">UPDATE </span><span class=\"crayon-e\">Tree </span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">lft</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">lft</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">WHERE </span><span class=\"crayon-v\">lft</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">myRight</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f27b18a12d5919048726-5\"><span class=\"crayon-e\">INSERT </span><span class=\"crayon-e\">INTO </span><span class=\"crayon-e\">Tree</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">parent_id</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">lft</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rgt</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">VALUES</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">parent_id</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Apple'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">myRight</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">myRight</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27b18a12d5919048726-6\"><span class=\"crayon-e\">UNLOCK </span><span class=\"crayon-v\">TABLES</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0025 seconds] -->\r\n<p>在节点A后面添加同级节点（以在Yellow后面添加Green为例）</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f27b18a12d9459416913\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nLOCK TABLE Tree WRITE;\r\nSELECT @parent_id := parent_id , @myRight := rgt FROM Tree WHERE name = 'Yellow';\r\nUPDATE Tree SET rgt = rgt + 2 WHERE rgt &gt; @myRight;\r\nUPDATE Tree SET lft = lft + 2 WHERE lft &gt; @myRight;\r\nINSERT INTO Tree(parent_id, name, lft, rgt) VALUES(@parent_id, 'Green', @myRight+1, @myRight+2);\r\nUNLOCK TABLES;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f27b18a12d9459416913-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27b18a12d9459416913-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f27b18a12d9459416913-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27b18a12d9459416913-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f27b18a12d9459416913-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27b18a12d9459416913-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f27b18a12d9459416913-1\"><span class=\"crayon-e\">LOCK </span><span class=\"crayon-e\">TABLE </span><span class=\"crayon-e\">Tree </span><span class=\"crayon-v\">WRITE</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27b18a12d9459416913-2\"><span class=\"crayon-i\">SELECT</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">parent_id</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">parent</span><span class=\"crayon-sy\">_</span>id<span class=\"crayon-h\"> </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">myRight</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">rgt </span><span class=\"crayon-e\">FROM </span><span class=\"crayon-e\">Tree </span><span class=\"crayon-e\">WHERE </span><span class=\"crayon-v\">name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Yellow'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f27b18a12d9459416913-3\"><span class=\"crayon-e\">UPDATE </span><span class=\"crayon-e\">Tree </span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">rgt</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rgt</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">WHERE </span><span class=\"crayon-v\">rgt</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">myRight</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27b18a12d9459416913-4\"><span class=\"crayon-e\">UPDATE </span><span class=\"crayon-e\">Tree </span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">lft</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">lft</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">WHERE </span><span class=\"crayon-v\">lft</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">myRight</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f27b18a12d9459416913-5\"><span class=\"crayon-e\">INSERT </span><span class=\"crayon-e\">INTO </span><span class=\"crayon-e\">Tree</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">parent_id</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">lft</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rgt</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">VALUES</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">parent_id</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Green'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">myRight</span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">myRight</span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27b18a12d9459416913-6\"><span class=\"crayon-e\">UNLOCK </span><span class=\"crayon-v\">TABLES</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0027 seconds] -->\r\n<p>以上讨论的添加节点指的都是添加末端节点，即插入的这个节点不是当前已存在节点的父节点。如果需要插入非末端节点要怎么办呢？</p>\n<p>这个过程可以将流程分为2步，首先新增节点，接下里再将需要的节点移到新增的节点下级。节点移动方法(以将Apple移到Yellow中为例)：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f27b18a12dc140758573\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nLOCK TABLE Tree WRITE;\r\nSELECT @nodeId := node_id , @myLeft := lft , @myRight := rgt FROM Tree WHERE name = 'Apple';\r\nUPDATE Tree SET lft = lft - (@myRight - @myLeft) - 1 WHERE lft &gt; @myRight;\r\nUPDATE Tree SET rgt = rgt - (@myRight - @myLeft) - 1 WHERE rgt &gt; @myRight;\r\nSELECT @parent_id := node_id , &lt;a href=\"http://www.jobbole.com/members/wx1863158684\"&gt;@Left&lt;/a&gt; := lft , &lt;a href=\"http://www.jobbole.com/members/wx3757768826\"&gt;@Right&lt;/a&gt; := rgt FROM Tree WHERE name = 'Yellow';\r\nUPDATE Tree SET lft = lft + (@myRight - @myLeft) + 1 WHERE lft &gt; @Left;\r\nUPDATE Tree SET rgt = rgt + (@myRight - @myLeft) + 1 WHERE lft &gt; @Left;\r\nUPDATE Tree SET parent_id = @parent_id WHERE name = node_id = @nodeId;\r\nUPDATE Tree SET lft = &lt;a href=\"http://www.jobbole.com/members/wx1863158684\"&gt;@Left&lt;/a&gt; + lft - @myLeft + 1, rgt = &lt;a href=\"http://www.jobbole.com/members/wx1863158684\"&gt;@Left&lt;/a&gt; + lft - @myLeft + 1  + (@myRight - @myLeft) WHERE lft &gt;= @myLeft AND rgt &lt;= @myRight;\r\nUNLOCK TABLES;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f27b18a12dc140758573-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27b18a12dc140758573-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f27b18a12dc140758573-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27b18a12dc140758573-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f27b18a12dc140758573-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27b18a12dc140758573-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f27b18a12dc140758573-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27b18a12dc140758573-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f27b18a12dc140758573-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27b18a12dc140758573-10\">10</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f27b18a12dc140758573-1\"><span class=\"crayon-e\">LOCK </span><span class=\"crayon-e\">TABLE </span><span class=\"crayon-e\">Tree </span><span class=\"crayon-v\">WRITE</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27b18a12dc140758573-2\"><span class=\"crayon-i\">SELECT</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">nodeId</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">node</span><span class=\"crayon-sy\">_</span>id<span class=\"crayon-h\"> </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">myLeft</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">lft</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">myRight</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">rgt </span><span class=\"crayon-e\">FROM </span><span class=\"crayon-e\">Tree </span><span class=\"crayon-e\">WHERE </span><span class=\"crayon-v\">name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Apple'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f27b18a12dc140758573-3\"><span class=\"crayon-e\">UPDATE </span><span class=\"crayon-e\">Tree </span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">lft</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">lft</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">myRight</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">myLeft</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">WHERE </span><span class=\"crayon-v\">lft</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">myRight</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27b18a12dc140758573-4\"><span class=\"crayon-e\">UPDATE </span><span class=\"crayon-e\">Tree </span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">rgt</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rgt</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">myRight</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">myLeft</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">WHERE </span><span class=\"crayon-v\">rgt</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">myRight</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f27b18a12dc140758573-5\"><span class=\"crayon-i\">SELECT</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">parent_id</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">node</span><span class=\"crayon-sy\">_</span>id<span class=\"crayon-h\"> </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-i\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">href</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"http://www.jobbole.com/members/wx1863158684\"</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">Left</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">a</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">lft</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-i\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">href</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"http://www.jobbole.com/members/wx3757768826\"</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">Right</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">a</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">rgt </span><span class=\"crayon-e\">FROM </span><span class=\"crayon-e\">Tree </span><span class=\"crayon-e\">WHERE </span><span class=\"crayon-v\">name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Yellow'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27b18a12dc140758573-6\"><span class=\"crayon-e\">UPDATE </span><span class=\"crayon-e\">Tree </span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">lft</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">lft</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">myRight</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">myLeft</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">WHERE </span><span class=\"crayon-v\">lft</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">Left</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f27b18a12dc140758573-7\"><span class=\"crayon-e\">UPDATE </span><span class=\"crayon-e\">Tree </span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">rgt</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rgt</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">myRight</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">myLeft</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">WHERE </span><span class=\"crayon-v\">lft</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">Left</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27b18a12dc140758573-8\"><span class=\"crayon-e\">UPDATE </span><span class=\"crayon-e\">Tree </span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">parent_id</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">parent_id </span><span class=\"crayon-e\">WHERE </span><span class=\"crayon-v\">name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">node_id</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">nodeId</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f27b18a12dc140758573-9\"><span class=\"crayon-e\">UPDATE </span><span class=\"crayon-e\">Tree </span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">lft</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-i\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">href</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"http://www.jobbole.com/members/wx1863158684\"</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">Left</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">a</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">lft</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">myLeft</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rgt</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-i\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">href</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"http://www.jobbole.com/members/wx1863158684\"</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">Left</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">a</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">lft</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">myLeft</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">myRight</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">myLeft</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">WHERE </span><span class=\"crayon-v\">lft</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">myLeft </span><span class=\"crayon-st\">AND</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rgt</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">myRight</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27b18a12dc140758573-10\"><span class=\"crayon-e\">UNLOCK </span><span class=\"crayon-v\">TABLES</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0071 seconds] -->\r\n<p><strong>删除节点（包含子节点）</strong></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f27b18a12e0646708493\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nLOCK TABLE Tree WRITE;\r\nSELECT @myLeft := lft , @myRight := rgt FROM Tree WHERE name = 'Apple';\r\nDELETE Tree WHERE lft &gt;= @myLeft AND rgt &lt;= @myRight;\r\nUPDATE Tree SET lft = lft - (@myRight - @myLeft) - 1 WHERE lft &gt; @myRight;\r\nUPDATE Tree SET rgt = rgt - (@myRight - @myLeft) - 1 WHERE rgt &gt; @myRight;\r\nUNLOCK TABLES;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f27b18a12e0646708493-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27b18a12e0646708493-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f27b18a12e0646708493-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27b18a12e0646708493-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f27b18a12e0646708493-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27b18a12e0646708493-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f27b18a12e0646708493-1\"><span class=\"crayon-e\">LOCK </span><span class=\"crayon-e\">TABLE </span><span class=\"crayon-e\">Tree </span><span class=\"crayon-v\">WRITE</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27b18a12e0646708493-2\"><span class=\"crayon-i\">SELECT</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">myLeft</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">lft</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">myRight</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">rgt </span><span class=\"crayon-e\">FROM </span><span class=\"crayon-e\">Tree </span><span class=\"crayon-e\">WHERE </span><span class=\"crayon-v\">name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Apple'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f27b18a12e0646708493-3\"><span class=\"crayon-e\">DELETE </span><span class=\"crayon-e\">Tree </span><span class=\"crayon-e\">WHERE </span><span class=\"crayon-v\">lft</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">myLeft </span><span class=\"crayon-st\">AND</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rgt</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">myRight</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27b18a12e0646708493-4\"><span class=\"crayon-e\">UPDATE </span><span class=\"crayon-e\">Tree </span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">lft</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">lft</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">myRight</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">myLeft</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">WHERE </span><span class=\"crayon-v\">lft</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">myRight</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f27b18a12e0646708493-5\"><span class=\"crayon-e\">UPDATE </span><span class=\"crayon-e\">Tree </span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">rgt</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rgt</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">myRight</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">myLeft</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">WHERE </span><span class=\"crayon-v\">rgt</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">myRight</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27b18a12e0646708493-6\"><span class=\"crayon-e\">UNLOCK </span><span class=\"crayon-v\">TABLES</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0027 seconds] -->\r\n<p>如果需要只删除该节点，子节点自动上移一级如何处理？</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f27b18a12ff998731680\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nLOCK TABLE Tree WRITE;\r\nSELECT @parent_id := parent_id , @node_id :=node_id , @myLeft := lft , @myRight := rgt FROM Tree WHERE name = 'Red';\r\nUPDATE Tree SET parent_id = @parent_id WHERE  parent_id = @node_id\r\nDELETE Tree WHERE lft = @myLeft;\r\nUPDATE Tree SET lft = lft - 1,rgt = rgt-1 Where lft &gt; @myLeft AND @rgt &lt; @myRight\r\nUPDATE Tree SET lft = lft - 2,rgt = rgt-2 Where lft &gt; @rgt &gt; @myRight\r\nUNLOCK TABLES;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f27b18a12ff998731680-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27b18a12ff998731680-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f27b18a12ff998731680-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27b18a12ff998731680-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f27b18a12ff998731680-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27b18a12ff998731680-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f27b18a12ff998731680-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f27b18a12ff998731680-1\"><span class=\"crayon-e\">LOCK </span><span class=\"crayon-e\">TABLE </span><span class=\"crayon-e\">Tree </span><span class=\"crayon-v\">WRITE</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27b18a12ff998731680-2\"><span class=\"crayon-i\">SELECT</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">parent_id</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">parent</span><span class=\"crayon-sy\">_</span>id<span class=\"crayon-h\"> </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">node_id</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">node</span><span class=\"crayon-sy\">_</span>id<span class=\"crayon-h\"> </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">myLeft</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">lft</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">myRight</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">rgt </span><span class=\"crayon-e\">FROM </span><span class=\"crayon-e\">Tree </span><span class=\"crayon-e\">WHERE </span><span class=\"crayon-v\">name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Red'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f27b18a12ff998731680-3\"><span class=\"crayon-e\">UPDATE </span><span class=\"crayon-e\">Tree </span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">parent_id</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">parent_id </span><span class=\"crayon-e\">WHERE  </span><span class=\"crayon-v\">parent_id</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">node_id</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27b18a12ff998731680-4\"><span class=\"crayon-e\">DELETE </span><span class=\"crayon-e\">Tree </span><span class=\"crayon-e\">WHERE </span><span class=\"crayon-v\">lft</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">myLeft</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f27b18a12ff998731680-5\"><span class=\"crayon-e\">UPDATE </span><span class=\"crayon-e\">Tree </span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">lft</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">lft</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">rgt</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rgt</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Where </span><span class=\"crayon-v\">lft</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">myLeft </span><span class=\"crayon-st\">AND</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">rgt</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">myRight</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27b18a12ff998731680-6\"><span class=\"crayon-e\">UPDATE </span><span class=\"crayon-e\">Tree </span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">lft</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">lft</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">rgt</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rgt</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Where </span><span class=\"crayon-v\">lft</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">rgt</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">myRight</span></div><div class=\"crayon-line\" id=\"crayon-59f27b18a12ff998731680-7\"><span class=\"crayon-e\">UNLOCK </span><span class=\"crayon-v\">TABLES</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0033 seconds] -->\r\n<p>以上为Nested Set的CURD操作，具体在使用时建议结合事务和存储过程一起使用。本方案的优点时查询非常的方便，缺点就是每次插入删除数据涉及到的更新内容太多，如果树非常大，插入一条数据可能花很长的时间。</p>\n<p>参考链接：</p>\n<ul>\n<li><a href=\"https://www.sitepoint.com/hierarchical-data-database/\">https://www.sitepoint.com/hierarchical-data-database/</a></li>\n<li><a href=\"https://packagist.org/search/?q=Nested+Set\">https://packagist.org/search/?q=Nested+Set</a></li>\n</ul>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112323\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112323votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112323\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": "  评论", "praise_nums": "1", "url_object_id": "02055325a5e02932f7792960f1ebb630", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2012/03/database-logo.png"], "front_image_path": "full/f42d1238aa0f889b8988c70dd7481c7a4bd3b456.jpg", "title": "树形结构数据存储方案（四）：左右值编码"}
{"create_date": "2017/09/02 ", "url": "http://blog.jobbole.com/112238/", "fav_nums": 8, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/wx232824506\">努力学python</a> 翻译，<a href=\"http://www.jobbole.com/members/hanxiaomax\">艾凌风</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"http://www.infoworld.com/article/3188464/application-development/21-hot-programming-trends-and-21-going-cold.html\">Peter Wayner</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>InfoWorld 作者总结的 21 个热门编程趋势和 21 个要变冷的趋势，包含 Web 开发，移动开发，大数据，教育等方面。</p>\n<hr>\n<p>热门还是冷门？无论 Web 开发、主板开发还是培训教育，都需要了解应用开发过程中哪些技术正在兴起，哪些技术要过时了。</p>\n<p>程序员们喜欢嘲笑时尚界的潮流说变就变，像风一样捉摸不定。裙子时而短时而长，流行色频繁更替，领带越来越窄，越来越薄。但是在技术的世界中，严谨、科学、数学和精准原则却一直流行。</p>\n<p><img id=\"pic\" class=\"\" src=\"http://wx4.sinaimg.cn/large/7cc829d3gy1fj44vfij7hj20g40c3wfr.jpg\"></p>\n<p><strong>这并不是说编程没有趋势。区别在于编程的潮流由更高的效率、更多的自定义和更便于使用来驱动。具备这些特点的新技术取代旧技术，这是一种精益求精的过程，而不是朝令夕改的奇思妙想。</strong></p>\n<p>下面是现代程序世界的热门技术和冷门技术列表。可能有人会不同的意见，也可能会有遗漏，而这正是编程的迷人之处：快速变化、激烈辩论、峰回路转。</p>\n<h3>热门：预处理器</h3>\n<h3>变冷：全语言堆栈</h3>\n<p>不久之前，人们创造一门新的编程语言需要进行许多工作（从源代码到机器代码转换过程的所有工作）。 然后一些人指出他们可以推翻前面的做法。 现在程序员有了想法以后只需要编写一个预处理器，预处理器可以使用丰富的库和 API 将新代码转换成旧版本的代码。</p>\n<p>Python 、JavaScript 这类的脚本语言曾经仅限于小项目，但现在许多重要的工作都开始使用这些语言。不喜欢 JavaScript 的程序员还开发了 CoffeeScript (一种可以再次编码的预处理器)，以避免使用繁琐的标点符号。它有几十种以不同方式预处理语法的方法。</p>\n<p>那些喜欢动态类型的程序员<strong>创建了 Groovy</strong>，Groovy 是 Java 省略掉过多标点符号的简化版本。现在好像有<strong>几十种语言</strong>（如 Scala 或 Clojure）在 JVM 上运行，但只有一个 JVM 。我们可以在 .Net 虚拟机上运行多种语言，为什么还要重新发明轮子？</p>\n<h3>热门：Docker</h3>\n<h3>变冷：Hypervisors（虚拟机）</h3>\n<p>这并不完全正确，hypervisors 也有它们的用武之地，而且许多 Docker容器运行在以 hypevisors 为基础的操作系统中。然而，Docker容器与虚拟机映像相比实在太小了，这使得它们更容易使用和部署。</p>\n<p>当开发人员可以使用 Docker容器时，它们更愿意使用 Docker容器，这要归功于它可以在部署过程中轻松操作。 像 Joyent 这样的聪明公司正在开发可以占用更多资源的技术，以便容器可以在“裸机”上运行。</p>\n<p>在数字商业时代需要足够敏捷来抓住新机会，同时还要有效地维护传统的内部部署系统。</p>\n<h3>热门：JavaScript MV* 框架</h3>\n<h3>变冷：JavaScript文件</h3>\n<p>很久以前，每个人都学习如何使用 JavaScript 弹出警告窗口或如何检查表格中的电子邮件地址是否包含 @符号。 现在，HTML AJAX 应用程序已经如此成熟，以至于很少有人会再从头开始编写这些功能。 采用精心制作的框架，然后编写一些胶水代码来实现业务逻辑要简单得多。</p>\n<p>现在有许多框架可以用来处理 app、网页等的事件和内容，这些<strong>框架包括</strong> Kendo, Sencha, jQuery Mobile, AngularJS, Ember, Backbone, Meteor JS 等。</p>\n<p>这些只是网络应用程序的框架。 还有一些框架旨在为智能手机/平板电脑提供跨平台开发技术。 <strong>NativeScript，PhoneGap</strong> 和 <strong>Ext JS</strong> 都是使用 HTML5 创建 app 的技术。</p>\n<h3>热门：CSS 框架</h3>\n<h3>变冷：通用层叠样式表</h3>\n<p>曾几何时，向网页添加一点格式意味着打开 CSS文件然后写入类似 font-style:italic 这样的命令，然后保存文件，就可以在一上午的紧张忙碌之后去吃午饭了。现在网页如此复杂以至于很难使用如此简单的命令完成一个文件。调整一个颜色可能会导致一切都无法正常运行。这就像他们评价阴谋家和生态学家一样：一切都是互相联系的。</p>\n<p>这就是 SASS 和 Compass 等 CSS框架的用武之地。 它们通过提供编程结构（如实变量，嵌套块和混合）来鼓励规范，可靠的编码。 这在编程层面中可能听起来并没有多新颖，但对于设计层来说这是一个巨大的飞跃。</p>\n<h3>热门：视频标签</h3>\n<h3>变冷：静态标签</h3>\n<p>曾经有段时间， 视频是指 YouTube 或 Vimeo 上观看的视频。它是一种存在于专有页面上的单独内容。然而随着越来越多的网站使用音频来构建区块，其过程与使用 静态 GIFs 或者 JPGs 进行构建区块一样，这种情况正在发生改变。突然之间，屏幕变得生动起来。</p>\n<p>设计师发现，现代视频标签只是另一个矩形，尽管矩形通常需要程序员使用更多的 JavaScript 代码来控制。 我们只是开始明白，在客厅沙发前面的盒子可以不再是我们获取视频的主要来源，而可以仅仅是一个装饰。</p>\n<h3>热门：类大数据(不使用 Hadoop 分析)</h3>\n<h3>变冷：大数据（使用 Hadoop）</h3>\n<p>每个人都希望自己看起来像是圈子里的大人物，如果他们在圈子里有没影响力，那么他们会寻找一个适合他们脱颖而出的圈子。 所以，当“大数据”开始在高管之间开始流行时，这些高管要求最大，最强大的<strong>大数据系统</strong>，就像购买游艇或摩天大楼一样。</p>\n<p>有趣的是，许多问题没有大到要用高级大数据解决方案来解决。当然，像谷歌或雅虎这种跟踪我们浏览的所有网页的公司是需要大数据解决方案的，他们的数据文件很大需要用 petabytes 或 yottabytes 来计量。但大多数公司的数据都可以轻松地用一个 PC机内存进行处理。我是用一台在 16GB 内存的 PC 机来写这篇文章的，这台 PC 足够处理十亿件几个字节的事件。在大多数算法中，数据不需要读入内存，因为直接从 SSD 获取就可以了。</p>\n<p>可能存在需要 Hadoop云几十台机器并行运算来实现快速响应的需求，但是许多需求在单台机器上处理即可，这样还可以避免产生麻烦的协调或通信问题。</p>\n<h3>热门：Spark</h3>\n<h3>变冷：Hadoop</h3>\n<p>可能并不是 Hadoop 不流行了，而是 Spark 太热门了，这使得 Hadoop 模型看起来有些老。Spark 借鉴了Hadoop 从大量数据中提取语义的做法的最佳思路，并通过一些改进使代码运行的更快。Spark 最大的优势在于它将数据保存在快速内存中而不是需要所有内容都写入分布式文件系统。</p>\n<p>当然，许多人正在通过使用 Spark 的处理速度对存储在 Hadoop 分布式文件系统的数据进行处理，因此，Spark 和 Hadoop 更像是合作伙伴而不是竞争对手。</p>\n<h3>热门：人工智能/机器学习</h3>\n<h3>变冷：大数据</h3>\n<p>没有人知道 “人工智能”的真正含义，它们对营销人员很有利，特别是在“大数据”广泛应用的今天。他们从人工智能中提取术语并且升级数字处理算法的复杂度来处理我们的 log 文件和点击流。通过从具有 50年历史的 AI研究中借鉴更复杂算法，我们比以往任何时候都更有可能从噪音中发现信号。从机器学习框架到认知计算的工具，再到 IBM 的沃森，总能解决你的问题。它们每个都提供自己机器的智能水平，我们可以使用它们进行更多的数据分析和取证。</p>\n<h3>热门：机器人</h3>\n<h3>变冷：虚拟现实</h3>\n<p>就在几分钟之前，我们还都将梦想寄托在虚拟现实中，虚拟现实可以通过一些视频卡在我们视网膜上绘制图形。这种情况仍然可能发生，但与此同时，机器人的世界也将迅速发展。每个学校都有一个机器人团队，家庭的每个角落充斥着机器人，机器人吸尘器已经是旧新闻了，无人机正在自由翱翔。</p>\n<p>这意味着程序要开始考虑如何写代码来控制新机器。目前，这意味着为 Raspberry Pi 这样的轻量级控制器写脚本，但是随着库文件发展的越来越复杂，必然会发生变化。比如，许多机器人专家喜欢研究 C语言实现的机器视觉平台OpenCV 中的代码。这意味着需要考虑新的规则，新的类库，新的协议，和许多其他新的主题。</p>\n<h3>热门：单页Web应用</h3>\n<h3>变冷：网站</h3>\n<p>还记得 URLs 指向满是静态文本和图片的网页的时代吗？把所有信息都放在被称为网站的单独网页中是多么地简单和古雅。设计团队在网站地图上花费几个小时的时间来使网站更易于导航。</p>\n<p>新的 web 应用通过数据库填充内容。当 web应用需要信息时，它从数据库获取信息并将其放入本地模板中。我们不需要使用构建 web页面的所有 web附加组件来标记数据。数据层与展示和格式化层完全分离。移动计算的兴起是另一个原因在于：单个响应式页面工作机制与app类似，可以减少从鱼龙混杂的应用商店中寻找想要的内容所浪费的时间。</p>\n<h3>热门：移动Web app</h3>\n<h3>变冷：原生移动 App</h3>\n<p>假如你有一个移动内容的好主意，那么需要为 IOS、Android、Windows 8甚至黑莓OS 或者其他的系统开发不同的版本。每个版本都需要一个独立的团队使用不同的编程语言实现。然后每个平台应用商店都需要使用自己的版本，才能把 app 分发给用户。</p>\n<p>或者，我们可以创建一个 HTML 应用，然后把它放到各个平台都可以运行的网站上。如果有变化，也不需要到应用商店去请求快速审核错误修复。 现在 HTML层速度越来越快，并且运行在速度越来越快的芯片上，以便于它可以在更复杂和互动性更高的应用程序上更好地与本地应用程序竞争。</p>\n<h3>热门：Android</h3>\n<h3>变冷：iOS</h3>\n<p>是不是几年前苹果专卖店门前还要排蜿蜒的长队？ 现在时代变了。 虽然 iPhone 和 iPad 还拥有大量热爱它们丰富而复杂的界面的铁杆粉丝，但从原始销售数量来看，Android更具优势 。 有报道甚至说 80％ 以上的手机都是 Android系统。</p>\n<p>原因可能就在于成本。 即使 iOS设备只需要花费很少的前，Android世界充斥的大量竞争也可以将产品的价格压缩到 iOS设备的五分之一。 省钱总是很有诱惑力的。</p>\n<p>但另一方面，也可能与开源有关。每个人都可以在市场上竞争，他们也是这样做的。我们有大大小小的安卓平板，安卓相机甚至安卓冰箱。没有人需要在创新之前先请示“妈妈，我可以吗?”。如果他们有一个好点子，做就可以了。</p>\n<p>不过，Apple 也在向安卓学习。iPhone 6 有了不同尺寸的屏幕，或许机会就在眼前。</p>\n<h3>热门：GPU</h3>\n<h3>变冷：CPU</h3>\n<p>当软件非常简单，可以很好的安排一系列指令时，CPU 是计算机的王者，因为它承担了所有的工作。 现在，视频游戏充满了可以并行运行的大量图形程序，显卡可以运行这些图形。 我们很容易花费 500美元、600美元甚至更多来购买各种显卡，一些重度的游戏玩家可能拥有不止一两个显卡。 这些显卡的价格是许多基本台式机显卡价格的两倍。 游戏玩家并不是唯一吹嘘他们的 GPU 的人。 计算机科学家现在将许多并行应用程序转换到 GPU 上运行，这样速度可以提高数百倍。</p>\n<h3>热门：GitHub主页</h3>\n<h3>变冷：个人简历</h3>\n<p>当然，我们可以通过阅读包括初中棋牌俱乐部副总裁的成就清单来了解候选人。 但阅读某人的实际代码则更加丰富和具有启发性。 他们注释写的清楚吗？ 他们把很多时间浪费在把内容写到作用寥寥的类里吗？他的架构真的有扩展空间吗？ 所有这些问题都可以从他们的代码的发现答案。</p>\n<p>这就是为什么参与开源项目对找工作越来越重要。 从专有项目共享代码是很难的，但开源代码可以随处可见。</p>\n<h3>热门：租用</h3>\n<h3>变冷：购买</h3>\n<p>当亚马逊在黑色星期五卖力推销电脑和其他电子产品时，却忘记了推销他们的云服务。在不久的将来，它很可能会这么做。以前，公司设立自己的数据中心并且聘请员工来维护购买的电脑。 现在，他们租赁电脑、数据中心、工作人员、甚至按小时租用软件。 任何人都不想处理购买带来的麻烦。这一切都是好主意，至少在网站发生病毒事件（你的点击将为所有物品支付费用）之前是这样的。尽管现在只有亚马逊发现了自动提供云的方法，趋势将会趋同。</p>\n<h3>热门：复杂云</h3>\n<h3>变冷：简约云</h3>\n<p>云计算早期阶段，供应商强调一键获得正在运行的机器是多么地容易。那时，简约是王道。</p>\n<p>现在选择正确的机器并找出合适的折扣方案可能比编写代码要花费更多的时间。 我们可以获得几十种机器配置文件，大多数云提供商都提供一些老型号的电脑。 所有供应商都提供不同性能水平的机器，因此我们需要对它们进行基准测试，以确定哪种性价比最高。 少用一些 RAM 来每小时节省 12美分有意义吗？ 如果需要几个月连续运行 100台机器，那么这很重要。</p>\n<p>更复杂的情况在于，云公司还会为提前付款或批量购买提供不同的折扣方案， 我们也必须把它们考虑在内。 购买一个云成本工程的在线课程就可以了解这些内容了。</p>\n<h3>热门：数据移动专家</h3>\n<h3>变冷：备份磁带</h3>\n<p>当数据很少时，我们不需要考虑如何移动它。 我们可以将其备份到磁带或者安装 RAID硬盘。 但是现在数据如此之大，以至于我们不得不考虑我们在哪里使用它们。这变得越来越重要，因为更多的服务发生在云端的某个地方，而不是 RAID阵列所在的机架。</p>\n<p>让我们来看看亚马逊的新款 Snowmobile ，这是一个可爱的内部名称，它是用于装载可容纳 100PB 数据硬盘的移动容器。 他们还制作了一个叫做 Snowball 的小盒子，可以容纳 80TB 。 两者都将像运送货物一样运送数据，而不是采用光纤信号。 一项估计表明，通过 1Gbps 的光纤线路下载 100PB 的数据需要 28 年，而货运卡车可能会在几天内将集装箱运送到全国各地。</p>\n<p>所有这一切说明，开发人员需要开始考虑从哪里采集数据、在哪里使用数据。我们采集了比以前更多的数据，把它们移动到正确的地方也比以前也更加重要。正如 Wayne Gretzky 所说，他的成功在于提前计划并且通过分析对趋势进行预测，而不是仅仅把注意力放在正在发生的事情上。</p>\n<h3>热门：语音</h3>\n<h3>变冷：网站</h3>\n<p>网站并没有真正死亡，只是新的音频接口方兴未艾。亚马逊、谷歌和苹果都在主推用语音来解决问题来替代通过敲打电脑键盘输入内容来解决。</p>\n<p>这对于程序员来说意味着更多的工作，因为所有这些机制都有新的 API ，比如 Alexa 控制灯光的新开关。 如果您的公司想要连接这些音频接口，您最好现在就开始了解。毕竟，键盘和 URL 已经是上个世纪的发明了。</p>\n<h3>热门：Node.js</h3>\n<h3>变冷：JavaEE，Ruby on Rails</h3>\n<p>服务器领域一直在线程模式上蓬勃发展，这使得操作系统允许开发人员各种任性、低效、放纵的行为。 无论采用愚蠢的循环还是更多的程序编码，操作系统将通过线程之间的切换平衡性能。</p>\n<p>然后Node.js 与 JavaScript 回调模型出现，这些代码运行速度非常快–比任何人期望JavaScript达到的速度都要快。突然间，创建新线程的开销变得明显，Node.js 繁荣起来。 使用 node.js 时，如果程序员的表现不好会出现问题，但这在很大程度上是对他们是很有好处的。约束程序员的可用资源会促使程序员开发出更快的代码。</p>\n<p>Node.js 还得益于它可以使前后台保持一致。两者运行相同的代码，这使得开发人员更容易迁移和重用函数。 因此，Node.js 已经成为互联网上最热门的堆栈。</p>\n<h3>热门：PHP7</h3>\n<h3>变冷：旧版PHP</h3>\n<p>过去，PHP 是实现动态网页的简单方法。 我们可以通过在HTML 标签之间嵌入简单的代码来实现一些变化。为了便于 Web 开发人员使用，它是如此的基础，但速度也慢得足以让硬件程序员嘲笑。</p>\n<p>这已成为过去，WordPress 和 Facebook 这样的 PHP 爱好者通过引入即时编译器技术(该技术使 Java 成为高性能解决方案)使得PHP代码比以往任何时候都快。 现在，像 HipHop虚拟机和 PHP 7.0 这样的工具的传输速度可能达到旧版本的两倍。Node.js 和 Java，准备接招吧。</p>\n<h3>热门：即时教育</h3>\n<h3>变冷：四年全日制</h3>\n<p>计算机辅助课程不再新鲜，每个人都可以观看视频讲座，并且可以加快或者放慢视频播放速度或者要求教授重复最后一点。在线论坛也改变了以前一个人主导讨论的旧形式。</p>\n<p>在线课程的本质和技术不仅颠覆了教育产业结构，还实现了随时随地学习的灵活性。这正在改变人们的观念，人们不再需要为与他们有关或无关的大量课程而投入四年高昂的学费。在你不知道自己是否需要在编译器上工作时，为什么要学习编译器课程？如果老板想从关系数据库切换到NoSQL引擎，那么我们可以将时间用于现代数据存储的课程上。只有在需要的时候才获得新信息，不要用快要腐烂的方法来扰乱思维。</p>\n\r\n        \r\n            <blockquote class=\"rewards\">\n        <p><strong>打赏支持我翻译更多好文章，谢谢！</strong></p>\n        <a href=\"#rewardbox\" id=\"rewards-button\" class=\"fancybox\"><span class=\"btn-bluet-blue href-style\"><i class=\"fa fa-jpy\"></i> 打赏译者</span></a>\n    </blockquote>\n\n    <div id=\"rewardbox\">\n        <h4>打赏支持我翻译更多好文章，谢谢！</h4>\n                <p>任选一种支付方式</p>\n                <p>\n                        <img src=\"http://jbcdn2.b0.upaiyun.com/2016/10/11eefac5bf4ae36c73b7b40eb087be7b.jpg\">\n            \n                            <img src=\"http://jbcdn2.b0.upaiyun.com/2016/10/02a9f7817f8dd0012ff1327fde5bdc94.jpg\">\n                    </p>\n    </div>\n\n    \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112238\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112238votetotal\">4</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112238\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 8 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/wx232824506\">努力学python</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/wx232824506\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2015/04/8fbdaaa5ea6d3b49c8c1c825aafeb5d9.png\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            应用软件开发，主要用python、sql        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/wx232824506\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/wx232824506/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/wx232824506/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 20</a>        </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": 1, "praise_nums": "4", "url_object_id": "b225ce0ceb9f61bf1bed8b5e01b2f2f2", "front_image_url": ["http://wx4.sinaimg.cn/large/7cc829d3gy1fj44vfij7hj20g40c3wfr.jpg"], "front_image_path": "full/0341d03d14d3de38ff2983a92d11b39e71e6c1aa.jpg", "title": "编程趋势：21 个热门和 21 个要降温的"}
{"create_date": "2017/09/04 ", "url": "http://blog.jobbole.com/112351/", "fav_nums": "  收藏", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/huangxiaofei\">黄小非</a> 翻译。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://stackoverflow.blog/2017/08/29/tale-two-industries-programming-languages-differ-wealthy-developing-countries/\">stackoverflow</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>【导读】：Stack Overflow 工程师最近 David Robinson 做了一次数据分析，总结了程序员的技术选择和所在国家收入之间的关系。<b></b></p>\n<p>Stack Overflow 非常热衷于利用数据来和用户分享对全世界开发者社区的认知。比如这篇<a href=\"https://stackoverflow.blog/2017/08/22/world-mobile-development/\">关于 Android 开发者分布的文章</a>就是个很好的例子，它通过对全球开发者在 Stack Overflow 上询问 Andorid 相关问题统计，得出了结论：收入较低国家的开发者询问 Android 问题的数量要高于高收入国家的开发者。</p>\n<p>这个问题引发了我们的联想：<span style=\"color: #800000;\"><strong>高收入国家和低收入国家之间，开发人员在技术选择方面有什么不同呢？</strong></span>这种不同又会如何影响全球的软件开发产业呢？在本文中，我们就探索了上述的问题，并且发现通过收入来区分软件工业的发展，是一种很有效的办法。</p>\n<p>本文中的所有分析结论都是基于 2017 年 1 月 到 8 月的数据，并挑选在这段时间内出现频率 Top 250 标签进行统计的。为了减少数据样本过大可能造成的偏差，我们集中选取了相应时间段内来自 64 个国家的超过 500 万个问题进行分析。需要说明的是，这些数据很大程度上只反应了英语开发者们的行为模式（当然通过对西班牙语和葡萄牙语站点的分析，发现在墨西哥，西班牙这些国家，得到的分析结论和英语国家差不多）。</p>\n<h3>技术和人均 GDP 的相关性</h3>\n<p>在最近的一篇文章中，我们通过计算 Android 相关问题的比例（就是某个国家Android相关的问题的数量占该国整体Stack Overflow问题数据量的百分比），发现这个比例和这个国家的人均GPD是成反比的。所以我们也想知道，其他种类的技术和人均GDP的关系。</p>\n<p>因此我们调查了主流的编程语言和平台，包括PHP、Python、R 等等。<a href=\"http://jbcdn2.b0.upaiyun.com/2017/09/b0e581c125a2252f8e54bfbe6db1f064.png\"><img class=\"aligncenter size-full wp-image-65858\" src=\"http://wx4.sinaimg.cn/large/7cc829d3gy1fj7ulu5ctdj20sg0sgwmd.jpg\" alt=\"tag_gdp_compare-1-2-1024x1024\" width=\"1024\" height=\"1024\"></a></p>\n<p>统计发现，来自某个国家 Android 相关问题和 PHP 相关问题的数量是和国家的收入情况成反比的，而同 Python、R 语言相关问题的数量则是正比。当然，在每一个统计案例里都会有例外的情况（例如，来自人均收入较高的韩国的 Android 问题数量要远超我们的预期，来自中国的 Python 问题的数量相对较低），但是总体来看，这种正反比关系还是很有说服力的。（多重假设检验调整后，每一种语言案例统计的决定系数都在 0.5 到 0.6 之间，P 值为 10 的负六次方）。</p>\n<p><span style=\"color: #800000;\">必须要说明一下，我们得出这些结论不是要说明什么因果性。我们并不是说，如果你选择了那些富有国家的开发者使用的编程语言，那么你所在的国家就能变成富有的国家。并且我们也不是说，国家的经济会直接影响到某种计算机技术的使用。我们只是发现，把经济和社会因素（例如教育程度，软件工业发展的年限，外包的水平等）看成一个整体，从总体上会与这个国家的财富多寡相关。</span></p>\n<h3>软件开发产业是按什么标准一分为二的？</h3>\n<p>在我们调查软件技术趋势时，通常只会把全世界的国家分成两组（即高收入国家和非高收入国家）来统计。我们不会把各国分成许多组来把相关性问题复杂化。因为在这方面已经有了很成熟的划分标准，我们就直接用<a href=\"https://datahelpdesk.worldbank.org/knowledgebase/articles/906519-world-bank-country-and-lending-groups\">世界银行收入分级标准</a>就可以了，这种分级法是以人均国民总收入（GNI）为基准的（具体的分类方法可以看<a href=\"https://datahelpdesk.worldbank.org/knowledgebase/articles/378831-why-use-gni-per-capita-to-classify-economies-into\">这里</a>）</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/09/4a90e3ee6a488ad0181fb4853f82f968.png\"><img class=\"aligncenter size-large wp-image-65861\" src=\"http://wx4.sinaimg.cn/large/7cc829d3gy1fj7uluvb7ej20sg0h243t.jpg\" alt=\"worldbank_map-1-1024x614\" width=\"1024\" height=\"614\"></a></p>\n<p>上图显示，全球一共有 78 个国家属于高收入国家，这些国家多半由美国、加拿大、西欧、部分中东和东亚国家，以及澳大利亚/新西兰构成。通过统计学的手段可以证明，这种划分方法是有足够依据的，而且这种划分方法比其他的方法更有意义，比如很多时候人们喜欢按照东西半球来划分国家，可实际上澳大利亚的技术分布情况却更接近美国和欧洲，而不是同属东半球的中国和印度尼西亚。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/09/bc8880913bdcd9e2cdba976f19f6e47a.png\"><img class=\"aligncenter size-large wp-image-65860\" src=\"http://wx3.sinaimg.cn/large/7cc829d3gy1fj7ulvf42zj20sg0izdip.jpg\" alt=\"top_countries-1-2-1024x683\" width=\"1024\" height=\"683\"></a></p>\n<p>这种分类方法同时也把 Stack Overflow 的访问量分成了两组，其中高收入国家访问量超过 2/3，剩余的国家占了访问量的不到 1/3。（得到这样的结果是和被调查国家软件开发人员的数量、互联网的基础设施的情况、以及说英语人数的情况严重相关的）。其中非高收入国家的访问量的排名分别为：印度、巴西、俄罗斯和中国。</p>\n<h3>高低收入国家使用的技术有什么不同？</h3>\n<p>我们已经把软件开发的世界分成了两个区域了。那么高收入国家和非高收入国家在使用的技术上有什么不同呢？</p>\n<p>我们从中可以看到一些有趣的结论：</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/09/b605e4100f6835b922f7fe48534c2d6f.png\"><img class=\"aligncenter size-large wp-image-65859\" src=\"http://wx2.sinaimg.cn/large/7cc829d3gy1fj7ulw4j26j20sg0kbjxu.jpg\" alt=\"tech_difference_graph-1-1-1024x731\" width=\"1024\" height=\"731\"></a></p>\n<p><strong>数据科学技术的不同：</strong>我们之前已经看到，Python 和 R 语言的使用情况和国家的富有程度是相关的。Python 在高收入国家使用的规模大约是其余国家的两倍之多，而 R 语言的使用规模差达到了 3 倍多。我们还注意到，通过对内容更具体的标签（tags）的统计，发现在Python和R科学计算领域，使用不同的计算包的人收入跳度很明显，例如 pandas、numpy,、matplotlib 和 ggplot2。这说明了在数据科学研究方面，不同的技术角色之间存在收入鸿沟。当然在越富有，工业化程度越高的国家，数据科学研究的占国家经济的比例越大，程序员的学历也越高，这个结论是符合逻辑的。</p>\n<p><strong>C/C++：</strong>在 Stack Overflow 上还有两个值得一提的语言就是 C 和 C++，高收入国家的程序员访问这两种语言的次数比低收入国家程序员多。对这个现象，有一种猜测是，它和教育机构有关：因为在之前的一篇<a href=\"https://stackoverflow.blog/2017/02/15/how-do-students-use-stack-overflow/\">《学生如何使用Stack Overflow》</a>的帖子里，我们发现美国的大学对 C/C++ 的访问频率是非常高的。当然这个现象也可能和电器制造商的地理分布情况有关。</p>\n<p><strong>PHP </strong><strong>和 </strong><strong>Android</strong>：我们在以前的一篇<a href=\"https://stackoverflow.blog/2017/08/22/world-mobile-development/?utm_source=so-owned&amp;utm_medium=blog&amp;utm_campaign=gen-blog&amp;utm_content=blog-link&amp;utm_term=income-countries\">《全球移动开发调查》</a>的帖子中讨论了 Android 开发的情况，除此之外，还有一种技术和低收入国家息息相关，那就是 PHP。在Stack Overflow上，来自低收入国家的对 CodeIgniter(一个PHP开源框架)的问题非常的多，而高收入国家队这个框架的提问几乎没有，这么大悬殊实在是一个很有趣的现象。经过进一步的调查，发现对 CodeIgniter 的重度访问来自于南亚，东南亚（尤其是印度、印度尼西亚、巴基斯坦和菲律宾），来自美国或者都周的访问几乎没有。所以可以推断，这个框架主要是这些外包公司用来开发门户网站用的。</p>\n<h3>结论：统计这些有什么用？</h3>\n<p>我们做这些统计当然是因为对编程语言生态系统的兴趣。而且这对我们日后要做的数据探索有很大的启发。</p>\n<p>我们在说软件开发工业方面的问题时，要意识到我们的问题都是由两个单独的问题混合起来的，这很重要，因为这种混合会给我们带来更多的信息。</p>\n<p>比如，我们想找到是哪些技术给Stack Overflow带来最大的流量，例如：《<a href=\"https://stackoverflow.blog/2017/08/01/flash-dead-technologies-might-next/\">探寻Flash技术不不断缩水的原因</a>》。如果我们把访问量最多的技术列出一张表，你会发现高收入和低收入的国家的分布是完全不一样的。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/09/81bc32fb2d22b73b61614c4362fedb0a.png\"><img class=\"aligncenter size-full wp-image-65857\" src=\"http://wx3.sinaimg.cn/large/7cc829d3gy1fj7ulxy4z8j20sg0sg7ap.jpg\" width=\"1024\" height=\"1024\"></a></p>\n<p>例如，2017 年以来，Python 是来自高收入国家被访问第二多的话题，但是在非高收入国家，Python 只能排到第 8 位。而本文作者自己使用的 R 语言，在高收入国家访问数量的排名是第 15，但是在非高收入国家排名却在 50 开外。</p>\n<p>这些数据对 Stack Overflow 了解全球的开发者生态来说都是很重要的数据。而对于美国的技术招聘者来说，他们需要掌握未来的动向，所以他们需要了解更多的方面的数据，而不仅是“来自印度的学生要学习什么样的计算机语言”、“技术投资人在肯尼亚寻找合适的技术公司”这类话题。</p>\n\r\n        \r\n            <blockquote class=\"rewards\">\n        <p><strong>打赏支持我翻译更多好文章，谢谢！</strong></p>\n        <a href=\"#rewardbox\" id=\"rewards-button\" class=\"fancybox\"><span class=\"btn-bluet-blue href-style\"><i class=\"fa fa-jpy\"></i> 打赏译者</span></a>\n    </blockquote>\n\n    <div id=\"rewardbox\">\n        <h4>打赏支持我翻译更多好文章，谢谢！</h4>\n                <p>\n                        <img src=\"http://www.jobbole.com/wp-content/uploads/2016/04/78805a221a988e79ef3f42d7c5bfd4187.jpeg\">\n            \n                    </p>\n    </div>\n\n    \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112351\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112351votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112351\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/huangxiaofei\">黄小非</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/huangxiaofei\">\r\n\t\t\t<img src=\"http://www.jobbole.com/wp-content/uploads/avatars/5423/Corbis-42-221258652.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            黄小非：毕业于重庆大学计算机系，南开大学软件工程硕士，SCJP。 目前在一家国企信息中心任职软件开发工程师。主要技术兴趣为Java平台相关技术、系统构架、C/C++、计算机图形学等。（新浪微博：@黄小非）        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/huangxiaofei\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/huangxiaofei/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/huangxiaofei/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 65</a> · <a title=\"微博主页\" target=\"_blank\" href=\"http://weibo.com/huangxiaofei2002\"><i class=\"fa fa-weibo\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": "  评论", "praise_nums": "1", "url_object_id": "131eed081b813e1db0e388ed019752d2", "front_image_url": ["http://wx4.sinaimg.cn/large/7cc829d3gy1fj7ulu5ctdj20sg0sgwmd.jpg"], "front_image_path": "full/5ef5deea05baf6e946764ea6c6a4efa4c5eb9840.jpg", "title": "程序员的技术选择：发达国家和发展中国家有这些差异"}
{"create_date": "2017/09/02 ", "url": "http://blog.jobbole.com/112344/", "fav_nums": 3, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://www.howtoforge.com/tutorial/beginners-guide-to-visual-merge-tool-meld-on-linux/\">Ansh</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-8402-1.html\">Linux中国/GitFuture</a>   </div><p>我们已经<a href=\"https://www.howtoforge.com/tutorial/linux-diff-command-file-comparison/\">讲过</a> Linux 中<a href=\"https://www.howtoforge.com/tutorial/how-to-compare-three-files-in-linux-using-diff3-tool/\">一些</a>基于命令行的比较和合并工具，再来讲解该系统的一些可视化的比较与合并工具也很合理。首要的原因是，不是每个人都习惯使用命令行，而且对于某些人来说，基于命令行的比较工具可能很难学习和理解。</p>\n<p>因此，我们将会推出关于可视化工具 <strong>Meld</strong> 的系列文章。</p>\n<p>在跳到安装和介绍部分前，我需要说明这篇教程里所有的指令和用例是都是可用的，而且它们已经在 Ubuntu 14.04 中测试过了，我们使用的 Meld 版本是 3.14.2。</p>\n<h3 id=\"toc_1\">关于 Meld</h3>\n<p><a href=\"http://meldmerge.org/\">Meld</a> 主要是一个可视化的比较和合并的工具，目标人群是开发者（当然，我们将要讲到的其它部分也会考虑到最终用户）。这个工具同时支持双向和三向的比较，不仅仅是比较文件，还可以比较目录，以及版本控制的项目。</p>\n<p>“Meld 可以帮你回顾代码改动，理解补丁，”其官网如是说。“它甚至可以告知你如果你不进行合并将会发生什么事情。”该工具使用 GPL v2 协议进行授权。</p>\n<h3 id=\"toc_2\">安装 Meld</h3>\n<p>如果你用的是 Ubuntu 或者其它基于 Debian 的 Linux 分支，你可以用以下命令下载安装 Meld：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33c7fa7438978976572\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsudo apt-get install meld\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33c7fa7438978976572-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c7fa7438978976572-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33c7fa7438978976572-1\"><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">apt</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">get </span><span class=\"crayon-e\">install </span><span class=\"crayon-i\">meld</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c7fa7438978976572-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>或者你也可以用系统自带的包管理软件下载这个工具。比如在 Ubuntu 上，你可以用 Ubuntu 软件中心（Ubuntu Software Center），或者用 <a href=\"https://www.howtoforge.com/tutorial/ubuntu-16-04-lts-overview/\">Ubuntu 软件</a>，它从 Ubuntu 16.04 版本开始取代了 Ubuntu 软件中心。</p>\n<p>当然，Ubuntu 官方仓库里的 Meld 版本很有可能比较陈旧。因此如果你想要用更新的版本，你可以在<a href=\"https://git.gnome.org/browse/meld/refs/tags\">这里</a>下载软件包。如果你要用这个方法，你要做的就是解压下载好的软件包，然后运行 <code>bin</code> 目录下的 <code>meld</code> 程序。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33c7fa7441736037202\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n~/Downloads/meld-3.14.2/bin$ ./meld \r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33c7fa7441736037202-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c7fa7441736037202-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33c7fa7441736037202-1\"><span class=\"crayon-o\">~</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">Downloads</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">meld</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">3.14.2</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-sy\">$</span> <span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">meld</span> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c7fa7441736037202-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>以下是 Meld 依赖的软件，仅供参考：</p>\n<ul>\n<li>Python 2.7 (Python 3.3 开发版)</li>\n<li>GTK+ 3.14</li>\n<li>GLib 2.36</li>\n<li>PyGObject 3.14</li>\n<li>GtkSourceView 3.14</li>\n<li>pycairo</li>\n</ul>\n<h3 id=\"toc_3\">使用 Meld</h3>\n<p>装好了软件，就可以看到类似这样的画面：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/dbde9a54537cff686561f4ea367befd3.png\" alt=\"Meld started\"></p>\n<p>有三个选项：比较文件（File comparison），比较目录（Directory comparison）以及版本控制视图（Version control view）。</p>\n<p>点击“比较文件”选项，就可以选择需要比较的文件：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/060bead6118e149e3a57c576d37d1376.png\" alt=\"Meld file comparison\"></p>\n<p>就像上面的截图那样明白，Meld 也可以进行三向比较，但是在这一系列文章的第一部分，我们只会讲更常用的双向比较。</p>\n<p>接着，选择你想要比较的文件，点击“比较”（Compare）按钮。软件会在两边分别打开两个文件，高亮不同的行（以及不同的部分）。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/7eb08063baf7cb031a6a6f4b445926c3.png\" alt=\"Compare files in Meld\"></p>\n<p>两个文件的不同之处在第二行，差别在于 <code>file2</code> 文件的第二行多了一个 <code>3</code>。你看到的黑色箭头是用来进行合并或修改的操作的。该例中，向右的箭头将会把 <code>file2</code> 文件的第二行改成文件 <code>file1</code> 中对应行的内容。左向箭头做的事情相反。</p>\n<p>做完修改后，按下 <code>Ctrl+s</code> 来保存。</p>\n<p>这个简单的例子，让你知道 Meld 的基本用法。让我们看一看稍微复杂一点的比较：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/3a1b7484b6c3766fda278db4b7d7f970.png\" alt=\"Meld advanced file comparison\"></p>\n<p>在讨论这些变化前，这里提一下， Meld 的界面中有几个区域，可以给出文件之间的差异，让概况变得直观。这里特别需要注意窗口的左右两边垂直的栏。比如下面这个截图：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/4ea9541f9c58840d7e096fa4bebd7813.png\" alt=\"Visual Comparison\"></p>\n<p>仔细观察，图中的这个栏包含几个不同颜色的区块。这些区块是用来让你对文件之间的差异有个大概的了解。“每一个着色的区块表示一个部分，这个部分可能是插入、删除、修改或者有差别的，取决于区块所用的颜色。”官方文档是这样说的。</p>\n<p>现在，让我们回到我们之前讨论的例子中。接下来的截图展示了用 Meld 理解文件的改动是很简单的（以及合并这些改动）：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/d58833eab9d7ba00aabab813c6e0969b.png\" alt=\"File changes visualized in Meld\"></p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/6f8a5ac900f6e386e0f4982445ee0da8.png\" alt=\"Meld Example 2\"></p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/92013c7ba1d58181b101d6d566b01afb.png\" alt=\"Meld Example 3\"></p>\n<p>接着，我们滑动文件，从一个改动跳到另一个。但是，当要比较的文件很大时，这会耗一点时间，当你想要滑动文件跳到一个改动的位置时，也会变得很困难。如果是这种情况的话，你可以用工具栏的橙色箭头，就在编辑区域的上方：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/98ecd8d98e47b079342b86dd9b0867b3.png\" alt=\"Go to next change in Meld\"></p>\n<p>这些是你使用 Meld 时做的一般性的事情：可以用标准的 <code>Ctrl+f</code> 组合键在编辑区域内进行查找，按 <code>F11</code> 键让软件进入全屏模式，再按 <code>Ctrl+r</code> 来刷新（通常在所有要比较的文件改变的时候使用）。</p>\n<p>以下是 Meld 官方网站宣传的重要特性：</p>\n<ul>\n<li>文件和目录的双向及三向比较</li>\n<li>输入即更新文件的比较</li>\n<li>自动合并模式，按块改动的动作让合并更加简单</li>\n<li>可视化让比较文件更简单</li>\n<li>支持 Git，Bazaar，Mercurial，Subversion 等等</li>\n</ul>\n<p>注意还不仅仅只有以上所列的。网站上有个专门的<a href=\"http://meldmerge.org/features.html\">特性页面</a>，里面提到了 Meld 提供的所有特性。这个页面列出的所有特性分为几个部分，以该软件是用来做文件比较、目录比较、版本控制还是处于合并模式下为基础进行划分。</p>\n<p>和其它软件相似，有些事情 Meld 做不到。官方网站上列出了其中的一部分：“当 Meld 展示文件之间的差异时，它同时显示两个文件，看起来就像在普通的文本编辑器中。它不会添加额外的行，让左右两边文件的特殊改动处于同样的行数。没有做这个事情的选项。”</p>\n<h3 id=\"toc_4\">总结</h3>\n<p>我们刚刚了解到的不过是皮毛，因为 Meld 还能做很多事情。考虑到这是教程系列的第一部分，这也挺不错的。这仅仅是让你了解 Meld 的作用，你可以配置它，忽略一些特定类型的改动，让它移动，复制或者删除文件之间的个别差异，也可以从命令行启动它。在即将推出的系列教程中，我们将会讲述所有这些重要功能。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112344\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112344votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112344\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 3 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": "  评论", "praise_nums": "1", "url_object_id": "382269592e7d5f328aeab89feab6e845", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/09/dbde9a54537cff686561f4ea367befd3.png"], "front_image_path": "full/fe1d173df391bea51437d0e7fa21c5de4375111c.jpg", "title": "Linux 系统上的可视化比较与合并工具 Meld"}
{"create_date": "2017/09/03 ", "url": "http://blog.jobbole.com/112339/", "fav_nums": 1, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://www.biaodianfu.com/nested-intervals.html\">标点符</a>   </div><p>前面的一篇文章介绍了<a href=\"http://blog.jobbole.com/112323/\">左右值编码</a>，不知道大家注意到了没有，如果数据庞大，每次更新都需要更新差不多全表，效率较低没有更好的方式？今天我们就来研究下区间嵌套法。</p>\n<p><strong>区间嵌套法原理</strong></p>\n<p>如果节点区间[clft, crgt]与[plft, prgt]存在如下关系：plft &lt;= clft and crgt &gt;= prgt，则[clft, crgt]区间里的点是[plft, prgt]的子节点。基于此假设我们就可以通过对区间的不断的向下划来获取新的区间。举例：如果在区间[plft, prgt]中存在一个空白区间[lft1, rgt1]，如果要加入一个[plft,lft1]、[rgt1,prgt]同级的区间，只需插入节点：[(2*lft1+rgt1)/3,  (rgt1+2*lft)/3]。在添加完节点后我们还留下[lft1,(2*lft1+rgt1)/3]和 [(rgt1+2*lft)/3,rgt1]两个空余的空间用来添加更多的子节点。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/94d451042cd71b68d4b44369f8ecff49.png\" alt=\"nested-intervals\" width=\"575\" height=\"100\">如果我们把区间放在二位平面上，把rgt当成是x轴，lft当做是y轴，纳闷嵌套的区间数差不多是这样的：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/6e99479d95abda03131d9100ec75ec0f.png\" alt=\"nested-intervals-2\" width=\"500\" height=\"500\"></p>\n<p>每个节点[lft, rgt]拥有的子节点都被包含在y &gt;= lft &amp; x &lt;= rgt中。同时y &gt;= clft &amp; x &lt;= crgt所在的空间也是y &gt;= plft  &amp; x &lt;= prgt的子集。另外由于新增的右区间都小于已有的左区间，所以新增的节点均在y=x这条直线以下。</p>\n<p><strong>区间嵌套法实现</strong></p>\n<p>了解了区间嵌套法的原理后，接下来我们就要考虑如何实现他，原则上初始的区间使用任何区间都是可以的，这里我们使用的是[0,1]作为根区间。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/81fa2963538889e727c4b2e0ba0e9df5.png\" alt=\"nested-intervals-3\" width=\"594\" height=\"594\"></p>\n<p>首先，我们在XY平面上定义2个点。深度优先集合点和广度有限集合点，针对点&lt;x=1,y=1/2&gt;的深度优先集合点为&lt;x=1,y=1&gt;，广度优先集合点为&lt;x=1/2,y=1/2&gt;。接下来我们定义第一个子节点的位置为父节点和深度优先集合点的中间点。兄弟节点则为前一个子节点到广度优先集合点的中间点，如上图所示，节点1.2的位置为&lt;x=3/4, y=5/8&gt;。</p>\n<p>另外仔细看我们可以看到点与点之间的关系。另外如果我们知道x和y的和，我们就能反推出x,y的值（具体的逻辑是什么，我现在也还没有搞懂，有知道的朋友可以帮忙解释下）。</p>\n<p>我们以节点&lt;x=3/4, y=5/8&gt;为例，我们可以得到他的和为11/8。</p>\n<p>我们定义11为分子（numerator），8为分母（denominator），则x点的分子为：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f288f58e1b3870297038\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nCREATE DEFINER = `root`@`localhost` FUNCTION `x_numer`(`numer` int,`denom` int)\r\n RETURNS int(11)\r\nBEGIN\r\n\tDECLARE ret_num INT;\r\n\tDECLARE ret_den INT;\r\n\tSET ret_num := numer+1;\r\n\tSET ret_den := denom*2;\r\n\tWHILE floor(ret_num/2) = ret_num/2 DO\r\n\t\tSET ret_num := ret_num/2;\r\n\t\tSET ret_den := ret_den/2;\r\n\tEND WHILE;\r\n\tRETURN ret_num;\r\nEND;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f288f58e1b3870297038-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e1b3870297038-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e1b3870297038-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e1b3870297038-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e1b3870297038-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e1b3870297038-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e1b3870297038-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e1b3870297038-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e1b3870297038-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e1b3870297038-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e1b3870297038-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e1b3870297038-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e1b3870297038-13\">13</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f288f58e1b3870297038-1\"><span class=\"crayon-e\">CREATE </span><span class=\"crayon-v\">DEFINER</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">@</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">localhost</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">FUNCTION</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">x_numer</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">numer</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">,</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">denom</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e1b3870297038-2\"><span class=\"crayon-h\"> </span><span class=\"crayon-e\">RETURNS </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e1b3870297038-3\"><span class=\"crayon-e\">BEGIN</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e1b3870297038-4\"><span class=\"crayon-e\">\t</span><span class=\"crayon-r\">DECLARE</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ret_num </span><span class=\"crayon-t\">INT</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e1b3870297038-5\"><span class=\"crayon-h\">\t</span><span class=\"crayon-r\">DECLARE</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ret_den </span><span class=\"crayon-t\">INT</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e1b3870297038-6\"><span class=\"crayon-h\">\t</span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">ret_num</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">numer</span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e1b3870297038-7\"><span class=\"crayon-h\">\t</span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">ret_den</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">denom*</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e1b3870297038-8\"><span class=\"crayon-h\">\t</span><span class=\"crayon-st\">WHILE</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">floor</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ret_num</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ret_num</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">DO</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e1b3870297038-9\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">ret_num</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ret_num</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e1b3870297038-10\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">ret_den</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ret_den</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e1b3870297038-11\"><span class=\"crayon-h\">\t</span><span class=\"crayon-st\">END</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">WHILE</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e1b3870297038-12\"><span class=\"crayon-h\">\t</span><span class=\"crayon-st\">RETURN</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ret_num</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e1b3870297038-13\"><span class=\"crayon-st\">END</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0025 seconds] -->\r\n<p>x点的分母为：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f288f58e1d3803600574\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nCREATE DEFINER = `root`@`localhost` FUNCTION `x_ denom`(`numer` int,`denom` int)\r\n RETURNS int(11)\r\nBEGIN\r\n\tDECLARE ret_num INT;\r\n\tDECLARE ret_den INT;\r\n\tSET ret_num := numer+1;\r\n\tSET ret_den := denom*2;\r\n\tWHILE floor(ret_num/2) = ret_num/2 DO\r\n\t\tSET ret_num := ret_num/2;\r\n\t\tSET ret_den := ret_den/2;\r\n\tEND WHILE;\r\n\tRETURN ret_den;\r\nEND;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f288f58e1d3803600574-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e1d3803600574-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e1d3803600574-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e1d3803600574-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e1d3803600574-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e1d3803600574-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e1d3803600574-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e1d3803600574-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e1d3803600574-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e1d3803600574-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e1d3803600574-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e1d3803600574-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e1d3803600574-13\">13</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f288f58e1d3803600574-1\"><span class=\"crayon-e\">CREATE </span><span class=\"crayon-v\">DEFINER</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">@</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">localhost</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">FUNCTION</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-e\">x_ </span><span class=\"crayon-v\">denom</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">numer</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">,</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">denom</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e1d3803600574-2\"><span class=\"crayon-h\"> </span><span class=\"crayon-e\">RETURNS </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e1d3803600574-3\"><span class=\"crayon-e\">BEGIN</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e1d3803600574-4\"><span class=\"crayon-e\">\t</span><span class=\"crayon-r\">DECLARE</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ret_num </span><span class=\"crayon-t\">INT</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e1d3803600574-5\"><span class=\"crayon-h\">\t</span><span class=\"crayon-r\">DECLARE</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ret_den </span><span class=\"crayon-t\">INT</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e1d3803600574-6\"><span class=\"crayon-h\">\t</span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">ret_num</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">numer</span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e1d3803600574-7\"><span class=\"crayon-h\">\t</span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">ret_den</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">denom*</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e1d3803600574-8\"><span class=\"crayon-h\">\t</span><span class=\"crayon-st\">WHILE</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">floor</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ret_num</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ret_num</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">DO</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e1d3803600574-9\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">ret_num</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ret_num</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e1d3803600574-10\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">ret_den</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ret_den</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e1d3803600574-11\"><span class=\"crayon-h\">\t</span><span class=\"crayon-st\">END</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">WHILE</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e1d3803600574-12\"><span class=\"crayon-h\">\t</span><span class=\"crayon-st\">RETURN</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ret_den</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e1d3803600574-13\"><span class=\"crayon-st\">END</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0025 seconds] -->\r\n<p>Y点的分子:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f288f58e1da821540007\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nCREATE DEFINER = `root`@`localhost` FUNCTION `y_numer`(`numer` int,`denom` int)\r\n RETURNS int(11)\r\nBEGIN\r\n\tDECLARE num INT;\r\n\tDECLARE den INT;\r\n\tSET num := x_numer(numer, denom);\r\n\tSET den := x_denom(numer, denom);\r\n\tWHILE den &lt; denom DO\r\n\t\tSET num := num*2;\r\n\t\tSET den := den*2;\r\n\tEND WHILE;\r\n\tSET num := (numer - num);\r\n\tWHILE floor(num/2) = num/2 DO\r\n\t\tSET num := num/2;\r\n\t\tSET den := den/2;\r\n\tEND WHILE;\r\n\tRETURN num;\r\nEND;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f288f58e1da821540007-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e1da821540007-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e1da821540007-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e1da821540007-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e1da821540007-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e1da821540007-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e1da821540007-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e1da821540007-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e1da821540007-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e1da821540007-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e1da821540007-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e1da821540007-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e1da821540007-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e1da821540007-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e1da821540007-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e1da821540007-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e1da821540007-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e1da821540007-18\">18</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f288f58e1da821540007-1\"><span class=\"crayon-e\">CREATE </span><span class=\"crayon-v\">DEFINER</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">@</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">localhost</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">FUNCTION</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">y_numer</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">numer</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">,</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">denom</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e1da821540007-2\"><span class=\"crayon-h\"> </span><span class=\"crayon-e\">RETURNS </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e1da821540007-3\"><span class=\"crayon-e\">BEGIN</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e1da821540007-4\"><span class=\"crayon-e\">\t</span><span class=\"crayon-r\">DECLARE</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">num </span><span class=\"crayon-t\">INT</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e1da821540007-5\"><span class=\"crayon-h\">\t</span><span class=\"crayon-r\">DECLARE</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">den </span><span class=\"crayon-t\">INT</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e1da821540007-6\"><span class=\"crayon-h\">\t</span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">num</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">x_numer</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">numer</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">denom</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e1da821540007-7\"><span class=\"crayon-h\">\t</span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">den</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">x_denom</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">numer</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">denom</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e1da821540007-8\"><span class=\"crayon-h\">\t</span><span class=\"crayon-st\">WHILE</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">den</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">denom </span><span class=\"crayon-st\">DO</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e1da821540007-9\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">num</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">num*</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e1da821540007-10\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">den</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">den*</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e1da821540007-11\"><span class=\"crayon-h\">\t</span><span class=\"crayon-st\">END</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">WHILE</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e1da821540007-12\"><span class=\"crayon-h\">\t</span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">num</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">numer</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">num</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e1da821540007-13\"><span class=\"crayon-h\">\t</span><span class=\"crayon-st\">WHILE</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">floor</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">num</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">num</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">DO</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e1da821540007-14\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">num</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">num</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e1da821540007-15\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">den</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">den</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e1da821540007-16\"><span class=\"crayon-h\">\t</span><span class=\"crayon-st\">END</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">WHILE</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e1da821540007-17\"><span class=\"crayon-h\">\t</span><span class=\"crayon-st\">RETURN</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">num</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e1da821540007-18\"><span class=\"crayon-st\">END</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0035 seconds] -->\r\n<p>Y 的分母：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f288f58e1e0646904751\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nCREATE DEFINER = `root`@`localhost` FUNCTION `y_denom`(`numer` int,`denom` int)\r\n RETURNS int(11)\r\nBEGIN\r\n\tDECLARE num INT;\r\n\tDECLARE den INT;\r\n\tSET num := x_numer(numer, denom);\r\n\tSET den := x_denom(numer, denom);\r\n\tWHILE den &lt; denom DO\r\n\t\tSET num := num*2;\r\n\t\tSET den := den*2;\r\n\tEND WHILE;\r\n\tSET num := (numer - num);\r\n\tWHILE floor(num/2) = num/2 DO\r\n\t\tSET num := num/2;\r\n\t\tSET den := den/2;\r\n\tEND WHILE;\r\n\tRETURN den;\r\nEND;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f288f58e1e0646904751-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e1e0646904751-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e1e0646904751-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e1e0646904751-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e1e0646904751-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e1e0646904751-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e1e0646904751-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e1e0646904751-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e1e0646904751-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e1e0646904751-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e1e0646904751-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e1e0646904751-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e1e0646904751-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e1e0646904751-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e1e0646904751-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e1e0646904751-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e1e0646904751-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e1e0646904751-18\">18</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f288f58e1e0646904751-1\"><span class=\"crayon-e\">CREATE </span><span class=\"crayon-v\">DEFINER</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">@</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">localhost</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">FUNCTION</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">y_denom</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">numer</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">,</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">denom</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e1e0646904751-2\"><span class=\"crayon-h\"> </span><span class=\"crayon-e\">RETURNS </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e1e0646904751-3\"><span class=\"crayon-e\">BEGIN</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e1e0646904751-4\"><span class=\"crayon-e\">\t</span><span class=\"crayon-r\">DECLARE</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">num </span><span class=\"crayon-t\">INT</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e1e0646904751-5\"><span class=\"crayon-h\">\t</span><span class=\"crayon-r\">DECLARE</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">den </span><span class=\"crayon-t\">INT</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e1e0646904751-6\"><span class=\"crayon-h\">\t</span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">num</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">x_numer</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">numer</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">denom</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e1e0646904751-7\"><span class=\"crayon-h\">\t</span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">den</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">x_denom</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">numer</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">denom</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e1e0646904751-8\"><span class=\"crayon-h\">\t</span><span class=\"crayon-st\">WHILE</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">den</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">denom </span><span class=\"crayon-st\">DO</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e1e0646904751-9\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">num</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">num*</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e1e0646904751-10\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">den</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">den*</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e1e0646904751-11\"><span class=\"crayon-h\">\t</span><span class=\"crayon-st\">END</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">WHILE</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e1e0646904751-12\"><span class=\"crayon-h\">\t</span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">num</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">numer</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">num</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e1e0646904751-13\"><span class=\"crayon-h\">\t</span><span class=\"crayon-st\">WHILE</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">floor</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">num</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">num</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">DO</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e1e0646904751-14\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">num</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">num</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e1e0646904751-15\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">den</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">den</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e1e0646904751-16\"><span class=\"crayon-h\">\t</span><span class=\"crayon-st\">END</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">WHILE</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e1e0646904751-17\"><span class=\"crayon-h\">\t</span><span class=\"crayon-st\">RETURN</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">den</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e1e0646904751-18\"><span class=\"crayon-st\">END</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0035 seconds] -->\r\n<p>接下来我们来测试下，X与Y是否能解码出来：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f288f58e1e6122012739\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSELECT\r\n\tCONCAT(x_numer (11, 8),'/',x_denom (11, 8)) AS X,\r\n\tCONCAT(y_numer (11, 8),'/',y_denom (11, 8)) AS Y</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f288f58e1e6122012739-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e1e6122012739-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e1e6122012739-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f288f58e1e6122012739-1\"><span class=\"crayon-e\">SELECT</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e1e6122012739-2\"><span class=\"crayon-e\">\t</span><span class=\"crayon-e\">CONCAT</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">x_numer</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'/'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-e\">x_denom</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">AS</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">X</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e1e6122012739-3\"><span class=\"crayon-h\">\t</span><span class=\"crayon-e\">CONCAT</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">y_numer</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'/'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-e\">y_denom</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">AS</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Y</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/bbeb82483ee93ccefe1247f25950d91a.png\" alt=\"result\" width=\"232\" height=\"83\"></p>\n<p>结果与节点1.2的位置为&lt;x=3/4, y=5/8&gt;完全一致。现在我们知道只需要一个分数即可表示平面上的一个点。</p>\n<p>如有已经有分数11/8如何获取该节点的父节点？(如果分子为3，则代表其为根节点)</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f288f58e1ee648902123\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nCREATE DEFINER = `root`@`localhost` FUNCTION `parent_numer`(`numer` int,`denom` int)\r\n RETURNS int(11)\r\nBEGIN\r\n\tDECLARE ret_num INT;\r\n\tDECLARE ret_den INT;\r\n\tIF numer=3 THEN\r\n\t\tRETURN denom/2;\r\n\tEND IF;\r\n\tSET ret_num := (numer-1)/2;\r\n\tSET ret_den := denom/2;\r\n\tWHILE floor((ret_num-1)/4) = (ret_num-1)/4 DO\r\n\t\tSET ret_num := (ret_num+1)/2;\r\n\t\tSET ret_den := ret_den/2;\r\n\tEND WHILE;\r\n\tRETURN ret_num;\r\nEND;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f288f58e1ee648902123-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e1ee648902123-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e1ee648902123-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e1ee648902123-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e1ee648902123-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e1ee648902123-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e1ee648902123-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e1ee648902123-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e1ee648902123-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e1ee648902123-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e1ee648902123-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e1ee648902123-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e1ee648902123-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e1ee648902123-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e1ee648902123-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e1ee648902123-16\">16</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f288f58e1ee648902123-1\"><span class=\"crayon-e\">CREATE </span><span class=\"crayon-v\">DEFINER</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">@</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">localhost</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">FUNCTION</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">parent_numer</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">numer</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">,</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">denom</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e1ee648902123-2\"><span class=\"crayon-h\"> </span><span class=\"crayon-e\">RETURNS </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e1ee648902123-3\"><span class=\"crayon-e\">BEGIN</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e1ee648902123-4\"><span class=\"crayon-e\">\t</span><span class=\"crayon-r\">DECLARE</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ret_num </span><span class=\"crayon-t\">INT</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e1ee648902123-5\"><span class=\"crayon-h\">\t</span><span class=\"crayon-r\">DECLARE</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ret_den </span><span class=\"crayon-t\">INT</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e1ee648902123-6\"><span class=\"crayon-h\">\t</span><span class=\"crayon-st\">IF</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">numer</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">THEN</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e1ee648902123-7\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-st\">RETURN</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">denom</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e1ee648902123-8\"><span class=\"crayon-h\">\t</span><span class=\"crayon-st\">END</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">IF</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e1ee648902123-9\"><span class=\"crayon-h\">\t</span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">ret_num</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">numer</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e1ee648902123-10\"><span class=\"crayon-h\">\t</span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">ret_den</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">denom</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e1ee648902123-11\"><span class=\"crayon-h\">\t</span><span class=\"crayon-st\">WHILE</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">floor</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ret_num</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ret_num</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">4</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">DO</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e1ee648902123-12\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">ret_num</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ret_num</span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e1ee648902123-13\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">ret_den</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ret_den</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e1ee648902123-14\"><span class=\"crayon-h\">\t</span><span class=\"crayon-st\">END</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">WHILE</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e1ee648902123-15\"><span class=\"crayon-h\">\t</span><span class=\"crayon-st\">RETURN</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ret_num</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e1ee648902123-16\"><span class=\"crayon-st\">END</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0031 seconds] -->\r\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f288f58e1f4372748337\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSELECT CONCAT(parent_numer(11,8),'/',parent_denom(11,8)) AS parent</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f288f58e1f4372748337-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f288f58e1f4372748337-1\"><span class=\"crayon-e\">SELECT </span><span class=\"crayon-e\">CONCAT</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">parent_numer</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'/'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-e\">parent_denom</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">AS</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">parent</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>计算当前节点在同级所在的位置：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f288f58e1f9055362038\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nCREATE DEFINER = `root`@`localhost` FUNCTION `parent_denom`(`numer` int,`denom` int)\r\n RETURNS int(11)\r\nBEGIN\r\n\tDECLARE ret_num INT;\r\n\tDECLARE ret_den INT;\r\n\tIF numer=3 THEN\r\n\t\tRETURN NULL;\r\n\tEND IF;\r\n\tSET ret_num := (numer-1)/2;\r\n\tSET ret_den := denom/2;\r\n\tWHILE floor((ret_num-1)/4) = (ret_num-1)/4 DO\r\n\t\tSET ret_num := (ret_num+1)/2;\r\n\t\tSET ret_den := ret_den/2;\r\n\tEND WHILE;\r\n\tRETURN ret_den;\r\nEND;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f288f58e1f9055362038-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e1f9055362038-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e1f9055362038-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e1f9055362038-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e1f9055362038-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e1f9055362038-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e1f9055362038-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e1f9055362038-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e1f9055362038-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e1f9055362038-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e1f9055362038-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e1f9055362038-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e1f9055362038-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e1f9055362038-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e1f9055362038-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e1f9055362038-16\">16</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f288f58e1f9055362038-1\"><span class=\"crayon-e\">CREATE </span><span class=\"crayon-v\">DEFINER</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">@</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">localhost</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">FUNCTION</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">parent_denom</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">numer</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">,</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">denom</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e1f9055362038-2\"><span class=\"crayon-h\"> </span><span class=\"crayon-e\">RETURNS </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e1f9055362038-3\"><span class=\"crayon-e\">BEGIN</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e1f9055362038-4\"><span class=\"crayon-e\">\t</span><span class=\"crayon-r\">DECLARE</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ret_num </span><span class=\"crayon-t\">INT</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e1f9055362038-5\"><span class=\"crayon-h\">\t</span><span class=\"crayon-r\">DECLARE</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ret_den </span><span class=\"crayon-t\">INT</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e1f9055362038-6\"><span class=\"crayon-h\">\t</span><span class=\"crayon-st\">IF</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">numer</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">THEN</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e1f9055362038-7\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-st\">RETURN</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e1f9055362038-8\"><span class=\"crayon-h\">\t</span><span class=\"crayon-st\">END</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">IF</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e1f9055362038-9\"><span class=\"crayon-h\">\t</span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">ret_num</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">numer</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e1f9055362038-10\"><span class=\"crayon-h\">\t</span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">ret_den</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">denom</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e1f9055362038-11\"><span class=\"crayon-h\">\t</span><span class=\"crayon-st\">WHILE</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">floor</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ret_num</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ret_num</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">4</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">DO</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e1f9055362038-12\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">ret_num</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ret_num</span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e1f9055362038-13\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">ret_den</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ret_den</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e1f9055362038-14\"><span class=\"crayon-h\">\t</span><span class=\"crayon-st\">END</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">WHILE</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e1f9055362038-15\"><span class=\"crayon-h\">\t</span><span class=\"crayon-st\">RETURN</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ret_den</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e1f9055362038-16\"><span class=\"crayon-st\">END</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0033 seconds] -->\r\n<p>有了查询父节点的方法及当前节点所在同级中的位置的方法，即可通过这两个的组合，将节点的路径给计算出来。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f288f58e200062426315\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nCREATE DEFINER = `root`@`localhost` FUNCTION `path`(`numer` int,`denom` int)\r\n RETURNS varchar(255)\r\nBEGIN\r\n\tIF numer is NULL THEN\r\n\t\tRETURN '';\r\n\tEND IF;\r\n\tRETURN path(parent_numer(numer, denom),parent_denom(numer, denom))|| ‘.’ || sibling_number(numer, denom);\r\nEND;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f288f58e200062426315-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e200062426315-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e200062426315-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e200062426315-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e200062426315-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e200062426315-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e200062426315-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e200062426315-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f288f58e200062426315-1\"><span class=\"crayon-e\">CREATE </span><span class=\"crayon-v\">DEFINER</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">@</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">localhost</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">FUNCTION</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">path</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">numer</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">,</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">denom</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e200062426315-2\"><span class=\"crayon-h\"> </span><span class=\"crayon-e\">RETURNS </span><span class=\"crayon-e\">varchar</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">255</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e200062426315-3\"><span class=\"crayon-e\">BEGIN</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e200062426315-4\"><span class=\"crayon-e\">\t</span><span class=\"crayon-st\">IF</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">numer </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">THEN</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e200062426315-5\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-st\">RETURN</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">''</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e200062426315-6\"><span class=\"crayon-h\">\t</span><span class=\"crayon-st\">END</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">IF</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e200062426315-7\"><span class=\"crayon-h\">\t</span><span class=\"crayon-st\">RETURN</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">path</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">parent_numer</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">numer</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">denom</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-e\">parent_denom</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">numer</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">denom</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">||</span><span class=\"crayon-h\"> </span>‘<span class=\"crayon-sy\">.</span>’<span class=\"crayon-h\"> </span><span class=\"crayon-o\">||</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sibling_number</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">numer</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">denom</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e200062426315-8\"><span class=\"crayon-st\">END</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0020 seconds] -->\r\n<p>按照以上方法添加后进行测试，返回[Err] 1424 – Recursive stored functions and triggers are not allowed. 即MySQL的自定义函数不支持递归查询。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f288f58e205026809065\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nCREATE DEFINER = `root`@`localhost` FUNCTION `path`(`numer` int,`denom` int)\r\n RETURNS varchar(255)\r\nBEGIN\r\n\tDECLARE numer_temp INT;\r\n\tDECLARE denom_temp INT;\r\n\tDECLARE path_result VARCHAR(255);\r\n\tDECLARE path_temp VARCHAR(255);\r\n\tDECLARE sn VARCHAR(255);\r\n\tSET path_temp := '';\r\n\tWHILE numer IS NOT NULL DO\r\n\t\tIF path_temp = ''\r\n\t\tTHEN\r\n\t\t\tSET path_result := sibling_number(numer, denom);\r\n\t\tELSE\r\n\t\t\tSET path_result := CONCAT(sibling_number(numer, denom),'.',path_temp);\r\n\t\tEND IF;\r\n\t\tSET path_temp := path_result;\r\n\t\tSET numer_temp := parent_numer(numer, denom);\r\n\t\tSET denom_temp := parent_denom(numer, denom);\r\n\t\tSET numer := numer_temp;\r\n\t\tSET denom := denom_temp;\r\n\tEND WHILE;\r\n\tRETURN path_result;\r\nEND;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f288f58e205026809065-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e205026809065-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e205026809065-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e205026809065-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e205026809065-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e205026809065-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e205026809065-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e205026809065-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e205026809065-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e205026809065-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e205026809065-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e205026809065-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e205026809065-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e205026809065-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e205026809065-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e205026809065-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e205026809065-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e205026809065-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e205026809065-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e205026809065-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e205026809065-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e205026809065-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e205026809065-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e205026809065-24\">24</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f288f58e205026809065-1\"><span class=\"crayon-e\">CREATE </span><span class=\"crayon-v\">DEFINER</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">@</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">localhost</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">FUNCTION</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">path</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">numer</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">,</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">denom</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e205026809065-2\"><span class=\"crayon-h\"> </span><span class=\"crayon-e\">RETURNS </span><span class=\"crayon-e\">varchar</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">255</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e205026809065-3\"><span class=\"crayon-e\">BEGIN</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e205026809065-4\"><span class=\"crayon-e\">\t</span><span class=\"crayon-r\">DECLARE</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">numer_temp </span><span class=\"crayon-t\">INT</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e205026809065-5\"><span class=\"crayon-h\">\t</span><span class=\"crayon-r\">DECLARE</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">denom_temp </span><span class=\"crayon-t\">INT</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e205026809065-6\"><span class=\"crayon-h\">\t</span><span class=\"crayon-r\">DECLARE</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">path_result </span><span class=\"crayon-e\">VARCHAR</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">255</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e205026809065-7\"><span class=\"crayon-h\">\t</span><span class=\"crayon-r\">DECLARE</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">path_temp </span><span class=\"crayon-e\">VARCHAR</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">255</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e205026809065-8\"><span class=\"crayon-h\">\t</span><span class=\"crayon-r\">DECLARE</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sn </span><span class=\"crayon-e\">VARCHAR</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">255</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e205026809065-9\"><span class=\"crayon-h\">\t</span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">path_temp</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">''</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e205026809065-10\"><span class=\"crayon-h\">\t</span><span class=\"crayon-st\">WHILE</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">numer </span><span class=\"crayon-st\">IS</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">NOT</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">DO</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e205026809065-11\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-st\">IF</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">path_temp</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">''</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e205026809065-12\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-st\">THEN</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e205026809065-13\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">path_result</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sibling_number</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">numer</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">denom</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e205026809065-14\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-st\">ELSE</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e205026809065-15\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">path_result</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">CONCAT</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">sibling_number</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">numer</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">denom</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'.'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">path_temp</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e205026809065-16\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-st\">END</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">IF</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e205026809065-17\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">path_temp</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">path_result</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e205026809065-18\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">numer_temp</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">parent_numer</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">numer</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">denom</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e205026809065-19\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">denom_temp</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">parent_denom</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">numer</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">denom</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e205026809065-20\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">numer</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">numer_temp</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e205026809065-21\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">denom</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">denom_temp</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e205026809065-22\"><span class=\"crayon-h\">\t</span><span class=\"crayon-st\">END</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">WHILE</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e205026809065-23\"><span class=\"crayon-h\">\t</span><span class=\"crayon-st\">RETURN</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">path_result</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e205026809065-24\"><span class=\"crayon-st\">END</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0045 seconds] -->\r\n<p>SELECT path (11, 8) 的结果为 1.2</p>\n<p>计算节点层级的方法：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f288f58e20b272009946\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nCREATE DEFINER = `root`@`localhost` FUNCTION `node_level`(`numer` int,`denom` int)\r\n RETURNS int(11)\r\nBEGIN\r\n\tDECLARE ret_num INT;\r\n\tDECLARE ret_den INT;\r\n\tDECLARE ret INT;\r\n\tSET ret =1;\r\n\tIF numer=3 THEN\r\n\t\treturn 1;\r\n\tEND IF;\r\n\tWHILE numer!=3 DO\r\n\t\tSET ret_num := parent_numer(numer, denom);\r\n\t\tSET ret_den := parent_denom(numer, denom);\r\n\t\tSET numer := ret_num;\r\n\t\tSET denom := ret_den;\r\n\t\tSET ret := ret + 1;\r\n\tEND WHILE;\r\n\tRETURN ret;\r\nEND;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f288f58e20b272009946-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e20b272009946-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e20b272009946-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e20b272009946-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e20b272009946-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e20b272009946-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e20b272009946-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e20b272009946-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e20b272009946-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e20b272009946-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e20b272009946-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e20b272009946-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e20b272009946-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e20b272009946-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e20b272009946-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e20b272009946-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e20b272009946-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e20b272009946-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e20b272009946-19\">19</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f288f58e20b272009946-1\"><span class=\"crayon-e\">CREATE </span><span class=\"crayon-v\">DEFINER</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">@</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">localhost</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">FUNCTION</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">node_level</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">numer</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">,</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">denom</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e20b272009946-2\"><span class=\"crayon-h\"> </span><span class=\"crayon-e\">RETURNS </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e20b272009946-3\"><span class=\"crayon-e\">BEGIN</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e20b272009946-4\"><span class=\"crayon-e\">\t</span><span class=\"crayon-r\">DECLARE</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ret_num </span><span class=\"crayon-t\">INT</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e20b272009946-5\"><span class=\"crayon-h\">\t</span><span class=\"crayon-r\">DECLARE</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ret_den </span><span class=\"crayon-t\">INT</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e20b272009946-6\"><span class=\"crayon-h\">\t</span><span class=\"crayon-r\">DECLARE</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ret </span><span class=\"crayon-t\">INT</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e20b272009946-7\"><span class=\"crayon-h\">\t</span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">ret</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e20b272009946-8\"><span class=\"crayon-h\">\t</span><span class=\"crayon-st\">IF</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">numer</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">THEN</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e20b272009946-9\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e20b272009946-10\"><span class=\"crayon-h\">\t</span><span class=\"crayon-st\">END</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">IF</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e20b272009946-11\"><span class=\"crayon-h\">\t</span><span class=\"crayon-st\">WHILE</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">numer</span><span class=\"crayon-o\">!=</span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">DO</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e20b272009946-12\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">ret_num</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">parent_numer</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">numer</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">denom</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e20b272009946-13\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">ret_den</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">parent_denom</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">numer</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">denom</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e20b272009946-14\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">numer</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ret_num</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e20b272009946-15\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">denom</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ret_den</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e20b272009946-16\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">ret</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ret</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e20b272009946-17\"><span class=\"crayon-h\">\t</span><span class=\"crayon-st\">END</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">WHILE</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e20b272009946-18\"><span class=\"crayon-h\">\t</span><span class=\"crayon-st\">RETURN</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ret</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e20b272009946-19\"><span class=\"crayon-st\">END</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0034 seconds] -->\r\n<p>我们知道了如何将编码过的节点转成目录形式，如何逆转呢？以下是方法：</p>\n<p>先添加2个辅助函数：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f288f58e211724560976\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nCREATE DEFINER = `root`@`localhost` FUNCTION `child_numer`(`num` int,`den` int,`child` int)\r\n RETURNS int(11)\r\nBEGIN\r\n\tRETURN num * power(2, child) + 3 - power(2, child);\r\nEND;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f288f58e211724560976-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e211724560976-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e211724560976-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e211724560976-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e211724560976-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f288f58e211724560976-1\"><span class=\"crayon-e\">CREATE </span><span class=\"crayon-v\">DEFINER</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">@</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">localhost</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">FUNCTION</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">child_numer</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">num</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">,</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">den</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">,</span><span class=\"crayon-sy\">`</span><span class=\"crayon-r\">child</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e211724560976-2\"><span class=\"crayon-h\"> </span><span class=\"crayon-e\">RETURNS </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e211724560976-3\"><span class=\"crayon-e\">BEGIN</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e211724560976-4\"><span class=\"crayon-e\">\t</span><span class=\"crayon-st\">RETURN</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">num *</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">power</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">child</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">power</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">child</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e211724560976-5\"><span class=\"crayon-st\">END</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0034 seconds] -->\r\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f288f58e219069085162\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nCREATE DEFINER = `root`@`localhost` FUNCTION `child_denom`(`num` int,`den` int,`child` int)\r\n RETURNS int(11)\r\nBEGIN\r\n\tRETURN den*power(2, child);\r\nEND;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f288f58e219069085162-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e219069085162-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e219069085162-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e219069085162-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e219069085162-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f288f58e219069085162-1\"><span class=\"crayon-e\">CREATE </span><span class=\"crayon-v\">DEFINER</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">@</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">localhost</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">FUNCTION</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">child_denom</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">num</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">,</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">den</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">,</span><span class=\"crayon-sy\">`</span><span class=\"crayon-r\">child</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e219069085162-2\"><span class=\"crayon-h\"> </span><span class=\"crayon-e\">RETURNS </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e219069085162-3\"><span class=\"crayon-e\">BEGIN</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e219069085162-4\"><span class=\"crayon-e\">\t</span><span class=\"crayon-st\">RETURN</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">den*</span><span class=\"crayon-e\">power</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">child</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e219069085162-5\"><span class=\"crayon-st\">END</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p>再来编写逆转函数：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f288f58e21f945618614\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nCREATE DEFINER = `root`@`localhost` FUNCTION `path_numer`(`path` varchar(255))\r\n RETURNS int(11)\r\nBEGIN\r\n\tDECLARE num INT;\r\n\tDECLARE den INT;\r\n\tDECLARE postfix VARCHAR(255);\r\n\tDECLARE sibling VARCHAR(255);\r\n\tSET num := 1;\r\n\tSET den := 1;\r\n\tSET postfix := CONCAT(path,'.');\r\n\tWHILE length(postfix) &gt; 1 DO\r\n\t\tSET sibling := SUBSTR(postfix, 1, instr(postfix,'.')-1);\r\n\t\tSET postfix := SUBSTR(postfix, instr(postfix,'.')+1);\r\n\t\tSET num := child_numer(num,den,sibling+0);\r\n\t\tSET den := child_denom(num,den,sibling+0);\r\n\tEND WHILE;\r\n\tRETURN num;\r\nEND;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f288f58e21f945618614-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e21f945618614-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e21f945618614-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e21f945618614-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e21f945618614-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e21f945618614-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e21f945618614-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e21f945618614-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e21f945618614-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e21f945618614-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e21f945618614-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e21f945618614-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e21f945618614-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e21f945618614-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e21f945618614-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e21f945618614-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e21f945618614-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e21f945618614-18\">18</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f288f58e21f945618614-1\"><span class=\"crayon-e\">CREATE </span><span class=\"crayon-v\">DEFINER</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">@</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">localhost</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">FUNCTION</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">path_numer</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">path</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">varchar</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">255</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e21f945618614-2\"><span class=\"crayon-h\"> </span><span class=\"crayon-e\">RETURNS </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e21f945618614-3\"><span class=\"crayon-e\">BEGIN</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e21f945618614-4\"><span class=\"crayon-e\">\t</span><span class=\"crayon-r\">DECLARE</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">num </span><span class=\"crayon-t\">INT</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e21f945618614-5\"><span class=\"crayon-h\">\t</span><span class=\"crayon-r\">DECLARE</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">den </span><span class=\"crayon-t\">INT</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e21f945618614-6\"><span class=\"crayon-h\">\t</span><span class=\"crayon-r\">DECLARE</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">postfix </span><span class=\"crayon-e\">VARCHAR</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">255</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e21f945618614-7\"><span class=\"crayon-h\">\t</span><span class=\"crayon-r\">DECLARE</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sibling </span><span class=\"crayon-e\">VARCHAR</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">255</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e21f945618614-8\"><span class=\"crayon-h\">\t</span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">num</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e21f945618614-9\"><span class=\"crayon-h\">\t</span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">den</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e21f945618614-10\"><span class=\"crayon-h\">\t</span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">postfix</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">CONCAT</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">path</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'.'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e21f945618614-11\"><span class=\"crayon-h\">\t</span><span class=\"crayon-st\">WHILE</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">length</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">postfix</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">DO</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e21f945618614-12\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">sibling</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">SUBSTR</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">postfix</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">instr</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">postfix</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'.'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e21f945618614-13\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">postfix</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">SUBSTR</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">postfix</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">instr</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">postfix</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'.'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e21f945618614-14\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">num</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">child_numer</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">num</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">den</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">sibling</span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e21f945618614-15\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">den</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">child_denom</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">num</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">den</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">sibling</span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e21f945618614-16\"><span class=\"crayon-h\">\t</span><span class=\"crayon-st\">END</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">WHILE</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e21f945618614-17\"><span class=\"crayon-h\">\t</span><span class=\"crayon-st\">RETURN</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">num</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e21f945618614-18\"><span class=\"crayon-st\">END</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0042 seconds] -->\r\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f288f58e225040167140\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nCREATE DEFINER = `root`@`localhost` FUNCTION `path_denom`(`path` varchar(255))\r\n RETURNS int(11)\r\nBEGIN\r\n\tDECLARE num INT;\r\n\tDECLARE den INT;\r\n\tDECLARE postfix VARCHAR(255);\r\n\tDECLARE sibling VARCHAR(255);\r\n\tSET num := 1;\r\n\tSET den := 1;\r\n\tSET postfix := CONCAT(path,'.');\r\n\tWHILE length(postfix) &gt; 1 DO\r\n\t\tSET sibling := SUBSTR(postfix, 1, instr(postfix,'.')-1);\r\n\t\tSET postfix := SUBSTR(postfix, instr(postfix,'.')+1);\r\n\t\tSET num := child_numer(num,den,sibling+0);\r\n\t\tSET den := child_denom(num,den,sibling+0);\r\n\tEND WHILE;\r\n\tRETURN den;\r\nEND;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f288f58e225040167140-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e225040167140-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e225040167140-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e225040167140-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e225040167140-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e225040167140-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e225040167140-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e225040167140-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e225040167140-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e225040167140-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e225040167140-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e225040167140-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e225040167140-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e225040167140-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e225040167140-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e225040167140-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-59f288f58e225040167140-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288f58e225040167140-18\">18</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f288f58e225040167140-1\"><span class=\"crayon-e\">CREATE </span><span class=\"crayon-v\">DEFINER</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">@</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">localhost</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">FUNCTION</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">path_denom</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">path</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">varchar</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">255</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e225040167140-2\"><span class=\"crayon-h\"> </span><span class=\"crayon-e\">RETURNS </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e225040167140-3\"><span class=\"crayon-e\">BEGIN</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e225040167140-4\"><span class=\"crayon-e\">\t</span><span class=\"crayon-r\">DECLARE</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">num </span><span class=\"crayon-t\">INT</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e225040167140-5\"><span class=\"crayon-h\">\t</span><span class=\"crayon-r\">DECLARE</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">den </span><span class=\"crayon-t\">INT</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e225040167140-6\"><span class=\"crayon-h\">\t</span><span class=\"crayon-r\">DECLARE</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">postfix </span><span class=\"crayon-e\">VARCHAR</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">255</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e225040167140-7\"><span class=\"crayon-h\">\t</span><span class=\"crayon-r\">DECLARE</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sibling </span><span class=\"crayon-e\">VARCHAR</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">255</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e225040167140-8\"><span class=\"crayon-h\">\t</span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">num</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e225040167140-9\"><span class=\"crayon-h\">\t</span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">den</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e225040167140-10\"><span class=\"crayon-h\">\t</span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">postfix</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">CONCAT</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">path</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'.'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e225040167140-11\"><span class=\"crayon-h\">\t</span><span class=\"crayon-st\">WHILE</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">length</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">postfix</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">DO</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e225040167140-12\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">sibling</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">SUBSTR</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">postfix</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">instr</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">postfix</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'.'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e225040167140-13\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">postfix</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">SUBSTR</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">postfix</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">instr</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">postfix</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'.'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e225040167140-14\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">num</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">child_numer</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">num</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">den</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">sibling</span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e225040167140-15\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">den</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">child_denom</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">num</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">den</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">sibling</span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e225040167140-16\"><span class=\"crayon-h\">\t</span><span class=\"crayon-st\">END</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">WHILE</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f288f58e225040167140-17\"><span class=\"crayon-h\">\t</span><span class=\"crayon-st\">RETURN</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">den</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288f58e225040167140-18\"><span class=\"crayon-st\">END</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0041 seconds] -->\r\n<p>select CONCAT(path_numer(‘2.1.3′),’/’,path_denom(‘2.1.3’)) 结果为51/64</p>\n<p>参考资料：</p>\n<ul>\n<li>http://www.rampant-books.com/art_vadim_nested_sets_sql_trees.htm</li>\n</ul>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112339\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112339votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112339\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": "  评论", "praise_nums": "1", "url_object_id": "132543f366021bfbe319524538ba0b5d", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/03/4bae6998d00f180d42c7da716e3d0bb2.jpg"], "front_image_path": "full/117976068e2e847f1067d25ea3fa90a3b5a60f3f.jpg", "title": "树形结构数据存储方案（五）：区间嵌套"}
{"create_date": "2017/09/03 ", "url": "http://blog.jobbole.com/112348/", "fav_nums": "  收藏", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://www.howtoforge.com/tutorial/beginners-guide-to-visual-merge-tool-meld-on-linux-part-2/\">Ansh</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-8808-1.html\">Linux中国/geekpi</a>   </div><p>Meld 是 Linux 上功能丰富的可视化比较和合并工具。如果你是第一次接触，你可以进入我们的<a href=\"http://blog.jobbole.com/112344/\">初学者指南</a>，了解该程序的工作原理，如果你已经阅读过或正在使用 Meld 进行基本的比较/合并任务，你将很高兴了解本教程的东西，在本教程中，我们将讨论一些非常有用的技巧，这将让你使用工具的体验更好。</p>\n<p><em>但在我们跳到安装和解释部分之前，值得一提的是，本教程中介绍的所有说明和示例已在 Ubuntu 14.04 上进行了测试，而我们使用的 Meld 版本为 3.14.2</em>。</p>\n<h3 id=\"toc_1\">1、 跳转</h3>\n<p>你可能已经知道（我们也在初学者指南中也提到过这一点），标准滚动不是在使用 Meld 时在更改之间跳转的唯一方法 – 你可以使用向上和向下箭头键轻松地从一个更改跳转到另一个更改位于编辑区域上方的窗格中：</p>\n<p><a href=\"https://www.howtoforge.com/images/beginners-guide-to-visual-merge-tool-meld-on-linux-part-2/big/meld-go-next-prev-9.png\"> <img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/ffe53b7d64bad7dac95f36ba889bc13d.png\" alt=\"Navigating in Meld\"></a></p>\n<p>但是，这需要你将鼠标指针移动到这些箭头，然后再次单击其中一个（取决于你要去哪里 – 向上或向下）。你会很高兴知道，存在另一种更简单的方式来跳转：只需使用鼠标的滚轮即可在鼠标指针位于中央更改栏上时进行滚动。</p>\n<p><a href=\"https://www.howtoforge.com/images/beginners-guide-to-visual-merge-tool-meld-on-linux-part-2/big/meld-center-area-scrolling.png\"> <img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/84810b35573d599d2a5a3ef2d2ee916e.png\" alt=\"The change bar\"></a></p>\n<p>这样，你就可以在视线不离开或者分心的情况下进行跳转，</p>\n<h3 id=\"toc_2\">2、 可以对更改进行的操作</h3>\n<p>看下上一节的最后一个屏幕截图。你知道那些黑箭头做什么吧？默认情况下，它们允许你执行合并/更改操作 – 当没有冲突时进行合并，并在同一行发生冲突时进行更改。</p>\n<p>但是你知道你可以根据需要删除个别的更改么？是的，这是可能的。为此，你需要做的是在处理更改时按下 Shift 键。你会观察到箭头被变成了十字架。</p>\n<p><a href=\"https://www.howtoforge.com/images/beginners-guide-to-visual-merge-tool-meld-on-linux-part-2/big/meld-delete-changes.png\"> <img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/c867a5a2a0153b0a72912ff16ef19151.png\" alt=\"Things you can do with changes\"></a></p>\n<p>只需点击其中任何一个，相应的更改将被删除。</p>\n<p>不仅是删除，你还可以确保冲突的更改不会在合并时更改行。例如，以下是一个冲突变化的例子：</p>\n<p><a href=\"https://www.howtoforge.com/images/beginners-guide-to-visual-merge-tool-meld-on-linux-part-2/big/meld-conflicting-change.png\"> <img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/746a354faaf438fa66001862e1956e1b.png\" alt=\"Delete changes in Meld\"></a></p>\n<p>现在，如果你点击任意两个黑色箭头，箭头指向的行将被改变，并且将变得与其他文件的相应行相似。只要你想这样做，这是没问题的。但是，如果你不想要更改任何行呢？相反，目的是将更改的行在相应行的上方或下方插入到其他文件中。</p>\n<p>我想说的是，例如，在上面的截图中，需要在 “test23” 之上或之下添加 “test 2”，而不是将 “test23” 更改为 “test2”。你会很高兴知道在 Meld 中这是可能的。就像你按下 Shift 键删除注释一样，在这种情况下，你必须按下 Ctrl 键。</p>\n<p>你会观察到当前操作将被更改为插入 – 双箭头图标将确认这一点 。</p>\n<p><a href=\"https://www.howtoforge.com/images/beginners-guide-to-visual-merge-tool-meld-on-linux-part-2/big/meld-ctrl-insert.png\"> <img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/d48a91909a13070aadaac9d3377057ba.png\" alt=\"Change actions\"></a></p>\n<p>从箭头的方向看，此操作可帮助用户将当前更改插入到其他文件中的相应更改 (如所选择的)。</p>\n<h3 id=\"toc_3\">3、 自定义文件在 Meld 的编辑器区域中显示的方式</h3>\n<p>有时候，你希望 Meld 的编辑区域中的文字大小变大（为了更好或更舒适的浏览），或者你希望文本行被包含而不是脱离视觉区域（意味着你不要想使用底部的水平滚动条）。</p>\n<p>Meld 在 <em>Editor</em> 选项卡（<em>Edit-&gt;Preferences-&gt;Editor</em>）的 <em>Preferences</em> 菜单中提供了一些显示和字体相关的自定义选项，你可以进行这些调整：</p>\n<p><a href=\"https://www.howtoforge.com/images/beginners-guide-to-visual-merge-tool-meld-on-linux-part-2/big/meld-editor-tab.png\"> <img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/e338b0cbc7bfbabd22b4ee2d44ff46d7.png\" alt=\"Meld preferences\"></a></p>\n<p>在这里你可以看到，默认情况下，Meld 使用系统定义的字体宽度。只需取消选中 <em>Font</em> 类别下的框，你将有大量的字体类型和大小选项可供选择。</p>\n<p>然后在 <em>Display</em> 部分，你将看到我们正在讨论的所有自定义选项：你可以设置 Tab 宽度、告诉工具是否插入空格而不是 tab、启用/禁用文本换行、使Meld显示行号和空白（在某些情况下非常有用）以及使用语法突出显示。</p>\n<h3 id=\"toc_4\">4、 过滤文本</h3>\n<p>有时候，并不是所有的修改都是对你很重要的。例如，在比较两个 C 编程文件时，你可能不希望 Meld 显示注释中的更改，因为你只想专注于与代码相关的更改。因此，在这种情况下，你可以告诉 Meld 过滤（或忽略）与注释相关的更改。</p>\n<p>例如，这里是 Meld 中的一个比较，其中由工具高亮了注释相关更改：</p>\n<p><a href=\"https://www.howtoforge.com/images/beginners-guide-to-visual-merge-tool-meld-on-linux-part-2/big/meld-changes-with-comments.png\"> <img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/fb371296bbb42b3f6f915ac9b972510b.png\" alt=\"Filter Text in Meld\"></a></p>\n<p>而在这种情况下，Meld 忽略了相同的变化，仅关注与代码相关的变更：</p>\n<p><a href=\"https://www.howtoforge.com/images/beginners-guide-to-visual-merge-tool-meld-on-linux-part-2/big/meld-changes-without-comments.png\"> <img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/90750b2dd9bb246c780ae1b82fced95e.png\" alt=\"Ignore Changes in Meld\"></a></p>\n<p>很酷，不是吗？那么这是怎么回事？为此，我是在 “<em>Edit-&gt;Preferences-&gt;Text Filters</em>” 标签中启用了 “C comments” 文本过滤器：</p>\n<p><a href=\"https://www.howtoforge.com/images/beginners-guide-to-visual-merge-tool-meld-on-linux-part-2/big/meld-text-filters.png\"> <img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/411274b89687a5a801c83b74a4310ac3.png\" alt=\"C-Comments in Meld\"></a></p>\n<p>如你所见，除了 “C comments” 之外，你还可以过滤掉 C++ 注释、脚本注释、引导或所有的空格等。此外，你还可以为你处理的任何特定情况定义自定义文本过滤器。例如，如果你正在处理日志文件，并且不希望 Meld 高亮显示特定模式开头的行中的更改，则可以为该情况定义自定义文本过滤器。</p>\n<p>但是，请记住，要定义一个新的文本过滤器，你需要了解 Python 语言以及如何使用该语言创建正则表达式。</p>\n<h3 id=\"toc_5\">总结</h3>\n<p>这里讨论的所有四个技巧都不是很难理解和使用（当然，除了你想立即创建自定义文本过滤器），一旦你开始使用它们，你会认为他们是真的有好处。这里的关键是要继续练习，否则你学到的任何技巧不久后都会忘记。</p>\n<p>你还知道或者使用其他任何中级 Meld 的贴士和技巧么？如果有的话，欢迎你在下面的评论中分享。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112348\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112348votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112348\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": "  评论", "praise_nums": "1", "url_object_id": "686dfefb107681a80169eabfd8e284a0", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2014/04/e260ae4f5d153b25be87819b25ff0577.jpg"], "front_image_path": "full/6085acc0af4696f5d49164561c6bc4f9b590fc26.jpg", "title": "给中级 Meld 用户的实用技巧"}
{"create_date": "2017/08/30 ", "url": "http://blog.jobbole.com/112300/", "fav_nums": 3, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://cdiggins.github.io/blog/programming-tips.html\">Christopher Diggins</a>   译文出处：<a target=\"_blank\" href=\"https://my.oschina.net/editorial-story/blog/1525762\">开源中国</a>   </div><p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/08/ae1f71aa35785945dbe6af4a8ee36970.jpg\" alt=\"\" width=\"650\" height=\"423\"></p>\n<p>所以，如何写出一手好代码？</p>\n<p>良好的代码更易于阅读、理解、调试和修改，最重要的是它的缺陷也更少。显然，编写良好的代码需要更多的时间，但是从长远来看，它也具有更多的价值，因为这降低了维护的成本，而且具有更好的可重用性。</p>\n<p>事实上，我们可以将好的代码等同为可重用的代码，这也是本篇文章罗列的许多技巧背后的驱动原则。作为一个要实现特定功能的开发者，代码可以实现你的短期目标，但如果没有其他人希望重用它（包括未来的自己），这些代码一定会缺失某些东西。无论它是太复杂，还是太具体，在不同情况下都有很大可能会出错，或者不被其他开发者信任。</p>\n<p>我发现，只要尝试坚持将下面的最佳实践应用于你编写的所有代码（包括你的实验和原型），无论你现在的经验水平如何，都会编写出更好的代码。</p>\n<h2><strong>1. 遵循单一职责原则</strong></h2>\n<p>函数是程序员的工具中最重要的抽象形式。它们能更多地被重复使用，你需要编写的代码就越少，代码也因此变得更可靠。较小的函数遵循<a href=\"https://en.wikipedia.org/wiki/Single_responsibility_principle\" target=\"_blank\" rel=\"nofollow\">单一职责原则</a>更有可能被重复使用。</p>\n<h2><strong>2. 尽量减少共享状态</strong></h2>\n<p>你应该尽量减少函数之间的隐式共享状态，无论它是文件作用域的变量还是对象的成员字段，这有利于明确要求把值作为参数。当能明确地显示函数需要什么才可以产生所需的结果时，代码会变得更容易理解和重用。</p>\n<p>对此的一个推论是，在一个对象中，相对于成员变量，你更应该优先选择静态的无状态变量 (static stateless variables)。</p>\n<h2><strong>3. 将“副作用”局部化</strong></h2>\n<p>理想的副作用（例如：打印到控制台、日志记录、更改全局状态、文件系统操作等）应该被放置到单独的模块中，而不是散布在整个代码里面。函数中的一些“副作用”功能往往违反了单一职责原则。</p>\n<h2><strong>4. 优先使用不变的对象</strong></h2>\n<p>如果一个对象的状态在其构造函数中仅被设置一次，并且从不再次更改，则调试会变得更加容易，因为只要构造正确就能保持有效。这也是降低软件项目复杂性的最简单方法之一。</p>\n<h2><strong>5. 多用接口少用类</strong></h2>\n<p>接收接口的函数（或 C++ 中的模板参数和概念）比在类上运行的函数更具可重用性。</p>\n<h2><strong>6. 对模块应用良好的原则</strong></h2>\n<p>寻找机会将软件项目分解成更小的模块（例如库和应用程序），以促进模块级别的重用。对于模块，应该遵循的一些关键原则是：</p>\n<ol>\n<li>尽可能减少依赖</li>\n<li>每个项目应该有一个明确的职责</li>\n<li>不要重复自身</li>\n</ol>\n<p>你应该努力使你的项目保持小巧和明确。</p>\n<h2><strong>7. 避免继承</strong></h2>\n<p>在面向对象编程中，继承 —— 特别是和虚拟函数结合使用时，在可重用性方面往往是一条死胡同。我很少有成功的使用或编写重载类的库的经历。</p>\n<h2><strong>8. 将测试作为设计和开发的一部分</strong></h2>\n<p>我不是测试驱动开发的坚定分子，但开始编码时先编写测试代码会使得代码十分自然地遵循许多指导原则。这也有助于尽早发现错误。不过要注意避免编写无用的测试，良好的编码实践意味着更高级别的测试（例如单元测试中的集成测试或特征测试）在揭示缺陷方面更有效。</p>\n<h2><strong>9. 优先使用标准库而不是手写的</strong></h2>\n<p>我经常看到<em>更好</em>版本的 <code>std::vector</code> 或 <code>std::string</code>，但这几乎总是浪费时间和精力。一个明显的事实是 —— 你正在为一个新的地方引入 bug，其他开发者也不太可能重用你的代码，因为没有被广泛理解、支持和测试。</p>\n<h2><strong>10. 避免编写新的代码</strong></h2>\n<p>这是每个程序员都应遵循的最重要的教诲：最好的代码就是还没写的代码。你写的代码越多，你将遇到的问题就越多，查找和修复错误就越困难。</p>\n<p>在写一行代码之前先问一问自己，有没有一个工具、函数或者库已经实现了你所需要的功能？你真的需要自己实现这个功能，而不是调用一个已经存在的功能吗？</p>\n<h2><strong>写在最后的话</strong></h2>\n<p>我发现编程是一门与学习艺术或运动非常相似的技能，你通过刻意的练习和从别人的经验中学习会得到更好的结果。不断提升你产出的代码质量有助于你成为更优秀的程序员。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112300\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112300votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112300\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 3 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": "  评论", "praise_nums": "1", "url_object_id": "f92a3bde740456fa4413c08852ffb416", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/08/ae1f71aa35785945dbe6af4a8ee36970.jpg"], "front_image_path": "full/a4a64072434bbc0b2f1faeb985528ab740691ca1.jpg", "title": "30 多年的编码经验浓缩成的 10 条最佳实践"}
{"create_date": "2017/08/30 ", "url": "http://blog.jobbole.com/112303/", "fav_nums": "  收藏", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://www.linux.com/learn/intro-to-linux/2017/8/splitting-and-re-assembling-files-linux\">Carla Schroder</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-8818-1.html\">Linux中国/firmianay</a>   </div><blockquote><p>非常有用的 <code>csplit</code> 命令可以将单个文件分割成多个文件。Carla Schroder 解释说。</p></blockquote>\n<p>Linux 有几个用于分割文件的工具程序。那么你为什么要分割文件呢？一个用例是将大文件分割成更小的尺寸，以便它适用于比较小的存储介质，比如 U 盘。当您遇到 FAT32（最大文件大小为 4GB），且您的文件大于此时，通过 U 盘传输文件也是一个很好的技巧。另一个用例是加速网络文件传输，因为小文件的并行传输通常更快。</p>\n<p>我们将学习如何使用 <code>csplit</code>，<code>split</code> 和 <code>cat</code> 来重新整理文件，然后再将文件合并在一起。这些操作在任何文件类型下都有用：文本、图片、音频文件、ISO 镜像文件等。</p>\n<h3 id=\"toc_1\">使用 csplit 分割文件</h3>\n<p><code>csplit</code> 是这些有趣的小命令中的一个，它永远伴你左右，一旦开始用它就离不开了。<code>csplit</code> 将单个文件分割成多个文件。这个示例演示了最简单的使用方法，它将文件 foo.txt 分为三个文件，以行号 17 和 33 作为分割点：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f2889abf099004685497\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ csplit foo.txt 17 33\r\n2591\r\n3889\r\n2359\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f2889abf099004685497-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889abf099004685497-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f2889abf099004685497-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889abf099004685497-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f2889abf099004685497-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f2889abf099004685497-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">csplit </span><span class=\"crayon-v\">foo</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">17</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">33</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889abf099004685497-2\"><span class=\"crayon-cn\">2591</span></div><div class=\"crayon-line\" id=\"crayon-59f2889abf099004685497-3\"><span class=\"crayon-cn\">3889</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889abf099004685497-4\"><span class=\"crayon-cn\">2359</span></div><div class=\"crayon-line\" id=\"crayon-59f2889abf099004685497-5\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p><code>csplit</code> 在当前目录下创建了三个新文件，并以字节为单位打印出新文件的大小。默认情况下，每个新文件名为 <code>xx_nn</code>：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f2889abf0a2125000040\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ls\r\nxx00\r\nxx01\r\nxx02\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f2889abf0a2125000040-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889abf0a2125000040-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f2889abf0a2125000040-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889abf0a2125000040-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f2889abf0a2125000040-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f2889abf0a2125000040-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ls</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889abf0a2125000040-2\"><span class=\"crayon-e\">xx00</span></div><div class=\"crayon-line\" id=\"crayon-59f2889abf0a2125000040-3\"><span class=\"crayon-e\">xx01</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889abf0a2125000040-4\"><span class=\"crayon-i\">xx02</span></div><div class=\"crayon-line\" id=\"crayon-59f2889abf0a2125000040-5\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>您可以使用 <code>head</code> 命令查看每个新文件的前十行：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f2889abf0a7500086507\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ head xx*\r\n==&gt; xx00 &lt;==\r\nFoo File\r\nby Carla Schroder\r\nFoo text\r\nFoo subheading\r\nMore foo text\r\n==&gt; xx01 &lt;==\r\nFoo text\r\nFoo subheading\r\nMore foo text\r\n==&gt; xx02 &lt;==\r\nFoo text\r\nFoo subheading\r\nMore foo text </textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f2889abf0a7500086507-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889abf0a7500086507-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f2889abf0a7500086507-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889abf0a7500086507-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f2889abf0a7500086507-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889abf0a7500086507-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f2889abf0a7500086507-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889abf0a7500086507-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f2889abf0a7500086507-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889abf0a7500086507-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f2889abf0a7500086507-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889abf0a7500086507-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59f2889abf0a7500086507-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889abf0a7500086507-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59f2889abf0a7500086507-15\">15</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f2889abf0a7500086507-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">head </span><span class=\"crayon-e \">xx*</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889abf0a7500086507-2\"><span class=\"crayon-o\">==</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">xx00</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;=</span><span class=\"crayon-o\">=</span></div><div class=\"crayon-line\" id=\"crayon-59f2889abf0a7500086507-3\"><span class=\"crayon-e\">Foo </span><span class=\"crayon-e\">File</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889abf0a7500086507-4\"><span class=\"crayon-e\">by </span><span class=\"crayon-e\">Carla </span><span class=\"crayon-e\">Schroder</span></div><div class=\"crayon-line\" id=\"crayon-59f2889abf0a7500086507-5\"><span class=\"crayon-e\">Foo </span><span class=\"crayon-e\">text</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889abf0a7500086507-6\"><span class=\"crayon-e\">Foo </span><span class=\"crayon-e\">subheading</span></div><div class=\"crayon-line\" id=\"crayon-59f2889abf0a7500086507-7\"><span class=\"crayon-e\">More </span><span class=\"crayon-e\">foo </span><span class=\"crayon-v\">text</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889abf0a7500086507-8\"><span class=\"crayon-o\">==</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">xx01</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;=</span><span class=\"crayon-o\">=</span></div><div class=\"crayon-line\" id=\"crayon-59f2889abf0a7500086507-9\"><span class=\"crayon-e\">Foo </span><span class=\"crayon-e\">text</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889abf0a7500086507-10\"><span class=\"crayon-e\">Foo </span><span class=\"crayon-e\">subheading</span></div><div class=\"crayon-line\" id=\"crayon-59f2889abf0a7500086507-11\"><span class=\"crayon-e\">More </span><span class=\"crayon-e\">foo </span><span class=\"crayon-v\">text</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889abf0a7500086507-12\"><span class=\"crayon-o\">==</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">xx02</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;=</span><span class=\"crayon-o\">=</span></div><div class=\"crayon-line\" id=\"crayon-59f2889abf0a7500086507-13\"><span class=\"crayon-e\">Foo </span><span class=\"crayon-e\">text</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889abf0a7500086507-14\"><span class=\"crayon-e\">Foo </span><span class=\"crayon-e\">subheading</span></div><div class=\"crayon-line\" id=\"crayon-59f2889abf0a7500086507-15\"><span class=\"crayon-e\">More </span><span class=\"crayon-e\">foo </span><span class=\"crayon-i\">text</span><span class=\"crayon-h\"> </span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p>如果要将文件分割成包含相同行数的多个文件怎么办？可以指定行数，然后将重复次数放在在花括号中。此示例重复分割 4 次，并将剩下的转储到最后一个文件中：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f2889abf0ab904850740\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ csplit foo.txt 5 {4}\r\n57\r\n1488\r\n249\r\n1866\r\n3798\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f2889abf0ab904850740-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889abf0ab904850740-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f2889abf0ab904850740-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889abf0ab904850740-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f2889abf0ab904850740-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889abf0ab904850740-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f2889abf0ab904850740-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f2889abf0ab904850740-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">csplit </span><span class=\"crayon-v\">foo</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889abf0ab904850740-2\"><span class=\"crayon-cn\">57</span></div><div class=\"crayon-line\" id=\"crayon-59f2889abf0ab904850740-3\"><span class=\"crayon-cn\">1488</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889abf0ab904850740-4\"><span class=\"crayon-cn\">249</span></div><div class=\"crayon-line\" id=\"crayon-59f2889abf0ab904850740-5\"><span class=\"crayon-cn\">1866</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889abf0ab904850740-6\"><span class=\"crayon-cn\">3798</span></div><div class=\"crayon-line\" id=\"crayon-59f2889abf0ab904850740-7\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>您可以使用星号通配符来告诉 <code>csplit</code> 尽可能多地重复分割。这听起来很酷，但是如果文件不能等分，则可能会失败（LCTT 译注：低版本的 <code>csplit</code> 不支持此参数）：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f2889abf0ae096001083\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ csplit foo.txt 10 {*}\r\n1545\r\n2115\r\n1848\r\n1901\r\ncsplit: '10': line number out of range on repetition 4\r\n1430\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f2889abf0ae096001083-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889abf0ae096001083-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f2889abf0ae096001083-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889abf0ae096001083-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f2889abf0ae096001083-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889abf0ae096001083-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f2889abf0ae096001083-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889abf0ae096001083-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f2889abf0ae096001083-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">csplit </span><span class=\"crayon-v\">foo</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889abf0ae096001083-2\"><span class=\"crayon-cn\">1545</span></div><div class=\"crayon-line\" id=\"crayon-59f2889abf0ae096001083-3\"><span class=\"crayon-cn\">2115</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889abf0ae096001083-4\"><span class=\"crayon-cn\">1848</span></div><div class=\"crayon-line\" id=\"crayon-59f2889abf0ae096001083-5\"><span class=\"crayon-cn\">1901</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889abf0ae096001083-6\"><span class=\"crayon-v\">csplit</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'10'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">line </span><span class=\"crayon-e\">number </span><span class=\"crayon-e\">out </span><span class=\"crayon-e\">of </span><span class=\"crayon-e\">range </span><span class=\"crayon-e\">on </span><span class=\"crayon-i\">repetition</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span></div><div class=\"crayon-line\" id=\"crayon-59f2889abf0ae096001083-7\"><span class=\"crayon-cn\">1430</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889abf0ae096001083-8\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>默认的行为是删除发生错误时的输出文件。你可以用 <code>-k</code> 选项来解决这个问题，当有错误时，它就不会删除输出文件。另一个行为是每次运行 <code>csplit</code> 时，它将覆盖之前创建的文件，所以你需要使用新的文件名来分别保存它们。使用 <code>--prefix= _prefix_</code> 来设置一个不同的文件前缀：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f2889abf0b2505243025\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ csplit -k --prefix=mine foo.txt 5 {*}  \r\n57\r\n1488\r\n249\r\n1866\r\n993\r\ncsplit: '5': line number out of range on repetition 9\r\n437\r\n\r\n$ ls\r\nmine00\r\nmine01\r\nmine02\r\nmine03 \r\nmine04\r\nmine05\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f2889abf0b2505243025-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889abf0b2505243025-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f2889abf0b2505243025-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889abf0b2505243025-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f2889abf0b2505243025-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889abf0b2505243025-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f2889abf0b2505243025-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889abf0b2505243025-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f2889abf0b2505243025-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889abf0b2505243025-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f2889abf0b2505243025-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889abf0b2505243025-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59f2889abf0b2505243025-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889abf0b2505243025-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59f2889abf0b2505243025-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889abf0b2505243025-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-59f2889abf0b2505243025-17\">17</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f2889abf0b2505243025-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">csplit</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">k</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">prefix</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">mine </span><span class=\"crayon-v\">foo</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889abf0b2505243025-2\"><span class=\"crayon-cn\">57</span></div><div class=\"crayon-line\" id=\"crayon-59f2889abf0b2505243025-3\"><span class=\"crayon-cn\">1488</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889abf0b2505243025-4\"><span class=\"crayon-cn\">249</span></div><div class=\"crayon-line\" id=\"crayon-59f2889abf0b2505243025-5\"><span class=\"crayon-cn\">1866</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889abf0b2505243025-6\"><span class=\"crayon-cn\">993</span></div><div class=\"crayon-line\" id=\"crayon-59f2889abf0b2505243025-7\"><span class=\"crayon-v\">csplit</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'5'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">line </span><span class=\"crayon-e\">number </span><span class=\"crayon-e\">out </span><span class=\"crayon-e\">of </span><span class=\"crayon-e\">range </span><span class=\"crayon-e\">on </span><span class=\"crayon-i\">repetition</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889abf0b2505243025-8\"><span class=\"crayon-cn\">437</span></div><div class=\"crayon-line\" id=\"crayon-59f2889abf0b2505243025-9\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889abf0b2505243025-10\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ls</span></div><div class=\"crayon-line\" id=\"crayon-59f2889abf0b2505243025-11\"><span class=\"crayon-e\">mine00</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889abf0b2505243025-12\"><span class=\"crayon-e\">mine01</span></div><div class=\"crayon-line\" id=\"crayon-59f2889abf0b2505243025-13\"><span class=\"crayon-e\">mine02</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889abf0b2505243025-14\"><span class=\"crayon-e\">mine03 </span></div><div class=\"crayon-line\" id=\"crayon-59f2889abf0b2505243025-15\"><span class=\"crayon-e\">mine04</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889abf0b2505243025-16\"><span class=\"crayon-i\">mine05</span></div><div class=\"crayon-line\" id=\"crayon-59f2889abf0b2505243025-17\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p>选项 <code>-n</code> 可用于改变对文件进行编号的数字位数（默认是 2 位）：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f2889abf0b5481016435\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ csplit -n 3 --prefix=mine foo.txt 5 {4}\r\n57\r\n1488\r\n249\r\n1866\r\n1381\r\n3798\r\n\r\n$ ls\r\nmine000\r\nmine001\r\nmine002\r\nmine003\r\nmine004\r\nmine005\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f2889abf0b5481016435-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889abf0b5481016435-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f2889abf0b5481016435-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889abf0b5481016435-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f2889abf0b5481016435-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889abf0b5481016435-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f2889abf0b5481016435-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889abf0b5481016435-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f2889abf0b5481016435-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889abf0b5481016435-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f2889abf0b5481016435-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889abf0b5481016435-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59f2889abf0b5481016435-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889abf0b5481016435-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59f2889abf0b5481016435-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889abf0b5481016435-16\">16</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f2889abf0b5481016435-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">csplit</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">prefix</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">mine </span><span class=\"crayon-v\">foo</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889abf0b5481016435-2\"><span class=\"crayon-cn\">57</span></div><div class=\"crayon-line\" id=\"crayon-59f2889abf0b5481016435-3\"><span class=\"crayon-cn\">1488</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889abf0b5481016435-4\"><span class=\"crayon-cn\">249</span></div><div class=\"crayon-line\" id=\"crayon-59f2889abf0b5481016435-5\"><span class=\"crayon-cn\">1866</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889abf0b5481016435-6\"><span class=\"crayon-cn\">1381</span></div><div class=\"crayon-line\" id=\"crayon-59f2889abf0b5481016435-7\"><span class=\"crayon-cn\">3798</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889abf0b5481016435-8\"> </div><div class=\"crayon-line\" id=\"crayon-59f2889abf0b5481016435-9\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ls</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889abf0b5481016435-10\"><span class=\"crayon-e\">mine000</span></div><div class=\"crayon-line\" id=\"crayon-59f2889abf0b5481016435-11\"><span class=\"crayon-e\">mine001</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889abf0b5481016435-12\"><span class=\"crayon-e\">mine002</span></div><div class=\"crayon-line\" id=\"crayon-59f2889abf0b5481016435-13\"><span class=\"crayon-e\">mine003</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889abf0b5481016435-14\"><span class=\"crayon-e\">mine004</span></div><div class=\"crayon-line\" id=\"crayon-59f2889abf0b5481016435-15\"><span class=\"crayon-i\">mine005</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889abf0b5481016435-16\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p><code>csplit</code> 中的 “c” 是上下文（context）的意思。这意味着你可以根据任意匹配的方式或者巧妙的正则表达式来分割文件。下面的例子将文件分为两部分。第一个文件在包含第一次出现 “fie” 的前一行处结束，第二个文件则以包含 “fie” 的行开头。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f2889abf0b8097411562\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ csplit foo.txt /fie/ \r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f2889abf0b8097411562-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889abf0b8097411562-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f2889abf0b8097411562-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">csplit </span><span class=\"crayon-v\">foo</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">txt</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">fie</span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889abf0b8097411562-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>在每次出现 “fie” 时分割文件：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f2889abf0bc129500907\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ csplit foo.txt /fie/ {*}\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f2889abf0bc129500907-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889abf0bc129500907-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f2889abf0bc129500907-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">csplit </span><span class=\"crayon-v\">foo</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">txt</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">fie</span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889abf0bc129500907-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>在 “fie” 前五次出现的地方分割文件：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f2889abf0bf637492552\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ csplit foo.txt /fie/ {5}\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f2889abf0bf637492552-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889abf0bf637492552-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f2889abf0bf637492552-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">csplit </span><span class=\"crayon-v\">foo</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">txt</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">fie</span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889abf0bf637492552-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>仅当内容以包含 “fie” 的行开始时才复制，并且省略前面的所有内容：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f2889abf0c2768012339\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ csplit myfile %fie% \r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f2889abf0c2768012339-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889abf0c2768012339-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f2889abf0c2768012339-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">csplit </span><span class=\"crayon-v\">myfile</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-v\">fie</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889abf0c2768012339-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p></p>\n<h3 id=\"toc_2\">将文件分割成不同大小</h3>\n<p><code>split</code> 与 <code>csplit</code> 类似。它将文件分割成特定的大小，当您将大文件分割成小的多媒体文件或者使用网络传送时，这就非常棒了。默认的大小为 1000 行：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f2889abf0c5591485767\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ split foo.mv\r\n$ ls -hl\r\n266K Aug 21 16:58 xaa\r\n267K Aug 21 16:58 xab\r\n315K Aug 21 16:58 xac\r\n[...]\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f2889abf0c5591485767-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889abf0c5591485767-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f2889abf0c5591485767-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889abf0c5591485767-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f2889abf0c5591485767-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889abf0c5591485767-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f2889abf0c5591485767-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f2889abf0c5591485767-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">split </span><span class=\"crayon-v\">foo</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">mv</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889abf0c5591485767-2\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ls</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">hl</span></div><div class=\"crayon-line\" id=\"crayon-59f2889abf0c5591485767-3\"><span class=\"crayon-cn\">266K</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Aug</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">21</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">16</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">58</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">xaa</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889abf0c5591485767-4\"><span class=\"crayon-cn\">267K</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Aug</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">21</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">16</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">58</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">xab</span></div><div class=\"crayon-line\" id=\"crayon-59f2889abf0c5591485767-5\"><span class=\"crayon-cn\">315K</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Aug</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">21</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">16</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">58</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">xac</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889abf0c5591485767-6\"><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-59f2889abf0c5591485767-7\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0020 seconds] -->\r\n<p>它们分割出来的大小相似，但你可以指定任何你想要的大小。这个例子中是 20M 字节：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f2889abf0c8140095782\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ split -b 20M foo.mv\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f2889abf0c8140095782-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889abf0c8140095782-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f2889abf0c8140095782-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">split</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">b</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20M</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">foo</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">mv</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889abf0c8140095782-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>尺寸单位缩写为 K，M，G，T，P，E，Z，Y（1024 的幂）或者 KB，MB，GB 等等（1000 的幂）。</p>\n<p>为文件名选择你自己的前缀和后缀：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f2889abf0cc449102726\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ split -a 3 --numeric-suffixes=9 --additional-suffix=mine foo.mv SB\r\n240K Aug 21 17:44 SB009mine\r\n214K Aug 21 17:44 SB010mine\r\n220K Aug 21 17:44 SB011mine\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f2889abf0cc449102726-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889abf0cc449102726-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f2889abf0cc449102726-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889abf0cc449102726-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f2889abf0cc449102726-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f2889abf0cc449102726-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">split</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">numeric</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">suffixes</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">9</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">additional</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">suffix</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">mine </span><span class=\"crayon-v\">foo</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">mv </span><span class=\"crayon-i\">SB</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889abf0cc449102726-2\"><span class=\"crayon-cn\">240K</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Aug</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">21</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">17</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">44</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">SB009mine</span></div><div class=\"crayon-line\" id=\"crayon-59f2889abf0cc449102726-3\"><span class=\"crayon-cn\">214K</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Aug</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">21</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">17</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">44</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">SB010mine</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889abf0cc449102726-4\"><span class=\"crayon-cn\">220K</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Aug</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">21</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">17</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">44</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">SB011mine</span></div><div class=\"crayon-line\" id=\"crayon-59f2889abf0cc449102726-5\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0016 seconds] -->\r\n<p><code>-a</code> 选项控制编号的数字位置。<code>--numeric-suffixes</code> 设置编号的开始值。默认前缀为 <code>x</code>，你也可以通过在文件名后输入它来设置一个不同的前缀。</p>\n<h3 id=\"toc_3\">将分割后的文件合并</h3>\n<p>你可能想在某个时候重组你的文件。常用的 <code>cat</code> 命令就用在这里：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f2889abf0cf496893052\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ cat SB0* &gt; foo2.txt\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f2889abf0cf496893052-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889abf0cf496893052-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f2889abf0cf496893052-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">cat </span><span class=\"crayon-e \">SB0*</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">foo2</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889abf0cf496893052-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>示例中的星号通配符将匹配到所有以 SB0 开头的文件，这可能不会得到您想要的结果。您可以使用问号通配符进行更精确的匹配，每个字符使用一个问号：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f2889abf0d2257939447\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ cat SB0?????? &gt; foo2.txt\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f2889abf0d2257939447-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889abf0d2257939447-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f2889abf0d2257939447-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">cat </span><span class=\"crayon-v\">SB0</span><span class=\"crayon-sy\">?</span><span class=\"crayon-sy\">?</span><span class=\"crayon-sy\">?</span><span class=\"crayon-sy\">?</span><span class=\"crayon-sy\">?</span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">foo2</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889abf0d2257939447-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>和往常一样，请查阅相关的手册和信息页面以获取完整的命令选项。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112303\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112303votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112303\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": "  评论", "praise_nums": "1", "url_object_id": "af10c79270ccf4bcd277e6f2be193417", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2016/11/59d49abe8909a122bc2c9aa43b71e3bb.png"], "front_image_path": "full/d3d1a5ad957de059084690efae6fdfaa3527e1c3.jpg", "title": "在 Linux 中分割和重组文件"}
{"create_date": "2017/09/01 ", "url": "http://blog.jobbole.com/112327/", "fav_nums": 2, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://my.oschina.net/editorial-story/blog/1527138\">开源中国编辑部</a>   </div><p>对于系统桌面，有人追求美观，有人追求简洁，有人追求实用，也有人就是喜欢默认的设置效果。接下来，推荐几款适用于 Linux 的开源桌面个性化工具，代码敲累了的时候，换换主题，说不定也能让你更放松。</p>\n<h3><a href=\"https://github.com/horst3180/arc-theme\" target=\"_blank\" rel=\"nofollow\">1、Arc</a></h3>\n<p>一款主打透明元素的扁平化主题，支持基于 GTK 3 和 GTK 2 的桌面环境，如 GNOME、Unity、Budgie、Pantheon、Xfce、MATE 等，内含 3 种不同的风格可供选择。</p>\n<p>Arc</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/e41e73992d65b40d4d856f068e9d8d62.png\" width=\"728\" height=\"155\"></p>\n<p>Arc-Darker</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/fbc7c1532ebf62c705c2e98744257133.png\" width=\"728\" height=\"155\"></p>\n<p>Arc-Dark</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/5abc27be17959c64e32449fcaa25b5c6.png\" width=\"728\" height=\"155\"></p>\n<h3><a href=\"http://github.com/anmoljagetia/Flatabulous\" target=\"_blank\" rel=\"nofollow\">2、<strong>Flatabulous</strong></a></h3>\n<p>一款扁平化主题，适用于 Ubuntu 以及其它基于 Gnome 的 Linux 系统。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/09/6522206a9c1be1c6ef3506fbe28c85cc.png\" width=\"1366\" height=\"768\"></p>\n<h3><a href=\"https://github.com/adapta-project/adapta-gtk-theme\" target=\"_blank\" rel=\"nofollow\">3、Adapta</a></h3>\n<p>一款自适应的 Gtk+ 主题，遵循当前比较流行的 Material Design 设计风格。支持 GNOME、Budgie、Cinnamon、Unity、XFce4、Mate、LXDE 等桌面环境。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/1874fddce2d1634263d80adbfa498f14.png\" width=\"800\" height=\"800\"></p>\n<h3><a href=\"https://github.com/numixproject/numix-gtk-theme\" target=\"_blank\" rel=\"nofollow\">4、Numix</a></h3>\n<p>一款结合了明暗元素的现代化平面主题，支持 Gnome、Unity、XFCE 和 Openbox 。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/9ec4cee40a68985bdd7163f64eefcfe7.png\" width=\"1406\" height=\"1600\"></p>\n<h3><a href=\"https://krourke.org/projects/art/la-capitaine-icon-theme\" target=\"_blank\" rel=\"nofollow\">5、La Capitaine</a></h3>\n<p>这是一个图标主题，目标是适配大部分桌面环境。里面的图标受 macOS 和 Material Design 启发，主要是使用视觉上容易吸引眼球的渐变、阴影和简单的几何形式元素。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/09/4700d547b2265628ab762d53a2d5a658.png\" width=\"1500\" height=\"2000\"></p>\n<h3><a href=\"https://github.com/PapirusDevelopmentTeam/papirus-icon-theme\" target=\"_blank\" rel=\"nofollow\">6、Papirus</a></h3>\n<p>基于非开源的 <a href=\"https://snwh.org/paper\" target=\"_blank\" rel=\"nofollow\">Paper</a> 主题，并有一些额外的特性（如硬编码托盘支持，kde 颜色方案支持，libreoffice 图标主题，filezilla 主题，smplayer 主题…）以及其它的修改的 SVG 图标主题。有 Papirus 、Papirus Dark、Papirus Light、ePapirus 四种风格可供选择。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/6bd12b2013111e5a71af592a691fba2c.png\" width=\"370\" height=\"364\"></p>\n<h3><a href=\"https://github.com/bil-elmoussaoui/Hardcode-Tray\" target=\"_blank\" rel=\"nofollow\">7、Hardcode Tray</a></h3>\n<p>这是一个托盘脚本，通过在 Linux 中自动探测你的默认主题，正确的图标尺寸，硬编码内嵌图标应用，以及正确的状态图标，来修正硬编码的托盘图标。它还支持上面提到的 Numix 和 Papirus 。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/c5ddb413c4c4f2777d2a8a12475a112a.png\" width=\"727\" height=\"87\"></p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/09/e1c69452a123294ca53f1fa4f690b46e.png\" width=\"718\" height=\"195\"></p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112327\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112327votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112327\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": "  评论", "praise_nums": "1", "url_object_id": "fc306e48d67be0a615adc28402f72695", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2016/11/59d49abe8909a122bc2c9aa43b71e3bb.png"], "front_image_path": "full/d3d1a5ad957de059084690efae6fdfaa3527e1c3.jpg", "title": "颜值即正义，超好用的 Linux 桌面个性化工具推荐"}
{"create_date": "2017/08/31 ", "url": "http://blog.jobbole.com/112312/", "fav_nums": 1, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://www.biaodianfu.com/path-enumeration.html\">标点符</a>   </div><p>前一篇文章介绍了比较简单的<a href=\"http://blog.jobbole.com/112309/\">邻接列表模式</a>，物化路径其实更加容易理解，其实就是在创建节点时，将节点的完整路径进行记录。以下图为例：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/91ae30cffcfe91c0ebd3e6091f970295.jpg\" alt=\"tree\" width=\"231\" height=\"259\"></p>\n<p>按照Path Enumeration 进行存储后的结果如下：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/d1a1da59ee04bd6479425f929f1da5d0.png\" alt=\"Path-Enumeration\" width=\"252\" height=\"221\"></p>\n<p>此种方案借助了unix文件目录的思想，主要时以空间换时间。</p>\n<p>查询某一节点下的所有子节点:（以Fruit为例）</p>\n<div id=\"crayon-59a6b897c213a519548061-1\"></div>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33e740887d592937267\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSET @path = (SELECT path FROM pathTree WHERE node_name = 'Fruit');\r\nSELECT * FROM pathTree WHERE path like CONCAT(@path,'/%');</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33e740887d592937267-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e740887d592937267-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33e740887d592937267-1\"><span class=\"crayon-i\">SET</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">path</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">SELECT </span><span class=\"crayon-e\">path </span><span class=\"crayon-e\">FROM </span><span class=\"crayon-e\">pathTree </span><span class=\"crayon-e\">WHERE </span><span class=\"crayon-v\">node_name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Fruit'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e740887d592937267-2\"><span class=\"crayon-e \">SELECT *</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">FROM </span><span class=\"crayon-e\">pathTree </span><span class=\"crayon-e\">WHERE </span><span class=\"crayon-e\">path </span><span class=\"crayon-e\">like </span><span class=\"crayon-e\">CONCAT</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">path</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'/%'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p>如何查询直属子节点？需要采用MySQL的正则表达式查询：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33e740888a368564506\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSET @path = (SELECT path FROM pathTree WHERE node_name = 'Fruit');\r\nSELECT * FROM pathTree WHERE path REGEXP CONCAT(@path,'/','[0-9]$');</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33e740888a368564506-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e740888a368564506-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33e740888a368564506-1\"><span class=\"crayon-i\">SET</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">path</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">SELECT </span><span class=\"crayon-e\">path </span><span class=\"crayon-e\">FROM </span><span class=\"crayon-e\">pathTree </span><span class=\"crayon-e\">WHERE </span><span class=\"crayon-v\">node_name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Fruit'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e740888a368564506-2\"><span class=\"crayon-e \">SELECT *</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">FROM </span><span class=\"crayon-e\">pathTree </span><span class=\"crayon-e\">WHERE </span><span class=\"crayon-e\">path </span><span class=\"crayon-e\">REGEXP </span><span class=\"crayon-e\">CONCAT</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">path</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'/'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'[0-9]$'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p>查询任意节点的所有上级：（以Yellow为例）：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33e7408891082739572\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSET @path = (SELECT path FROM pathTree WHERE node_name = 'Yellow');\r\nSELECT * FROM pathTree WHERE @path LIKE CONCAT(path, '%') AND path &lt;&gt; @path;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33e7408891082739572-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e7408891082739572-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33e7408891082739572-1\"><span class=\"crayon-i\">SET</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">path</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">SELECT </span><span class=\"crayon-e\">path </span><span class=\"crayon-e\">FROM </span><span class=\"crayon-e\">pathTree </span><span class=\"crayon-e\">WHERE </span><span class=\"crayon-v\">node_name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Yellow'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e7408891082739572-2\"><span class=\"crayon-e \">SELECT *</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">FROM </span><span class=\"crayon-e\">pathTree </span><span class=\"crayon-i\">WHERE</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">path </span><span class=\"crayon-e\">LIKE </span><span class=\"crayon-e\">CONCAT</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">path</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'%'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">AND</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">path</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">path</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0016 seconds] -->\r\n<p>插入新增数据：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33e7408897982455757\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSET @parent_path = ( SELECT path FROM pathTree WHERE node_name = 'Fruit');\r\nINSERT INTO pathtree (path,node_name) VALUES (CONCAT(@parent_path,'/',LAST_INSERT_ID()+1),'White')</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33e7408897982455757-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33e7408897982455757-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33e7408897982455757-1\"><span class=\"crayon-i\">SET</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">parent_path</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">SELECT </span><span class=\"crayon-e\">path </span><span class=\"crayon-e\">FROM </span><span class=\"crayon-e\">pathTree </span><span class=\"crayon-e\">WHERE </span><span class=\"crayon-v\">node_name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Fruit'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33e7408897982455757-2\"><span class=\"crayon-e\">INSERT </span><span class=\"crayon-e\">INTO </span><span class=\"crayon-e\">pathtree</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">path</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">node_name</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">VALUES</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">CONCAT</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">parent_path</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'/'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-e\">LAST_INSERT_ID</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'White'</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p>此方案的缺点是树的层级太深有可能会超过PATH字段的长度，所以其能支持的最大深度并非无限的。</p>\n<p>如果层级数量是确定的，可以再将所有的列都展开，如下图，比较试用于类似行政区划、生物分类法（界、门、纲、目、科、属、种）这些层级确定的内容。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/08/579dacd5167f484176573e5603f755c3.png\" alt=\"Multiple-lineage-columns\" width=\"609\" height=\"239\"></p>\n<p>参考文章：</p>\n<ul>\n<li>https://communities.bmc.com/docs/DOC-9902</li>\n</ul>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112312\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112312votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112312\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": 1, "praise_nums": "1", "url_object_id": "16321b6a38d1ee394e7cc3ea90594078", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2012/03/database-logo.png"], "front_image_path": "full/f42d1238aa0f889b8988c70dd7481c7a4bd3b456.jpg", "title": "树形结构数据存储方案（二）： 物化路径"}
{"create_date": "2017/08/25 ", "url": "http://blog.jobbole.com/112268/", "fav_nums": 1, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://www.phoronix.com/scan.php?page=news_item&amp;px=Solaris-2017-Look-Back\">Michael Larabel</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-8803-1.html\">Linux中国/MonkeyDEcho</a>   </div><p>现在看来，Oracle 公司正在通过取消 Solaris 12 而终止 Solaris 的功能开发，这里我们要回顾下多年来在 Phoronix 上最受欢迎的 Solaris 重大事件和新闻。</p>\n<p>这里有许多关于 Solaris 的有趣／重要的回忆。<img src=\"../../upload/2017_08/170823192136556.jpg\" alt=\"\"></p>\n<p style=\"text-align: center\"><img class=\"alignnone size-full wp-image-112270\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/93e6343916d6c39535b8e3d60d32842b.jpg\" alt=\"170823192136556\"></p>\n<p>在 Sun Microsystems 时期，我真的对 Solaris 很感兴趣。在 Phoronix 上我们一直重点关注 Linux 的同时，经常也有 Solaris 的文章出现。 Solaris 玩起来很有趣，OpenSolaris／SXCE 是伟大的产物，我将 Phoronix 测试套件移植到 Solaris 上，我们与 Sun Microsystems 人员有密切的联系，也出现在 Sun 的许多活动中。</p>\n<p style=\"text-align: center\"><img class=\"alignnone size-full wp-image-112271\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/1cd3d84a19148210405ea50c5cb700d6.jpg\" alt=\"170823192136551\"></p>\n<p style=\"text-align: center\"><em>在那些日子里 Sun 有一些相当独特的活动…</em></p>\n<p>不幸的是，自从 Oracle 公司收购了 Sun 公司， Solaris 就如坠入深渊一样。最大的打击大概是 Oracle 结束了 OpenSolaris ，并将所有 Solaris 的工作转移到专有模式…<img src=\"../../upload/2017_08/170823192136552.jpg\" alt=\"\"></p>\n<p style=\"text-align: center\"><img class=\"alignnone size-full wp-image-112272\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/8f35c72754a3ff32e7d0a0bbc13f3000.jpg\" alt=\"170823192136552\"></p>\n<p>在 Sun 时代的 Solaris 有很多美好的回忆，所以 Oracle 在其计划中抹去了 Solaris 12 之后，我经常在 Phoronix 上翻回去看一些之前 Solaris 的经典文章，期待着能从 Oracle 听到 “Solaris 11” 下一代的消息，重启 Solaris 项目的开发。</p>\n<p style=\"text-align: center\"><img src=\"../../upload/2017_08/170823192136553.jpg\" alt=\"\"><img class=\"alignnone size-full wp-image-112273\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/afbcf1ab8db3a502f127d7208a1ffd08.jpg\" alt=\"170823192136553\"></p>\n<p>虽然在后 Solaris 的世界中，看到 Oracle 对 ZFS 所做的事情以及他们在基于 RHEL 的 Oracle Enterprise Linux 上下的重注将会很有趣，但时间将会告诉我们一切。</p>\n<p style=\"text-align: center\"><img src=\"../../upload/2017_08/170823192136554.jpg\" alt=\"\"><img class=\"alignnone size-full wp-image-112274\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/8fef927af40aa7f7db5a27dc2d0be68c.jpg\" alt=\"170823192136554\"></p>\n<p>无论如何，这是回顾自 2004 年以来我们最受欢迎的 Solaris 文章：</p>\n<h4 id=\"toc_1\">2016/12/1 Oracle 或许会罐藏 Solaris</h4>\n<p>Oracle 可能正在拔掉 Solaris 的电源插头，据一些新的传闻说。</p>\n<h4 id=\"toc_2\">2013/6/9 OpenSXCE 2013.05 拯救 Solaris 社区</h4>\n<p>作为 Solaris 社区版的社区复兴，OpenSXCE 2013.05 出现在网上。</p>\n<h4 id=\"toc_3\">2013/2/2 Solaris 12 可能最终带来 Radeon KMS 驱动程序</h4>\n<p>看起来，Oracle 可能正在准备发布自己的 AMD Radeon 内核模式设置（KMS）驱动程序，并引入到 Oracle Solaris 12 中。</p>\n<h4 id=\"toc_4\">2012/10/4 Oracle Solaris 11.1 提供 300 个以上增强功能</h4>\n<p>Oracle昨天在旧金山的 Oracle OpenWorld 会议上发布了 Solaris 11.1 。</p>\n<p style=\"text-align: center\"><img src=\"../../upload/2017_08/170823192136555.jpg\" alt=\"\"><img class=\"alignnone size-full wp-image-112275\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/4a1407530d4f2086a8ce08b899773549.jpg\" alt=\"170823192136555\"></p>\n<h4 id=\"toc_5\">2012/1/9 Oracle 尚未澄清 Solaris 11 内核来源</h4>\n<p>一个月前，Phoronix 是第一个注意到 Solaris 11 内核源代码通过 Torrent 站点泄漏到网上的信息。一个月后，甲骨文还没有正式评论这个情况。</p>\n<h4 id=\"toc_6\">2011/12/19 Oracle Solaris 11 内核源代码泄漏</h4>\n<p>似乎 Solaris 11的内核源代码在过去的一个周末被泄露到了网上。</p>\n<h4 id=\"toc_7\">2011/8/25 对于 BSD，Solaris 的 GPU 驱动程序的悲惨状态</h4>\n<p>昨天在邮件列表上出现了关于干掉所有旧式 Mesa 驱动程序的讨论。这些旧驱动程序没有被积极维护，支持复古的图形处理器，并且没有更新支持新的 Mesa 功能。英特尔和其他开发人员正在努力清理 Mesa 核心，以将来增强这一开源图形库。这种清理 Mesa，对 BSD 和 Solaris 用户也有一些影响。</p>\n<h4 id=\"toc_8\">2010/8/13 告别 OpenSolaris，Oracle 刚刚把它干掉</h4>\n<p>Oracle 终于宣布了他们对 Solaris 操作系统和 OpenSolaris 平台的计划，而且不是好消息。OpenSolaris 将实际死亡，未来将不会有更多的 Solaris 版本出现 – 包括长期延期的 2010 年版本。Solaris 仍然会继续存在，现在 Oracle 正在忙于明年发布的 Solaris 11，但仅在 Oracle 的企业版之后才会发布 “Solaris 11 Express” 作为 OpenSolaris 的类似产品。</p>\n<h4 id=\"toc_9\">2010/2/22 Oracle 仍然要对 OpenSolaris 进行更改</h4>\n<p>自从 Oracle 完成对 Sun Microsystems 的收购以来，已经有了许多变化，这个 Sun 最初支持的开源项目现在已经不再被 Oracle 支持，并且对其余的开源产品进行了重大改变。 Oracle 表现出并不太开放的意图的开源项目之一是 OpenSolaris 。 Solaris Express 社区版（SXCE）上个月已经关闭，并且也没有预计 3 月份发布的下一个 OpenSolaris 版本（OpenSolaris 2010.03）的信息流出。</p>\n<h4 id=\"toc_10\">2007/9/10 Solaris Express 社区版 Build 72</h4>\n<p>对于那些想要在 “印第安纳项目” 发布之前尝试 OpenSolaris 软件中最新最好的软件的人来说，现在可以使用 Solaris Express 社区版 Build 72。Solaris Express 社区版（SXCE）Build 72 可以从 OpenSolaris.org 下载。同时，预计将在下个月推出 Sun 的 “印第安纳项目” 项目的预览版。</p>\n<h4 id=\"toc_11\">2007/9/6 ATI R500/600 驱动要支持 Solaris 了?</h4>\n<p>虽然没有可用于 Solaris/OpenSolaris 或 * BSD 的 ATI fglrx 驱动程序，现在 AMD 将向 X.Org 开发人员和开源驱动程序交付规范，但对于任何使用 ATI 的 Radeon X1000 “R500” 或者 HD 2000“R600” 系列的 Solaris 用户来说，这肯定是有希望的。将于下周发布的开源 X.Org 驱动程序距离成熟尚远，但应该能够相对容易地移植到使用 X.Org 的 Solaris 和其他操作系统上。 AMD 今天宣布的针对的是 Linux 社区，但它也可以帮助使用 ATI 硬件的 Solaris/OpenSolaris 用户。特别是随着印第安纳项目的即将推出，开源 R500/600 驱动程序移植就只是时间问题了。</p>\n<h4 id=\"toc_12\">2007/9/5 Solaris Express 社区版 Build 71</h4>\n<p>Solaris Express 社区版（SXCE）现已推出 Build 71。您可以在 OpenSolaris.org 中找到有关 Solaris Express 社区版 Build 71 的更多信息。另外，在 Linux 内核峰会上，AMD 将提供 GPU 规格的消息，由此产生的 X.Org 驱动程序将来可能会导致 ATI 硬件上 Solaris/OpenSolaris 有所改善。</p>\n<h4 id=\"toc_13\">2007/8/27 Linux 的 Solaris 容器</h4>\n<p>Sun Microsystems 已经宣布，他们将很快支持适用于 Linux 应用程序的 Solaris 容器。这样可以在 Solaris 下运行 Linux 应用程序，而无需对二进制包进行任何修改。适用于 Linux 的 Solaris 容器将允许从 Linux 到 Solaris 的平滑迁移，协助跨平台开发以及其他优势。当该支持到来时，这个时代就“快到了”。</p>\n<h4 id=\"toc_14\">2007/8/23 OpenSolaris 开发者峰会</h4>\n<p>今天早些时候在 OpenSolaris 论坛上发布了第一次 OpenSolaris 开发人员峰会的消息。这次峰会将在十月份在加州大学圣克鲁斯分校举行。 Sara Dornsife 将这次峰会描述为“不是与演示文稿或参展商举行会议，而是一个亲自参与的协作工作会议，以计划下一期的印第安纳项目。” 伊恩·默多克（Ian Murdock） 将在这个“印第安纳项目”中进行主题演讲，但除此之外，该计划仍在计划之中。 Phoronix 可能会继续跟踪此事件，您可以在 Solaris 论坛上讨论此次峰会。</p>\n<h4 id=\"toc_15\">2007/8/18 Solaris Express 社区版 Build 70</h4>\n<p>名叫 “Nevada” 的 Solaris Express 社区版 Build 70 (SXCE snv_70) 现在已经发布。有关下载链接的通知可以在 OpenSolaris 论坛中找到。还有公布了其网络存储的 Build 71 版本，包括来自 Qlogic 的光纤通道 HBA 驱动程序的源代码。</p>\n<h4 id=\"toc_16\">2007/8/16 IBM 使用 Sun Solaris 的系统</h4>\n<p>Sun Microsystems 和 IBM正在举行电话会议，他们刚刚宣布，IBM 将开始在服务器上使用 Sun 的 Solaris 操作系统。这些 IBM 服务器包括基于 x86 的服务器系统以及 Blade Center 服务器。官方新闻稿刚刚发布，可以在 sun 新闻室阅读。</p>\n<h4 id=\"toc_17\">2007/8/9 OpenSolaris 不会与 Linux 合并</h4>\n<p>在旧金山的 LinuxWorld 2007 上，Andrew Morton 在主题演讲中表示， OpenSolaris 的关键组件不会出现在 Linux 内核中。事实上，莫顿甚至表示 “非常遗憾 OpenSolaris 活着”。OpenSolaris 的一些关键组件包�� Zones、ZFS 和 DTrace 。虽然印第安纳州项目有可能将这些项目转变为 GPLv3 项目… 更多信息参见 ZDNET。</p>\n<h4 id=\"toc_18\">2007/7/27 Solaris Xen 已经更新</h4>\n<p>已经有一段时间了，Solaris Xen 终于更新了。约翰·莱文（John Levon）表示，这一最新版本基于 Xen 3.0.4 和 Solaris “Nevada” Build 66。这一最新版本的改进包括 PAE 支持、HVM 支持、新的 virt-manager 工具、改进的调试支持以及管理域支持。可以在 Sun 的网站上找到 2007 年 7 月 Solaris Xen 更新的下载。</p>\n<h4 id=\"toc_19\">2007/7/25 Solaris 10 7/07 HW 版本</h4>\n<p>Solaris 10 7/07 HW 版本的文档已经上线。如 Solaris 发行注记中所述，Solaris 10 7/07 仅适用于 SPARC Enterprise M4000-M9000 服务器，并且没有 x86/x64 版本可用。所有平台的最新 Solaris 更新是 Solaris 10 11/06 。您可以在 Phoronix 论坛中讨论 Solaris 7/07。</p>\n<h4 id=\"toc_20\">2007/7/16 来自英特尔的 Solaris 电信服务器</h4>\n<p>今天宣布推出符合 NEBS、ETSI 和 ATCA 合规性的英特尔体系的 Sun Solaris 电信机架服务器和刀片服务器。在这些新的运营商级平台中，英特尔运营商级机架式服务器 TIGW1U 支持 Linux 和 Solaris 10，而 Intel NetStructure MPCBL0050 SBC 也将支持这两种操作系统。今天的新闻稿可以在这里阅读。</p>\n<p>然后是 Solaris 分类中最受欢迎的特色文章：</p>\n<h4 id=\"toc_21\">Ubuntu vs. OpenSolaris vs. FreeBSD 基准测试</h4>\n<p>在过去的几个星期里，我们提供了几篇关于 Ubuntu Linux 性能的深入文章。我们已经开始提供 Ubuntu 7.04 到 8.10 的基准测试，并且发现这款受欢迎的 Linux 发行版的性能随着时间的推移而变慢，随之而来的是 Mac OS X 10.5 对比 Ubuntu 8.10 的基准测试和其他文章。在本文中，我们正在比较 Ubuntu 8.10 的 64 位性能与 OpenSolaris 2008.11 和 FreeBSD 7.1 的最新测试版本。</p>\n<h4 id=\"toc_22\">NVIDIA 的性能：Windows vs. Linux vs. Solaris</h4>\n<p>本周早些时候，我们预览了 Quadro FX1700，它是 NVIDIA 的中端工作站显卡之一，基于 G84GL 内核，而 G84GL 内核又源于消费级 GeForce 8600 系列。该 PCI Express 显卡提供 512MB 的视频内存，具有两个双链路 DVI 连接，并支持 OpenGL 2.1 ，同时保持最大功耗仅为 42 瓦。正如我们在预览文章中提到的，我们将不仅在 Linux 下查看此显卡的性能，还要在 Microsoft Windows 和 Sun 的 Solaris 中测试此工作站解决方案。在今天的这篇文章中，我们正在这样做，因为我们测试了 NVIDIA Quadro FX1700 512MB 与这些操作系统及其各自的二进制显示驱动程序。</p>\n<h4 id=\"toc_23\">FreeBSD 8.0 对比 Linux、OpenSolaris</h4>\n<p>在 FreeBSD 8.0 的稳定版本发布的上周，我们终于可以把它放在测试台上，并用 Phoronix 测试套件进行了全面的了解。我们将 FreeBSD 8.0 的性能与早期的 FreeBSD 7.2 版本以及 Fedora 12 和 Ubuntu 9.10 还有 Sun OS 端的 OpenSolaris 2010.02 b127 快照进行了比较。</p>\n<h4 id=\"toc_24\">Fedora、Debian、FreeBSD、OpenBSD、OpenSolaris 基准测试</h4>\n<p>上周我们发布了第一个 Debian GNU/kFreeBSD 基准测试，将 FreeBSD 内核捆绑在 Debian GNU 用户的 Debian GNU/Linux 上，比较了这款 Debian 系统的 32 位和 64 位性能。 我们现在扩展了这个比较，使许多其他操作系统与 Debian GNU/Linux 和 Debian GNU/kFreeBSD 的 6.0 Squeeze 快照直接进行比较，如 Fedora 12，FreeBSD 7.2，FreeBSD 8.0，OpenBSD 4.6 和 OpenSolaris 2009.06 。</p>\n<h4 id=\"toc_25\">AMD 上海皓龙：Linux vs. OpenSolaris 基准测试</h4>\n<p>1月份，当我们研究了四款皓龙 2384 型号时，我们在 Linux 上发布了关于 AMD 上海皓龙 CPU 的综述。与早期的 AMD 巴塞罗那处理器 Ubuntu Linux 相比，这些 45nm 四核工作站服务器处理器的性能非常好，但是在运行 Sun OpenSolaris 操作系统时，性能如何？今天浏览的是 AMD 双核的基准测试，运行 OpenSolaris 2008.11、Ubuntu 8.10 和即将推出的 Ubuntu 9.04 版本。</p>\n<h4 id=\"toc_26\">OpenSolaris vs. Linux 内核基准</h4>\n<p>本周早些时候，我们提供了 Ubuntu 9.04 与 Mac OS X 10.5.6 的基准测试，发现 Leopard 操作系统（Mac）在大多数测试中的表现要优于 Jaunty Jackalope （Ubuntu），至少在 Ubuntu 32 位是这样的。我们今天又回过来进行更多的操作系统基准测试，但这次我们正在比较 Linux 和 Sun OpenSolaris 内核的性能。我们使用的 Nexenta Core 2 操作系统将 OpenSolaris 内核与 GNU/Ubuntu 用户界面组合在同一个 Ubuntu 软件包中，但使用了 Linux 内核的 32 位和 64 位 Ubuntu 服务器安装进行测试。</p>\n<h4 id=\"toc_27\">Netbook 性能：Ubuntu vs. OpenSolaris</h4>\n<p>过去，我们已经发布了 OpenSolaris vs. Linux Kernel 基准测试以及类似的文章，关注 Sun 的 OpenSolaris 与流行的 Linux 发行版的性能。我们已经看过高端 AMD 工作站的性能，但是我们从来没有比较上网本上的 OpenSolaris 和 Linux 性能。直到今天，在本文中，我们将比较戴尔 Inspiron Mini 9 上网本上的 OpenSolaris 2009.06 和 Ubuntu 9.04 的结果。</p>\n<h4 id=\"toc_28\">NVIDIA 图形：Linux vs. Solaris</h4>\n<p>在 Phoronix，我们不断探索 Linux 下的不同显示驱动程序，在我们评估了 Sun 的检查工具并测试了 Solaris 主板以及覆盖其他几个领域之后，我们还没有执行图形驱动程序 Linux 和 Solaris 之间的比较。直到今天。由于印第安纳州项目，我们对 Solaris 更感兴趣，我们决定终于通过 NVIDIA 专有驱动程序提供我们在 Linux 和 Solaris 之间的第一次定量图形比较。</p>\n<h4 id=\"toc_29\">OpenSolaris 2008.05 向 Solaris 提供了一个新面孔</h4>\n<p>2月初，Sun Microsystems 发布了印第安纳项目的第二个预览版本。对于那些人来说，印第安纳州项目是 Sun 的 Ian Murdock 领导的项目的代号，旨在通过解决 Solaris 的长期可用性问题，将 OpenSolaris 推向更多的台式机和笔记本电脑。我们没有对预览 2 留下什么深刻印象，因为它没有比普通用户感兴趣的 GNU/Linux 桌面更有优势。然而，随着 5 月份推出的 OpenSolaris 2008.05 印第安纳项目发布，Sun Microsystems 今天发布了该操作系统的最终测试副本。当最后看到项目印第安纳时， 我们对这个新的 OpenSolaris 版本的最初体验是远远优于我们不到三月前的体验的。</p>\n<h4 id=\"toc_30\">快速概览 Oracle Solaris 11</h4>\n<p>Solaris 11 在周三发布，是七年来这个前 Sun 操作系统的第一个主要更新。在过去七年中，Solaris 家族发生了很大变化，OpenSolaris 在那个时候已经到来，但在本文中，简要介绍了全新的 Oracle Solaris 11 版本。</p>\n<h4 id=\"toc_31\">OpenSolaris、BSD &amp; Linux 的新基准测试</h4>\n<p>今天早些时候，我们对以原生的内核模块支持的 Linux 上的 ZFS 进行了基准测试，该原生模块将被公开提供，以将这个 Sun/Oracle 文件系统覆盖到更多的 Linux 用户。现在，尽管作为一个附加奖励，我们碰巧有了基于 OpenSolaris 的最新发行版的新基准，包括 OpenSolaris、OpenIndiana 和 Augustiner-Schweinshaxe，与 PC-BSD、Fedora 和 Ubuntu相比。</p>\n<h4 id=\"toc_32\">FreeBSD/PC-BSD 9.1 针对 Linux、Solaris、BSD 的基准</h4>\n<p>虽然 FreeBSD 9.1 尚未正式发布，但是基于 FreeBSD 的 PC-BSD 9.1 “Isotope”版本本月已经可用。本文中的性能指标是 64 位版本的 PC-BSD 9.1 与 DragonFlyBSD 3.0.3、Oracle Solaris Express 11.1、CentOS 6.3、Ubuntu 12.10 以及 Ubuntu 13.04 开发快照的比较。</p>\n<hr>\n<p>作者简介：</p>\n<p>Michael Larabel 是 Phoronix.com 的作者，并于 2004 年创立了该网站，该网站重点是丰富多样的 Linux 硬件体验。 Michael 撰写了超过10,000 篇文章，涵盖了 Linux 硬件支持，Linux 性能，图形驱动程序等主题。 Michael 也是 Phoronix 测试套件、 Phoromatic 和 OpenBenchmarking.org 自动化基准测试软件的主要开发人员。可以通过 Twitter 关注他或通过 MichaelLarabel.com 联系他。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112268\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112268votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112268\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": "  评论", "praise_nums": "1", "url_object_id": "c2031fdb29548112c91025f9bbba3f1f", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/08/4a1407530d4f2086a8ce08b899773549.jpg"], "front_image_path": "full/25c01fba3f23ba887baf904514a2ccb08fc515e4.jpg", "title": "一个时代的结束：Solaris 系统的那些年，那些事"}
{"create_date": "2017/08/30 ", "url": "http://blog.jobbole.com/112306/", "fav_nums": 4, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://www.networkworld.com/article/3219684/linux/half-a-dozen-clever-linux-command-line-tricks.html\">Sandra Henry-stocker</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-8820-1.html\">Linux中国/firmianay</a>   </div><blockquote><p>一些非常有用的命令能让命令行的生活更满足</p></blockquote>\n<p>使用 Linux 命令工作可以获得许多乐趣，但是如果您使用一些命令，它们可以减少您的工作或以有趣的方式显示信息时，您将获得更多的乐趣。在今天的文章中，我们将介绍六个命令，它们可能会使你用在命令行上的时间更加值当。</p>\n<h3 id=\"toc_1\">watch</h3>\n<p><code>watch</code> 命令会重复运行您给出的任何命令，并显示输出。默认情况下，它每两秒运行一次命令。命令的每次运行都将覆盖上一次运行时显示的内容，因此您始终可以看到最新的数据。</p>\n<p>您可能会在等待某人登录时使用它。在这种情况下，您可以使用 <code>watch who</code> 命令或者 <code>watch -n 15 who</code> 命令使每 15 秒运行一次，而不是两秒一次。另外终端窗口的右上角会显示日期和时间。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33c81abc65316703909\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ watch -n 5 who\r\nEvery 5.0s: who                               stinkbug: Wed Aug 23 14:52:15 2017\r\n\r\nshs      pts/0        2017-08-23 14:45 (192.168.0.11)\r\nzoe      pts/1        2017-08-23 08:15 (192.168.0.19)\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33c81abc65316703909-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c81abc65316703909-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f33c81abc65316703909-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c81abc65316703909-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f33c81abc65316703909-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c81abc65316703909-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33c81abc65316703909-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">watch</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">who</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c81abc65316703909-2\"><span class=\"crayon-i\">Every</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5.0s</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">who                               </span><span class=\"crayon-v\">stinkbug</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Wed </span><span class=\"crayon-i\">Aug</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">23</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">14</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">52</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2017</span></div><div class=\"crayon-line\" id=\"crayon-59f33c81abc65316703909-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c81abc65316703909-4\"><span class=\"crayon-e\">shs      </span><span class=\"crayon-v\">pts</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">2017</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">08</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">23</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">14</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">45</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">192.168.0.11</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f33c81abc65316703909-5\"><span class=\"crayon-e\">zoe      </span><span class=\"crayon-v\">pts</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">2017</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">08</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">23</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">08</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">192.168.0.19</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c81abc65316703909-6\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0015 seconds] -->\r\n<p>您也可以使用它来查看日志文件。如果您显示的数据没有任何变化，则只有窗口角落里的日期和时间会发生变化。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33c81abc6f480803595\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ watch tail /var/log/syslog\r\nEvery 2.0s: tail /var/log/syslog              stinkbug: Wed Aug 23 15:16:37 2017\r\n\r\nAug 23 14:45:01 stinkbug CRON[7214]: (root) CMD (command -v debian-sa1 &gt; /dev/nu\r\nll &amp;&amp; debian-sa1 1 1)\r\nAug 23 14:45:17 stinkbug systemd[1]: Started Session 179 of user shs.\r\nAug 23 14:55:01 stinkbug CRON[7577]: (root) CMD (command -v debian-sa1 &gt; /dev/nu\r\nll &amp;&amp; debian-sa1 1 1)\r\nAug 23 15:05:01 stinkbug CRON[7582]: (root) CMD (command -v debian-sa1 &gt; /dev/nu\r\nll &amp;&amp; debian-sa1 1 1)\r\nAug 23 15:08:48 stinkbug systemd[1]: Starting Cleanup of Temporary Directories...\r\nAug 23 15:08:48 stinkbug systemd-tmpfiles[7584]: [/usr/lib/tmpfiles.d/var.conf:1\r\n4] Duplicate line for path \"/var/log\", ignoring.\r\nAug 23 15:08:48 stinkbug systemd[1]: Started Cleanup of Temporary Directories.\r\nAug 23 15:13:41 stinkbug systemd[1]: Started Session 182 of user shs.\r\nAug 23 15:14:29 stinkbug systemd[1]: Started Session 183 of user shs.\r\nAug 23 15:15:01 stinkbug CRON[7828]: (root) CMD (command -v debian-sa1 &gt; /dev/nu\r\nll &amp;&amp; debian-sa1 1 1)\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33c81abc6f480803595-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c81abc6f480803595-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f33c81abc6f480803595-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c81abc6f480803595-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f33c81abc6f480803595-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c81abc6f480803595-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f33c81abc6f480803595-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c81abc6f480803595-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f33c81abc6f480803595-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c81abc6f480803595-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f33c81abc6f480803595-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c81abc6f480803595-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59f33c81abc6f480803595-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c81abc6f480803595-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59f33c81abc6f480803595-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c81abc6f480803595-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-59f33c81abc6f480803595-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c81abc6f480803595-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-59f33c81abc6f480803595-19\">19</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33c81abc6f480803595-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">watch </span><span class=\"crayon-v\">tail</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-t\">var</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">log</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">syslog</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c81abc6f480803595-2\"><span class=\"crayon-i\">Every</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2.0s</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tail</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-t\">var</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">log</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">syslog              </span><span class=\"crayon-v\">stinkbug</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Wed </span><span class=\"crayon-i\">Aug</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">23</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">15</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">16</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">37</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2017</span></div><div class=\"crayon-line\" id=\"crayon-59f33c81abc6f480803595-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c81abc6f480803595-4\"><span class=\"crayon-i\">Aug</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">23</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">14</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">45</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">01</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">stinkbug </span><span class=\"crayon-v\">CRON</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">7214</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">CMD</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">command</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">v</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">debian</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">sa1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">dev</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">nu</span></div><div class=\"crayon-line\" id=\"crayon-59f33c81abc6f480803595-5\"><span class=\"crayon-v\">ll</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">debian</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">sa1</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c81abc6f480803595-6\"><span class=\"crayon-i\">Aug</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">23</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">14</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">45</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">17</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">stinkbug </span><span class=\"crayon-v\">systemd</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Started </span><span class=\"crayon-i\">Session</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">179</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">of </span><span class=\"crayon-e\">user </span><span class=\"crayon-v\">shs</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-59f33c81abc6f480803595-7\"><span class=\"crayon-i\">Aug</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">23</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">14</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">55</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">01</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">stinkbug </span><span class=\"crayon-v\">CRON</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">7577</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">CMD</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">command</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">v</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">debian</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">sa1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">dev</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">nu</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c81abc6f480803595-8\"><span class=\"crayon-v\">ll</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">debian</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">sa1</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f33c81abc6f480803595-9\"><span class=\"crayon-i\">Aug</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">23</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">15</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">05</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">01</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">stinkbug </span><span class=\"crayon-v\">CRON</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">7582</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">CMD</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">command</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">v</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">debian</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">sa1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">dev</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">nu</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c81abc6f480803595-10\"><span class=\"crayon-v\">ll</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">debian</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">sa1</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f33c81abc6f480803595-11\"><span class=\"crayon-i\">Aug</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">23</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">15</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">08</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">48</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">stinkbug </span><span class=\"crayon-v\">systemd</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Starting </span><span class=\"crayon-e\">Cleanup </span><span class=\"crayon-e\">of </span><span class=\"crayon-e\">Temporary </span><span class=\"crayon-v\">Directories</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c81abc6f480803595-12\"><span class=\"crayon-i\">Aug</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">23</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">15</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">08</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">48</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">stinkbug </span><span class=\"crayon-v\">systemd</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">tmpfiles</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">7584</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">lib</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">tmpfiles</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">d</span><span class=\"crayon-o\">/</span><span class=\"crayon-t\">var</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">conf</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line\" id=\"crayon-59f33c81abc6f480803595-13\"><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Duplicate </span><span class=\"crayon-e\">line </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">path</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"/var/log\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ignoring</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c81abc6f480803595-14\"><span class=\"crayon-i\">Aug</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">23</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">15</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">08</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">48</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">stinkbug </span><span class=\"crayon-v\">systemd</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Started </span><span class=\"crayon-e\">Cleanup </span><span class=\"crayon-e\">of </span><span class=\"crayon-e\">Temporary </span><span class=\"crayon-v\">Directories</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-59f33c81abc6f480803595-15\"><span class=\"crayon-i\">Aug</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">23</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">15</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">13</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">41</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">stinkbug </span><span class=\"crayon-v\">systemd</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Started </span><span class=\"crayon-i\">Session</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">182</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">of </span><span class=\"crayon-e\">user </span><span class=\"crayon-v\">shs</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c81abc6f480803595-16\"><span class=\"crayon-i\">Aug</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">23</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">15</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">14</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">29</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">stinkbug </span><span class=\"crayon-v\">systemd</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Started </span><span class=\"crayon-i\">Session</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">183</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">of </span><span class=\"crayon-e\">user </span><span class=\"crayon-v\">shs</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-59f33c81abc6f480803595-17\"><span class=\"crayon-i\">Aug</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">23</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">15</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">15</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">01</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">stinkbug </span><span class=\"crayon-v\">CRON</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">7828</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">CMD</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">command</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">v</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">debian</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">sa1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">dev</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">nu</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c81abc6f480803595-18\"><span class=\"crayon-v\">ll</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">debian</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">sa1</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f33c81abc6f480803595-19\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0081 seconds] -->\r\n<p>这里的输出和使用命令 <code>tail -f /var/log/syslog</code> 的输出相似。</p>\n<h3 id=\"toc_2\">look</h3>\n<p>这个命令的名字 <code>look</code> 可能会让我们以为它和 <code>watch</code> 做类似的事情，但其实是不同的。<code>look</code> 命令用于搜索以某个特定字符串开头的单词。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33c81abc74169794250\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ look ecl\r\neclectic\r\neclectic's\r\neclectically\r\neclecticism\r\neclecticism's\r\neclectics\r\neclipse\r\neclipse's\r\neclipsed\r\neclipses\r\neclipsing\r\necliptic\r\necliptic's\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33c81abc74169794250-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c81abc74169794250-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f33c81abc74169794250-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c81abc74169794250-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f33c81abc74169794250-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c81abc74169794250-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f33c81abc74169794250-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c81abc74169794250-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f33c81abc74169794250-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c81abc74169794250-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f33c81abc74169794250-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c81abc74169794250-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59f33c81abc74169794250-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c81abc74169794250-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59f33c81abc74169794250-15\">15</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33c81abc74169794250-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">look </span><span class=\"crayon-e\">ecl</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c81abc74169794250-2\"><span class=\"crayon-e\">eclectic</span></div><div class=\"crayon-line\" id=\"crayon-59f33c81abc74169794250-3\"><span class=\"crayon-i\">eclectic</span><span class=\"crayon-s\">'s</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c81abc74169794250-4\"><span class=\"crayon-s\">eclectically</span></div><div class=\"crayon-line\" id=\"crayon-59f33c81abc74169794250-5\"><span class=\"crayon-s\">eclecticism</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c81abc74169794250-6\"><span class=\"crayon-s\">eclecticism'</span><span class=\"crayon-i\">s</span></div><div class=\"crayon-line\" id=\"crayon-59f33c81abc74169794250-7\"><span class=\"crayon-e\">eclectics</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c81abc74169794250-8\"><span class=\"crayon-e\">eclipse</span></div><div class=\"crayon-line\" id=\"crayon-59f33c81abc74169794250-9\"><span class=\"crayon-i\">eclipse</span><span class=\"crayon-s\">'s</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c81abc74169794250-10\"><span class=\"crayon-s\">eclipsed</span></div><div class=\"crayon-line\" id=\"crayon-59f33c81abc74169794250-11\"><span class=\"crayon-s\">eclipses</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c81abc74169794250-12\"><span class=\"crayon-s\">eclipsing</span></div><div class=\"crayon-line\" id=\"crayon-59f33c81abc74169794250-13\"><span class=\"crayon-s\">ecliptic</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c81abc74169794250-14\"><span class=\"crayon-s\">ecliptic'</span><span class=\"crayon-i\">s</span></div><div class=\"crayon-line\" id=\"crayon-59f33c81abc74169794250-15\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p><code>look</code> 命令通常有助于单词的拼写，它使用 <code>/usr/share/dict/words</code> 文件，除非你使用如下的命令指定了文件名：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33c81abc78688341606\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ look esac .bashrc\r\nesac\r\nesac\r\nesac\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33c81abc78688341606-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c81abc78688341606-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f33c81abc78688341606-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c81abc78688341606-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f33c81abc78688341606-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33c81abc78688341606-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">look </span><span class=\"crayon-i\">esac</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">bashrc</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c81abc78688341606-2\"><span class=\"crayon-e\">esac</span></div><div class=\"crayon-line\" id=\"crayon-59f33c81abc78688341606-3\"><span class=\"crayon-e\">esac</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c81abc78688341606-4\"><span class=\"crayon-i\">esac</span></div><div class=\"crayon-line\" id=\"crayon-59f33c81abc78688341606-5\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>在这种情况下，它的作用就像跟在一个 <code>awk</code> 命令后面的 <code>grep</code> ，只打印匹配行上的第一个单词。</p>\n<h3 id=\"toc_3\">man -k</h3>\n<p><code>man -k</code> 命令列出包含指定单词的手册页。它的工作基本上和 <code>apropos</code> 命令一样。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33c81abc7b286165322\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ man -k logrotate\r\ndh_installlogrotate (1) - install logrotate config files\r\nlogrotate (8)        - rotates, compresses, and mails system logs\r\nlogrotate.conf (5)   - rotates, compresses, and mails system logs\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33c81abc7b286165322-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c81abc7b286165322-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f33c81abc7b286165322-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c81abc7b286165322-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f33c81abc7b286165322-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33c81abc7b286165322-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">man</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">k</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">logrotate</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c81abc7b286165322-2\"><span class=\"crayon-e\">dh_installlogrotate</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">install </span><span class=\"crayon-e\">logrotate </span><span class=\"crayon-e\">config </span><span class=\"crayon-e\">files</span></div><div class=\"crayon-line\" id=\"crayon-59f33c81abc7b286165322-3\"><span class=\"crayon-e\">logrotate</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">        </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rotates</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">compresses</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">mails </span><span class=\"crayon-e\">system </span><span class=\"crayon-e\">logs</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c81abc7b286165322-4\"><span class=\"crayon-v\">logrotate</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">conf</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">   </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rotates</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">compresses</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">mails </span><span class=\"crayon-e\">system </span><span class=\"crayon-i\">logs</span></div><div class=\"crayon-line\" id=\"crayon-59f33c81abc7b286165322-5\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p></p>\n<h3 id=\"toc_4\">help</h3>\n<p>当你完全绝望的时候，您可能会试图使用此命令，<code>help</code> 命令实际上是显示一个 shell 内置命令的列表。最令人惊讶的是它有相当多的参数变量。你可能会看到这样的东西，然后开始想知道这些内置功能可以为你做些什么：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33c81abc7e498261826\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ help\r\nGNU bash, version 4.4.7(1)-release (i686-pc-linux-gnu)\r\nThese shell commands are defined internally.  Type `help' to see this list.\r\nType `help name' to find out more about the function `name'.\r\nUse `info bash' to find out more about the shell in general.\r\nUse `man -k' or `info' to find out more about commands not in this list.\r\n\r\nA star (*) next to a name means that the command is disabled.\r\n\r\n job_spec [&amp;]                            history [-c] [-d offset] [n] or hist&gt;\r\n (( expression ))                        if COMMANDS; then COMMANDS; [ elif C&gt;\r\n . filename [arguments]                  jobs [-lnprs] [jobspec ...] or jobs &gt;\r\n :                                       kill [-s sigspec | -n signum | -sigs&gt;\r\n [ arg... ]                              let arg [arg ...]\r\n [[ expression ]]                        local [option] name[=value] ...\r\n alias [-p] [name[=value] ... ]          logout [n]\r\n bg [job_spec ...]                       mapfile [-d delim] [-n count] [-O or&gt;\r\n bind [-lpsvPSVX] [-m keymap] [-f file&gt;  popd [-n] [+N | -N]\r\n break [n]                               printf [-v var] format [arguments]\r\n builtin [shell-builtin [arg ...]]       pushd [-n] [+N | -N | dir]\r\n caller [expr]                           pwd [-LP]\r\n case WORD in [PATTERN [| PATTERN]...)&gt;  read [-ers] [-a array] [-d delim] [-&gt;\r\n cd [-L|[-P [-e]] [-@]] [dir]            readarray [-n count] [-O origin] [-s&gt;\r\n command [-pVv] command [arg ...]        readonly [-aAf] [name[=value] ...] o&gt;\r\n compgen [-abcdefgjksuv] [-o option] [&gt;  return [n]\r\n complete [-abcdefgjksuv] [-pr] [-DE] &gt;  select NAME [in WORDS ... ;] do COMM&gt;\r\n compopt [-o|+o option] [-DE] [name ..&gt;  set [-abefhkmnptuvxBCHP] [-o option-&gt;\r\n continue [n]                            shift [n]\r\n coproc [NAME] command [redirections]    shopt [-pqsu] [-o] [optname ...]\r\n declare [-aAfFgilnrtux] [-p] [name[=v&gt;  source filename [arguments]\r\n dirs [-clpv] [+N] [-N]                  suspend [-f]\r\n disown [-h] [-ar] [jobspec ... | pid &gt;  test [expr]\r\n echo [-neE] [arg ...]                   time [-p] pipeline\r\n enable [-a] [-dnps] [-f filename] [na&gt;  times\r\n eval [arg ...]                          trap [-lp] [[arg] signal_spec ...]\r\n exec [-cl] [-a name] [command [argume&gt;  true\r\n exit [n]                                type [-afptP] name [name ...]\r\n export [-fn] [name[=value] ...] or ex&gt;  typeset [-aAfFgilnrtux] [-p] name[=v&gt;\r\n false                                   ulimit [-SHabcdefiklmnpqrstuvxPT] [l&gt;\r\n fc [-e ename] [-lnr] [first] [last] o&gt;  umask [-p] [-S] [mode]\r\n fg [job_spec]                           unalias [-a] name [name ...]\r\n for NAME [in WORDS ... ] ; do COMMAND&gt;  unset [-f] [-v] [-n] [name ...]\r\n for (( exp1; exp2; exp3 )); do COMMAN&gt;  until COMMANDS; do COMMANDS; done\r\n function name { COMMANDS ; } or name &gt;  variables - Names and meanings of so&gt;\r\n getopts optstring name [arg]            wait [-n] [id ...]\r\n hash [-lr] [-p pathname] [-dt] [name &gt;  while COMMANDS; do COMMANDS; done\r\n help [-dms] [pattern ...]               { COMMANDS ; }\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33c81abc7e498261826-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c81abc7e498261826-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f33c81abc7e498261826-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c81abc7e498261826-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f33c81abc7e498261826-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c81abc7e498261826-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f33c81abc7e498261826-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c81abc7e498261826-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f33c81abc7e498261826-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c81abc7e498261826-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f33c81abc7e498261826-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c81abc7e498261826-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59f33c81abc7e498261826-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c81abc7e498261826-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59f33c81abc7e498261826-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c81abc7e498261826-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-59f33c81abc7e498261826-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c81abc7e498261826-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-59f33c81abc7e498261826-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c81abc7e498261826-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-59f33c81abc7e498261826-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c81abc7e498261826-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-59f33c81abc7e498261826-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c81abc7e498261826-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-59f33c81abc7e498261826-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c81abc7e498261826-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-59f33c81abc7e498261826-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c81abc7e498261826-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-59f33c81abc7e498261826-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c81abc7e498261826-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-59f33c81abc7e498261826-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c81abc7e498261826-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-59f33c81abc7e498261826-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c81abc7e498261826-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-59f33c81abc7e498261826-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c81abc7e498261826-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-59f33c81abc7e498261826-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c81abc7e498261826-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-59f33c81abc7e498261826-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c81abc7e498261826-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-59f33c81abc7e498261826-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c81abc7e498261826-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-59f33c81abc7e498261826-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c81abc7e498261826-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-59f33c81abc7e498261826-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c81abc7e498261826-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-59f33c81abc7e498261826-47\">47</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c81abc7e498261826-48\">48</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33c81abc7e498261826-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">help</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c81abc7e498261826-2\"><span class=\"crayon-e\">GNU </span><span class=\"crayon-v\">bash</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">version</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4.4.7</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">release</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i686</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">pc</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">linux</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">gnu</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f33c81abc7e498261826-3\"><span class=\"crayon-e\">These </span><span class=\"crayon-e\">shell </span><span class=\"crayon-e\">commands </span><span class=\"crayon-e\">are </span><span class=\"crayon-e\">defined </span><span class=\"crayon-v\">internally</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\">  </span><span class=\"crayon-i\">Type</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-i\">help</span><span class=\"crayon-s\">' to see this list.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c81abc7e498261826-4\"><span class=\"crayon-s\">Type `help name'</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">find </span><span class=\"crayon-e\">out </span><span class=\"crayon-e\">more </span><span class=\"crayon-e\">about </span><span class=\"crayon-e\">the </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-i\">name</span><span class=\"crayon-s\">'.</span></div><div class=\"crayon-line\" id=\"crayon-59f33c81abc7e498261826-5\"><span class=\"crayon-s\">Use `info bash'</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">find </span><span class=\"crayon-e\">out </span><span class=\"crayon-e\">more </span><span class=\"crayon-e\">about </span><span class=\"crayon-e\">the </span><span class=\"crayon-e\">shell </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">general</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c81abc7e498261826-6\"><span class=\"crayon-st\">Use</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">man</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">k</span><span class=\"crayon-s\">' or `info'</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">find </span><span class=\"crayon-e\">out </span><span class=\"crayon-e\">more </span><span class=\"crayon-e\">about </span><span class=\"crayon-e\">commands </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">list</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-59f33c81abc7e498261826-7\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c81abc7e498261826-8\"><span class=\"crayon-i\">A</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">star</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">next </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">name </span><span class=\"crayon-e\">means </span><span class=\"crayon-e\">that </span><span class=\"crayon-e\">the </span><span class=\"crayon-e\">command </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">disabled</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-59f33c81abc7e498261826-9\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c81abc7e498261826-10\"><span class=\"crayon-h\"> </span><span class=\"crayon-v\">job</span><span class=\"crayon-sy\">_</span>spec<span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\">                            </span><span class=\"crayon-i\">history</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">c</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">d</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">offset</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">or</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">hist</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-59f33c81abc7e498261826-11\"><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">expression</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">COMMANDS</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">then</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">COMMANDS</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">elif</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">C</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c81abc7e498261826-12\"><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">filename</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">arguments</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\">                  </span><span class=\"crayon-i\">jobs</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">lnprs</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-i\">jobspec</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">or</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">jobs</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-59f33c81abc7e498261826-13\"><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">                                       </span><span class=\"crayon-i\">kill</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">s</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sigspec</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">signum</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">sigs</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c81abc7e498261826-14\"><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">arg</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\">                              </span><span class=\"crayon-e\">let </span><span class=\"crayon-i\">arg</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-i\">arg</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-59f33c81abc7e498261826-15\"><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">expression</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\">                        </span><span class=\"crayon-i\">local</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">option</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">value</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c81abc7e498261826-16\"><span class=\"crayon-h\"> </span><span class=\"crayon-i\">alias</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">p</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">value</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\">          </span><span class=\"crayon-i\">logout</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-59f33c81abc7e498261826-17\"><span class=\"crayon-h\"> </span><span class=\"crayon-i\">bg</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">job</span><span class=\"crayon-sy\">_</span>spec<span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\">                       </span><span class=\"crayon-i\">mapfile</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">d</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">delim</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">count</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">O</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">or</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c81abc7e498261826-18\"><span class=\"crayon-h\"> </span><span class=\"crayon-i\">bind</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">lpsvPSVX</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">m</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">keymap</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">f</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">file</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\">  </span><span class=\"crayon-i\">popd</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">+</span><span class=\"crayon-v\">N</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">N</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-59f33c81abc7e498261826-19\"><span class=\"crayon-h\"> </span><span class=\"crayon-st\">break</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\">                               </span><span class=\"crayon-i\">printf</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">v</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">var</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">format</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">arguments</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c81abc7e498261826-20\"><span class=\"crayon-h\"> </span><span class=\"crayon-i\">builtin</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">shell</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">builtin</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-i\">arg</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\">       </span><span class=\"crayon-i\">pushd</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">+</span><span class=\"crayon-v\">N</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">N</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dir</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-59f33c81abc7e498261826-21\"><span class=\"crayon-h\"> </span><span class=\"crayon-i\">caller</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">expr</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\">                           </span><span class=\"crayon-i\">pwd</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">LP</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c81abc7e498261826-22\"><span class=\"crayon-h\"> </span><span class=\"crayon-st\">case</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">WORD</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-i\">PATTERN</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">PATTERN</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\">  </span><span class=\"crayon-i\">read</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">ers</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">d</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">delim</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-&gt;</span></div><div class=\"crayon-line\" id=\"crayon-59f33c81abc7e498261826-23\"><span class=\"crayon-h\"> </span><span class=\"crayon-i\">cd</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">L</span><span class=\"crayon-o\">|</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">P</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-sy\">@</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">dir</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\">            </span><span class=\"crayon-i\">readarray</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">count</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">O</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">origin</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">s</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c81abc7e498261826-24\"><span class=\"crayon-h\"> </span><span class=\"crayon-i\">command</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">pVv</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">command</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-i\">arg</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\">        </span><span class=\"crayon-i\">readonly</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">aAf</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">value</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">o</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-59f33c81abc7e498261826-25\"><span class=\"crayon-h\"> </span><span class=\"crayon-i\">compgen</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">abcdefgjksuv</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">option</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\">  </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c81abc7e498261826-26\"><span class=\"crayon-h\"> </span><span class=\"crayon-i\">complete</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">abcdefgjksuv</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">pr</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">DE</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">select </span><span class=\"crayon-i\">NAME</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">WORDS</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">;</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">do</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">COMM</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-59f33c81abc7e498261826-27\"><span class=\"crayon-h\"> </span><span class=\"crayon-i\">compopt</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">o</span><span class=\"crayon-o\">|</span><span class=\"crayon-o\">+</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">option</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">DE</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-i\">name</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\">  </span><span class=\"crayon-i\">set</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">abefhkmnptuvxBCHP</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">option</span><span class=\"crayon-o\">-&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c81abc7e498261826-28\"><span class=\"crayon-h\"> </span><span class=\"crayon-st\">continue</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\">                            </span><span class=\"crayon-i\">shift</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-59f33c81abc7e498261826-29\"><span class=\"crayon-h\"> </span><span class=\"crayon-i\">coproc</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">NAME</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">command</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">redirections</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">shopt</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">pqsu</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">o</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-i\">optname</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c81abc7e498261826-30\"><span class=\"crayon-h\"> </span><span class=\"crayon-r\">declare</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">aAfFgilnrtux</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">p</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">v</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">source </span><span class=\"crayon-i\">filename</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">arguments</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-59f33c81abc7e498261826-31\"><span class=\"crayon-h\"> </span><span class=\"crayon-i\">dirs</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">clpv</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">+</span><span class=\"crayon-v\">N</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">N</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\">                  </span><span class=\"crayon-i\">suspend</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">f</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c81abc7e498261826-32\"><span class=\"crayon-h\"> </span><span class=\"crayon-i\">disown</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">h</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">ar</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-i\">jobspec</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pid</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\">  </span><span class=\"crayon-i\">test</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">expr</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-59f33c81abc7e498261826-33\"><span class=\"crayon-h\"> </span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">neE</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-i\">arg</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\">                   </span><span class=\"crayon-i\">time</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">p</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">pipeline</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c81abc7e498261826-34\"><span class=\"crayon-e\"> </span><span class=\"crayon-i\">enable</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">dnps</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">f</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">filename</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">na</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">times</span></div><div class=\"crayon-line\" id=\"crayon-59f33c81abc7e498261826-35\"><span class=\"crayon-e\"> </span><span class=\"crayon-i\">eval</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-i\">arg</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\">                          </span><span class=\"crayon-i\">trap</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">lp</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">arg</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">signal</span><span class=\"crayon-sy\">_</span>spec<span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c81abc7e498261826-36\"><span class=\"crayon-h\"> </span><span class=\"crayon-i\">exec</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">cl</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-i\">command</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">argume</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\">  </span><span class=\"crayon-t\">true</span></div><div class=\"crayon-line\" id=\"crayon-59f33c81abc7e498261826-37\"><span class=\"crayon-h\"> </span><span class=\"crayon-i\">exit</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\">                                </span><span class=\"crayon-i\">type</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">afptP</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">name</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-i\">name</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c81abc7e498261826-38\"><span class=\"crayon-h\"> </span><span class=\"crayon-i\">export</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">fn</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">value</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">or</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ex</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\">  </span><span class=\"crayon-i\">typeset</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">aAfFgilnrtux</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">p</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">v</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-59f33c81abc7e498261826-39\"><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-h\">                                   </span><span class=\"crayon-i\">ulimit</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">SHabcdefiklmnpqrstuvxPT</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">l</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c81abc7e498261826-40\"><span class=\"crayon-h\"> </span><span class=\"crayon-i\">fc</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">e</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ename</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">lnr</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">first</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">last</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">o</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\">  </span><span class=\"crayon-i\">umask</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">p</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">S</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">mode</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-59f33c81abc7e498261826-41\"><span class=\"crayon-h\"> </span><span class=\"crayon-i\">fg</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">job_spec</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\">                           </span><span class=\"crayon-i\">unalias</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">name</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-i\">name</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c81abc7e498261826-42\"><span class=\"crayon-h\"> </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">NAME</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">WORDS</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">do</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">COMMAND</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\">  </span><span class=\"crayon-i\">unset</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">f</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">v</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-i\">name</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-59f33c81abc7e498261826-43\"><span class=\"crayon-h\"> </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">exp1</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">exp2</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">exp3</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">do</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">COMMAN</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">until </span><span class=\"crayon-v\">COMMANDS</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">do</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">COMMANDS</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">done</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c81abc7e498261826-44\"><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">name</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">COMMANDS</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">or</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">variables</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Names </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">meanings </span><span class=\"crayon-e\">of </span><span class=\"crayon-v\">so</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-59f33c81abc7e498261826-45\"><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getopts </span><span class=\"crayon-e\">optstring </span><span class=\"crayon-i\">name</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">arg</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\">            </span><span class=\"crayon-i\">wait</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-i\">id</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c81abc7e498261826-46\"><span class=\"crayon-h\"> </span><span class=\"crayon-i\">hash</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">lr</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pathname</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">dt</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\">  </span><span class=\"crayon-st\">while</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">COMMANDS</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">do</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">COMMANDS</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">done</span></div><div class=\"crayon-line\" id=\"crayon-59f33c81abc7e498261826-47\"><span class=\"crayon-e\"> </span><span class=\"crayon-i\">help</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">dms</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-i\">pattern</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\">               </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">COMMANDS</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c81abc7e498261826-48\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0235 seconds] -->\r\n<p></p>\n<h3 id=\"toc_5\">stat -c</h3>\n<p><code>stat</code> 命令用于显示文件的大小、所有者、用户组、索引节点号、权限、修改和访问时间等重要的统计信息。这是一个非常有用的命令，可以显示比 <code>ls -l</code> 更多的细节。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33c81abc8d375369589\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ stat .bashrc\r\n  File: .bashrc\r\n  Size: 4048            Blocks: 8          IO Block: 4096   regular file\r\nDevice: 806h/2054d      Inode: 421481      Links: 1\r\nAccess: (0644/-rw-r--r--)  Uid: ( 1000/     shs)   Gid: ( 1000/     shs)\r\nAccess: 2017-08-23 15:13:41.781809933 -0400\r\nModify: 2017-06-21 17:37:11.875157790 -0400\r\nChange: 2017-06-21 17:37:11.899157791 -0400\r\n Birth: -\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33c81abc8d375369589-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c81abc8d375369589-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f33c81abc8d375369589-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c81abc8d375369589-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f33c81abc8d375369589-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c81abc8d375369589-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f33c81abc8d375369589-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c81abc8d375369589-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f33c81abc8d375369589-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c81abc8d375369589-10\">10</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33c81abc8d375369589-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">stat</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">bashrc</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c81abc8d375369589-2\"><span class=\"crayon-e\">  </span><span class=\"crayon-v\">File</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">bashrc</span></div><div class=\"crayon-line\" id=\"crayon-59f33c81abc8d375369589-3\"><span class=\"crayon-e\">  </span><span class=\"crayon-v\">Size</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4048</span><span class=\"crayon-h\">            </span><span class=\"crayon-v\">Blocks</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8</span><span class=\"crayon-h\">          </span><span class=\"crayon-e\">IO </span><span class=\"crayon-v\">Block</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4096</span><span class=\"crayon-h\">   </span><span class=\"crayon-e\">regular </span><span class=\"crayon-e\">file</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c81abc8d375369589-4\"><span class=\"crayon-v\">Device</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">806h</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2054d</span><span class=\"crayon-h\">      </span><span class=\"crayon-v\">Inode</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">421481</span><span class=\"crayon-h\">      </span><span class=\"crayon-v\">Links</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line\" id=\"crayon-59f33c81abc8d375369589-5\"><span class=\"crayon-v\">Access</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0644</span><span class=\"crayon-o\">/</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rw</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">Uid</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1000</span><span class=\"crayon-o\">/</span><span class=\"crayon-h\">     </span><span class=\"crayon-v\">shs</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">   </span><span class=\"crayon-v\">Gid</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1000</span><span class=\"crayon-o\">/</span><span class=\"crayon-h\">     </span><span class=\"crayon-v\">shs</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c81abc8d375369589-6\"><span class=\"crayon-v\">Access</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2017</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">08</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">23</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">15</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">13</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">41.781809933</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0400</span></div><div class=\"crayon-line\" id=\"crayon-59f33c81abc8d375369589-7\"><span class=\"crayon-v\">Modify</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2017</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">06</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">21</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">17</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">37</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">11.875157790</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0400</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c81abc8d375369589-8\"><span class=\"crayon-v\">Change</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2017</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">06</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">21</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">17</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">37</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">11.899157791</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0400</span></div><div class=\"crayon-line\" id=\"crayon-59f33c81abc8d375369589-9\"><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Birth</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c81abc8d375369589-10\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0029 seconds] -->\r\n<p>使用 <code>-c</code> 选项，您可以指定要查看的字段。例如，如果您只想查看一个文件或一系列文件的文件名和访问权限，则可以这样做：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33c81abc91641330922\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ stat -c '%n %a' .bashrc\r\n.bashrc 644\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33c81abc91641330922-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c81abc91641330922-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f33c81abc91641330922-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33c81abc91641330922-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">stat</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'%n %a'</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">bashrc</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c81abc91641330922-2\"><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">bashrc</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">644</span></div><div class=\"crayon-line\" id=\"crayon-59f33c81abc91641330922-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>在此命令中， <code>%n</code> 表示每个文件的名称，而 <code>%a</code> 表示访问权限。<code>%u</code> 表示数字类型的 UID，而 <code>%U</code> 表示用户名。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33c81abc94619356789\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ stat -c '%n %a' bin/*\r\nbin/loop 700\r\nbin/move2nohup 700\r\nbin/nohup.out 600\r\nbin/show_release 700\r\n\r\n$ stat -c '%n %a %U' bin/*\r\nbin/loop 700 shs\r\nbin/move2nohup 700 shs\r\nbin/nohup.out 600 root\r\nbin/show_release 700 shs\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33c81abc94619356789-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c81abc94619356789-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f33c81abc94619356789-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c81abc94619356789-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f33c81abc94619356789-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c81abc94619356789-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f33c81abc94619356789-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c81abc94619356789-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f33c81abc94619356789-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c81abc94619356789-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f33c81abc94619356789-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c81abc94619356789-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33c81abc94619356789-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">stat</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'%n %a'</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-o\">*</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c81abc94619356789-2\"><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">loop</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">700</span></div><div class=\"crayon-line\" id=\"crayon-59f33c81abc94619356789-3\"><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">move2nohup</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">700</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c81abc94619356789-4\"><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">nohup</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">out</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">600</span></div><div class=\"crayon-line\" id=\"crayon-59f33c81abc94619356789-5\"><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">show</span><span class=\"crayon-sy\">_</span>release<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">700</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c81abc94619356789-6\"> </div><div class=\"crayon-line\" id=\"crayon-59f33c81abc94619356789-7\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">stat</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'%n %a %U'</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-o\">*</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c81abc94619356789-8\"><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">loop</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">700</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">shs</span></div><div class=\"crayon-line\" id=\"crayon-59f33c81abc94619356789-9\"><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">move2nohup</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">700</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">shs</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c81abc94619356789-10\"><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">nohup</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">out</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">600</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">root</span></div><div class=\"crayon-line\" id=\"crayon-59f33c81abc94619356789-11\"><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">show</span><span class=\"crayon-sy\">_</span>release<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">700</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">shs</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c81abc94619356789-12\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0019 seconds] -->\r\n<p></p>\n<h3 id=\"toc_6\">TAB</h3>\n<p>如果你没有使用过 tab 键来补全文件名，你真的错过了一个非常有用的命令行技巧。tab 键提供文件名补全功能（包括使用 <code>cd</code> 时的目录）。它在出现歧义之前尽可能多的填充文件名（多个文件以相同的字母开头。如果您有一个名为 <code>bigplans</code> 的文件，另一个名为 <code>bigplans2017</code> 的文件会发生歧义，你将听到一个声音，然后需要决定是按下回车键还是输入 <code>2</code> 之后再按下 tab 键选择第二个文件。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112306\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112306votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112306\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 4 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": "  评论", "praise_nums": "2", "url_object_id": "f9b2e348640d6f457d71b1531fbb9152", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/05/77d80105fd15f2465894827e23cc4842.jpeg"], "front_image_path": "full/d1b17b98748a74826464a08e6d30a4ee1b15b171.jpg", "title": "六个优雅的 Linux 命令行技巧"}
{"create_date": "2017/08/30 ", "url": "http://blog.jobbole.com/112309/", "fav_nums": 2, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://www.biaodianfu.com/adjacency-list.html\">标点符</a>   </div><p>在程序开发中，我们常遇到用树型结构来表示某些数据间的关系，如企业的组织架构、商品的分类、操作栏目等，目前的关系型数据库都是以二维表的形式记录存储数据，而树型结构的数据如需存入二维表就必须进行Schema设计。最近对此方面比较感兴趣，专门做下梳理，如下为常见的树型结构的数据：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/22f7d85dbaeaaf50d465db3628ed7427.jpg\" alt=\"tree\" width=\"231\" height=\"259\"></p>\n<p>其中最简单的方法是：Adjacency List（邻接列表模式）。简单的说是根据节点之间的继承关系，显现的描述某一节点的父节点，从而建立二位的关系表。表结构通常设计为{Node_id,Parent_id}，如下图：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/55b08386eecd7d15cebf167c700aab46.jpg\" alt=\"adjacency-list\" width=\"312\" height=\"215\"></p>\n<p>使用连接表的大致代码：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f2889b3db28990260301\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-mixed-highlight\" title=\"含多种语言\"></span><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&lt;?php\r\n// $parent is the parent of the children we want to see\r\n// $level is increased when we go deeper into the tree,\r\n//        used to display a nice indented tree\r\n \r\nfunction display_children($parent, $level) \r\n{\r\n   // 获得一个 父节点 $parent 的所有子节点\r\n   $result = mysql_query('SELECT name FROM tree WHERE parent=\"'.$parent.'\";');\r\n \r\n   // 显示每个子节点\r\n   while ($row = mysql_fetch_array($result)) \r\n   {\r\n       // 缩进显示节点名称\r\n       echo str_repeat('  ',$level).$row['name'].\"\\n\";\r\n \r\n       //再次调用这个函数显示子节点的子节点\r\n      \r\n       display_children($row['name'], $level+1);\r\n   }\r\n}\r\n?&gt;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f2889b3db28990260301-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889b3db28990260301-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f2889b3db28990260301-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889b3db28990260301-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f2889b3db28990260301-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889b3db28990260301-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f2889b3db28990260301-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889b3db28990260301-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f2889b3db28990260301-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889b3db28990260301-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f2889b3db28990260301-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889b3db28990260301-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59f2889b3db28990260301-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889b3db28990260301-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59f2889b3db28990260301-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889b3db28990260301-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-59f2889b3db28990260301-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889b3db28990260301-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-59f2889b3db28990260301-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889b3db28990260301-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-59f2889b3db28990260301-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889b3db28990260301-22\">22</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f2889b3db28990260301-1\"><span class=\"crayon-ta\">&lt;?php</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889b3db28990260301-2\"><span class=\"crayon-c\">// $parent is the parent of the children we want to see</span></div><div class=\"crayon-line\" id=\"crayon-59f2889b3db28990260301-3\"><span class=\"crayon-c\">// $level is increased when we go deeper into the tree,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889b3db28990260301-4\"><span class=\"crayon-c\">//        used to display a nice indented tree</span></div><div class=\"crayon-line\" id=\"crayon-59f2889b3db28990260301-5\"><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889b3db28990260301-6\"><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">display_children</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">$parent</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">$level</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-59f2889b3db28990260301-7\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889b3db28990260301-8\"><span class=\"crayon-h\">   </span><span class=\"crayon-c\">// 获得一个 父节点 $parent 的所有子节点</span></div><div class=\"crayon-line\" id=\"crayon-59f2889b3db28990260301-9\"><span class=\"crayon-h\">   </span><span class=\"crayon-v\">$result</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">mysql_query</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'SELECT name FROM tree WHERE parent=\"'</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">$parent</span><span class=\"crayon-sy\">.</span><span class=\"crayon-s\">'\";'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889b3db28990260301-10\"><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-59f2889b3db28990260301-11\"><span class=\"crayon-h\">   </span><span class=\"crayon-c\">// 显示每个子节点</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889b3db28990260301-12\"><span class=\"crayon-h\">   </span><span class=\"crayon-st\">while</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">$row</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">mysql_fetch_array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">$result</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-59f2889b3db28990260301-13\"><span class=\"crayon-h\">   </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889b3db28990260301-14\"><span class=\"crayon-h\">       </span><span class=\"crayon-c\">// 缩进显示节点名称</span></div><div class=\"crayon-line\" id=\"crayon-59f2889b3db28990260301-15\"><span class=\"crayon-h\">       </span><span class=\"crayon-k \">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">str_repeat</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'  '</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">$level</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">$row</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'name'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">.</span><span class=\"crayon-s\">\"\\n\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889b3db28990260301-16\"><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-59f2889b3db28990260301-17\"><span class=\"crayon-h\">       </span><span class=\"crayon-c\">//再次调用这个函数显示子节点的子节点</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889b3db28990260301-18\"><span class=\"crayon-h\">      </span></div><div class=\"crayon-line\" id=\"crayon-59f2889b3db28990260301-19\"><span class=\"crayon-h\">       </span><span class=\"crayon-e\">display_children</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">$row</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'name'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">$level</span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889b3db28990260301-20\"><span class=\"crayon-h\">   </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-59f2889b3db28990260301-21\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889b3db28990260301-22\"><span class=\"crayon-ta\">?&gt;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0046 seconds] -->\r\n<p>对整个结构的根节点（Food）使用这个函数就可以打印出整个多级树结构，由于Food是根节点它的父节点是空的，所以这样调用: display_children(”,0)。将显示整个树的内容。如果你只想显示整个结构中的一部分，比如说水果部分，就可以这样调用：display_children(‘Fruit’,0);</p>\n<p>几乎使用同样的方法我们可以知道从根节点到任意节点的路径。比如 Cherry 的路径是　”Food &gt;; Fruit &gt;; Red”。 为了得到这样的一个路径我们需要从最深的一级”Cherry”开始， 查询得到它的父节点”Red”把它添加到路径中， 然后我们再查询Red的父节点并把它也添加到路径中，以此类推直到最高层的”Food”</p>\n<p>以下是代码：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f2889b3db32090610627\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-mixed-highlight\" title=\"含多种语言\"></span><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&lt;?php\r\n// $node 是那个最深的节点\r\nfunction get_path($node) \r\n{\r\n   // 查询这个节点的父节点\r\n   $result = mysql_query('SELECT parent FROM tree '.\r\n                          'WHERE name=\"'.$node.'\";');\r\n   $row = mysql_fetch_array($result);\r\n \r\n   // 用一个数组保存路径\r\n   $path = array();\r\n \r\n   // 如果不是根节点则继续向上查询\r\n   // (根节点没有父节点)\r\n   if ($row['parent']!='') \r\n   {\r\n       // the last part of the path to $node, is the name\r\n       // of the parent of $node\r\n       $path[] = $row['parent'];\r\n \r\n       // we should add the path to the parent of this node\r\n       // to the path\r\n       $path = array_merge(get_path($row['parent']), $path);\r\n   }\r\n \r\n   // return the path\r\n   return $path;\r\n}\r\n?&gt;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f2889b3db32090610627-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889b3db32090610627-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f2889b3db32090610627-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889b3db32090610627-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f2889b3db32090610627-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889b3db32090610627-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f2889b3db32090610627-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889b3db32090610627-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f2889b3db32090610627-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889b3db32090610627-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f2889b3db32090610627-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889b3db32090610627-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59f2889b3db32090610627-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889b3db32090610627-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59f2889b3db32090610627-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889b3db32090610627-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-59f2889b3db32090610627-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889b3db32090610627-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-59f2889b3db32090610627-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889b3db32090610627-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-59f2889b3db32090610627-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889b3db32090610627-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-59f2889b3db32090610627-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889b3db32090610627-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-59f2889b3db32090610627-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889b3db32090610627-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-59f2889b3db32090610627-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889b3db32090610627-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-59f2889b3db32090610627-29\">29</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f2889b3db32090610627-1\"><span class=\"crayon-ta\">&lt;?php</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889b3db32090610627-2\"><span class=\"crayon-c\">// $node 是那个最深的节点</span></div><div class=\"crayon-line\" id=\"crayon-59f2889b3db32090610627-3\"><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">get_path</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">$node</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889b3db32090610627-4\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f2889b3db32090610627-5\"><span class=\"crayon-h\">   </span><span class=\"crayon-c\">// 查询这个节点的父节点</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889b3db32090610627-6\"><span class=\"crayon-h\">   </span><span class=\"crayon-v\">$result</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">mysql_query</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'SELECT parent FROM tree '</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-59f2889b3db32090610627-7\"><span class=\"crayon-h\">                          </span><span class=\"crayon-s\">'WHERE name=\"'</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">$node</span><span class=\"crayon-sy\">.</span><span class=\"crayon-s\">'\";'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889b3db32090610627-8\"><span class=\"crayon-h\">   </span><span class=\"crayon-v\">$row</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">mysql_fetch_array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">$result</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f2889b3db32090610627-9\"><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889b3db32090610627-10\"><span class=\"crayon-h\">   </span><span class=\"crayon-c\">// 用一个数组保存路径</span></div><div class=\"crayon-line\" id=\"crayon-59f2889b3db32090610627-11\"><span class=\"crayon-h\">   </span><span class=\"crayon-v\">$path</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889b3db32090610627-12\"><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-59f2889b3db32090610627-13\"><span class=\"crayon-h\">   </span><span class=\"crayon-c\">// 如果不是根节点则继续向上查询</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889b3db32090610627-14\"><span class=\"crayon-h\">   </span><span class=\"crayon-c\">// (根节点没有父节点)</span></div><div class=\"crayon-line\" id=\"crayon-59f2889b3db32090610627-15\"><span class=\"crayon-h\">   </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">$row</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'parent'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">!=</span><span class=\"crayon-s\">''</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889b3db32090610627-16\"><span class=\"crayon-h\">   </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f2889b3db32090610627-17\"><span class=\"crayon-h\">       </span><span class=\"crayon-c\">// the last part of the path to $node, is the name</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889b3db32090610627-18\"><span class=\"crayon-h\">       </span><span class=\"crayon-c\">// of the parent of $node</span></div><div class=\"crayon-line\" id=\"crayon-59f2889b3db32090610627-19\"><span class=\"crayon-h\">       </span><span class=\"crayon-v\">$path</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">$row</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'parent'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889b3db32090610627-20\"><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-59f2889b3db32090610627-21\"><span class=\"crayon-h\">       </span><span class=\"crayon-c\">// we should add the path to the parent of this node</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889b3db32090610627-22\"><span class=\"crayon-h\">       </span><span class=\"crayon-c\">// to the path</span></div><div class=\"crayon-line\" id=\"crayon-59f2889b3db32090610627-23\"><span class=\"crayon-h\">       </span><span class=\"crayon-v\">$path</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">array_merge</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">get_path</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">$row</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'parent'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">$path</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889b3db32090610627-24\"><span class=\"crayon-h\">   </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-59f2889b3db32090610627-25\"><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889b3db32090610627-26\"><span class=\"crayon-h\">   </span><span class=\"crayon-c\">// return the path</span></div><div class=\"crayon-line\" id=\"crayon-59f2889b3db32090610627-27\"><span class=\"crayon-h\">   </span><span class=\"crayon-k \">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">$path</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889b3db32090610627-28\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-59f2889b3db32090610627-29\"><span class=\"crayon-ta\">?&gt;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0031 seconds] -->\r\n<p>如果对”Cherry”使用这个函数：print_r(get_path(‘Cherry’))，就会得到这样的一个数组了：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f2889b3db37496194031\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nArray  \r\n(  \r\n  [0] =&gt;; Food  \r\n  [1] =&gt;; Fruit  \r\n  [2] =&gt;; Red  \r\n)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f2889b3db37496194031-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889b3db37496194031-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f2889b3db37496194031-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889b3db37496194031-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f2889b3db37496194031-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889b3db37496194031-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f2889b3db37496194031-1\"><span class=\"crayon-t\">Array</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889b3db37496194031-2\"><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-59f2889b3db37496194031-3\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Food</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889b3db37496194031-4\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Fruit</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-59f2889b3db37496194031-5\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Red</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889b3db37496194031-6\"><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p>这种方案的优点很明显：结构简单易懂，由于互相之间的关系只由一个parent_id维护，所以增删改都是非常容易，只需要改动和他直接相关的记录就可以。缺点当然也是非常的突出：由于直接地记录了节点之间的继承关系，因此对Tree的任何CRUD操作都将是低效的，这主要归根于频繁的“递归”操作，递归过程不断地访问数据库，每次数据库IO都会有时间开销。举个例子，如果想要返回所有水果，也就是水果的所有子孙节点，看似很简单的操作，就需要用到一堆递归。当然，这种方案并非没有用武之地，在树的层级比较少的时候就非常实用，在邻接列表模式的基础上还可以拓展的是平面表，区别是将节点的level和当前节点的顺序也放入表中，比较适合类似评论等场景，具体的表结构类似这样，这里就不再深入阐述。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/39555f44c984f39dcebeef0feeb23dce.png\" alt=\"flat-table\" width=\"800\" height=\"183\"></p>\n<p>参考链接：</p>\n<ul>\n<li>http://salman-w.blogspot.com/2012/08/php-adjacency-list-hierarchy-tree-traversal.html</li>\n<li>https://packagist.org/search/?tags=adjacency%20list</li>\n</ul>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112309\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112309votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112309\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": "  评论", "praise_nums": "1", "url_object_id": "57b1c7a9c251956122375617d79e5750", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/03/4bae6998d00f180d42c7da716e3d0bb2.jpg"], "front_image_path": "full/117976068e2e847f1067d25ea3fa90a3b5a60f3f.jpg", "title": "树形结构数据存储方案（一）：邻接列表模式"}
{"create_date": "2017/08/24 ", "url": "http://blog.jobbole.com/112265/", "fav_nums": 10, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://dzone.com/articles/most-useful-linux-command-line-tricks\">Seco Max</a>   译文出处：<a target=\"_blank\" href=\"https://www.oschina.net/translate/most-useful-linux-command-line-tricks\">开源中国 - leoxu</a>   </div><p>我们可能每天都会要使用到很多的 <a href=\"https://likegeeks.com/main-linux-commands-easy-guide/\" target=\"_blank\" rel=\"nofollow\">Linux 命令行</a>。 我们也会网络上知晓一些使用它们的小技巧，但是如果我们没有时常来进行练习，就有可能会忘掉怎么去使用它们。 所以我就决定把那些你可能会忘记的小提示和小技巧，或者对你而言可能是全新的东西都列表来。</p>\n<h3>将输出内容以表格的形式显示出来</h3>\n<p>有时，在你看到命令行执行的输出时，因为字符串过度拥挤（比如说 mount 命令的输出）导致输出内容难以识别。如果我们看到的内容是一张表格会如何呢？其实这是很容易做到的！</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f26b57bc614468688402\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nmount | column –t:</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f26b57bc614468688402-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f26b57bc614468688402-1\"><span class=\"crayon-i\">mount</span> <span class=\"crayon-o\">|</span> <span class=\"crayon-i\">column</span> –<span class=\"crayon-v\">t</span><span class=\"crayon-o\">:</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/8105f229bd5aab1933e69a673b050b77.png\"></p>\n<p>在此例中，由于内容中留了空格，所以输出的形式就美观了起来。 那如果想要的分隔符是别的什么符号，比如说冒号，又该怎么去做呢？ （例如，在 cat/etc/passwd 的输出内容中使用）</p>\n<p>这时候只需要使用 -s 参数指定分隔符就行了，像下面这样。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f26b57bc61f728883514\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ncat /etc/passwd | column -t -s:</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f26b57bc61f728883514-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f26b57bc61f728883514-1\"><span class=\"crayon-i\">cat</span> <span class=\"crayon-o\">/</span><span class=\"crayon-v\">etc</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">passwd</span> <span class=\"crayon-o\">|</span> <span class=\"crayon-i\">column</span> <span class=\"crayon-o\">-</span><span class=\"crayon-i\">t</span> <span class=\"crayon-o\">-</span><span class=\"crayon-v\">s</span><span class=\"crayon-o\">:</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/ef22e95df16fb93a17c96954e6950305.png\"></p>\n<h3>重复执行一个命令，直到它运行成功</h3>\n<p>如果在 Google 上搜索这个功能，你会发现很多人都问到了如何重复执行命令，直到这个命令成功返回并且运行正常。 Google上的建议里就包括 ping 服务器，直到它变得空闲为止，还有就是检查是否有向特定的目录上传了具有特定扩展名的文件，还有就是检查特定的URL是否已经存在，诸如此类的办法。</p>\n<p>其实你还可以使用 while true 的循环来实现来实现这个功能：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/aa7339a9cd7cf1369192fd1007cb76cc.png\"></p>\n<p>在上面这个示例中，&gt;/dev/null 2&gt;＆1 会让程序的输出重定向到 /dev/ null。标准错误和标准输出都会被包含进去。</p>\n<p>这是我认为最酷的Linux命令行技巧之一。</p>\n<h3>按内存资源的使用量对进程进行排序</h3>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f26b57bc623528668533\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nps aux | sort -rnk 4:</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f26b57bc623528668533-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f26b57bc623528668533-1\"><span class=\"crayon-i\">ps</span> <span class=\"crayon-i\">aux</span> <span class=\"crayon-o\">|</span> <span class=\"crayon-i\">sort</span> <span class=\"crayon-o\">-</span><span class=\"crayon-i\">rnk</span> <span class=\"crayon-cn\">4</span><span class=\"crayon-o\">:</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/02ff6a80a4e1632d459fbe1ff580d8fb.png\"></p>\n<h3>按 CPU 资源的使用量对进程进行排序</h3>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f26b57bc627415908295\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nps aux | sort -nk 3:</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f26b57bc627415908295-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f26b57bc627415908295-1\"><span class=\"crayon-i\">ps</span> <span class=\"crayon-i\">aux</span> <span class=\"crayon-o\">|</span> <span class=\"crayon-i\">sort</span> <span class=\"crayon-o\">-</span><span class=\"crayon-i\">nk</span> <span class=\"crayon-cn\">3</span><span class=\"crayon-o\">:</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/a71a5974b1fbae9a9614f2f65d66bfdd.png\"></p>\n<p>如果想要检查你的机器架构，那就执行 getconf LONG_BIT。</p>\n<h3>可以同时查看多个日志文件</h3>\n<p>毫无疑问，你可能已经会使用 tail  命令来查看日志文件了，但可能有时候你还想着能同时查看多个日志文件。 使用 multi-tail 命令就支持支持文本的高亮显示，内容过滤以及更多你可能需要的功能：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/ba6ceb511883799d251d17f9b4e28f0e.png\"><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/d81c3712dd9b9986860c3e89467852fb.png\"></p>\n<p>如果系统里还没有这个命令，运行 apt-get install multitail 命令就可以把它给装上。</p>\n<h3>回到你操作过的上一个目录去</h3>\n<p>只需敲入 cd – 就会返回到你操作过的上一个目录中去。</p>\n<h3>让非交互式 Shell 会话可进行交互</h3>\n<p>想要这样做，那就把设置从 ~/.bashrc 改成 ~/.bash_profile 吧。</p>\n<h3>定时的监视性命令输出</h3>\n<p>使用 watch 命令（watch df -h），你就可以查看到任何命令的任何输出。例如，你可以查看可用空间以及它的使用量增长情况。</p>\n<p>通过利用 watch 命令来操作会变化的数据，你可以尽情想象自己能拿这个来做些什么哦。</p>\n<h3>在会话关掉以后继续运行程序</h3>\n<p>如果你在后台运行了什么程序，然后你关掉了的 shell 会话，那么这个后台运行的程序就会被你的 shell 杀掉。关闭 shell 以后怎么让程序继续运行下去呢？</p>\n<p>这个可以用 nohup 命令做到 – 该指令表示不做挂断操作：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f26b57bc62b481925389\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nnohup wget site.com/file.zip</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f26b57bc62b481925389-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f26b57bc62b481925389-1\"><span class=\"crayon-i\">nohup</span> <span class=\"crayon-i\">wget</span> <span class=\"crayon-v\">site</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">file</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">zip</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>此命令是最容易被遗忘的 Linux 命令行技巧之一，因为我们许多人都会使用另外一个类命令的 screen 环境：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/8e6ac97ad36188d5a566a851d1e2c8c5.png\"></p>\n<p>这样会在同一个目录下生成一个名称为 nohup.out 的文件，其中包含了正在运行的程序的输出内容：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/73f4a9d25594c685db6714ee46d96810.png\"></p>\n<p>命令很酷，对吧？</p>\n<h3>自动对任何命令回答 Yes 或者 No</h3>\n<p>如果你想自动化需要向用户说的 Yes 的过程，可以使用 yes 命令来实现：yes | apt-get update。</p>\n<p>也许你想做的是自动地说“No”。这个可以使用 yes no | 命令来实现。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/9d3ada6e55c6b9738b0dc40667db4c50.png\"></p>\n<h3>创建具有指定大小的文件</h3>\n<p>可以使用 dd 命令来创建出具有指定大小的文件：dd if=/dev/zero of=out.txt bs=1M count=10。</p>\n<p>这样就会创建出一个 10 MB 的文件，填充零作为内容：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/caf1d4163993de8e51e0eb04e45c59d6.png\"></p>\n<h3>以根目录用户来运行最后一个命令</h3>\n<p>有时，你会忘记在需要 root 权限的命令之前敲入 sudo。这时候你没必要去重写命令; 只要输入 sudo 就行了！</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/1f79f8f42fcd5f08552b17cc3398d258.png\"></p>\n<h3>对命令行会话进行记录</h3>\n<p>如果想要把自己在 shell 屏幕上敲的内容记录下来，可以使用 script 命令将所有敲写的内容保存到一个名为 typescriptscript 的文件中去。</p>\n<p>等你敲入 exit 命令以后，所有命令就都会被写入该文件，以便你事后再回过头去查看。</p>\n<h3>用标签符号替换空格符</h3>\n<p>可以使用 tr 命令替换任何字符，这个用起来非常方便：cat geeks.txt | tr ‘:[space]:’ ‘\\t’ &gt; out.txt.</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/7dcc5cc23045ed18fd3ed993c3065028.png\"></p>\n<h3>将文件内容转换为大写或者小写</h3>\n<p>可以这样实现：cat myfile | tr a-z A-Z&gt; output.txt。</p>\n<h3>强大的 Xargs 命令</h3>\n<p>xargs 命令是最重要的 Linux 命令行技巧之一。你可以使用这个命令将命令的输出作为参数传递给另一个命令。例如，搜索 png 文件然后对其进行压缩或者其它操作：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f26b57bc62f923584685\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfind. -name *.png -type f -print | xargs tar -cvzf images.tar.gz</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f26b57bc62f923584685-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f26b57bc62f923584685-1\"><span class=\"crayon-v\">find</span><span class=\"crayon-sy\">.</span> <span class=\"crayon-o\">-</span><span class=\"crayon-i\">name</span> <span class=\"crayon-o\">*</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">png</span> <span class=\"crayon-o\">-</span><span class=\"crayon-i\">type</span> <span class=\"crayon-i\">f</span> <span class=\"crayon-o\">-</span><span class=\"crayon-i\">print</span> <span class=\"crayon-o\">|</span> <span class=\"crayon-i\">xargs</span> <span class=\"crayon-i\">tar</span> <span class=\"crayon-o\">-</span><span class=\"crayon-i\">cvzf</span> <span class=\"crayon-v\">images</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">tar</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">gz</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>又或者你的文件中有一个 URL 的列表，而你想要做的是以不同的方式下载或者处理这些 URL，可以这样做：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f26b57bc633713321598\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ncat urls.txt | xargs wget</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f26b57bc633713321598-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f26b57bc633713321598-1\"><span class=\"crayon-i\">cat</span> <span class=\"crayon-v\">urls</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span> <span class=\"crayon-o\">|</span> <span class=\"crayon-i\">xargs</span> <span class=\"crayon-v\">wget</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/219b583b1bb3cac2c59130e9bb7e62bf.png\"></p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/fc0b4e63f0d1e1009371efcca207fb23.png\" alt=\"xargs command\" width=\"881\" height=\"119\"></p>\n<p>请你要记得，第一个命令的输出会在 xargs 命令结尾处传递。</p>\n<p>那如果命令需要中间过程的输出，该怎么办呢？这个简单！</p>\n<p>只需要使用 {} 并结合 -i 参数就行了。如下所示，替换在第一个命令的输出应该去的地方的参数：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f26b57bc636557292338\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nls /etc/*.conf | xargs -i cp {} /home/likegeeks/Desktop/out</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f26b57bc636557292338-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f26b57bc636557292338-1\"><span class=\"crayon-i\">ls</span> <span class=\"crayon-o\">/</span><span class=\"crayon-v\">etc</span><span class=\"crayon-o\">/</span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">conf</span> <span class=\"crayon-o\">|</span> <span class=\"crayon-e\">xargs</span> <span class=\"crayon-o\">-</span><span class=\"crayon-e\">i</span> <span class=\"crayon-e\">cp</span> <span class=\"crayon-sy\">{</span><span class=\"crayon-sy\">}</span> <span class=\"crayon-o\">/</span><span class=\"crayon-v\">home</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">likegeeks</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">Desktop</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">out</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>这只是 Linux 命令行技巧其中的几个而已。你可以使用其他命令来做一些更 HAPPY 的事情，比如 awk 命令和 sed 命令！</p>\n<p>如果你知道一些我在这里没有提到的任何其它的极客命令，欢迎评论。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112265\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112265votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112265\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 10 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": "  评论", "praise_nums": "1", "url_object_id": "ffadf132787e6e34490e266051346177", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/05/77d80105fd15f2465894827e23cc4842.jpeg"], "front_image_path": "full/d1b17b98748a74826464a08e6d30a4ee1b15b171.jpg", "title": "最实用的 Linux 命令行使用技巧"}
{"create_date": "2017/09/01 ", "url": "http://blog.jobbole.com/112315/", "fav_nums": "  收藏", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://www.biaodianfu.com/closure-table.html\">标点符</a>   </div><p>将Closure Table翻译成闭包表不知道是否合适，闭包表的思路和<a href=\"http://blog.jobbole.com/112312/\">物化路径</a>差不多，都是空间换时间，Closure Table，一种更为彻底的全路径结构，分别记录路径上相关结点的全展开形式。能明晰任意两结点关系而无须多余查询，级联删除和结点移动也很方便。但是它的存储开销会大一些，除了表示结点的Meta信息，还需要一张专用的关系表。</p>\n<p>以下图举例数据举例：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/72dbc716e80c6f5d62a90ddf0cf49901.jpg\" alt=\"tree\" width=\"231\" height=\"259\"></p>\n<p>创建主表：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f2889b91135542738825\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nCREATE TABLE nodeInfo (\r\n\tnode_id INT NOT NULL AUTO_INCREMENT,\r\n\tnode_name VARCHAR (255),\r\n\tPRIMARY KEY (`node_id`)\r\n) DEFAULT CHARSET = utf8;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f2889b91135542738825-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889b91135542738825-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f2889b91135542738825-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889b91135542738825-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f2889b91135542738825-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f2889b91135542738825-1\"><span class=\"crayon-e\">CREATE </span><span class=\"crayon-e\">TABLE </span><span class=\"crayon-e\">nodeInfo</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889b91135542738825-2\"><span class=\"crayon-h\">\t</span><span class=\"crayon-e\">node_id </span><span class=\"crayon-t\">INT</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">NOT</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">AUTO_INCREMENT</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f2889b91135542738825-3\"><span class=\"crayon-h\">\t</span><span class=\"crayon-e\">node_name </span><span class=\"crayon-e\">VARCHAR</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">255</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889b91135542738825-4\"><span class=\"crayon-h\">\t</span><span class=\"crayon-e\">PRIMARY </span><span class=\"crayon-e\">KEY</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">node_id</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f2889b91135542738825-5\"><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">CHARSET</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">utf8</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p>创建关系表：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f2889b9113f187919262\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nCREATE TABLE nodeRelationship (\r\n\tancestor INT NOT NULL,\r\n\tdescendant INT NOT NULL,\r\n\tdistance INT NOT NULL,\r\n\tPRIMARY KEY (ancestor, descendant)\r\n) DEFAULT CHARSET = utf8;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f2889b9113f187919262-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889b9113f187919262-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f2889b9113f187919262-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889b9113f187919262-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f2889b9113f187919262-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889b9113f187919262-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f2889b9113f187919262-1\"><span class=\"crayon-e\">CREATE </span><span class=\"crayon-e\">TABLE </span><span class=\"crayon-e\">nodeRelationship</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889b9113f187919262-2\"><span class=\"crayon-h\">\t</span><span class=\"crayon-e\">ancestor </span><span class=\"crayon-t\">INT</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">NOT</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f2889b9113f187919262-3\"><span class=\"crayon-h\">\t</span><span class=\"crayon-e\">descendant </span><span class=\"crayon-t\">INT</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">NOT</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889b9113f187919262-4\"><span class=\"crayon-h\">\t</span><span class=\"crayon-e\">distance </span><span class=\"crayon-t\">INT</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">NOT</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f2889b9113f187919262-5\"><span class=\"crayon-h\">\t</span><span class=\"crayon-e\">PRIMARY </span><span class=\"crayon-e\">KEY</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ancestor</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">descendant</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889b9113f187919262-6\"><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">CHARSET</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">utf8</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0016 seconds] -->\r\n<p>其中</p>\n<ul>\n<li>Ancestor代表祖先节点</li>\n<li>Descendant代表后代节点</li>\n<li>Distance 祖先距离后代的距离</li>\n</ul>\n<p>添加数据（创建存储过程）</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f2889b91143488578590\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nCREATE DEFINER = `root`@`localhost` PROCEDURE `AddNode`(`_parent_name` varchar(255),`_node_name` varchar(255))\r\nBEGIN\r\n\tDECLARE _ancestor INT;\r\n\tDECLARE _descendant INT;\r\n\tDECLARE _parent INT;\r\n\tIF NOT EXISTS(SELECT node_id From nodeinfo WHERE node_name = _node_name)\r\n\tTHEN\r\n\t\tINSERT INTO nodeinfo (node_name) VALUES(_node_name);\r\n\t\tSET _descendant = (SELECT node_id FROM nodeinfo WHERE node_name = _node_name);\r\n\t\tINSERT INTO noderelationship (ancestor,descendant,distance) VALUES(_descendant,_descendant,0);\r\n\t\tIF EXISTS (SELECT node_id FROM nodeinfo WHERE node_name = _parent_name)\r\n\t\tTHEN\r\n\t\t\tSET _parent = (SELECT node_id FROM nodeinfo WHERE node_name = _parent_name);\r\n\t\t\tINSERT INTO noderelationship (ancestor,descendant,distance) SELECT ancestor,_descendant,distance+1 from noderelationship where descendant = _parent;\r\n\t\tEND IF;\r\n\tEND IF;\r\nEND;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f2889b91143488578590-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889b91143488578590-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f2889b91143488578590-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889b91143488578590-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f2889b91143488578590-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889b91143488578590-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f2889b91143488578590-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889b91143488578590-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f2889b91143488578590-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889b91143488578590-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f2889b91143488578590-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889b91143488578590-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59f2889b91143488578590-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889b91143488578590-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59f2889b91143488578590-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889b91143488578590-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-59f2889b91143488578590-17\">17</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f2889b91143488578590-1\"><span class=\"crayon-e\">CREATE </span><span class=\"crayon-v\">DEFINER</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">@</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">localhost</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">PROCEDURE</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">AddNode</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">_parent_name</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">varchar</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">255</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">_node_name</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">varchar</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">255</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889b91143488578590-2\"><span class=\"crayon-e\">BEGIN</span></div><div class=\"crayon-line\" id=\"crayon-59f2889b91143488578590-3\"><span class=\"crayon-e\">\t</span><span class=\"crayon-r\">DECLARE</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">_ancestor </span><span class=\"crayon-t\">INT</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889b91143488578590-4\"><span class=\"crayon-h\">\t</span><span class=\"crayon-r\">DECLARE</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">_descendant </span><span class=\"crayon-t\">INT</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f2889b91143488578590-5\"><span class=\"crayon-h\">\t</span><span class=\"crayon-r\">DECLARE</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">_parent </span><span class=\"crayon-t\">INT</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889b91143488578590-6\"><span class=\"crayon-h\">\t</span><span class=\"crayon-st\">IF</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">NOT</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">EXISTS</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">SELECT </span><span class=\"crayon-e\">node_id </span><span class=\"crayon-e\">From </span><span class=\"crayon-e\">nodeinfo </span><span class=\"crayon-e\">WHERE </span><span class=\"crayon-v\">node_name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">_node_name</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f2889b91143488578590-7\"><span class=\"crayon-h\">\t</span><span class=\"crayon-st\">THEN</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889b91143488578590-8\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">INSERT </span><span class=\"crayon-e\">INTO </span><span class=\"crayon-e\">nodeinfo</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">node_name</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">VALUES</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">_node_name</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f2889b91143488578590-9\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">_descendant</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">SELECT </span><span class=\"crayon-e\">node_id </span><span class=\"crayon-e\">FROM </span><span class=\"crayon-e\">nodeinfo </span><span class=\"crayon-e\">WHERE </span><span class=\"crayon-v\">node_name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">_node_name</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889b91143488578590-10\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">INSERT </span><span class=\"crayon-e\">INTO </span><span class=\"crayon-e\">noderelationship</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ancestor</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">descendant</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">distance</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">VALUES</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">_descendant</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">_descendant</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f2889b91143488578590-11\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-st\">IF</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">EXISTS</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">SELECT </span><span class=\"crayon-e\">node_id </span><span class=\"crayon-e\">FROM </span><span class=\"crayon-e\">nodeinfo </span><span class=\"crayon-e\">WHERE </span><span class=\"crayon-v\">node_name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">_parent_name</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889b91143488578590-12\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-st\">THEN</span></div><div class=\"crayon-line\" id=\"crayon-59f2889b91143488578590-13\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-e\">SET </span><span class=\"crayon-v\">_parent</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">SELECT </span><span class=\"crayon-e\">node_id </span><span class=\"crayon-e\">FROM </span><span class=\"crayon-e\">nodeinfo </span><span class=\"crayon-e\">WHERE </span><span class=\"crayon-v\">node_name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">_parent_name</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889b91143488578590-14\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-e\">INSERT </span><span class=\"crayon-e\">INTO </span><span class=\"crayon-e\">noderelationship</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ancestor</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">descendant</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">distance</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">SELECT </span><span class=\"crayon-v\">ancestor</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">_descendant</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">distance</span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">from </span><span class=\"crayon-e\">noderelationship </span><span class=\"crayon-e\">where </span><span class=\"crayon-v\">descendant</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">_parent</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f2889b91143488578590-15\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-st\">END</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">IF</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889b91143488578590-16\"><span class=\"crayon-h\">\t</span><span class=\"crayon-st\">END</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">IF</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f2889b91143488578590-17\"><span class=\"crayon-st\">END</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0042 seconds] -->\r\n<p>完成后2张表的数据大致是这样的：（注意：每个节点都有一条到其本身的记录。）</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/97f89f232ea959cd8c01536308049baf.png\" alt=\"Closure-Table-1\" width=\"178\" height=\"224\"></p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/5842ea4fa2e0b6f0bdc31ed02131df05.png\" alt=\"Closure-Table-2\" width=\"261\" height=\"451\"></p>\n<p>查询Fruit下所有的子节点：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f2889b91147459314337\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSELECT\r\n\tn3.node_name\r\nFROM\r\n\tnodeinfo n1\r\nINNER JOIN noderelationship n2 ON n1.node_id = n2.ancestor\r\nINNER JOIN nodeinfo n3 ON n2.descendant = n3.node_id\r\nWHERE\r\n\tn1.node_name = 'Fruit'\r\nAND n2.distance != 0</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f2889b91147459314337-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889b91147459314337-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f2889b91147459314337-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889b91147459314337-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f2889b91147459314337-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889b91147459314337-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f2889b91147459314337-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889b91147459314337-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f2889b91147459314337-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f2889b91147459314337-1\"><span class=\"crayon-e\">SELECT</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889b91147459314337-2\"><span class=\"crayon-e\">\t</span><span class=\"crayon-v\">n3</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">node_name</span></div><div class=\"crayon-line\" id=\"crayon-59f2889b91147459314337-3\"><span class=\"crayon-e\">FROM</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889b91147459314337-4\"><span class=\"crayon-e\">\t</span><span class=\"crayon-e\">nodeinfo </span><span class=\"crayon-e\">n1</span></div><div class=\"crayon-line\" id=\"crayon-59f2889b91147459314337-5\"><span class=\"crayon-e\">INNER </span><span class=\"crayon-e\">JOIN </span><span class=\"crayon-e\">noderelationship </span><span class=\"crayon-e\">n2 </span><span class=\"crayon-e\">ON </span><span class=\"crayon-v\">n1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">node_id</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n2</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">ancestor</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889b91147459314337-6\"><span class=\"crayon-e\">INNER </span><span class=\"crayon-e\">JOIN </span><span class=\"crayon-e\">nodeinfo </span><span class=\"crayon-e\">n3 </span><span class=\"crayon-e\">ON </span><span class=\"crayon-v\">n2</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">descendant</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n3</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">node_id</span></div><div class=\"crayon-line\" id=\"crayon-59f2889b91147459314337-7\"><span class=\"crayon-e\">WHERE</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889b91147459314337-8\"><span class=\"crayon-e\">\t</span><span class=\"crayon-v\">n1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">node_name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Fruit'</span></div><div class=\"crayon-line\" id=\"crayon-59f2889b91147459314337-9\"><span class=\"crayon-st\">AND</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n2</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">distance</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p>查询Fruit下直属子节点：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f2889b9114b795891795\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSELECT\r\n\tn3.node_name\r\nFROM\r\n\tnodeinfo n1\r\nINNER JOIN noderelationship n2 ON n1.node_id = n2.ancestor\r\nINNER JOIN nodeinfo n3 ON n2.descendant = n3.node_id\r\nWHERE\r\n\tn1.node_name = 'Fruit'\r\nAND n2.distance = 1</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f2889b9114b795891795-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889b9114b795891795-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f2889b9114b795891795-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889b9114b795891795-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f2889b9114b795891795-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889b9114b795891795-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f2889b9114b795891795-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889b9114b795891795-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f2889b9114b795891795-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f2889b9114b795891795-1\"><span class=\"crayon-e\">SELECT</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889b9114b795891795-2\"><span class=\"crayon-e\">\t</span><span class=\"crayon-v\">n3</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">node_name</span></div><div class=\"crayon-line\" id=\"crayon-59f2889b9114b795891795-3\"><span class=\"crayon-e\">FROM</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889b9114b795891795-4\"><span class=\"crayon-e\">\t</span><span class=\"crayon-e\">nodeinfo </span><span class=\"crayon-e\">n1</span></div><div class=\"crayon-line\" id=\"crayon-59f2889b9114b795891795-5\"><span class=\"crayon-e\">INNER </span><span class=\"crayon-e\">JOIN </span><span class=\"crayon-e\">noderelationship </span><span class=\"crayon-e\">n2 </span><span class=\"crayon-e\">ON </span><span class=\"crayon-v\">n1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">node_id</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n2</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">ancestor</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889b9114b795891795-6\"><span class=\"crayon-e\">INNER </span><span class=\"crayon-e\">JOIN </span><span class=\"crayon-e\">nodeinfo </span><span class=\"crayon-e\">n3 </span><span class=\"crayon-e\">ON </span><span class=\"crayon-v\">n2</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">descendant</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n3</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">node_id</span></div><div class=\"crayon-line\" id=\"crayon-59f2889b9114b795891795-7\"><span class=\"crayon-e\">WHERE</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889b9114b795891795-8\"><span class=\"crayon-e\">\t</span><span class=\"crayon-v\">n1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">node_name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Fruit'</span></div><div class=\"crayon-line\" id=\"crayon-59f2889b9114b795891795-9\"><span class=\"crayon-st\">AND</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n2</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">distance</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0018 seconds] -->\r\n<p>查询Fruit所处的层级：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f2889b9114e950179483\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSELECT\r\n\tn2.*, n3.node_name\r\nFROM\r\n\tnodeinfo n1\r\nINNER JOIN noderelationship n2 ON n1.node_id = n2.descendant\r\nINNER JOIN nodeinfo n3 ON n2.ancestor = n3.node_id\r\nWHERE\r\n\tn1.node_name = 'Fruit'\r\nORDER BY\r\n\tn2.distance DESC</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f2889b9114e950179483-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889b9114e950179483-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f2889b9114e950179483-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889b9114e950179483-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f2889b9114e950179483-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889b9114e950179483-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f2889b9114e950179483-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889b9114e950179483-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f2889b9114e950179483-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f2889b9114e950179483-10\">10</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f2889b9114e950179483-1\"><span class=\"crayon-e\">SELECT</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889b9114e950179483-2\"><span class=\"crayon-e\">\t</span><span class=\"crayon-v\">n2</span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n3</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">node_name</span></div><div class=\"crayon-line\" id=\"crayon-59f2889b9114e950179483-3\"><span class=\"crayon-e\">FROM</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889b9114e950179483-4\"><span class=\"crayon-e\">\t</span><span class=\"crayon-e\">nodeinfo </span><span class=\"crayon-e\">n1</span></div><div class=\"crayon-line\" id=\"crayon-59f2889b9114e950179483-5\"><span class=\"crayon-e\">INNER </span><span class=\"crayon-e\">JOIN </span><span class=\"crayon-e\">noderelationship </span><span class=\"crayon-e\">n2 </span><span class=\"crayon-e\">ON </span><span class=\"crayon-v\">n1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">node_id</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n2</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">descendant</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889b9114e950179483-6\"><span class=\"crayon-e\">INNER </span><span class=\"crayon-e\">JOIN </span><span class=\"crayon-e\">nodeinfo </span><span class=\"crayon-e\">n3 </span><span class=\"crayon-e\">ON </span><span class=\"crayon-v\">n2</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">ancestor</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n3</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">node_id</span></div><div class=\"crayon-line\" id=\"crayon-59f2889b9114e950179483-7\"><span class=\"crayon-e\">WHERE</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889b9114e950179483-8\"><span class=\"crayon-e\">\t</span><span class=\"crayon-v\">n1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">node_name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Fruit'</span></div><div class=\"crayon-line\" id=\"crayon-59f2889b9114e950179483-9\"><span class=\"crayon-e\">ORDER </span><span class=\"crayon-e\">BY</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f2889b9114e950179483-10\"><span class=\"crayon-e\">\t</span><span class=\"crayon-v\">n2</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">distance </span><span class=\"crayon-v\">DESC</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p>另外要删除节点也非常的简单，这里就不再做过多的阐述。</p>\n<p>参考链接：</p>\n<ul>\n<li>https://coderwall.com/p/lixing/closure-tables-for-browsing-trees-in-sql</li>\n</ul>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112315\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112315votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112315\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": "  评论", "praise_nums": "1", "url_object_id": "6066e9414921b467dc9895b140263fb2", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/03/4bae6998d00f180d42c7da716e3d0bb2.jpg"], "front_image_path": "full/117976068e2e847f1067d25ea3fa90a3b5a60f3f.jpg", "title": "树形结构数据存储方案（三）：闭包表"}
{"create_date": "2017/08/26 ", "url": "http://blog.jobbole.com/112277/", "fav_nums": 3, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://opensource.com/article/17/2/linux-boot-and-startup\">David Both</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-8807-1.html\">Linux中国/penghuster</a>   </div><blockquote><p>你是否曾经对操作系统为何能够执行应用程序而感到疑惑？那么本文将为你揭开操作系统引导与启动的面纱。</p></blockquote>\n<p>理解操作系统开机引导和启动过程对于配置操作系统和解决相关启动问题是至关重要的。该文章陈述了 <a href=\"https://en.wikipedia.org/wiki/GNU_GRUB\">GRUB2 引导装载程序</a>开机引导装载内核的过程和 <a href=\"https://en.wikipedia.org/wiki/Systemd\">systemd 初始化系统</a>执行开机启动操作系统的过程。</p>\n<p>事实上，操作系统的启动分为两个阶段：引导boot和启动startup。引导阶段开始于打开电源开关，结束于内核初始化完成和 systemd 进程成功运行。启动阶段接管了剩余工作，直到操作系统进入可操作状态。</p>\n<p>总体来说，Linux 的开机引导和启动过程是相当容易理解，下文将分节对于不同步骤进行详细说明。</p>\n<ul>\n<li>BIOS 上电自检（POST）</li>\n<li>引导装载程序 (GRUB2)</li>\n<li>内核初始化</li>\n<li>启动 systemd，其是所有进程之父。</li>\n</ul>\n<p>注意，本文以 GRUB2 和 systemd 为载体讲述操作系统的开机引导和启动过程，是因为这二者是目前主流的 linux 发行版本所使用的引导装载程序和初始化软件。当然另外一些过去使用的相关软件仍然在一些 Linux 发行版本中使用。</p>\n<h3 id=\"toc_1\">引导过程</h3>\n<p>引导过程能以两种方式之一初始化。其一，如果系统处于关机状态，那么打开电源按钮将开启系统引导过程。其二，如果操作系统已经运行在一个本地用户（该用户可以是 root 或其他非特权用户），那么用户可以借助图形界面或命令行界面通过编程方式发起一个重启操作，从而触发系统引导过程。重启包括了一个关机和重新开始的操作。</p>\n<h4 id=\"toc_2\">BIOS 上电自检（POST）</h4>\n<p>上电自检过程中其实 Linux 没有什么也没做，上电自检主要由硬件的部分来完成，这对于所有操作系统都一样。当电脑接通电源，电脑开始执行 BIOS（基本输入输出系统Basic I/O System）的 POST（上电自检Power On Self Test）过程。</p>\n<p>在 1981 年，IBM 设计的第一台个人电脑中，BIOS 被设计为用来初始化硬件组件。POST 作为 BIOS 的组成部分，用于检验电脑硬件基本功能是否正常。如果 POST 失败，那么这个电脑就不能使用，引导过程也将就此中断。</p>\n<p>BIOS 上电自检确认硬件的基本功能正常，然后产生一个 BIOS <a href=\"https://en.wikipedia.org/wiki/BIOS_interrupt_call\">中断</a> INT 13H，该中断指向某个接入的可引导设备的引导扇区。它所找到的包含有效的引导记录的第一个引导扇区将被装载到内存中，并且控制权也将从引导扇区转移到此段代码。</p>\n<p>引导扇区是引导加载器真正的第一阶段。大多数 Linux 发行版本使用的引导加载器有三种：GRUB、GRUB2 和 LILO。GRUB2 是最新的，也是相对于其他老的同类程序使用最广泛的。</p>\n<h4 id=\"toc_3\">GRUB2</h4>\n<p>GRUB2 全称是 GRand Unified BootLoader，Version 2（第二版大一统引导装载程序）。它是目前流行的大部分 Linux 发行版本的主要引导加载程序。GRUB2 是一个用于计算机寻找操作系统内核并加载其到内存的智能程序。由于 GRUB 这个单词比 GRUB2 更易于书写和阅读，在下文中，除特殊指明以外，GRUB 将代指 GRUB2。</p>\n<p>GRUB 被设计为兼容操作系统<a href=\"https://en.wikipedia.org/wiki/Multiboot_Specification\">多重引导规范</a>，它能够用来引导不同版本的 Linux 和其他的开源操作系统；它还能链式加载专有操作系统的引导记录。</p>\n<p>GRUB 允许用户从任何给定的 Linux 发行版本的几个不同内核中选择一个进行引导。这个特性使得操作系统，在因为关键软件不兼容或其它某些原因升级失败时，具备引导到先前版本的内核的能力。GRUB 能够通过文件 <code>/boot/grub/grub.conf</code> 进行配置。（LCTT 译注：此处指 GRUB1）</p>\n<p>GRUB1 现在已经逐步被弃用，在大多数现代发行版上它已经被 GRUB2 所替换，GRUB2 是在 GRUB1 的基础上重写完成。基于 Red Hat 的发行版大约是在 Fedora 15 和 CentOS/RHEL 7 时升级到 GRUB2 的。GRUB2 提供了与 GRUB1 同样的引导功能，但是 GRUB2 也是一个类似主框架（mainframe）系统上的基于命令行的前置操作系统（Pre-OS）环境，使得在预引导阶段配置更为方便和易操作。GRUB2 通过 <code>/boot/grub2/grub.cfg</code> 进行配置。</p>\n<p>两个 GRUB 的最主要作用都是将内核加载到内存并运行。两个版本的 GRUB 的基本工作方式一致，其主要阶段也保持相同，都可分为 3 个阶段。在本文将以 GRUB2 为例进行讨论其工作过程。GRUB 或 GRUB2 的配置，以及 GRUB2 的命令使用均超过本文范围，不会在文中进行介绍。</p>\n<p>虽然 GRUB2 并未在其三个引导阶段中正式使用这些阶段stage名词，但是为了讨论方便，我们在本文中使用它们。</p>\n<h5 id=\"toc_4\">阶段 1</h5>\n<p>如上文 POST（上电自检）阶段提到的，在 POST 阶段结束时，BIOS 将查找在接入的磁盘中查找引导记录，其通常位于 MBR（主引导记录Master Boot Record），它加载它找到的第一个引导记录中到内存中，并开始执行此代码。引导代码（及阶段 1 代码）必须非常小，因为它必须连同分区表放到硬盘的第一个 512 字节的扇区中。 在<a href=\"https://en.wikipedia.org/wiki/Master_boot_record\">传统的常规 MBR</a> 中，引导代码实际所占用的空间大小为 446 字节。这个阶段 1 的 446 字节的文件通常被叫做引导镜像（boot.img），其中不包含设备的分区信息，分区是一般单独添加到引导记录中。</p>\n<p>由于引导记录必须非常的小，它不可能非常智能，且不能理解文件系统结构。因此阶段 1 的唯一功能就是定位并加载阶段 1.5 的代码。为了完成此任务，阶段 1.5 的代码必须位于引导记录与设备第一个分区之间的位置。在加载阶段 1.5 代码进入内存后，控制权将由阶段 1 转移到阶段 1.5。</p>\n<h5 id=\"toc_5\">阶段 1.5</h5>\n<p>如上所述，阶段 1.5 的代码必须位于引导记录与设备第一个分区之间的位置。该空间由于历史上的技术原因而空闲。第一个分区的开始位置在扇区 63 和 MBR（扇区 0）之间遗留下 62 个 512 字节的扇区（共 31744 字节），该区域用于存储阶段 1.5 的代码镜像 core.img 文件。该文件大小为 25389 字节，故此区域有足够大小的空间用来存储 core.img。</p>\n<p>因为有更大的存储空间用于阶段 1.5，且该空间足够容纳一些通用的文件系统驱动程序，如标准的 EXT 和其它的 Linux 文件系统，如 FAT 和 NTFS 等。GRUB2 的 core.img 远比更老的 GRUB1 阶段 1.5 更复杂且更强大。这意味着 GRUB2 的阶段 2 能够放在标准的 EXT 文件系统内，但是不能放在逻辑卷内。故阶段 2 的文件可以存放于 <code>/boot</code> 文件系统中，一般在 <code>/boot/grub2</code> 目录下。</p>\n<p>注意 <code>/boot</code> 目录必须放在一个 GRUB 所支持的文件系统（并不是所有的文件系统均可）。阶段 1.5 的功能是开始执行存放阶段 2 文件的 <code>/boot</code> 文件系统的驱动程序，并加载相关的驱动程序。</p>\n<h5 id=\"toc_6\">阶段 2</h5>\n<p>GRUB 阶段 2 所有的文件都已存放于 <code>/boot/grub2</code> 目录及其几个子目录之下。该阶段没有一个类似于阶段 1 与阶段 1.5 的镜像文件。相应地，该阶段主要需要从 <code>/boot/grub2/i386-pc</code> 目录下加载一些内核运行时模块。</p>\n<p>GRUB 阶段 2 的主要功能是定位和加载 Linux 内核到内存中，并转移控制权到内核。内核的相关文件位于 <code>/boot</code> 目录下，这些内核文件可以通过其文件名进行识别，其文件名均带有前缀 vmlinuz。你可以列出 <code>/boot</code> 目录中的内容来查看操作系统中当前已经安装的内核。</p>\n<p>GRUB2 跟 GRUB1 类似，支持从 Linux 内核选择之一引导启动。Red Hat 包管理器（DNF）支持保留多个内核版本，以防最新版本内核发生问题而无法启动时，可以恢复老版本的内核。默认情况下，GRUB 提供了一个已安装内核的预引导菜单，其中包括问题诊断菜单（recuse）以及恢复菜单（如果配置已经设置恢复镜像）。</p>\n<p>阶段 2 加载选定的内核到内存中，并转移控制权到内核代码。</p>\n<h4 id=\"toc_7\">内核</h4>\n<p>内核文件都是以一种自解压的压缩格式存储以节省空间，它与一个初始化的内存映像和存储设备映射表都存储于 <code>/boot</code> 目录之下。</p>\n<p>在选定的内核加载到内存中并开始执行后，在其进行任何工作之前，内核文件首先必须从压缩格式解压自身。一旦内核自解压完成，则加载 <a href=\"https://en.wikipedia.org/wiki/Systemd\">systemd</a> 进程（其是老式 System V 系统的 <a href=\"https://en.wikipedia.org/wiki/Init#SysV-style\">init</a> 程序的替代品)，并转移控制权到 systemd。</p>\n<p>这就是引导过程的结束。此刻，Linux 内核和 systemd 处于运行状态，但是由于没有其他任何程序在执行，故其不能执行任何有关用户的功能性任务。</p>\n<h3 id=\"toc_8\">启动过程</h3>\n<p>启动过程紧随引导过程之后，启动过程使 Linux 系统进入可操作状态，并能够执行用户功能性任务。</p>\n<h4 id=\"toc_9\">systemd</h4>\n<p>systemd 是所有进程的父进程。它负责将 Linux 主机带到一个用户可操作状态（可以执行功能任务）。systemd 的一些功能远较旧式 init 程序更丰富，可以管理运行中的 Linux 主机的许多方面，包括挂载文件系统，以及开启和管理 Linux 主机的系统服务等。但是 systemd 的任何与系统启动过程无关的功能均不在此文的讨论范围。</p>\n<p>首先，systemd 挂载在 <code>/etc/fstab</code> 中配置的文件系统，包括内存交换文件或分区。据此，systemd 必须能够访问位于 <code>/etc</code> 目录下的配置文件，包括它自己的。systemd 借助其配置文件 <code>/etc/systemd/system/default.target</code> 决定 Linux 系统应该启动达到哪个状态（或目标态target）。<code>default.target</code> 是一个真实的 target 文件的符号链接。对于桌面系统，其链接到 <code>graphical.target</code>，该文件相当于旧式 systemV init 方式的 <strong>runlevel 5</strong>。对于一个服务器操作系统来说，<code>default.target</code> 更多是默认链接到 <code>multi-user.target</code>， 相当于 systemV 系统的 <strong>runlevel 3</strong>。 <code>emergency.target</code> 相当于单用户模式。</p>\n<p>（LCTT 译注：“target” 是 systemd 新引入的概念，目前尚未发现有官方的准确译名，考虑到其作用和使用的上下文环境，我们认为翻译为“目标态”比较贴切。以及，“unit” 是指 systemd 中服务和目标态等各个对象/文件，在此依照语境译作“单元”。）</p>\n<p>注意，所有的目标态target和服务service均是 systemd 的单元unit。</p>\n<p>如下表 1 是 systemd 启动的目标态target和老版 systemV init 启动运行级别runlevel的对比。这个 <strong>systemd 目标态别名</strong> 是为了 systemd 向前兼容 systemV 而提供。这个目标态别名允许系统管理员（包括我自己）用 systemV 命令（例如 <code>init 3</code>）改变运行级别。当然，该 systemV 命令是被转发到 systemd 进行解释和执行的。</p>\n<table cellpadding=\"4\">\n<thead>\n<tr>\n<th>SystemV 运行级别</th>\n<th>systemd 目标态</th>\n<th>systemd 目标态别名</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td></td>\n<td><code>halt.target</code></td>\n<td></td>\n<td>停止系统运行但不切断电源。</td>\n</tr>\n<tr>\n<td>0</td>\n<td><code>poweroff.target</code></td>\n<td><code>runlevel0.target</code></td>\n<td>停止系统运行并切断电源.</td>\n</tr>\n<tr>\n<td>S</td>\n<td><code>emergency.target</code></td>\n<td></td>\n<td>单用户模式，没有服务进程运行，文件系统也没挂载。这是一个最基本的运行级别，仅在主控制台上提供一个 shell 用于用户与系统进行交互。</td>\n</tr>\n<tr>\n<td>1</td>\n<td><code>rescue.target</code></td>\n<td><code>runlevel1.target</code></td>\n<td>挂载了文件系统，仅运行了最基本的服务进程的基本系统，并在主控制台启动了一个 shell 访问入口用于诊断。</td>\n</tr>\n<tr>\n<td>2</td>\n<td></td>\n<td><code>runlevel2.target</code></td>\n<td>多用户，没有挂载 NFS 文件系统，但是所有的非图形界面的服务进程已经运行。</td>\n</tr>\n<tr>\n<td>3</td>\n<td><code>multi-user.target</code></td>\n<td><code>runlevel3.target</code></td>\n<td>所有服务都已运行，但只支持命令行接口访问。</td>\n</tr>\n<tr>\n<td>4</td>\n<td></td>\n<td><code>runlevel4.target</code></td>\n<td>未使用。</td>\n</tr>\n<tr>\n<td>5</td>\n<td><code>graphical.target</code></td>\n<td><code>runlevel5.target</code></td>\n<td>多用户，且支持图形界面接口。</td>\n</tr>\n<tr>\n<td>6</td>\n<td><code>reboot.target</code></td>\n<td><code>runlevel6.target</code></td>\n<td>重启。</td>\n</tr>\n<tr>\n<td></td>\n<td><code>default.target</code></td>\n<td></td>\n<td>这个目标态target是总是 <code>multi-user.target</code> 或 <code>graphical.target</code> 的一个符号链接的别名。systemd 总是通过 <code>default.target</code> 启动系统。<code>default.target</code> 绝不应该指向 <code>halt.target</code>、 <code>poweroff.target</code> 或 <code>reboot.target</code>。</td>\n</tr>\n</tbody>\n</table>\n<p><em>表 1 老版本 systemV 的 运行级别与 systemd 与目标态target或目标态别名的比较</em></p>\n<p>每个目标态target有一个在其配置文件中描述的依赖集，systemd 需要首先启动其所需依赖，这些依赖服务是 Linux 主机运行在特定的功能级别所要求的服务。当配置文件中所有的依赖服务都加载并运行后，即说明系统运行于该目标级别。</p>\n<p>systemd 也会查看老式的 systemV init 目录中是否存在相关启动文件，若存在，则 systemd 根据这些配置文件的内容启动对应的服务。在 Fedora 系统中，过时的网络服务就是通过该方式启动的一个实例。</p>\n<p>如下图 1 是直接从 bootup 的 man 页面拷贝而来。它展示了在 systemd 启动过程中一般的事件序列和确保成功的启动的基本的顺序要求。</p>\n<p><code>sysinit.target</code> 和 <code>basic.target</code> 目标态可以被视作启动过程中的状态检查点。尽管 systemd 的设计初衷是并行启动系统服务，但是部分服务或功能目标态是其它服务或目标态的启动的前提。系统将暂停于检查点直到其所要求的服务和目标态都满足为止。</p>\n<p><code>sysinit.target</code> 状态的到达是以其所依赖的所有资源模块都正常启动为前提的，所有其它的单元，如文件系统挂载、交换文件设置、设备管理器的启动、随机数生成器种子设置、低级别系统服务初始化、加解密服务启动（如果一个或者多个文件系统加密的话）等都必须完成，但是在 <strong>sysinit.target</strong> 中这些服务与模块是可以并行启动的。</p>\n<p><code>sysinit.target</code> 启动所有的低级别服务和系统初具功能所需的单元，这些都是进入下一阶段 basic.target 的必要前提。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/944467b0a5e4a593baaedea046cb4522.jpg\"></p>\n<p style=\"text-align: center\"><em>图 1：systemd 的启动流程</em></p>\n<p>在 <code>sysinit.target</code> 的条件满足以后，systemd 接下来启动 <code>basic.target</code>，启动其所要求的所有单元。 <code>basic.target</code> 通过启动下一目标态所需的单元而提供了更多的功能，这包括各种可执行文件的目录路径、通信 sockets，以及定时器等。</p>\n<p>最后，用户级目标态（<code>multi-user.target</code> 或 <code>graphical.target</code>） 可以初始化了，应该注意的是 <code>multi-user.target</code> 必须在满足图形化目标态 <code>graphical.target</code> 的依赖项之前先达成。</p>\n<p>图 1 中，以 <code>*</code> 开头的目标态是通用的启动状态。当到达其中的某一目标态，则说明系统已经启动完成了。如果 <code>multi-user.target</code> 是默认的目标态，则成功启动的系统将以命令行登录界面呈现于用户。如果 <code>graphical.target</code> 是默认的目标态，则成功启动的系统将以图形登录界面呈现于用户，界面的具体样式将根据系统所配置的<a href=\"https://opensource.com/article/16/12/yearbook-best-couple-2016-display-manager-and-window-manager\">显示管理器</a>而定。</p>\n<h3 id=\"toc_10\">故障讨论</h3>\n<p>最近我需要改变一台使用 GRUB2 的 Linux 电脑的默认引导内核。我发现一些 GRUB2 的命令在我的系统上不能用，也可能是我使用方法不正确。至今，我仍然不知道是何原因导致，此问题需要进一步探究。</p>\n<p><code>grub2-set-default</code> 命令没能在配置文件 <code>/etc/default/grub</code> 中成功地设置默认内核索引，以至于期望的替代内核并没有被引导启动。故在该配置文件中我手动更改 <code>GRUB_DEFAULT=saved</code> 为 <code>GRUB_DEFAULT=2</code>，2 是我需要引导的安装好的内核文件的索引。然后我执行命令 <code>grub2-mkconfig &gt; /boot/grub2/grub.cfg</code> 创建了新的 GRUB 配置文件，该方法如预期的规避了问题，并成功引导了替代的内核。</p>\n<h3 id=\"toc_11\">结论</h3>\n<p>GRUB2、systemd 初始化系统是大多数现代 Linux 发行版引导和启动的关键组件。尽管在实际中，systemd 的使用还存在一些争议，但是 GRUB2 与 systemd 可以密切地配合先加载内核，然后启动一个业务系统所需要的系统服务。</p>\n<p>尽管 GRUB2 和 systemd 都比其前任要更加复杂，但是它们更加容易学习和管理。在 man 页面有大量关于 systemd 的帮助说明，freedesktop.org 也在线收录了完整的此<a href=\"https://www.freedesktop.org/software/systemd/man/index.html\">帮助说明</a>。下面有更多相关信息链接。</p>\n<h3 id=\"toc_12\">附加资源</h3>\n<ul>\n<li><a href=\"https://en.wikipedia.org/wiki/GNU_GRUB\">GNU GRUB</a> (Wikipedia)</li>\n<li><a href=\"https://www.gnu.org/software/grub/manual/grub.html\">GNU GRUB Manual</a> (GNU.org)</li>\n<li><a href=\"https://en.wikipedia.org/wiki/Master_boot_record\">Master Boot Record</a> (Wikipedia)</li>\n<li><a href=\"https://en.wikipedia.org/wiki/Multiboot_Specification\">Multiboot specification</a> (Wikipedia)</li>\n<li><a href=\"https://en.wikipedia.org/wiki/Systemd\">systemd</a> (Wikipedia)</li>\n<li><a href=\"https://www.freedesktop.org/software/systemd/man/bootup.html\">systemd bootup process</a> (Freedesktop.org)</li>\n<li><a href=\"https://www.freedesktop.org/software/systemd/man/index.html\">systemd index of man pages</a> (Freedesktop.org)</li>\n</ul>\n<hr>\n<p>作者简介：</p>\n<p>David Both 居住在美国北卡罗纳州的首府罗利，是一个 Linux 开源贡献者。他已经从事 IT 行业 40 余年，在 IBM 教授 OS/2 20余年。1981 年，他在 IBM 开发了第一个关于最初的 IBM 个人电脑的培训课程。他也曾在 Red Hat 教授 RHCE 课程，也曾供职于 MCI worldcom，Cico 以及北卡罗纳州等。他已经为 Linux 开源社区工作近 20 年。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112277\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112277votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112277\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 3 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": "  评论", "praise_nums": "1", "url_object_id": "dab40ec7ecc758d03176270c9e8c36d4", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2016/11/59d49abe8909a122bc2c9aa43b71e3bb.png"], "front_image_path": "full/d3d1a5ad957de059084690efae6fdfaa3527e1c3.jpg", "title": "Linux 开机引导和启动过程详解"}
{"create_date": "2017/08/28 ", "url": "http://blog.jobbole.com/112281/", "fav_nums": 9, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"http://www.linuxandubuntu.com/home/getting-started-with-github\">Linuxandubuntu</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-8814-1.html\">Linux中国/firmianay</a>   </div><p><a href=\"http://www.linuxandubuntu.com/home/getting-started-with-github\"><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/e1c1cc8db1f52eec31747b94474b595a.jpg\" alt=\"Getting Started With GitHub\"></a></p>\n<p><a href=\"https://github.com/\">GitHub</a> 是一个在线平台，旨在促进在一个共同项目上工作的个人之间的代码托管、版本控制和协作。通过该平台，无论何时何地，都可以对项目进行操作（托管和审查代码，管理项目和与世界各地的其他开发者共同开发软件）。<strong>GitHub 平台</strong>为开源项目和私人项目都提供了项目处理功能。</p>\n<p>关于团队项目处理的功能包括：GitHub 流Flow&gt;和 GitHub 页Pages。这些功能可以让需要定期部署的团队轻松处理工作流程。另一方面，GitHub 页提供了页面用于展示开源项目、展示简历、托管博客等。</p>\n<p>GitHub 也为个人项目提供了必要的工具，使得个人项目可以轻松地处理。它也使得个人可以更轻松地与世界分享他们的项目。</p>\n<h3 id=\"toc_1\">注册 GitHub 并启动一个项目</h3>\n<p>在 GitHub 上启动新项目时，您必须先使用您的电子邮件地址创建一个帐户。</p>\n<p><a href=\"http://www.linuxandubuntu.com/uploads/2/1/1/5/21152474/github-homepage_orig.jpg\"><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/01c7882ef18db3d3f3887534261dc45c.jpg\" alt=\"github homepage\"></a></p>\n<p>然后，在验证邮箱的时候，用户将自动登录到他们的 GitHub 帐户。</p>\n<h4 id=\"toc_2\">1、 创建仓库</h4>\n<p>之后，我们会被带到一个用于创建仓库repository的页面。仓库存储着包括修订历史记录在内的所有项目文件。仓库可以是公开的或者是私有的。公开的仓库可以被任何人查看，但是，只有项目所有者授予权限的人才可以提交修改到这个仓库。另一方面，私有仓库提供了额外的控制，可以将项目设置为对谁可见。因此，公开仓库适用于开源软件项目，而私有仓库主要适用于私有或闭源项目。</p>\n<ul>\n<li>填写 “仓库名称Repository Name” 和 “简短描述Short Description”。</li>\n<li>选中 “以一个 README 文件初始化Initialize this repository with a README”。</li>\n<li>最后，点击底部的 “创建仓库Create Repository” 按钮。</li>\n</ul>\n<p><a href=\"http://www.linuxandubuntu.com/uploads/2/1/1/5/21152474/create-a-github-repository_orig.jpg\"><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/14fcf6fd8154adb9a3c89cf0fa0a93fb.jpg\" alt=\"create a github repository\"></a></p>\n<h4 id=\"toc_3\">2、 添加分支</h4>\n<p>在 GitHub 中，分支branch是一种同时操作单个仓库的各种版本的方式。默认情况下，任何创建的单个仓库都会被分配一个名为 “MASTER” 的分支，它被认为是最后一个分支。在 GitHub 中，分支在被合并到主干master（最后的分支）之前，可以在对仓库进行实验和编辑中发挥作用。</p>\n<p>为了使项目适合每一个人的需求，通常情况下，总是需要添加几个格外的分支来匹配不同的项目。在主分支上创建一个分支和复制主分支时的当前状态是一样的。</p>\n<p><a href=\"http://www.linuxandubuntu.com/uploads/2/1/1/5/21152474/add-a-branch-to-github-repository_orig.jpg\"><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/09f5d75c22e6dee20daa51b241e8a809.jpg\" alt=\"add a branch to github repository\"></a></p>\n<p>创建分支与在不同版本中保存单个文件是类似的。它通过在特定仓库上执行的任务重命名来实现。</p>\n<p>分支在保持错误修复和功能添加工作中同样被证明是有效。在进行必要的修改后，这些分支会被合并到主分支中。</p>\n<p>在创建仓库后创建一个分支：</p>\n<ul>\n<li>在这个例子中，点击仓库名称 “Hello-World” 跳转到你的新仓库。</li>\n<li>点击顶部的 “Branch:Master” 按钮，会看到一个下拉菜单，菜单里有填写分支名称的空白字段。</li>\n<li>输入分支名称，在这个例子中我们输入 “readme-edits“。</li>\n<li>按下回车键或者点击蓝色的 “创建分支create branch” 框。</li>\n</ul>\n<p>这样就成功创建了两个分支：master 和 readme-edits。</p>\n<h4 id=\"toc_4\">3、 修改项目文件并提交</h4>\n<p>此步骤提供了关于如何更改仓库并保存修改的指导。在 GitHub 上，提交commit被定义为保存的修改的意思。每一次提交都与一个提交信息commit message相关联，该提交信息包含了保存的修改的历史记录，以及为何进行这些更改。这使得其他贡献者可以很轻松地知道你做出的更改以及更改的原因。</p>\n<p>要对仓库进行更改和提交更改，请执行以下步骤：</p>\n<ul>\n<li>点击仓库名称 “Hello-World”。</li>\n<li>点击右上角的铅笔图标查看和编辑文件。 <a href=\"http://www.linuxandubuntu.com/uploads/2/1/1/5/21152474/commit-changes-to-github-repository_orig.jpg\"><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/05ce163a30316ed081d9d40cf125afa5.jpg\" alt=\"commit changes to github repository\"></a></li>\n<li>在编辑器中，写一些东西来确定你可以进行更改。</li>\n<li>在提交消息commit message字段中做简要的总结，以解释为什么以及如何进行更改。</li>\n<li>点击提交更改 commit changes按钮保存更改。</li>\n</ul>\n<p>请注意，这些更改仅仅影响到 readme-edits 分支，而不影响主分支。</p>\n<p><a href=\"http://www.linuxandubuntu.com/uploads/2/1/1/5/21152474/commit-branch-to-master_orig.jpg\"><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/5424b71e6ca81e83e4abdaa2b6f369ee.jpg\" alt=\"commit branch to master\"></a></p>\n<h4 id=\"toc_5\">4、 开启一个拉取请求</h4>\n<p>拉取请求pull request是一个允许贡献者提出并请求某人审查和合并某些更改到他们的分支的功能。拉取请求还显示了几个分支的差异（diffs）。更改、添加和删减通常以红色和绿色来表示。一旦提交完成就可以开启拉取请求，即使代码还未完成。</p>\n<p>开启一个拉取请求：</p>\n<ul>\n<li>点击拉取请求pull requests选项卡。 <a href=\"http://www.linuxandubuntu.com/uploads/2/1/1/5/21152474/github-pull-request_orig.jpg\"><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/ff952c1eb62fd8adbd387eeb38e9673e.jpg\" alt=\"github pull request\"></a></li>\n<li>点击新建拉取请求new pull requests按钮。</li>\n<li>选择 readme-edits 分支与 master 分支进行比较。 <a href=\"http://www.linuxandubuntu.com/uploads/2/1/1/5/21152474/compare-commit-changes-github_orig.jpg\"><img src=\"http://jbcdn2.b0.upaiyun.com/2017/08/c5eec8f40ee29eb37ecbf19b41584b56.jpg\" alt=\"compare commit changes github\"></a></li>\n<li>确定请求，并确定这是您要提交的内容。</li>\n<li>点击创建拉取请求绿色按钮并输入一个标题。 <a href=\"http://www.linuxandubuntu.com/uploads/2/1/1/5/21152474/open-a-pull-request-in-github-repository_orig.jpg\"><img src=\"http://jbcdn2.b0.upaiyun.com/2017/08/c581f47872c3af18d32d2dff1d05a4ad.jpg\" alt=\"open a pull request in github repository\"></a></li>\n<li>按下回车键。</li>\n</ul>\n<p>用户可以通过尝试创建并保存拉取请求来证实这些操作。</p>\n<h4 id=\"toc_6\">5、 合并拉取请求</h4>\n<p>最后一步是将 readme-edits 分支和 master 分支合并到一起。如果 readme-edits 分支和 master 分支不会产生冲突，则会显示merge pull request合并拉取请求的按钮。</p>\n<p><a href=\"http://www.linuxandubuntu.com/uploads/2/1/1/5/21152474/merge-the-pull-request-github_orig.jpg\"><img src=\"http://jbcdn2.b0.upaiyun.com/2017/08/c45ba98c142ca89fa2544a69baab31d6.jpg\" alt=\"merge the pull request github\"></a></p>\n<p>当合并拉取时，有必要确保评论comment和其他字段被正确填写。合并拉取：</p>\n<ul>\n<li>点击merge pull request合并拉取请求的按钮。</li>\n<li>确认合并。</li>\n<li>按下紫色的删除分支按钮，删除 readme-edits 分支，因为它已经被包含在 master 分支中。（LCTT 译注：如果是合并他人提交的拉取请求，则无需也无法删除合并过来的他人的分支。）</li>\n</ul>\n<p>本文提供了 GitHub 平台从注册到使用的基本操作，接下来由大家尽情探索吧。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112281\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112281votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112281\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 9 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": "  评论", "praise_nums": "1", "url_object_id": "d8da08036482631b2ae3f07034443561", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/08/e1c1cc8db1f52eec31747b94474b595a.jpg"], "front_image_path": "full/b59b8906ada19ba34aeeb1b1fe85cf79c826095c.jpg", "title": "GitHub 简易入门指南"}
{"create_date": "2017/08/29 ", "url": "http://blog.jobbole.com/112285/", "fav_nums": 3, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://www.ruanyifeng.com/blog/2017/08/elasticsearch.html\">阮一峰</a>   </div><p><a href=\"https://baike.baidu.com/item/%E5%85%A8%E6%96%87%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E\">全文搜索</a>属于最常见的需求，开源的 <a href=\"https://www.elastic.co/\">Elasticsearch</a> （以下简称 Elastic）是目前全文搜索引擎的首选。</p>\n<p>它可以快速地储存、搜索和分析海量数据。维基百科、Stack Overflow、Github 都采用它。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/08/578ac00f9b31564920af2fc9701214ec.jpg\"><img class=\"aligncenter size-full wp-image-112291\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/578ac00f9b31564920af2fc9701214ec.jpg\" alt=\"bg2017081701\"></a></p>\n<p>Elastic 的底层是开源库 <a href=\"https://lucene.apache.org/\">Lucene</a>。但是，你没法直接用 Lucene，必须自己写代码去调用它的接口。Elastic 是 Lucene 的封装，提供了 REST API 的操作接口，开箱即用。</p>\n<p>本文从零开始，讲解如何使用 Elastic 搭建自己的全文搜索引擎。每一步都有详细的说明，大家跟着做就能学会。</p>\n<h1>一、安装</h1>\n<p>Elastic 需要 Java 8 环境。如果你的机器还没安装 Java，可以参考<a href=\"https://www.digitalocean.com/community/tutorials/how-to-install-java-with-apt-get-on-debian-8\">这篇文章</a>，注意要保证环境变量<strong>JAVA_HOME</strong>正确设置。</p>\n<p>安装完 Java，就可以跟着<a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/zip-targz.html\">官方文档</a>安装 Elastic。直接下载压缩包比较简单。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f27d9b8032b335100481\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ wget https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-5.5.1.zip\r\n$ unzip elasticsearch-5.5.1.zip\r\n$ cd elasticsearch-5.5.1/</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f27d9b8032b335100481-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b8032b335100481-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b8032b335100481-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f27d9b8032b335100481-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">wget </span><span class=\"crayon-v\">https</span><span class=\"crayon-o\">:</span><span class=\"crayon-c\">//artifacts.elastic.co/downloads/elasticsearch/elasticsearch-5.5.1.zip</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b8032b335100481-2\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">unzip </span><span class=\"crayon-v\">elasticsearch</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.5.1.zip</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b8032b335100481-3\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">cd </span><span class=\"crayon-v\">elasticsearch</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5.5.1</span><span class=\"crayon-o\">/</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>接着，进入解压后的目录，运行下面的命令，启动 Elastic。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f27d9b80336069654813\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ./bin/elasticsearch</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80336069654813-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f27d9b80336069654813-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">elasticsearch</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>如果这时<a href=\"https://github.com/spujadas/elk-docker/issues/92\">报错</a>“max virtual memory areas vm.max<em>map</em>count [65530] is too low”，要运行下面的命令。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f27d9b8033a693745408\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ sudo sysctl -w vm.max_map_count=262144</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f27d9b8033a693745408-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f27d9b8033a693745408-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">sysctl</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">w</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">vm</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">max_map_count</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">262144</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>如果一切正常，Elastic 就会在默认的9200端口运行。这时，打开另一个命令行窗口，请求该端口，会得到说明信息。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f27d9b8033e104084223\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ curl localhost:9200\r\n\r\n{\r\n  \"name\" : \"atntrTf\",\r\n  \"cluster_name\" : \"elasticsearch\",\r\n  \"cluster_uuid\" : \"tf9250XhQ6ee4h7YI11anA\",\r\n  \"version\" : {\r\n    \"number\" : \"5.5.1\",\r\n    \"build_hash\" : \"19c13d0\",\r\n    \"build_date\" : \"2017-07-18T20:44:24.823Z\",\r\n    \"build_snapshot\" : false,\r\n    \"lucene_version\" : \"6.6.0\"\r\n  },\r\n  \"tagline\" : \"You Know, for Search\"\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f27d9b8033e104084223-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b8033e104084223-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b8033e104084223-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b8033e104084223-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b8033e104084223-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b8033e104084223-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b8033e104084223-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b8033e104084223-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b8033e104084223-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b8033e104084223-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b8033e104084223-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b8033e104084223-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b8033e104084223-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b8033e104084223-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b8033e104084223-15\">15</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f27d9b8033e104084223-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">curl </span><span class=\"crayon-v\">localhost</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">9200</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b8033e104084223-2\"> </div><div class=\"crayon-line\" id=\"crayon-59f27d9b8033e104084223-3\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b8033e104084223-4\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">\"name\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"atntrTf\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b8033e104084223-5\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">\"cluster_name\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"elasticsearch\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b8033e104084223-6\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">\"cluster_uuid\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"tf9250XhQ6ee4h7YI11anA\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b8033e104084223-7\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">\"version\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b8033e104084223-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">\"number\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"5.5.1\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b8033e104084223-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">\"build_hash\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"19c13d0\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b8033e104084223-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">\"build_date\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"2017-07-18T20:44:24.823Z\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b8033e104084223-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">\"build_snapshot\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b8033e104084223-12\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">\"lucene_version\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"6.6.0\"</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b8033e104084223-13\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b8033e104084223-14\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">\"tagline\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"You Know, for Search\"</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b8033e104084223-15\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0023 seconds] -->\r\n<p>上面代码中，请求9200端口，Elastic 返回一个 JSON 对象，包含当前节点、集群、版本等信息。</p>\n<p>按下 Ctrl + C，Elastic 就会停止运行。</p>\n<p>默认情况下，Elastic 只允许本机访问，如果需要远程访问，可以修改 Elastic 安装目录的<strong>config/elasticsearch.yml</strong>文件，去掉<strong>network.host</strong>的注释，将它的值改成<strong>0.0.0.0</strong>，然后重新启动 Elastic。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f27d9b80341443646385\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nnetwork.host: 0.0.0.0</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80341443646385-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f27d9b80341443646385-1\"><span class=\"crayon-v\">network</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">host</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.0.0.0</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>上面代码中，设成<strong>0.0.0.0</strong>让任何人都可以访问。线上服务不要这样设置，要设成具体的 IP。</p>\n<h1>二、基本概念</h1>\n<h2>2.1 Node 与 Cluster</h2>\n<p>Elastic 本质上是一个分布式数据库，允许多台服务器协同工作，每台服务器可以运行多个 Elastic 实例。</p>\n<p>单个 Elastic 实例称为一个节点（node）。一组节点构成一个集群（cluster）。</p>\n<h2>2.2 Index</h2>\n<p>Elastic 会索引所有字段，经过处理后写入一个反向索引（Inverted Index）。查找数据的时候，直接查找该索引。</p>\n<p>所以，Elastic 数据管理的顶层单位就叫做 Index（索引）。它是单个数据库的同义词。每个 Index （即数据库）的名字必须是小写。</p>\n<p>下面的命令可以查看当前节点的所有 Index。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f27d9b80345526204303\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ curl -X GET 'http://localhost:9200/_cat/indices?v'</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80345526204303-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f27d9b80345526204303-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">curl</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">X</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">GET</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'http://localhost:9200/_cat/indices?v'</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p></p>\n<h2>2.3 Document</h2>\n<p>Index 里面单条的记录称为 Document（文档）。许多条 Document 构成了一个 Index。</p>\n<p>Document 使用 JSON 格式表示，下面是一个例子。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f27d9b80348541327303\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n{\r\n  \"user\": \"张三\",\r\n  \"title\": \"工程师\",\r\n  \"desc\": \"数据库管理\"\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80348541327303-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b80348541327303-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80348541327303-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b80348541327303-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80348541327303-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f27d9b80348541327303-1\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b80348541327303-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">\"user\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"张三\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b80348541327303-3\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">\"title\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"工程师\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b80348541327303-4\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">\"desc\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"数据库管理\"</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b80348541327303-5\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>同一个 Index 里面的 Document，不要求有相同的结构（scheme），但是最好保持相同，这样有利于提高搜索效率。</p>\n<h2>2.4 Type</h2>\n<p>Document 可以分组，比如<strong>weather</strong>这个 Index 里面，可以按城市分组（北京和上海），也可以按气候分组（晴天和雨天）。这种分组就叫做 Type，它是虚拟的逻辑分组，用来过滤 Document。</p>\n<p>不同的 Type 应该有相似的结构（schema），举例来说，<strong>id</strong>字段不能在这个组是字符串，在另一个组是数值。这是与关系型数据库的表的<a href=\"https://www.elastic.co/guide/en/elasticsearch/guide/current/mapping.html\">一个区别</a>。性质完全不同的数据（比如<strong>products</strong>和<strong>logs</strong>）应该存成两个 Index，而不是一个 Index 里面的两个 Type（虽然可以做到）。</p>\n<p>下面的命令可以列出每个 Index 所包含的 Type。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f27d9b8034c700276655\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ curl 'localhost:9200/_mapping?pretty=true'</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f27d9b8034c700276655-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f27d9b8034c700276655-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">curl</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'localhost:9200/_mapping?pretty=true'</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>根据<a href=\"https://www.elastic.co/blog/index-type-parent-child-join-now-future-in-elasticsearch\">规划</a>，Elastic 6.x 版只允许每个 Index 包含一个 Type，7.x 版将会彻底移除 Type。</p>\n<h1>三、新建和删除 Index</h1>\n<p>新建 Index，可以直接向 Elastic 服务器发出 PUT 请求。下面的例子是新建一个名叫<strong>weather</strong>的 Index。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f27d9b8034f846841405\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ curl -X PUT 'localhost:9200/weather'</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f27d9b8034f846841405-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f27d9b8034f846841405-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">curl</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">X</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">PUT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'localhost:9200/weather'</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>服务器返回一个 JSON 对象，里面的<strong>acknowledged</strong>字段表示操作成功。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f27d9b80352777304687\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n{\r\n  \"acknowledged\":true,\r\n  \"shards_acknowledged\":true\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80352777304687-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b80352777304687-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80352777304687-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b80352777304687-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f27d9b80352777304687-1\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b80352777304687-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">\"acknowledged\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b80352777304687-3\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">\"shards_acknowledged\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-t\">true</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b80352777304687-4\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>然后，我们发出 DELETE 请求，删除这个 Index。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f27d9b80355445076354\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ curl -X DELETE 'localhost:9200/weather'</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80355445076354-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f27d9b80355445076354-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">curl</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">X</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">DELETE</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'localhost:9200/weather'</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p></p>\n<h1>四、中文分词设置</h1>\n<p>首先，安装中文分词插件。这里使用的是 <a href=\"https://github.com/medcl/elasticsearch-analysis-ik/\">ik</a>，也可以考虑其他插件（比如 <a href=\"https://www.elastic.co/guide/en/elasticsearch/plugins/current/analysis-smartcn.html\">smartcn</a>）。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f27d9b80358914233230\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ./bin/elasticsearch-plugin install https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v5.5.1/elasticsearch-analysis-ik-5.5.1.zip</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80358914233230-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f27d9b80358914233230-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">elasticsearch</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">plugin </span><span class=\"crayon-e\">install </span><span class=\"crayon-v\">https</span><span class=\"crayon-o\">:</span><span class=\"crayon-c\">//github.com/medcl/elasticsearch-analysis-ik/releases/download/v5.5.1/elasticsearch-analysis-ik-5.5.1.zip</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>上面代码安装的是5.5.1版的插件，与 Elastic 5.5.1 配合使用。</p>\n<p>接着，重新启动 Elastic，就会自动加载这个新安装的插件。</p>\n<p>然后，新建一个 Index，指定需要分词的字段。这一步根据数据结构而异，下面的命令只针对本文。基本上，凡是需要搜索的中文字段，都要单独设置一下。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f27d9b8035c087030416\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ curl -X PUT 'localhost:9200/accounts' -d '\r\n{\r\n  \"mappings\": {\r\n    \"person\": {\r\n      \"properties\": {\r\n        \"user\": {\r\n          \"type\": \"text\",\r\n          \"analyzer\": \"ik_max_word\",\r\n          \"search_analyzer\": \"ik_max_word\"\r\n        },\r\n        \"title\": {\r\n          \"type\": \"text\",\r\n          \"analyzer\": \"ik_max_word\",\r\n          \"search_analyzer\": \"ik_max_word\"\r\n        },\r\n        \"desc\": {\r\n          \"type\": \"text\",\r\n          \"analyzer\": \"ik_max_word\",\r\n          \"search_analyzer\": \"ik_max_word\"\r\n        }\r\n      }\r\n    }\r\n  }\r\n}'</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f27d9b8035c087030416-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b8035c087030416-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b8035c087030416-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b8035c087030416-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b8035c087030416-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b8035c087030416-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b8035c087030416-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b8035c087030416-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b8035c087030416-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b8035c087030416-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b8035c087030416-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b8035c087030416-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b8035c087030416-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b8035c087030416-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b8035c087030416-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b8035c087030416-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b8035c087030416-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b8035c087030416-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b8035c087030416-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b8035c087030416-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b8035c087030416-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b8035c087030416-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b8035c087030416-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b8035c087030416-24\">24</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f27d9b8035c087030416-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">curl</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">X</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">PUT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'localhost:9200/accounts'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">d</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b8035c087030416-2\"><span class=\"crayon-s\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b8035c087030416-3\"><span class=\"crayon-s\">  \"mappings\": {</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b8035c087030416-4\"><span class=\"crayon-s\">    \"person\": {</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b8035c087030416-5\"><span class=\"crayon-s\">      \"properties\": {</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b8035c087030416-6\"><span class=\"crayon-s\">        \"user\": {</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b8035c087030416-7\"><span class=\"crayon-s\">          \"type\": \"text\",</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b8035c087030416-8\"><span class=\"crayon-s\">          \"analyzer\": \"ik_max_word\",</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b8035c087030416-9\"><span class=\"crayon-s\">          \"search_analyzer\": \"ik_max_word\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b8035c087030416-10\"><span class=\"crayon-s\">        },</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b8035c087030416-11\"><span class=\"crayon-s\">        \"title\": {</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b8035c087030416-12\"><span class=\"crayon-s\">          \"type\": \"text\",</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b8035c087030416-13\"><span class=\"crayon-s\">          \"analyzer\": \"ik_max_word\",</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b8035c087030416-14\"><span class=\"crayon-s\">          \"search_analyzer\": \"ik_max_word\"</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b8035c087030416-15\"><span class=\"crayon-s\">        },</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b8035c087030416-16\"><span class=\"crayon-s\">        \"desc\": {</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b8035c087030416-17\"><span class=\"crayon-s\">          \"type\": \"text\",</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b8035c087030416-18\"><span class=\"crayon-s\">          \"analyzer\": \"ik_max_word\",</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b8035c087030416-19\"><span class=\"crayon-s\">          \"search_analyzer\": \"ik_max_word\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b8035c087030416-20\"><span class=\"crayon-s\">        }</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b8035c087030416-21\"><span class=\"crayon-s\">      }</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b8035c087030416-22\"><span class=\"crayon-s\">    }</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b8035c087030416-23\"><span class=\"crayon-s\">  }</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b8035c087030416-24\"><span class=\"crayon-s\">}'</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>上面代码中，首先新建一个名称为<strong>accounts</strong>的 Index，里面有一个名称为<strong>person</strong>的 Type。<strong>person</strong>有三个字段。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f27d9b8035f098568070\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nuser\r\ntitle\r\ndesc</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f27d9b8035f098568070-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b8035f098568070-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b8035f098568070-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f27d9b8035f098568070-1\"><span class=\"crayon-e\">user</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b8035f098568070-2\"><span class=\"crayon-e\">title</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b8035f098568070-3\"><span class=\"crayon-v\">desc</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>这三个字段都是中文，而且类型都是文本（text），所以需要指定中文分词器，不能使用默认的英文分词器。</p>\n<p>Elastic 的分词器称为 <a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis.html\">analyzer</a>。我们对每个字段指定分词器。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f27d9b80363339131567\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n\"user\": {\r\n  \"type\": \"text\",\r\n  \"analyzer\": \"ik_max_word\",\r\n  \"search_analyzer\": \"ik_max_word\"\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80363339131567-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b80363339131567-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80363339131567-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b80363339131567-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80363339131567-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f27d9b80363339131567-1\"><span class=\"crayon-s\">\"user\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b80363339131567-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">\"type\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"text\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b80363339131567-3\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">\"analyzer\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"ik_max_word\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b80363339131567-4\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">\"search_analyzer\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"ik_max_word\"</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b80363339131567-5\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>上面代码中，<strong>analyzer</strong>是字段文本的分词器，<strong>search_analyzer</strong>是搜索词的分词器。<strong>ik_max_word</strong>分词器是插件<strong>ik</strong>提供的，可以对文本进行最大数量的分词。</p>\n<h1>五、数据操作</h1>\n<h2>5.1 新增记录</h2>\n<p>向指定的 /Index/Type 发送 PUT 请求，就可以在 Index 里面新增一条记录。比如，向<strong>/accounts/person</strong>发送请求，就可以新增一条人员记录。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f27d9b80366451210957\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ curl -X PUT 'localhost:9200/accounts/person/1' -d '\r\n{\r\n  \"user\": \"张三\",\r\n  \"title\": \"工程师\",\r\n  \"desc\": \"数据库管理\"\r\n}'</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80366451210957-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b80366451210957-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80366451210957-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b80366451210957-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80366451210957-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b80366451210957-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f27d9b80366451210957-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">curl</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">X</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">PUT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'localhost:9200/accounts/person/1'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">d</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b80366451210957-2\"><span class=\"crayon-s\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b80366451210957-3\"><span class=\"crayon-s\">  \"user\": \"张三\",</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b80366451210957-4\"><span class=\"crayon-s\">  \"title\": \"工程师\",</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b80366451210957-5\"><span class=\"crayon-s\">  \"desc\": \"数据库管理\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b80366451210957-6\"><span class=\"crayon-s\">}'</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>服务器返回的 JSON 对象，会给出 Index、Type、Id、Version 等信息。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f27d9b80369569668784\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n{\r\n  \"_index\":\"accounts\",\r\n  \"_type\":\"person\",\r\n  \"_id\":\"1\",\r\n  \"_version\":1,\r\n  \"result\":\"created\",\r\n  \"_shards\":{\"total\":2,\"successful\":1,\"failed\":0},\r\n  \"created\":true\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80369569668784-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b80369569668784-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80369569668784-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b80369569668784-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80369569668784-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b80369569668784-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80369569668784-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b80369569668784-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80369569668784-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f27d9b80369569668784-1\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b80369569668784-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">\"_index\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-s\">\"accounts\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b80369569668784-3\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">\"_type\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-s\">\"person\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b80369569668784-4\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">\"_id\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-s\">\"1\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b80369569668784-5\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">\"_version\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b80369569668784-6\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">\"result\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-s\">\"created\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b80369569668784-7\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">\"_shards\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">\"total\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">\"successful\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">\"failed\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b80369569668784-8\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">\"created\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-t\">true</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b80369569668784-9\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p>如果你仔细看，会发现请求路径是<strong>/accounts/person/1</strong>，最后的<strong>1</strong>是该条记录的 Id。它不一定是数字，任意字符串（比如<strong>abc</strong>）都可以。</p>\n<p>新增记录的时候，也可以不指定 Id，这时要改成 POST 请求。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f27d9b8036c375103031\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ curl -X POST 'localhost:9200/accounts/person' -d '\r\n{\r\n  \"user\": \"李四\",\r\n  \"title\": \"工程师\",\r\n  \"desc\": \"系统管理\"\r\n}'</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f27d9b8036c375103031-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b8036c375103031-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b8036c375103031-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b8036c375103031-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b8036c375103031-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b8036c375103031-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f27d9b8036c375103031-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">curl</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">X</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">POST</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'localhost:9200/accounts/person'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">d</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b8036c375103031-2\"><span class=\"crayon-s\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b8036c375103031-3\"><span class=\"crayon-s\">  \"user\": \"李四\",</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b8036c375103031-4\"><span class=\"crayon-s\">  \"title\": \"工程师\",</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b8036c375103031-5\"><span class=\"crayon-s\">  \"desc\": \"系统管理\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b8036c375103031-6\"><span class=\"crayon-s\">}'</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>上面代码中，向<strong>/accounts/person</strong>发出一个 POST 请求，添加一个记录。这时，服务器返回的 JSON 对象里面，<strong>_id</strong>字段就是一个随机字符串。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f27d9b80370260002863\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n{\r\n  \"_index\":\"accounts\",\r\n  \"_type\":\"person\",\r\n  \"_id\":\"AV3qGfrC6jMbsbXb6k1p\",\r\n  \"_version\":1,\r\n  \"result\":\"created\",\r\n  \"_shards\":{\"total\":2,\"successful\":1,\"failed\":0},\r\n  \"created\":true\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80370260002863-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b80370260002863-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80370260002863-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b80370260002863-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80370260002863-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b80370260002863-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80370260002863-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b80370260002863-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80370260002863-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f27d9b80370260002863-1\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b80370260002863-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">\"_index\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-s\">\"accounts\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b80370260002863-3\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">\"_type\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-s\">\"person\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b80370260002863-4\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">\"_id\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-s\">\"AV3qGfrC6jMbsbXb6k1p\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b80370260002863-5\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">\"_version\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b80370260002863-6\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">\"result\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-s\">\"created\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b80370260002863-7\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">\"_shards\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">\"total\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">\"successful\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">\"failed\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b80370260002863-8\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">\"created\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-t\">true</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b80370260002863-9\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p>注意，如果没有先创建 Index（这个例子是<strong>accounts</strong>），直接执行上面的命令，Elastic 也不会报错，而是直接生成指定的 Index。所以，打字的时候要小心，不要写错 Index 的名称。</p>\n<h2>5.2 查看记录</h2>\n<p>向<strong>/Index/Type/Id</strong>发出 GET 请求，就可以查看这条记录。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f27d9b80373746818421\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ curl 'localhost:9200/accounts/person/1?pretty=true'</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80373746818421-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f27d9b80373746818421-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">curl</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'localhost:9200/accounts/person/1?pretty=true'</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>上面代码请求查看<strong>/accounts/person/1</strong>这条记录，URL 的参数<strong>pretty=true</strong>表示以易读的格式返回。</p>\n<p>返回的数据中，<strong>found</strong>字段表示查询成功，<strong>_source</strong>字段返回原始记录。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f27d9b80376296279437\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n{\r\n  \"_index\" : \"accounts\",\r\n  \"_type\" : \"person\",\r\n  \"_id\" : \"1\",\r\n  \"_version\" : 1,\r\n  \"found\" : true,\r\n  \"_source\" : {\r\n    \"user\" : \"张三\",\r\n    \"title\" : \"工程师\",\r\n    \"desc\" : \"数据库管理\"\r\n  }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80376296279437-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b80376296279437-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80376296279437-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b80376296279437-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80376296279437-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b80376296279437-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80376296279437-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b80376296279437-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80376296279437-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b80376296279437-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80376296279437-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b80376296279437-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f27d9b80376296279437-1\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b80376296279437-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">\"_index\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"accounts\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b80376296279437-3\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">\"_type\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"person\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b80376296279437-4\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">\"_id\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"1\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b80376296279437-5\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">\"_version\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b80376296279437-6\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">\"found\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b80376296279437-7\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">\"_source\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b80376296279437-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">\"user\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"张三\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b80376296279437-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">\"title\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"工程师\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b80376296279437-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">\"desc\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"数据库管理\"</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b80376296279437-11\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b80376296279437-12\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0015 seconds] -->\r\n<p>如果 Id 不正确，就查不到数据，<strong>found</strong>字段就是<strong>false</strong>。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f27d9b80379562924316\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ curl 'localhost:9200/weather/beijing/abc?pretty=true'\r\n\r\n{\r\n  \"_index\" : \"accounts\",\r\n  \"_type\" : \"person\",\r\n  \"_id\" : \"abc\",\r\n  \"found\" : false\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80379562924316-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b80379562924316-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80379562924316-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b80379562924316-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80379562924316-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b80379562924316-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80379562924316-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b80379562924316-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f27d9b80379562924316-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">curl</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'localhost:9200/weather/beijing/abc?pretty=true'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b80379562924316-2\"> </div><div class=\"crayon-line\" id=\"crayon-59f27d9b80379562924316-3\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b80379562924316-4\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">\"_index\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"accounts\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b80379562924316-5\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">\"_type\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"person\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b80379562924316-6\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">\"_id\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"abc\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b80379562924316-7\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">\"found\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b80379562924316-8\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p></p>\n<h2>5.3 删除记录</h2>\n<p>删除记录就是发出 DELETE 请求。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f27d9b8037c839140588\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ curl -X DELETE 'localhost:9200/accounts/person/1'</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f27d9b8037c839140588-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f27d9b8037c839140588-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">curl</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">X</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">DELETE</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'localhost:9200/accounts/person/1'</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>这里先不要删除这条记录，后面还要用到。</p>\n<h2>5.4 更新记录</h2>\n<p>更新记录就是使用 PUT 请求，重新发送一次数据。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f27d9b8037f405012811\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ curl -X PUT 'localhost:9200/accounts/person/1' -d '\r\n{\r\n    \"user\" : \"张三\",\r\n    \"title\" : \"工程师\",\r\n    \"desc\" : \"数据库管理，软件开发\"\r\n}' \r\n\r\n{\r\n  \"_index\":\"accounts\",\r\n  \"_type\":\"person\",\r\n  \"_id\":\"1\",\r\n  \"_version\":2,\r\n  \"result\":\"updated\",\r\n  \"_shards\":{\"total\":2,\"successful\":1,\"failed\":0},\r\n  \"created\":false\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f27d9b8037f405012811-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b8037f405012811-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b8037f405012811-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b8037f405012811-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b8037f405012811-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b8037f405012811-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b8037f405012811-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b8037f405012811-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b8037f405012811-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b8037f405012811-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b8037f405012811-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b8037f405012811-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b8037f405012811-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b8037f405012811-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b8037f405012811-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b8037f405012811-16\">16</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f27d9b8037f405012811-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">curl</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">X</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">PUT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'localhost:9200/accounts/person/1'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">d</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b8037f405012811-2\"><span class=\"crayon-s\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b8037f405012811-3\"><span class=\"crayon-s\">    \"user\" : \"张三\",</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b8037f405012811-4\"><span class=\"crayon-s\">    \"title\" : \"工程师\",</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b8037f405012811-5\"><span class=\"crayon-s\">    \"desc\" : \"数据库管理，软件开发\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b8037f405012811-6\"><span class=\"crayon-s\">}'</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b8037f405012811-7\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b8037f405012811-8\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b8037f405012811-9\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">\"_index\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-s\">\"accounts\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b8037f405012811-10\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">\"_type\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-s\">\"person\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b8037f405012811-11\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">\"_id\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-s\">\"1\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b8037f405012811-12\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">\"_version\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b8037f405012811-13\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">\"result\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-s\">\"updated\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b8037f405012811-14\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">\"_shards\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">\"total\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">\"successful\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">\"failed\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b8037f405012811-15\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">\"created\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-t\">false</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b8037f405012811-16\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0016 seconds] -->\r\n<p>上面代码中，我们将原始数据从”数据库管理”改成”数据库管理，软件开发”。 返回结果里面，有几个字段发生了变化。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f27d9b80383267627433\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n\"_version\" : 2,\r\n\"result\" : \"updated\",\r\n\"created\" : false</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80383267627433-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b80383267627433-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80383267627433-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f27d9b80383267627433-1\"><span class=\"crayon-s\">\"_version\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b80383267627433-2\"><span class=\"crayon-s\">\"result\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"updated\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b80383267627433-3\"><span class=\"crayon-s\">\"created\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>可以看到，记录的 Id 没变，但是版本（version）从<strong>1</strong>变成<strong>2</strong>，操作类型（result）从<strong>created</strong>变成<strong>updated</strong>，<strong>created</strong>字段变成<strong>false</strong>，因为这次不是新建记录。</p>\n<h1>六、数据查询</h1>\n<h2>6.1 返回所有记录</h2>\n<p>使用 GET 方法，直接请求<strong>/Index/Type/_search</strong>，就会返回所有记录。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f27d9b80386167510815\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ curl 'localhost:9200/accounts/person/_search'\r\n\r\n{\r\n  \"took\":2,\r\n  \"timed_out\":false,\r\n  \"_shards\":{\"total\":5,\"successful\":5,\"failed\":0},\r\n  \"hits\":{\r\n    \"total\":2,\r\n    \"max_score\":1.0,\r\n    \"hits\":[\r\n      {\r\n        \"_index\":\"accounts\",\r\n        \"_type\":\"person\",\r\n        \"_id\":\"AV3qGfrC6jMbsbXb6k1p\",\r\n        \"_score\":1.0,\r\n        \"_source\": {\r\n          \"user\": \"李四\",\r\n          \"title\": \"工程师\",\r\n          \"desc\": \"系统管理\"\r\n        }\r\n      },\r\n      {\r\n        \"_index\":\"accounts\",\r\n        \"_type\":\"person\",\r\n        \"_id\":\"1\",\r\n        \"_score\":1.0,\r\n        \"_source\": {\r\n          \"user\" : \"张三\",\r\n          \"title\" : \"工程师\",\r\n          \"desc\" : \"数据库管理，软件开发\"\r\n        }\r\n      }\r\n    ]\r\n  }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80386167510815-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b80386167510815-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80386167510815-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b80386167510815-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80386167510815-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b80386167510815-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80386167510815-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b80386167510815-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80386167510815-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b80386167510815-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80386167510815-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b80386167510815-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80386167510815-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b80386167510815-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80386167510815-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b80386167510815-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80386167510815-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b80386167510815-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80386167510815-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b80386167510815-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80386167510815-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b80386167510815-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80386167510815-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b80386167510815-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80386167510815-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b80386167510815-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80386167510815-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b80386167510815-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80386167510815-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b80386167510815-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80386167510815-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b80386167510815-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80386167510815-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b80386167510815-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80386167510815-35\">35</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f27d9b80386167510815-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">curl</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'localhost:9200/accounts/person/_search'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b80386167510815-2\"> </div><div class=\"crayon-line\" id=\"crayon-59f27d9b80386167510815-3\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b80386167510815-4\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">\"took\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b80386167510815-5\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">\"timed_out\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b80386167510815-6\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">\"_shards\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">\"total\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">\"successful\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">\"failed\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b80386167510815-7\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">\"hits\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b80386167510815-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">\"total\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b80386167510815-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">\"max_score\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b80386167510815-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">\"hits\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-sy\">[</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b80386167510815-11\"><span class=\"crayon-h\">      </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b80386167510815-12\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"_index\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-s\">\"accounts\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b80386167510815-13\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"_type\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-s\">\"person\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b80386167510815-14\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"_id\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-s\">\"AV3qGfrC6jMbsbXb6k1p\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b80386167510815-15\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"_score\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b80386167510815-16\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"_source\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b80386167510815-17\"><span class=\"crayon-h\">          </span><span class=\"crayon-s\">\"user\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"李四\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b80386167510815-18\"><span class=\"crayon-h\">          </span><span class=\"crayon-s\">\"title\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"工程师\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b80386167510815-19\"><span class=\"crayon-h\">          </span><span class=\"crayon-s\">\"desc\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"系统管理\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b80386167510815-20\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b80386167510815-21\"><span class=\"crayon-h\">      </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b80386167510815-22\"><span class=\"crayon-h\">      </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b80386167510815-23\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"_index\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-s\">\"accounts\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b80386167510815-24\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"_type\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-s\">\"person\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b80386167510815-25\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"_id\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-s\">\"1\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b80386167510815-26\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"_score\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b80386167510815-27\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"_source\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b80386167510815-28\"><span class=\"crayon-h\">          </span><span class=\"crayon-s\">\"user\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"张三\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b80386167510815-29\"><span class=\"crayon-h\">          </span><span class=\"crayon-s\">\"title\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"工程师\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b80386167510815-30\"><span class=\"crayon-h\">          </span><span class=\"crayon-s\">\"desc\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"数据库管理，软件开发\"</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b80386167510815-31\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b80386167510815-32\"><span class=\"crayon-h\">      </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b80386167510815-33\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b80386167510815-34\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b80386167510815-35\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0033 seconds] -->\r\n<p>上面代码中，返回结果的 <strong>took</strong>字段表示该操作的耗时（单位为毫秒），<strong>timed_out</strong>字段表示是否超时，<strong>hits</strong>字段表示命中的记录，里面子字段的含义如下。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f27d9b8038a246295183\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ntotal：返回记录数，本例是2条。\r\nmax_score：最高的匹配程度，本例是1.0。\r\nhits：返回的记录组成的数组。</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f27d9b8038a246295183-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b8038a246295183-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b8038a246295183-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f27d9b8038a246295183-1\"><span class=\"crayon-i\">total</span>：返回记录数，本例是<span class=\"crayon-cn\">2</span>条。</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b8038a246295183-2\"><span class=\"crayon-v\">max</span><span class=\"crayon-sy\">_</span>score：最高的匹配程度，本例是<span class=\"crayon-cn\">1.0</span>。</div><div class=\"crayon-line\" id=\"crayon-59f27d9b8038a246295183-3\"><span class=\"crayon-i\">hits</span>：返回的记录组成的数组。</div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>返回的记录中，每条记录都有一个<strong>_score</strong>字段，表示匹配的程序，默认是按照这个字段降序排列。</p>\n<h2>6.2 全文搜索</h2>\n<p>Elastic 的查询非常特别，使用自己的<a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/5.5/query-dsl.html\">查询语法</a>，要求 GET 请求带有数据体。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f27d9b8038d108645171\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ curl 'localhost:9200/accounts/person/_search'  -d '\r\n{\r\n  \"query\" : { \"match\" : { \"desc\" : \"软件\" }}\r\n}'</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f27d9b8038d108645171-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b8038d108645171-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b8038d108645171-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b8038d108645171-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f27d9b8038d108645171-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">curl</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'localhost:9200/accounts/person/_search'</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">d</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b8038d108645171-2\"><span class=\"crayon-s\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b8038d108645171-3\"><span class=\"crayon-s\">  \"query\" : { \"match\" : { \"desc\" : \"软件\" }}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b8038d108645171-4\"><span class=\"crayon-s\">}'</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>上面代码使用 <a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/5.5/query-dsl-match-query.html\">Match 查询</a>，指定的匹配条件是<strong>desc</strong>字段里面包含”软件”这个词。返回结果如下。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f27d9b80390611673457\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n{\r\n  \"took\":3,\r\n  \"timed_out\":false,\r\n  \"_shards\":{\"total\":5,\"successful\":5,\"failed\":0},\r\n  \"hits\":{\r\n    \"total\":1,\r\n    \"max_score\":0.28582606,\r\n    \"hits\":[\r\n      {\r\n        \"_index\":\"accounts\",\r\n        \"_type\":\"person\",\r\n        \"_id\":\"1\",\r\n        \"_score\":0.28582606,\r\n        \"_source\": {\r\n          \"user\" : \"张三\",\r\n          \"title\" : \"工程师\",\r\n          \"desc\" : \"数据库管理，软件开发\"\r\n        }\r\n      }\r\n    ]\r\n  }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80390611673457-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b80390611673457-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80390611673457-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b80390611673457-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80390611673457-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b80390611673457-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80390611673457-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b80390611673457-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80390611673457-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b80390611673457-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80390611673457-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b80390611673457-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80390611673457-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b80390611673457-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80390611673457-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b80390611673457-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80390611673457-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b80390611673457-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80390611673457-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b80390611673457-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80390611673457-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b80390611673457-22\">22</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f27d9b80390611673457-1\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b80390611673457-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">\"took\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b80390611673457-3\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">\"timed_out\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b80390611673457-4\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">\"_shards\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">\"total\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">\"successful\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">\"failed\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b80390611673457-5\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">\"hits\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b80390611673457-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">\"total\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b80390611673457-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">\"max_score\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">0.28582606</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b80390611673457-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">\"hits\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-sy\">[</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b80390611673457-9\"><span class=\"crayon-h\">      </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b80390611673457-10\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"_index\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-s\">\"accounts\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b80390611673457-11\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"_type\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-s\">\"person\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b80390611673457-12\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"_id\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-s\">\"1\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b80390611673457-13\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"_score\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">0.28582606</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b80390611673457-14\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"_source\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b80390611673457-15\"><span class=\"crayon-h\">          </span><span class=\"crayon-s\">\"user\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"张三\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b80390611673457-16\"><span class=\"crayon-h\">          </span><span class=\"crayon-s\">\"title\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"工程师\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b80390611673457-17\"><span class=\"crayon-h\">          </span><span class=\"crayon-s\">\"desc\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"数据库管理，软件开发\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b80390611673457-18\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b80390611673457-19\"><span class=\"crayon-h\">      </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b80390611673457-20\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b80390611673457-21\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b80390611673457-22\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0031 seconds] -->\r\n<p>Elastic 默认一次返回10条结果，可以通过<strong>size</strong>字段改变这个设置。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f27d9b80394776668675\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ curl 'localhost:9200/accounts/person/_search'  -d '\r\n{\r\n  \"query\" : { \"match\" : { \"desc\" : \"管理\" }},\r\n  \"size\": 1\r\n}'</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80394776668675-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b80394776668675-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80394776668675-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b80394776668675-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80394776668675-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f27d9b80394776668675-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">curl</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'localhost:9200/accounts/person/_search'</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">d</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b80394776668675-2\"><span class=\"crayon-s\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b80394776668675-3\"><span class=\"crayon-s\">  \"query\" : { \"match\" : { \"desc\" : \"管理\" }},</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b80394776668675-4\"><span class=\"crayon-s\">  \"size\": 1</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b80394776668675-5\"><span class=\"crayon-s\">}'</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>上面代码指定，每次只返回一条结果。</p>\n<p>还可以通过<strong>from</strong>字段，指定位移。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f27d9b80397506834510\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ curl 'localhost:9200/accounts/person/_search'  -d '\r\n{\r\n  \"query\" : { \"match\" : { \"desc\" : \"管理\" }},\r\n  \"from\": 1,\r\n  \"size\": 1\r\n}'</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80397506834510-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b80397506834510-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80397506834510-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b80397506834510-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b80397506834510-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b80397506834510-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f27d9b80397506834510-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">curl</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'localhost:9200/accounts/person/_search'</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">d</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b80397506834510-2\"><span class=\"crayon-s\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b80397506834510-3\"><span class=\"crayon-s\">  \"query\" : { \"match\" : { \"desc\" : \"管理\" }},</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b80397506834510-4\"><span class=\"crayon-s\">  \"from\": 1,</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b80397506834510-5\"><span class=\"crayon-s\">  \"size\": 1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b80397506834510-6\"><span class=\"crayon-s\">}'</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>上面代码指定，从位置1开始（默认是从位置0开始），只返回一条结果。</p>\n<h2>6.3 逻辑运算</h2>\n<p>如果有多个搜索关键字， Elastic 认为它们是<strong>or</strong>关系。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f27d9b8039a125759713\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ curl 'localhost:9200/accounts/person/_search'  -d '\r\n{\r\n  \"query\" : { \"match\" : { \"desc\" : \"软件 系统\" }}\r\n}'</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f27d9b8039a125759713-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b8039a125759713-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b8039a125759713-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b8039a125759713-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f27d9b8039a125759713-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">curl</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'localhost:9200/accounts/person/_search'</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">d</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b8039a125759713-2\"><span class=\"crayon-s\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b8039a125759713-3\"><span class=\"crayon-s\">  \"query\" : { \"match\" : { \"desc\" : \"软件 系统\" }}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b8039a125759713-4\"><span class=\"crayon-s\">}'</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>上面代码搜索的是<strong>软件 or 系统</strong>。</p>\n<p>如果要执行多个关键词的<strong>and</strong>搜索，必须使用<a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/5.5/query-dsl-bool-query.html\">布尔查询</a>。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f27d9b8039d842131593\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ curl 'localhost:9200/accounts/person/_search'  -d '\r\n{\r\n  \"query\": {\r\n    \"bool\": {\r\n      \"must\": [\r\n        { \"match\": { \"desc\": \"软件\" } },\r\n        { \"match\": { \"desc\": \"系统\" } }\r\n      ]\r\n    }\r\n  }\r\n}'</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f27d9b8039d842131593-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b8039d842131593-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b8039d842131593-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b8039d842131593-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b8039d842131593-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b8039d842131593-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b8039d842131593-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b8039d842131593-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b8039d842131593-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f27d9b8039d842131593-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f27d9b8039d842131593-11\">11</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f27d9b8039d842131593-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">curl</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'localhost:9200/accounts/person/_search'</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">d</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b8039d842131593-2\"><span class=\"crayon-s\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b8039d842131593-3\"><span class=\"crayon-s\">  \"query\": {</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b8039d842131593-4\"><span class=\"crayon-s\">    \"bool\": {</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b8039d842131593-5\"><span class=\"crayon-s\">      \"must\": [</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b8039d842131593-6\"><span class=\"crayon-s\">        { \"match\": { \"desc\": \"软件\" } },</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b8039d842131593-7\"><span class=\"crayon-s\">        { \"match\": { \"desc\": \"系统\" } }</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b8039d842131593-8\"><span class=\"crayon-s\">      ]</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b8039d842131593-9\"><span class=\"crayon-s\">    }</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f27d9b8039d842131593-10\"><span class=\"crayon-s\">  }</span></div><div class=\"crayon-line\" id=\"crayon-59f27d9b8039d842131593-11\"><span class=\"crayon-s\">}'</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p></p>\n<h1>七、参考链接</h1>\n<ul>\n<li><a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/getting-started.html\">ElasticSearch 官方手册</a></li>\n<li><a href=\"https://www.elastic.co/blog/a-practical-introduction-to-elasticsearch\">A Practical Introduction to Elasticsearch</a></li>\n</ul>\n<p>（完）</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112285\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112285votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112285\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 3 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": "  评论", "praise_nums": "1", "url_object_id": "b2d388974611689881f58c518d10da26", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/08/578ac00f9b31564920af2fc9701214ec.jpg"], "front_image_path": "full/4339f4ef6accd92b11112bee83043315c7e470f3.jpg", "title": "全文搜索引擎 Elasticsearch 入门教程"}
{"create_date": "2017/08/29 ", "url": "http://blog.jobbole.com/112288/", "fav_nums": 6, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://dzone.com/articles/11-cool-new-coding-tools-to-know?utm_medium=feed&amp;utm_source=feedpress.me&amp;utm_campaign=Feed:%20dzone\">Damian Wolf</a>   译文出处：<a target=\"_blank\" href=\"https://www.oschina.net/translate/11-cool-new-coding-tools-to-know?print\">开源中国</a>   </div><p>工具对开发人员来说至关重要。工具可以让一个开发人员的日常工作更高效，并且只需要关注最重要的事情。对于开发人员来讲，寻找更好的替代工具往往比坚持使用熟悉单身过时的工具更困难。</p>\n<p>在这篇文章中，我们将列出你在日常工作中能够使用的新的开发工具。很多对在线流媒体感兴趣的开发人员已经开始在他们的开发环境中使用这些新工具，因为相比他们的旧的设施来讲这些工具提供了更多的优势。</p>\n<p>你可能会想，如果旧的工具可以完成工作，还有必要去寻找新的工具吗？技术总是在变化，而且与我们的工作方式息息相关，它需要保持更新。此外，新工具可以在某些方面对工作进行自动化，让你更好的控制工作流程，从而带来更大的价值。因此，如果你现在确信并准备考虑使用市场上新的编程工具，请继续阅读本文，了解其中最好的一些。</p>\n<h1>LiveEdu</h1>\n<p><a href=\"https://www.liveedu.tv/\" target=\"_blank\" rel=\"nofollow\">LiveEdu</a> 是开发者和工程师入驻的好地方。它是一个基于项目的学习平台，服务于游戏开发、设计、数据科学、编程、增强现实、人工智能和虚拟现实等方面的技能提升。学习的关键在于项目的真实性，以及 <a href=\"https://www.liveedu.tv/projects/premium/\" target=\"_blank\" rel=\"nofollow\">LiveEdu 平台额外提供的项目教程</a>，这些教程涵盖大量不同的主题，适用于任何人，包括初学者。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/08/3a896dd4ec8d7dedbf3683bfca9e31c4.jpg\"><img class=\"aligncenter size-full wp-image-112289\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/3a896dd4ec8d7dedbf3683bfca9e31c4.jpg\" alt=\"1-LiveEdu.tv\"></a></p>\n<h1>Standup</h1>\n<p><a href=\"https://getstandup.com/\" target=\"_blank\" rel=\"nofollow\">Standup</a> 是一个监控团队开发进度的好工具。它很好地集成了你已经在用的所有工具，比如Trello， BitBucket， GitHub，以及其他工具。它是怎么工作的呢？它会完全按照开发团队成员的提交历史来自动生成工作报告。这项应用使团队之间共享信息变得更容易，也让团队成员之间形成了积极的竞争关系。该主意是Mesh Studio在完成一个客户的严格的汇报需求的合同工作的时候想出来的。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/08/3a127c8395466be2c10e9248164371cd.jpg\"><img class=\"aligncenter size-full wp-image-112294\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/3a127c8395466be2c10e9248164371cd.jpg\" alt=\"1-LiveEdu.tv\"></a></p>\n<h1>Cell</h1>\n<p><a href=\"http://www.celljs.org/\" target=\"_blank\" rel=\"nofollow\">Cell</a> 自称为“自驱动的网页应用开发框架”。框架这个词让人立刻想到它应该包含APIs，方法，或其他框架具备的功能。然而，Cell 提供的是一种写 HTML 代码的全新的方式。它基于三个简单的规则，而且不运行任何函数就自助建立 DOM。Cell 提供了一种类似写小说的方式来开发网页应用。</p>\n<p>请看示例代码。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33c819b781696466032\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-mixed-highlight\" title=\"含多种语言\"></span><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&lt;html&gt;\r\n&lt;script src=\"https://www.celljs.org/cell.js\"&gt;&lt;/script&gt;\r\n&lt;script&gt;\r\nvar el = {\r\n  $cell: true,\r\n  style: \"font-family: Helvetica; font-size: 14px;\",\r\n  $components: [\r\n    {\r\n      $type: \"input\",\r\n      type: \"text\",\r\n      placeholder: \"Type something and press enter\",\r\n      style: \"width: 100%; outline:none; padding: 5px;\",\r\n      $init: function(e) { this.focus() },\r\n      onkeyup: function(e) {\r\n        if (e.keyCode === 13) {\r\n          document.querySelector(\"#list\")._add(this.value);\r\n          this.value = \"\";\r\n        }\r\n      }\r\n    },\r\n    {\r\n      $type: \"ol\",\r\n      id: \"list\",\r\n      _items: [],\r\n      $components: [],\r\n      _add: function(val) { this._items.push(val) },\r\n      $update: function() {\r\n        this.$components = this._items.map(function(item) {\r\n          return { $type: \"li\", $text: item }\r\n        })\r\n      }\r\n    }\r\n  ]\r\n}\r\n&lt;/script&gt;\r\n&lt;/html&gt;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33c819b781696466032-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c819b781696466032-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f33c819b781696466032-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c819b781696466032-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f33c819b781696466032-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c819b781696466032-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f33c819b781696466032-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c819b781696466032-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f33c819b781696466032-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c819b781696466032-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f33c819b781696466032-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c819b781696466032-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59f33c819b781696466032-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c819b781696466032-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59f33c819b781696466032-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c819b781696466032-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-59f33c819b781696466032-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c819b781696466032-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-59f33c819b781696466032-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c819b781696466032-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-59f33c819b781696466032-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c819b781696466032-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-59f33c819b781696466032-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c819b781696466032-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-59f33c819b781696466032-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c819b781696466032-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-59f33c819b781696466032-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c819b781696466032-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-59f33c819b781696466032-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c819b781696466032-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-59f33c819b781696466032-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c819b781696466032-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-59f33c819b781696466032-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c819b781696466032-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-59f33c819b781696466032-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c819b781696466032-36\">36</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33c819b781696466032-1\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">html</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c819b781696466032-2\"><span class=\"crayon-ta\">&lt;script </span><span class=\"crayon-e \">src</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"https://www.celljs.org/cell.js\"</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-ta\">&lt;/script&gt;</span></div><div class=\"crayon-line\" id=\"crayon-59f33c819b781696466032-3\"><span class=\"crayon-ta\">&lt;script&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c819b781696466032-4\"><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">el</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f33c819b781696466032-5\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">cell</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c819b781696466032-6\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">style</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"font-family: Helvetica; font-size: 14px;\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f33c819b781696466032-7\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">components</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c819b781696466032-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f33c819b781696466032-9\"><span class=\"crayon-h\">      </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">type</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"input\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c819b781696466032-10\"><span class=\"crayon-h\">      </span><span class=\"crayon-v\">type</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"text\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f33c819b781696466032-11\"><span class=\"crayon-h\">      </span><span class=\"crayon-v\">placeholder</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Type something and press enter\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c819b781696466032-12\"><span class=\"crayon-h\">      </span><span class=\"crayon-v\">style</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"width: 100%; outline:none; padding: 5px;\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f33c819b781696466032-13\"><span class=\"crayon-h\">      </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">init</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">focus</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c819b781696466032-14\"><span class=\"crayon-h\">      </span><span class=\"crayon-v\">onkeyup</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f33c819b781696466032-15\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">keyCode</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">===</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">13</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c819b781696466032-16\"><span class=\"crayon-h\">          </span><span class=\"crayon-v\">document</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">querySelector</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"#list\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">_add</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">value</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33c819b781696466032-17\"><span class=\"crayon-h\">          </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e \">value</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c819b781696466032-18\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-59f33c819b781696466032-19\"><span class=\"crayon-h\">      </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c819b781696466032-20\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f33c819b781696466032-21\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c819b781696466032-22\"><span class=\"crayon-h\">      </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">type</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"ol\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f33c819b781696466032-23\"><span class=\"crayon-h\">      </span><span class=\"crayon-v\">id</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"list\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c819b781696466032-24\"><span class=\"crayon-h\">      </span><span class=\"crayon-v\">_items</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f33c819b781696466032-25\"><span class=\"crayon-h\">      </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">components</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c819b781696466032-26\"><span class=\"crayon-h\">      </span><span class=\"crayon-v\">_add</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">val</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_items</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">push</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">val</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f33c819b781696466032-27\"><span class=\"crayon-h\">      </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">update</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c819b781696466032-28\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">components</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_items</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">map</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">function</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">item</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f33c819b781696466032-29\"><span class=\"crayon-h\">          </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">type</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"li\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">text</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">item</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c819b781696466032-30\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f33c819b781696466032-31\"><span class=\"crayon-h\">      </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c819b781696466032-32\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-59f33c819b781696466032-33\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c819b781696466032-34\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-59f33c819b781696466032-35\"><span class=\"crayon-ta\">&lt;/script&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c819b781696466032-36\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">html</span><span class=\"crayon-o\">&gt;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0093 seconds] -->\r\n<p>上面这段代码可以生成如下HTML：</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/08/e8ba56d831e236baa499c6d2aeb80a2c.png\"><img class=\"aligncenter size-full wp-image-112295\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/e8ba56d831e236baa499c6d2aeb80a2c.png\" alt=\"autnonomous_dom\"></a></p>\n<h1>Osquery</h1>\n<p><a href=\"https://osquery.io/\" target=\"_blank\" rel=\"nofollow\">Osquery</a> 是 Facebook 通过 Query 语言揭示操作系统的方法。尽管初看并不吸引人，但其实有着很多实际的用途。例如，你可以通过它来获取通过USB连接的硬件设备列表。</p>\n<p>如果开发者想要保护他们的 APP 不受安全漏洞的影响，或是能在不同的系统上监视他们的应用，那么其中一个有效方法是不使用底层函数或API交互的能力。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/08/030b4cdf07d5b1fff4501c159be7740b.jpg\"><img class=\"aligncenter size-full wp-image-112296\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/030b4cdf07d5b1fff4501c159be7740b.jpg\" alt=\"1-LiveEdu.tv\"></a></p>\n<h1>React Native Firebase</h1>\n<p><a href=\"https://github.com/invertase/react-native-firebase?ref=stackshare\" rel=\"nofollow\">React Native Firebase</a> 旨在帮助开发者更好地使用 React Native 和Firebase。 RN Firebase 可以让你使用 JavaScript bridge 在 Android 和 iOS 上轻松访问本地 eFirebase SDK</p>\n<h1>Warp</h1>\n<p><a href=\"https://github.com/spolu/warp?ref=stackshare\" rel=\"nofollow\">Warp </a>是一个简单的工具，它可以让任何人分享他们的终端。分享终端就像输入一个 warp open 命令那么简单。这可以帮助开发者或主机供应商彼此分享终端。该工具的主要特点是安全和易于传输。让分享从未如此容易！你很快就会忘记SSH 的必要性，并使用它跟同远程团队和刚入坑的小伙伴进行互动。</p>\n<h1>Draft</h1>\n<p><a href=\"https://github.com/Azure/draft\" target=\"_blank\" rel=\"nofollow\">Draft</a> 是一个可以帮助开发者轻松在 Kubernet 构建应用程序的新工具。直到现在，把应用移动版本库之前的测试仍是一件费时费力的工作。有了 Draft，开发者可以在Kubernetes的开发沙箱中把“内循环”和测试应用作为测试对象。沙箱可以通过公共URL获得，并可以使用本地编辑器修改。</p>\n<h1>Docsify</h1>\n<p><a href=\"https://docsify.js.org/\" rel=\"nofollow\">Docsify</a> 是一个文档站点生成器工具。但它完全不同于其他静态的HTML文件生成器。有了 Docsify，你可以使用 Markdown 文件生成你的站点。这样你就可以在 Markdown 上修改代码并及时看到更新。这一特点使得它媲美GitBook等其他流行工具。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/08/624701b202ab86af496a8f4830a5a6bf.jpg\"><img class=\"aligncenter size-full wp-image-112297\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/624701b202ab86af496a8f4830a5a6bf.jpg\" alt=\"1-LiveEdu.tv\"></a></p>\n<h1>Prismic IO</h1>\n<p><a href=\"https://prismic.io/\" rel=\"nofollow\">Prismic IO</a> 是一个无头CMS系统的后台应用。感谢 API 让它可以和任何站点和App一起使用，并很容易和已有的系统进行整合。CMS 也为营销人员提供了一些现代化的发布和创作工具。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/08/599f353f6d045c4e0809c4a27437185f.jpg\"><img class=\"aligncenter size-full wp-image-112298\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/599f353f6d045c4e0809c4a27437185f.jpg\" alt=\"1-LiveEdu.tv\"></a></p>\n<h1>Javalin</h1>\n<p><a href=\"https://javalin.io/?ref=stackshare\" rel=\"nofollow\">Javalin</a> 为Kotlin和Java提供了简单的REST API。 这个REST API易于使用，API也非常的流畅。它不是框架，因此不会被混淆。它的目的是提供一个易用的轻量级 REST API库。</p>\n<p>下面是用Kotlin实现的 “Hello World”API的例子。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33c819b78f394973683\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nimport io.javalin.Javalin\r\nfunmain(args: Array&lt;String&gt;) {\r\n    val app = Javalin.create().port(7000)\r\n    app.get(\"/\") { ctx -&gt; ctx.result(\"Hello World\") }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33c819b78f394973683-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c819b78f394973683-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f33c819b78f394973683-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c819b78f394973683-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f33c819b78f394973683-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33c819b78f394973683-1\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">io</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">javalin</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Javalin</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c819b78f394973683-2\"><span class=\"crayon-e\">funmain</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">args</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Array</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-t\">String</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f33c819b78f394973683-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">val </span><span class=\"crayon-v\">app</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Javalin</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">create</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">port</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">7000</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c819b78f394973683-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">app</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"/\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ctx</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ctx</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">result</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"Hello World\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-59f33c819b78f394973683-5\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p></p>\n<h1>Bootsnap</h1>\n<p>我们都知道速度对某些应用程序而言有多重要。Ruby的性能臭名昭著。然而，<a href=\"https://stackshare.io/bootsnap?utm_source=sitepoint&amp;utm_medium=guest_post&amp;utm_campaign=top_new_tools_june_2017&amp;utm_term=dev_tools&amp;utm_content=post\" target=\"_blank\" rel=\"nofollow\">Bootsnap</a>尝试通过缓存很多Ruby方法并提高其整体性能来加快其速度。它可以以gem的形式轻松插入你的应用程序中，目前可用于 MacOS 和 Linux 系统。</p>\n<h1>最后的思考<del></del></h1>\n<p>编码工具是开发人员工具的一部分。 就像其他职位一样，其对提高效率是很有帮助的。最终这些新的编码工具肯定会以某种方式帮助你。但是，上述提及的工具是非常专业的，你可能根本不会使用到它们。在这种情况下，我们期盼你对最近使用的任何新编码工具（与你的工作相关）进行评论。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112288\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112288votetotal\">3</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112288\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 6 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": "  评论", "praise_nums": "3", "url_object_id": "cc5aad5c95d92007fc92bd84a7332c25", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/08/3a896dd4ec8d7dedbf3683bfca9e31c4.jpg"], "front_image_path": "full/506b10e07df0fcf17177c7768541dfb59fecd817.jpg", "title": "11 个超酷的编程新工具"}
{"create_date": "2017/08/24 ", "url": "http://blog.jobbole.com/112246/", "fav_nums": 15, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/chenyahui\">精算狗</a> 翻译，<a href=\"http://www.jobbole.com/members/hanxiaomax\">艾凌风</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"http://www.fluentcpp.com/2017/06/23/7-ways-better-cpp-summer/\">Jonathan Boccara</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>夏天时常会谈到大海、太阳、沙滩、大山或者你的家庭住宅。<strong>更充裕的时间</strong>也是夏天带来的好处之一。可能是因为你在休假，也可能是因为这段时间工作没有那么忙。无论是哪种情况，与一年中的其他季节相比，夏天的时间似乎更加宽裕。</p>\n<p>你有两个选择：1）把所有夏季空闲时间都用来休整，适当放松一下没什么不可以。2）或者你可以投入一部分空闲时间来提升你的技能，尤其是 C++，用 C++ 水平的提高（boost C++）来开始新的一年。</p>\n<p>如果你觉得选择1）更适合你，那么关掉手机和笔记本吧，真正地放松一下！但是如果你倾向于选择2），那么这篇文章就是为你准备的。</p>\n<p>有 7 种方法帮助你利用夏天真正提高 C++。之后我会给你一些小技巧来帮助你<strong>真正实现</strong>所选的目标。</p>\n<h3>1）开始一个项目</h3>\n<p>用 C++ 来建一个你自己的小项目是一个很好的试验方法，而且能通过这个项目真正理解程序的运行。另一个优点在于你可以完全自由地决定使用什么组件。这样你能够提升这一年没有权限/时间使用的语言特性和库组件。</p>\n<p>在我去年的夏季项目中，我实现了一些区间适配器，这让我学到了超多东西。所以我会把这个项目的细节告诉你，这样你能够得到一些灵感来构建你自己的项目：</p>\n<ul>\n<li>如果你不熟悉 C++ 中的区间（Ranges），请参考<a href=\"http://www.fluentcpp.com/2017/01/12/ranges-stl-to-the-next-level/\">《Ranges: the STL to the Next Level》</a></li>\n<li>实现 transform_iterator，</li>\n<li>实现变换区间适配器（transform range adaptor），</li>\n<li>实现 filter_iterator，</li>\n<li>实现筛选区间适配器（filter range adaptor），</li>\n<li>实现 zip 适配器（zip adaptor），然后结合变换区间适配器使用。Zip 适配器需要两个区间，并且返回到来自这两个区间的成对对象的视图</li>\n<li>为 zip 适配器一般化，要令 zip 适配器能够使用任意数量的区间，</li>\n<li>实现<a href=\"http://www.fluentcpp.com/2017/04/14/understand-ranges-better-with-the-new-cartesian-product-adaptor/\">笛卡尔积区间适配器（Cartesian product range adaptor）</a>，</li>\n<li>实现你自己的新区间适配器！</li>\n</ul>\n<p>是否完美，是否完整或者是否遵从上述指示都不重要，重要的是你要去<strong>试验</strong>。但是上面这些任务能给你带来的是：</p>\n<ul>\n<li>明确理解区间，而区间是当下一个非常流行的 C++ 特性，</li>\n<li>练习变参模板（variadic templates）的使用，</li>\n<li>初步接触模板元编程（template metaprogramming），</li>\n</ul>\n<p>并且这些都是逐渐才能体会到的。</p>\n<p>如果你在这种项目上有任何需要帮助的地方，我都愿意效劳。另外我在这个项目上的所有尝试都写在 <a href=\"https://github.com/joboccara/ranges\">GitHub 的代码仓库</a>中了，希望对你们有用。</p>\n<h3>2）读一本好书</h3>\n<p>我会发布一个 C++ 的书单，但是我现在要给你一个选择。我认为作为一个程序员要读的第一本书就是 Steve McConnell 的《<a href=\"https://www.amazon.cn/gp/product/B0061XKRXA/ref=as_li_qf_sp_asin_il_tl?ie=UTF8&amp;camp=536&amp;creative=3200&amp;creativeASIN=B0061XKRXA&amp;linkCode=as2&amp;tag=vastwork-23\" target=\"_blank\">代码大全</a>》。尽管这本书不是专注于 C++ 的，但是它把写好代码要注意的几乎所有方面都教给你了。从写一个 if 语句（没错，有好多方法把 if 语句搞砸）到分配类责任，再到代码审查，《代码大全》涵盖了软件架构的所有方面。在读完这本书以后你永远不会还用一样的方法来编程。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/08/9a741bac0b81b0471c32da6d8611496f.jpg\"><img class=\"aligncenter wp-image-112252 size-full\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/9a741bac0b81b0471c32da6d8611496f.jpg\" alt=\"Code-complete-246x300\" width=\"246\" height=\"300\"></a></p>\n<p>如果你还没有读过《代码大全》，你应该去看看 Scott Meyers 的《<a href=\"https://www.amazon.cn/gp/product/B004G72P24/ref=as_li_qf_sp_asin_il_tl?ie=UTF8&amp;camp=536&amp;creative=3200&amp;creativeASIN=B004G72P24&amp;linkCode=as2&amp;tag=vastwork-23\" target=\"_blank\">Effective C++</a>》。我建议《Effective C++》要读<strong>两遍</strong>。我已经读过三遍了，但是我想两遍的效果应该一样好。尽管这本书是在 C++11 之前写的，但是大部分内容在今天也仍然是有用的。而且《<a href=\"https://www.amazon.cn/gp/product/B016OFO492/ref=as_li_qf_sp_asin_il_tl?ie=UTF8&amp;camp=536&amp;creative=3200&amp;creativeASIN=B016OFO492&amp;linkCode=as2&amp;tag=vastwork-23\" target=\"_blank\">Effective Modern C++</a>》涵盖了C++11 和 C++14 中的特性，可以作为这本书的补充材料。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/08/59eb3be85b04e023cb4b9a0561c76068.jpg\"><img class=\"aligncenter wp-image-112253 size-full\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/59eb3be85b04e023cb4b9a0561c76068.jpg\" alt=\"Code-complete-246x300\" width=\"243\" height=\"300\"></a></p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/08/3efe96caf01c1d258a4158313c5ba2c6.png\"><img class=\"aligncenter wp-image-112255 size-full\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/3efe96caf01c1d258a4158313c5ba2c6.png\" alt=\"Effective-modern-C-249x300\" width=\"249\" height=\"300\"></a></p>\n<p>今年夏天我要看的是 Eric Evans 的著名书籍——《<a href=\"https://www.amazon.cn/gp/product/B01GZ6T12K/ref=as_li_qf_sp_asin_il_tl?ie=UTF8&amp;camp=536&amp;creative=3200&amp;creativeASIN=B01GZ6T12K&amp;linkCode=as2&amp;tag=vastwork-23\" target=\"_blank\">领域驱动设计</a>》（Domain Driven Design）。《领域驱动设计》涵盖了领域专家和开发人员之间的密集交流，建立领域模型以及在讨论模型与代码时使用<strong>同一种语言</strong>。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/08/ee2d35e20bea6c8b6dba2692c6d53deb.jpg\"><img class=\"aligncenter wp-image-112256 size-full\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/ee2d35e20bea6c8b6dba2692c6d53deb.jpg\" alt=\"Code-complete-246x300\" width=\"227\" height=\"300\"></a></p>\n<p>尽管这本书的内容很有价值，但是读起来并不容易。我发现一个有用的小技巧：对每一小节<strong>先读第一段，再读最后一段，最后读其余部分</strong>。这样你能更好地理解作者的写作方向，节省时间。</p>\n<p>我希望通过显示代码中的域，来找到使代码具有表达性的灵感。当然啦，我会在博客上分享这些灵感的。</p>\n<p>这只是一个选择，我还会做一个更全面的书单。</p>\n<h3>3）学习一个新的语言</h3>\n<p>虽然听起来很稀奇，但是学习一种新的语言可以让你对你所的专注语言获得更深层次的理解，而且是最有效的方法之一。并且新的语言和你自己使用的语言差别越大，效果越好。</p>\n<p>新的观点认为，其他编程语言会让你对编程有更一般的理解。由于你太熟悉自己所用的语言，往往会忽略它的特性，而用不同的方法解决问题能够使这些特性凸显出来。即使你不会使用新语言来写产品代码，所接触到的新概念也能为你提供可以应用到主语言中的思路。</p>\n<p>如果你用的是 C++，那么我推荐你去学习一下 Haskell 语言。Haskell 是一种<strong>函数型编程</strong>语言。如果你还没有试用过函数型编程，那么你能从它的概念中获得启发，并从新的角度看待 C++，尤其是 STL。</p>\n<p>我已经花了很长时间比较网络上各种学习 Haskell 的资源。2013 年（单指那一年）<a href=\"http://www.seas.upenn.edu/~cis194/spring13/lectures.html\">宾夕法尼亚大学的课程</a>是我找到的最好的资源。它解释得很清楚，没有太多理论，课程练习也很良心而且有指导性，并且它还是免费的。</p>\n<p>一旦你学完这门课程，你可以在<a href=\"https://github.com/tonymorris/fp-course\"> data61 课程</a>中获得很多 Haskell 的练习，包括填空补充代码。你能够通过这些练习来整理不寻常的函数型编程的相关知识。</p>\n<p>如果你想了解更多函数型编程语言以及它们在 C++中的应用，我推荐 Quentin Duval 的博客：<a href=\"https://deque.blog/\">deque.blog</a>。</p>\n<p>今年夏天我要学习的语言是 <strong>Lisp</strong> 。我明白它是一种非常强大的语言，能够全面提升对编程的理解。一些语言是从它衍生出来的。它不会消失一定是有原因的！</p>\n<p>我还没有完成对网上资源的调查，但是我计划使用《<a href=\"https://www.amazon.cn/gp/product/B0011AP7RY/ref=as_li_qf_sp_asin_il_tl?ie=UTF8&amp;camp=536&amp;creative=3200&amp;creativeASIN=B0011AP7RY&amp;linkCode=as2&amp;tag=vastwork-23\" target=\"_blank\">计算机程序的构造和解释</a>》（Structure and Interpretation of Computer Programs）。如果你有任何关于学习 Lisp 的想法，请告诉我！</p>\n<h3>4）提升使用 STL 的能力</h3>\n<p>STL 是 C++ 中处理容器和算法的部分。它很强大而且并不难用，却没有它应有的名气。要想掌握 STL 需要有相当的知识积累，但是这是值得的。它是一个神奇的方法，能使你的 C++ 代码更具有表达性也更健壮。</p>\n<p>我正在整理帮你掌握 STL 的资料，叫做 <a href=\"http://www.fluentcpp.com/stl/\">STL 学习资源</a>。还没有完成，但是有很大一部分已经做完了，我想足够让你在这个夏天的大部分时间都很充实了。</p>\n<h3>5）紧跟现代C++的特性</h3>\n<p>C++11，C++14 和C++17给C++ 和标准库带来了很多新的特性。即使你现在，比如今年夏天，没有在产品代码中使用它们，它们也都来了。并且你可以立即把它们应用在你的项目中（看上面的第1条）。</p>\n<p>有些特性很好掌握，比如 <strong>lambdas</strong>。尽管精通 lambda 表达式需要掌握很多细节上的东西，但是学会它们的基础用法不需要花太多精力。</p>\n<p>所以部分特性很好理解，只需要一些好资源和时间来熟悉它们。比如 Scott Meyers 的《<a href=\"https://www.amazon.cn/gp/product/B016OFO492/ref=as_li_qf_sp_asin_il_tl?ie=UTF8&amp;camp=536&amp;creative=3200&amp;creativeASIN=B016OFO492&amp;linkCode=as2&amp;tag=vastwork-23\" target=\"_blank\">Effective Modern C++</a>》（见上面的第2点）涵盖了 C++11和 C++14 的大部分特性。</p>\n<p>我特别喜欢Bartek博客上的一份 <a href=\"http://www.bfilipek.com/2017/01/cpp17features.html\">C++17 特性列表</a>，它可以帮你快速上手 C++17 新特性。内容详实，而且你可以通过给一个特定的特性添加信息来贡献自己的一份力量。Bartolomiej 提供了所有的资源和 Github 权限，所以你能够非常轻松地添加信息。这样即使你还不了解 C++17 也能够贡献自己的力量，并且<strong>在这个过程中学到很多东西</strong>。</p>\n<p>如果你不练习的话，是无法理解很多特性的。尤其是<strong>变参模板</strong>，它是现代标准 C++ 的一个重要特性。上面第一点中的项目和其他任何包含变参模板的项目都可以作为练习。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/08/f468e87715fe3659f2a508a9c5ef91ed.jpg\"><img class=\"aligncenter wp-image-112257 size-full\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/f468e87715fe3659f2a508a9c5ef91ed.jpg\" alt=\"Code-complete-246x300\" width=\"640\" height=\"360\"></a></p>\n<h3>6）提高你对 boost 的了解</h3>\n<p>Boost 是设计良好的 C++ 库的集合，可移植且开源。很多现代 C++ 的特性都源自 Boost。</p>\n<p>了解 Boost 的内容很重要。有两个原因：第一，在代码中确实需要它们，因为 boost 主要应用于综合使用；第二，更重要的原因是即使你在产品代码中没有使用 boost，它可以给你一个通用的精心设计的 API 和 C++ 代码模型。<strong>留心 boost 中的内容可以给你自己的设计带来灵感</strong>。</p>\n<p>学习大量的 boost 库的一个方法是阅读 Boris Schäling 的书——《<a href=\"https://www.amazon.cn/gp/product/0982219199/ref=as_li_qf_sp_asin_il_tl?ie=UTF8&amp;camp=536&amp;creative=3200&amp;creativeASIN=0982219199&amp;linkCode=as2&amp;tag=vastwork-23\" target=\"_blank\">The boost C++ Libraries</a>》。这本书有<a href=\"https://theboostcpplibraries.com/\">电子版</a>，但是纸质版可以放进沙滩包供你躺在沙滩上阅读（真的，我去年夏天就读的这本书）。不过这本书是基于 boost 1.55.0 的，所以它包含了很多库，但并不是所有。</p>\n<p>特别地，它没有包含 Boost Hana。Boost Hana 是一个流行的现代 C++ 元程序库。实际上，学习 Boost Hana 可以作为今年夏天的一个目标。</p>\n<p>我询问了 Louis Dionne（Boost Hana 的创始人）怎么样才能有效地学习 Boost Hana。从<a href=\"http://www.boost.org/doc/libs/1_61_0/libs/hana/doc/html/index.html\">官方指导</a>入手是一个好的开始，而且你可以看他的<a href=\"https://youtu.be/Oc4enqNH-Mc\"> ACCU 演讲</a>（或者<a href=\"https://www.youtube.com/watch?v=X_p9X5RzBJE\">Meeting C++ keynote</a>，内容相似）来获取初步的介绍。这里是<a href=\"http://ldionne.com/talks/\"> Louis 的所有演讲</a>，大多数都与元编程和 HANA 有关，可以帮助加深你的了解。</p>\n<h3>7）观看网络视频</h3>\n<p>C++ 社区上有超多网络视频，尤其是年会的视频。今年夏天是观看这些视频的好时机。</p>\n<p>下面是一些我觉得有近期指导性的演讲：</p>\n<ul>\n<li>Patrice Roy – <a href=\"https://youtu.be/Fno6suiXLPs\">异常处理（The Exception Situation）</a>。这个演讲让你对在 C++ 中使用异常处理对你的代码意味着什么有一个大致了解。该演讲结构合理，而且 Patrice 的演讲风格很让人愉快。</li>\n<li>Arthur O’Dwyer – <a href=\"https://youtu.be/vwrXHznaYLA\">Template Normal Programming</a>。在这个演讲中，Arthur 在不用模板元编程的情况下，展示了关于模板的所有知识，同样有板有眼。</li>\n<li>Stephan T. Lavave  – <a href=\"https://www.youtube.com/watch?v=JhgWFYfdIho\"> tuple＜＞：新特点以及它的用法（tuple＜＞: What’s New and How it Works）</a>。这里有很多关于 tuples 的有用信息和练习帮助你更了解标准库。</li>\n<li>Howard Hinnant – <a href=\"https://youtu.be/P32hvk8b13M\">chrono 导论（A ＜chrono＞ Tutorial）</a>。这个演讲教你使用 chrono 库，告诉你它是怎么用强类型来完成安全又表达清楚的代码。</li>\n<li>David Sankel –<a href=\"https://youtu.be/DiisKQAkGM4\"> Monoids, Monads, and Applicative Functors: Repeated Software Patterns</a>。David Sankel 展示了纯函数概念如何应用于 C++。</li>\n<li>David Sankel – <a href=\"https://youtu.be/k3O4EKX4z1c\">Variants：过去，现在和未来（Variants: Past, Present, and Future）</a>。一个关于 variant 的优秀展示，并且 variant 在 C++17 中被放进标准库里了。</li>\n<li>Dietmar Kühl – <a href=\"https://youtu.be/xWmdcvTedbc\">Constant Fun</a>。一个关于 constexpr 的优秀展示。</li>\n<li>Jason Turner –<a href=\"https://www.youtube.com/channel/UCxHAlbZQNFU2LgEtiqd2Maw\"> C++周刊（C++ Weekly）</a>。在这个周系列中，Jason 制作了一些短视频（5 到 10 分钟），每个视频都展示了一个 C++ 的精彩应用。我通常把这系列视频描述为“精彩 5 分钟”。</li>\n</ul>\n<p>这个列表绝没有包括所有优秀的视频。我看到过其他好视频，并且会有很多我没看过的。但是我觉得这个列表里的视频是个好开始。</p>\n<h3>实现你的夏季目标</h3>\n<p>现在已经有<strong>很多事要做</strong>啦。一个夏天之内不可能做完这些所有事情。所以你应该选择其中一部分来做，并且<strong>提前定好目标</strong>。不要从一件事情跳到另一件事情上，否则夏天会很快过去而且你也完不成任何一件事。</p>\n<p>此外，要想完成你的目标，你需要<strong>集中注意力</strong>。一个实用的方法是使用<a href=\"https://en.wikipedia.org/wiki/Pomodoro_Technique\">番茄工作法</a>，我是用 <a href=\"https://kanbanflow.com/\">kanbanflow</a> 来实现的。我现在就在使用这个方法而且结果也不错。</p>\n<p>我今年夏天的目标是读完《领域驱动设计》并且对 Lisp 有适当的理解。你的目标是什么呢？</p>\n<p>现在就选择<strong>两个目标</strong>吧，写在评论区内让我了解一下你们的选择。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112246\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112246votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112246\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 15 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 3 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/chenyahui\">精算狗</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/chenyahui\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2015/04/8fbdaaa5ea6d3b49c8c1c825aafeb5d9.png\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            简介还没来得及写 :）        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/chenyahui\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/chenyahui/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/chenyahui/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 11</a> · <a title=\"QQ：564968845\" target=\"_blank\" href=\"#\"><i class=\"fa fa-qq\"></i></a> <a title=\"个人微信：564968845\" target=\"_blank\" href=\"#\"><i class=\"fa fa-weixin\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": 3, "praise_nums": "2", "url_object_id": "7a050b13630b4c2a96626bde9331cd01", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2014/09/64a7802a3a60295a4726c49e90604108.png"], "front_image_path": "full/f5d4611e2094787b56111e18af07ad9bad0e04f6.jpg", "title": "提升 C++ 技能的 7 种方法"}
{"create_date": "2017/08/23 ", "url": "http://blog.jobbole.com/112243/", "fav_nums": 2, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://kubernetes.io/docs/concepts/overview/what-is-kubernetes/\">Kubernetes.io</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-8800-1.html\">Linux中国/songshuang00</a>   </div><p>这是一篇 Kubernetes 的概览。</p>\n<p>Kubernetes 是一个<a href=\"http://www.slideshare.net/BrianGrant11/wso2con-us-2015-kubernetes-a-platform-for-automating-deployment-scaling-and-operations\">自动化部署、伸缩和操作应用程序容器的开源平台</a>。</p>\n<p>使用 Kubernetes，你可以快速、高效地满足用户以下的需求：</p>\n<ul>\n<li>快速精准地部署应用程序</li>\n<li>即时伸缩你的应用程序</li>\n<li>无缝展现新特征</li>\n<li>限制硬件用量仅为所需资源</li>\n</ul>\n<p>我们的目标是培育一个工具和组件的生态系统，以减缓在公有云或私有云中运行的程序的压力。</p>\n<h4 id=\"toc_1\">Kubernetes 的优势</h4>\n<ul>\n<li>  <strong>可移动</strong>: 公有云、私有云、混合云、多态云</li>\n<li>  <strong>可扩展</strong>: 模块化、插件化、可挂载、可组合</li>\n<li>  <strong>自修复</strong>: 自动部署、自动重启、自动复制、自动伸缩</li>\n</ul>\n<p>Google 公司于 2014 年启动了 Kubernetes 项目。Kubernetes 是在 <a href=\"https://research.google.com/pubs/pub43438.html\">Google 的长达 15 年的成规模的产品级任务的经验下</a>构建的，结合了来自社区的最佳创意和实践经验。</p>\n<h3 id=\"toc_2\">为什么选择容器?</h3>\n<p>想要知道你为什么要选择使用 <a href=\"https://aucouranton.com/2014/06/13/linux-containers-parallels-lxc-openvz-docker-and-more/\">容器</a>?</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/056e0ba2e853feeeca8d93018fa61151.jpg\"></p>\n<p>程序部署的<em>传统方法</em>是指通过操作系统包管理器在主机上安装程序。这样做的缺点是，容易混淆程序之间以及程序和主机系统之间的可执行文件、配置文件、库、生命周期。为了达到精准展现和精准回撤，你可以搭建一台不可变的虚拟机镜像。但是虚拟机体量往往过于庞大而且不可转移。</p>\n<p>容器部署的<em>新的方式</em>是基于操作系统级别的虚拟化，而非硬件虚拟化。容器彼此是隔离的，与宿主机也是隔离的：它们有自己的文件系统，彼此之间不能看到对方的进程，分配到的计算资源都是有限制的。它们比虚拟机更容易搭建。并且由于和基础架构、宿主机文件系统是解耦的，它们可以在不同类型的云上或操作系统上转移。</p>\n<p>正因为容器又小又快，每一个容器镜像都可以打包装载一个程序。这种一对一的“程序 – 镜像”联系带给了容器诸多便捷。有了容器，静态容器镜像可以在编译/发布时期创建，而非部署时期。因此，每个应用不必再等待和整个应用栈其它部分进行整合，也不必和产品基础架构环境之间进行妥协。在编译/发布时期生成容器镜像建立了一个持续地把开发转化为产品的环境。相似地，容器远比虚拟机更加透明，尤其在设备监控和管理上。这一点，在容器的进程生命周期被基础架构管理而非被容器内的进程监督器隐藏掉时，尤为显著。最终，随着每个容器内都装载了单一的程序，管理容器就等于管理或部署整个应用。</p>\n<p>容器优势总结：</p>\n<ul>\n<li>  <strong>敏捷的应用创建与部署</strong>：相比虚拟机镜像，容器镜像的创建更简便、更高效。</li>\n<li>  <strong>持续的开发、集成，以及部署</strong>：在快速回滚下提供可靠、高频的容器镜像编译和部署（基于镜像的不可变性）。</li>\n<li>  <strong>开发与运营的关注点分离</strong>：由于容器镜像是在编译/发布期创建的，因此整个过程与基础架构解耦。</li>\n<li>  <strong>跨开发、测试、产品阶段的环境稳定性</strong>：在笔记本电脑上的运行结果和在云上完全一致。</li>\n<li>  <strong>在云平台与 OS 上分发的可转移性</strong>：可以在 Ubuntu、RHEL、CoreOS、预置系统、Google 容器引擎，乃至其它各类平台上运行。</li>\n<li>  <strong>以应用为核心的管理</strong>: 从在虚拟硬件上运行系统，到在利用逻辑资源的系统上运行程序，从而提升了系统的抽象层级。</li>\n<li>  <strong>松散耦联、分布式、弹性、无拘束的<a href=\"https://martinfowler.com/articles/microservices.html\">微服务</a></strong>：整个应用被分散为更小、更独立的模块，并且这些模块可以被动态地部署和管理，而不再是存储在大型的单用途机器上的臃肿的单一应用栈。</li>\n<li>  <strong>资源隔离</strong>：增加程序表现的可预见性。</li>\n<li>  <strong>资源利用率</strong>：高效且密集。</li>\n</ul>\n<h4 id=\"toc_3\">为什么我需要 Kubernetes，它能做什么?</h4>\n<p>至少，Kubernetes 能在实体机或虚拟机集群上调度和运行程序容器。而且，Kubernetes 也能让开发者斩断联系着实体机或虚拟机的“锁链”，从<strong>以主机为中心</strong>的架构跃至<strong>以容器为中心</strong>的架构。该架构最终提供给开发者诸多内在的优势和便利。Kubernetes 提供给基础架构以真正的<strong>以容器为中心</strong>的开发环境。</p>\n<p>Kubernetes 满足了一系列产品内运行程序的普通需求，诸如：</p>\n<ul>\n<li>  <a href=\"https://kubernetes.io/docs/concepts/workloads/pods/pod/\">协调辅助进程</a>，协助应用程序整合，维护一对一“程序 – 镜像”模型。</li>\n<li>  <a href=\"https://kubernetes.io/docs/concepts/storage/volumes/\">挂载存储系统</a></li>\n<li>  <a href=\"https://kubernetes.io/docs/concepts/configuration/secret/\">分布式机密信息</a></li>\n<li>  <a href=\"https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-probes/\">检查程序状态</a></li>\n<li>  <a href=\"https://kubernetes.io/docs/concepts/workloads/controllers/replicationcontroller/\">复制应用实例</a></li>\n<li>  <a href=\"https://kubernetes.io/docs/tasks/run-application/horizontal-pod-autoscale/\">使用横向荚式自动缩放</a></li>\n<li>  <a href=\"https://kubernetes.io/docs/concepts/services-networking/connect-applications-service/\">命名与发现</a></li>\n<li>  <a href=\"https://kubernetes.io/docs/concepts/services-networking/service/\">负载均衡</a></li>\n<li>  <a href=\"https://kubernetes.io/docs/tasks/run-application/rolling-update-replication-controller/\">滚动更新</a></li>\n<li>  <a href=\"https://kubernetes.io/docs/tasks/debug-application-cluster/resource-usage-monitoring/\">资源监控</a></li>\n<li>  <a href=\"https://kubernetes.io/docs/concepts/cluster-administration/logging/\">访问并读取日志</a></li>\n<li>  <a href=\"https://kubernetes.io/docs/tasks/debug-application-cluster/debug-application-introspection/\">程序调试</a></li>\n<li>  <a href=\"https://kubernetes.io/docs/admin/authorization/\">提供验证与授权</a></li>\n</ul>\n<p>以上兼具平台即服务（PaaS）的简化和基础架构即服务（IaaS）的灵活，并促进了在平台服务提供商之间的迁移。</p>\n<h4 id=\"toc_4\">Kubernetes 是一个什么样的平台?</h4>\n<p>虽然 Kubernetes 提供了非常多的功能，总会有更多受益于新特性的新场景出现。针对特定应用的工作流程，能被流水线化以加速开发速度。特别的编排起初是可接受的，这往往需要拥有健壮的大规模自动化机制。这也是为什么 Kubernetes 也被设计为一个构建组件和工具的生态系统的平台，使其更容易地部署、缩放、管理应用程序。</p>\n<p><a href=\"https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/\">标签</a>（label）可以让用户按照自己的喜好组织资源。 <a href=\"https://kubernetes.io/docs/concepts/overview/working-with-objects/annotations/\">注释</a>（annotation）让用户在资源里添加客户信息，以优化工作流程，为管理工具提供一个标示调试状态的简单方法。</p>\n<p>此外，<a href=\"https://kubernetes.io/docs/concepts/overview/components/\">Kubernetes 控制面板</a>是由开发者和用户均可使用的同样的 <a href=\"https://kubernetes.io/docs/reference/api-overview/\">API</a> 构建的。用户可以编写自己的控制器，比如 <a href=\"https://git.k8s.io/community/contributors/devel/scheduler.md\">调度器</a>（scheduler），使用可以被通用的<a href=\"https://kubernetes.io/docs/user-guide/kubectl-overview/\">命令行工具</a>识别的<a href=\"https://git.k8s.io/community/contributors/design-proposals/extending-api.md\">他们自己的 API</a>。</p>\n<p>这种<a href=\"https://github.com/kubernetes/community/blob/master/contributors/design-proposals/principles.md\">设计</a>让大量的其它系统也能构建于 Kubernetes 之上。</p>\n<h4 id=\"toc_5\">Kubernetes 不是什么？</h4>\n<p>Kubernetes 不是传统的、全包容的平台即服务（Paas）系统。它尊重用户的选择，这很重要。</p>\n<p>Kubernetes：</p>\n<ul>\n<li>  并不限制支持的程序类型。它并不检测程序的框架 (例如，<a href=\"http://wildfly.org/\">Wildfly</a>)，也不限制运行时支持的语言集合 (比如， Java、Python、Ruby)，也不仅仅迎合 <a href=\"https://12factor.net/\">12 因子应用程序</a>，也不区分 <em>应用</em> 与 <em>服务</em> 。Kubernetes 旨在支持尽可能多种类的工作负载，包括无状态的、有状态的和处理数据的工作负载。如果某程序在容器内运行良好，它在 Kubernetes 上只可能运行地更好。</li>\n<li>  不提供中间件（例如消息总线）、数据处理框架（例如 Spark）、数据库（例如 mysql），也不把集群存储系统（例如 Ceph）作为内置服务。但是以上程序都可以在 Kubernetes 上运行。</li>\n<li>  没有“点击即部署”这类的服务市场存在。</li>\n<li>  不部署源代码，也不编译程序。持续集成 (CI) 工作流程是不同的用户和项目拥有其各自不同的需求和表现的地方。所以，Kubernetes 支持分层 CI 工作流程，却并不监听每层的工作状态。</li>\n<li>  允许用户自行选择日志、监控、预警系统。（ Kubernetes 提供一些集成工具以保证这一概念得到执行）</li>\n<li>  不提供也不管理一套完整的应用程序配置语言/系统（例如 <a href=\"https://github.com/google/jsonnet\">jsonnet</a>）。</li>\n<li>  不提供也不配合任何完整的机器配置、维护、管理、自我修复系统。</li>\n</ul>\n<p>另一方面，大量的 PaaS 系统运行<em>在</em> Kubernetes 上，诸如 <a href=\"https://www.openshift.org/\">Openshift</a>、<a href=\"http://deis.io/\">Deis</a>，以及 <a href=\"http://eldarion.cloud/\">Eldarion</a>。你也可以开发你的自定义 PaaS，整合上你自选的 CI 系统，或者只在 Kubernetes 上部署容器镜像。</p>\n<p>因为 Kubernetes 运营在应用程序层面而不是在硬件层面，它提供了一些 PaaS 所通常提供的常见的适用功能，比如部署、伸缩、负载平衡、日志和监控。然而，Kubernetes 并非铁板一块，这些默认的解决方案是可供选择，可自行增加或删除的。</p>\n<p>而且， Kubernetes 不只是一个<em>编排系统</em> 。事实上，它满足了编排的需求。 <em>编排</em> 的技术定义是，一个定义好的工作流程的执行：先做 A，再做 B，最后做 C。相反地， Kubernetes 囊括了一系列独立、可组合的控制流程，它们持续驱动当前状态向需求的状态发展。从 A 到 C 的具体过程并不唯一。集中化控制也并不是必须的；这种方式更像是<em>编舞</em>。这将使系统更易用、更高效、更健壮、复用性、扩展性更强。</p>\n<h4 id=\"toc_6\">Kubernetes 这个单词的含义？k8s？</h4>\n<p><strong>Kubernetes</strong> 这个单词来自于希腊语，含义是 <em>舵手</em> 或 <em>领航员</em> 。其词根是 <em>governor</em> 和 <a href=\"http://www.etymonline.com/index.php?term=cybernetics\">cybernetic</a>。 <em>K8s</em> 是它的缩写，用 8 字替代了“ubernete”。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112243\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112243votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112243\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": "  评论", "praise_nums": "1", "url_object_id": "14cfc2026b582f161bc18bdb5bf704ab", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/08/056e0ba2e853feeeca8d93018fa61151.jpg"], "front_image_path": "full/5a5136cb07db18c3ddd05b650d26aa95a4c39b84.jpg", "title": "一文了解 Kubernetes 是什么？"}
{"create_date": "2017/08/20 ", "url": "http://blog.jobbole.com/112219/", "fav_nums": 10, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://www.digitalocean.com/community/tutorials/package-management-basics-apt-yum-dnf-pkg\">Brennen Bearnes</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-8782-1.html\">Linux中国/Snapcrafter</a>   </div><h3 id=\"toc_1\">介绍</h3>\n<p>大多数现代的类 Unix 操作系统都提供了一种中心化的机制用来搜索和安装软件。软件通常都是存放在存储库中，并通过包的形式进行分发。处理包的工作被称为包管理。包提供了操作系统的基本组件，以及共享的库、应用程序、服务和文档。</p>\n<p>包管理系统除了安装软件外，它还提供了工具来更新已经安装的包。包存储库有助于确保你的系统中使用的代码是经过审查的，并且软件的安装版本已经得到了开发人员和包维护人员的认可。</p>\n<p>在配置服务器或开发环境时，我们最好了解下包在官方存储库之外的情况。某个发行版的稳定版本中的包有可能已经过时了，尤其是那些新的或者快速迭代的软件。然而，包管理无论对于系统管理员还是开发人员来说都是至关重要的技能，而已打包的软件对于主流 Linux 发行版来说也是一笔巨大的财富。</p>\n<p>本指南旨在快速地介绍下在多种 Linux 发行版中查找、安装和升级软件包的基础知识，并帮助您将这些内容在多个系统之间进行交叉对比。</p>\n<h3 id=\"toc_2\">包管理系统：简要概述</h3>\n<p>大多数包系统都是围绕包文件的集合构建的。包文件通常是一个存档文件，它包含已编译的二进制文件和软件的其他资源，以及安装脚本。包文件同时也包含有价值的元数据，包括它们的依赖项，以及安装和运行它们所需的其他包的列表。</p>\n<p>虽然这些包管理系统的功能和优点大致相同，但打包格式和工具却因平台而异：</p>\n<table cellpadding=\"4\">\n<thead>\n<tr>\n<th>操作系统</th>\n<th>格式</th>\n<th>工具</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Debian</td>\n<td><code>.deb</code></td>\n<td><code>apt</code>, <code>apt-cache</code>, <code>apt-get</code>, <code>dpkg</code></td>\n</tr>\n<tr>\n<td>Ubuntu</td>\n<td><code>.deb</code></td>\n<td><code>apt</code>, <code>apt-cache</code>, <code>apt-get</code>, <code>dpkg</code></td>\n</tr>\n<tr>\n<td>CentOS</td>\n<td><code>.rpm</code></td>\n<td><code>yum</code></td>\n</tr>\n<tr>\n<td>Fedora</td>\n<td><code>.rpm</code></td>\n<td><code>dnf</code></td>\n</tr>\n<tr>\n<td>FreeBSD</td>\n<td>Ports, <code>.txz</code></td>\n<td><code>make</code>, <code>pkg</code></td>\n</tr>\n</tbody>\n</table>\n<p>Debian 及其衍生版，如 Ubuntu、Linux Mint 和 Raspbian，它们的包格式是 <code>.deb</code>。APT 这款先进的包管理工具提供了大多数常见的操作命令：搜索存储库、安装软件包及其依赖项，并管理升级。在本地系统中，我们还可以使用 <code>dpkg</code> 程序来安装单个的 <code>deb</code> 文件，APT 命令作为底层 <code>dpkg</code> 的前端，有时也会直接调用它。</p>\n<p>最近发布的 debian 衍生版大多数都包含了 <code>apt</code> 命令，它提供了一个简洁统一的接口，可用于通常由 <code>apt-get</code> 和 <code>apt-cache</code> 命令处理的常见操作。这个命令是可选的，但使用它可以简化一些任务。</p>\n<p>CentOS、Fedora 和其它 Red Hat 家族成员使用 RPM 文件。在 CentOS 中，通过 <code>yum</code> 来与单独的包文件和存储库进行交互。</p>\n<p>在最近的 Fedora 版本中，<code>yum</code> 已经被 <code>dnf</code> 取代，<code>dnf</code> 是它的一个现代化的分支，它保留了大部分 <code>yum</code> 的接口。</p>\n<p>FreeBSD 的二进制包系统由 <code>pkg</code> 命令管理。FreeBSD 还提供了 <code>Ports</code> 集合，这是一个存在于本地的目录结构和工具，它允许用户获取源码后使用 Makefile 直接从源码编译和安装包。</p>\n<h3 id=\"toc_3\">更新包列表</h3>\n<p>大多数系统在本地都会有一个和远程存储库对应的包数据库，在安装或升级包之前最好更新一下这个数据库。另外，<code>yum</code> 和 <code>dnf</code> 在执行一些操作之前也会自动检查更新。当然你可以在任何时候对系统进行更新。</p>\n<table cellpadding=\"4\">\n<thead>\n<tr>\n<th>系统</th>\n<th>命令</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Debian / Ubuntu</td>\n<td><code>sudo apt-get update</code></td>\n</tr>\n<tr>\n<td></td>\n<td><code>sudo apt update</code></td>\n</tr>\n<tr>\n<td>CentOS</td>\n<td><code>yum check-update</code></td>\n</tr>\n<tr>\n<td>Fedora</td>\n<td><code>dnf check-update</code></td>\n</tr>\n<tr>\n<td>FreeBSD Packages</td>\n<td><code>sudo pkg update</code></td>\n</tr>\n<tr>\n<td>FreeBSD Ports</td>\n<td><code>sudo portsnap fetch update</code></td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"toc_4\">更新已安装的包</h3>\n<p>在没有包系统的情况下，想确保机器上所有已安装的软件都保持在最新的状态是一个很艰巨的任务。你将不得不跟踪数百个不同包的上游更改和安全警报。虽然包管理器并不能解决升级软件时遇到的所有问题，但它确实使你能够使用一些命令来维护大多数系统组件。</p>\n<p>在 FreeBSD 上，升级已安装的 ports 可能会引入破坏性的改变，有些步骤还需要进行手动配置，所以在通过 <code>portmaster</code> 更新之前最好阅读下 <code>/usr/ports/UPDATING</code> 的内容。</p>\n<table cellpadding=\"4\">\n<thead>\n<tr>\n<th>系统</th>\n<th>命令</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Debian / Ubuntu</td>\n<td><code>sudo apt-get upgrade</code></td>\n<td>只更新已安装的包</td>\n</tr>\n<tr>\n<td></td>\n<td><code>sudo apt-get dist-upgrade</code></td>\n<td>可能会增加或删除包以满足新的依赖项</td>\n</tr>\n<tr>\n<td></td>\n<td><code>sudo apt upgrade</code></td>\n<td>和 <code>apt-get upgrade</code> 类似</td>\n</tr>\n<tr>\n<td></td>\n<td><code>sudo apt full-upgrade</code></td>\n<td>和 <code>apt-get dist-upgrade</code> 类似</td>\n</tr>\n<tr>\n<td>CentOS</td>\n<td><code>sudo yum update</code></td>\n<td></td>\n</tr>\n<tr>\n<td>Fedora</td>\n<td><code>sudo dnf upgrade</code></td>\n<td></td>\n</tr>\n<tr>\n<td>FreeBSD Packages</td>\n<td><code>sudo pkg upgrade</code></td>\n<td></td>\n</tr>\n<tr>\n<td>FreeBSD Ports</td>\n<td><code>less /usr/ports/UPDATING</code></td>\n<td>使用 <code>less</code> 来查看 ports 的更新提示（使用上下光标键滚动，按 q 退出）。</td>\n</tr>\n<tr>\n<td></td>\n<td><code>cd /usr/ports/ports-mgmt/portmaster &amp;&amp; sudo make install &amp;&amp; sudo portmaster -a</code></td>\n<td>安装 <code>portmaster</code> 然后使用它更新已安装的 ports</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"toc_5\">搜索某个包</h3>\n<p>大多数发行版都提供针对包集合的图形化或菜单驱动的工具，我们可以分类浏览软件，这也是一个发现新软件的好方法。然而，查找包最快和最有效的方法是使用命令行工具进行搜索。</p>\n<table cellpadding=\"4\">\n<thead>\n<tr>\n<th>系统</th>\n<th>命令</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Debian / Ubuntu</td>\n<td><code>apt-cache search search_string</code></td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td><code>apt search search_string</code></td>\n<td></td>\n</tr>\n<tr>\n<td>CentOS</td>\n<td><code>yum search search_string</code></td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td><code>yum search all search_string</code></td>\n<td>搜索所有的字段，包括描述</td>\n</tr>\n<tr>\n<td>Fedora</td>\n<td><code>dnf search search_string</code></td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td><code>dnf search all search_string</code></td>\n<td>搜索所有的字段，包括描述</td>\n</tr>\n<tr>\n<td>FreeBSD Packages</td>\n<td><code>pkg search search_string</code></td>\n<td>通过名字进行搜索</td>\n</tr>\n<tr>\n<td></td>\n<td><code>pkg search -f search_string</code></td>\n<td>通过名字进行搜索并返回完整的描述</td>\n</tr>\n<tr>\n<td></td>\n<td><code>pkg search -D search_string</code></td>\n<td>搜索描述</td>\n</tr>\n<tr>\n<td>FreeBSD Ports</td>\n<td><code>cd /usr/ports &amp;&amp; make search name=package</code></td>\n<td>通过名字进行搜索</td>\n</tr>\n<tr>\n<td></td>\n<td><code>cd /usr/ports &amp;&amp; make search key=search_string</code></td>\n<td>搜索评论、描述和依赖</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"toc_6\">查看某个软件包的信息</h3>\n<p>在安装软件包之前，我们可以通过仔细阅读包的描述来获得很多有用的信息。除了人类可读的文本之外，这些内容通常包括像版本号这样的元数据和包的依赖项列表。</p>\n<table cellpadding=\"4\">\n<thead>\n<tr>\n<th>系统</th>\n<th>命令</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Debian / Ubuntu</td>\n<td><code>apt-cache show package</code></td>\n<td>显示有关包的本地缓存信息</td>\n</tr>\n<tr>\n<td></td>\n<td><code>apt show package</code></td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td><code>dpkg -s package</code></td>\n<td>显示包的当前安装状态</td>\n</tr>\n<tr>\n<td>CentOS</td>\n<td><code>yum info package</code></td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td><code>yum deplist package</code></td>\n<td>列出包的依赖</td>\n</tr>\n<tr>\n<td>Fedora</td>\n<td><code>dnf info package</code></td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td><code>dnf repoquery --requires package</code></td>\n<td>列出包的依赖</td>\n</tr>\n<tr>\n<td>FreeBSD Packages</td>\n<td><code>pkg info package</code></td>\n<td>显示已安装的包的信息</td>\n</tr>\n<tr>\n<td>FreeBSD Ports</td>\n<td><code>cd /usr/ports/category/port &amp;&amp; cat pkg-descr</code></td>\n<td></td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"toc_7\">从存储库安装包</h3>\n<p>知道包名后，通常可以用一个命令来安装它及其依赖。你也可以一次性安装多个包，只需将它们全部列出来即可。</p>\n<table cellpadding=\"4\">\n<thead>\n<tr>\n<th>系统</th>\n<th>命令</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Debian / Ubuntu</td>\n<td><code>sudo apt-get install package</code></td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td><code>sudo apt-get install package1 package2 ...</code></td>\n<td>安装所有列出来的包</td>\n</tr>\n<tr>\n<td></td>\n<td><code>sudo apt-get install -y package</code></td>\n<td>在 <code>apt</code> 提示是否继续的地方直接默认 <code>yes</code></td>\n</tr>\n<tr>\n<td></td>\n<td><code>sudo apt install package</code></td>\n<td>显示一个彩色的进度条</td>\n</tr>\n<tr>\n<td>CentOS</td>\n<td><code>sudo yum install package</code></td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td><code>sudo yum install package1 package2 ...</code></td>\n<td>安装所有列出来的包</td>\n</tr>\n<tr>\n<td></td>\n<td><code>sudo yum install -y package</code></td>\n<td>在 <code>yum</code> 提示是否继续的地方直接默认 <code>yes</code></td>\n</tr>\n<tr>\n<td>Fedora</td>\n<td><code>sudo dnf install package</code></td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td><code>sudo dnf install package1 package2 ...</code></td>\n<td>安装所有列出来的包</td>\n</tr>\n<tr>\n<td></td>\n<td><code>sudo dnf install -y package</code></td>\n<td>在 <code>dnf</code> 提示是否继续的地方直接默认 <code>yes</code></td>\n</tr>\n<tr>\n<td>FreeBSD Packages</td>\n<td><code>sudo pkg install package</code></td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td><code>sudo pkg install package1 package2 ...</code></td>\n<td>安装所有列出来的包</td>\n</tr>\n<tr>\n<td>FreeBSD Ports</td>\n<td><code>cd /usr/ports/category/port &amp;&amp; sudo make install</code></td>\n<td>从源码构建安装一个 port</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"toc_8\">从本地文件系统安装一个包</h3>\n<p>对于一个给定的操作系统，有时有些软件官方并没有提供相应的包，那么开发人员或供应商将需要提供包文件的下载。你通常可以通过 web 浏览器检索这些包，或者通过命令行 <code>curl</code> 来检索这些信息。将包下载到目标系统后，我们通常可以通过单个命令来安装它。</p>\n<p>在 Debian 派生的系统上，<code>dpkg</code> 用来处理单个的包文件。如果一个包有未满足的依赖项，那么我们可以使用 <code>gdebi</code> 从官方存储库中检索它们。</p>\n<p>在 CentOS 和 Fedora 系统上，<code>yum</code> 和 <code>dnf</code> 用于安装单个的文件，并且会处理需要的依赖。</p>\n<table cellpadding=\"4\">\n<thead>\n<tr>\n<th>系统</th>\n<th>命令</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Debian / Ubuntu</td>\n<td><code>sudo dpkg -i package.deb</code></td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td><code>sudo apt-get install -y gdebi &amp;&amp; sudo gdebi package.deb</code></td>\n<td>安装 <code>gdebi</code>，然后使用 <code>gdebi</code> 安装 <code>package.deb</code> 并处理缺失的依赖</td>\n</tr>\n<tr>\n<td>CentOS</td>\n<td><code>sudo yum install package.rpm</code></td>\n<td></td>\n</tr>\n<tr>\n<td>Fedora</td>\n<td><code>sudo dnf install package.rpm</code></td>\n<td></td>\n</tr>\n<tr>\n<td>FreeBSD Packages</td>\n<td><code>sudo pkg add package.txz</code></td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td><code>sudo pkg add -f package.txz</code></td>\n<td>即使已经安装的包也会重新安装</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"toc_9\">删除一个或多个已安装的包</h3>\n<p>由于包管理器知道给定的软件包提供了哪些文件，因此如果某个软件不再需要了，它通常可以干净利落地从系统中清除这些文件。</p>\n<table cellpadding=\"4\">\n<thead>\n<tr>\n<th>系统</th>\n<th>命令</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Debian / Ubuntu</td>\n<td><code>sudo apt-get remove package</code></td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td><code>sudo apt remove package</code></td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td><code>sudo apt-get autoremove</code></td>\n<td>删除不需要的包</td>\n</tr>\n<tr>\n<td>CentOS</td>\n<td><code>sudo yum remove package</code></td>\n<td></td>\n</tr>\n<tr>\n<td>Fedora</td>\n<td><code>sudo dnf erase package</code></td>\n<td></td>\n</tr>\n<tr>\n<td>FreeBSD Packages</td>\n<td><code>sudo pkg delete package</code></td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td><code>sudo pkg autoremove</code></td>\n<td>删除不需要的包</td>\n</tr>\n<tr>\n<td>FreeBSD Ports</td>\n<td><code>sudo pkg delete package</code></td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td><code>cd /usr/ports/path_to_port &amp;&amp; make deinstall</code></td>\n<td>卸载 port</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"toc_10\"><code>apt</code> 命令</h3>\n<p>Debian 家族发行版的管理员通常熟悉 <code>apt-get</code> 和 <code>apt-cache</code>。较少为人所知的是简化的 <code>apt</code> 接口，它是专为交互式使用而设计的。</p>\n<table cellpadding=\"4\">\n<thead>\n<tr>\n<th>传统命令</th>\n<th>等价的 <code>apt</code> 命令</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>apt-get update</code></td>\n<td><code>apt update</code></td>\n</tr>\n<tr>\n<td><code>apt-get dist-upgrade</code></td>\n<td><code>apt full-upgrade</code></td>\n</tr>\n<tr>\n<td><code>apt-cache search string</code></td>\n<td><code>apt search string</code></td>\n</tr>\n<tr>\n<td><code>apt-get install package</code></td>\n<td><code>apt install package</code></td>\n</tr>\n<tr>\n<td><code>apt-get remove package</code></td>\n<td><code>apt remove package</code></td>\n</tr>\n<tr>\n<td><code>apt-get purge package</code></td>\n<td><code>apt purge package</code></td>\n</tr>\n</tbody>\n</table>\n<p>虽然 <code>apt</code> 通常是一个特定操作的快捷方式，但它并不能完全替代传统的工具，它的接口可能会随着版本的不同而发生变化，以提高可用性。如果你在脚本或 shell 管道中使用包管理命令，那么最好还是坚持使用 <code>apt-get</code> 和 <code>apt-cache</code>。</p>\n<h3 id=\"toc_11\">获取帮助</h3>\n<p>除了基于 web 的文档，请记住我们可以通过 shell 从 Unix 手册页（通常称为 man 页面）中获得大多数的命令。比如要阅读某页，可以使用 <code>man</code>：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33c879d992511484921\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nman page\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33c879d992511484921-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c879d992511484921-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33c879d992511484921-1\"><span class=\"crayon-e\">man </span><span class=\"crayon-i\">page</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c879d992511484921-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>在 <code>man</code> 中，你可以用箭头键导航。按 <code>/</code> 搜索页面内的文本，使用 <code>q</code> 退出。</p>\n<table cellpadding=\"4\">\n<thead>\n<tr>\n<th>系统</th>\n<th>命令</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Debian / Ubuntu</td>\n<td><code>man apt-get</code></td>\n<td>更新本地包数据库以及与包一起工作</td>\n</tr>\n<tr>\n<td></td>\n<td><code>man apt-cache</code></td>\n<td>在本地的包数据库中搜索</td>\n</tr>\n<tr>\n<td></td>\n<td><code>man dpkg</code></td>\n<td>和单独的包文件一起工作以及能查询已安装的包</td>\n</tr>\n<tr>\n<td></td>\n<td><code>man apt</code></td>\n<td>通过更简洁，用户友好的接口进行最基本的操作</td>\n</tr>\n<tr>\n<td>CentOS</td>\n<td><code>man yum</code></td>\n<td></td>\n</tr>\n<tr>\n<td>Fedora</td>\n<td><code>man dnf</code></td>\n<td></td>\n</tr>\n<tr>\n<td>FreeBSD Packages</td>\n<td><code>man pkg</code></td>\n<td>和预先编译的二进制包一起工作</td>\n</tr>\n<tr>\n<td>FreeBSD Ports</td>\n<td><code>man ports</code></td>\n<td>和 Ports 集合一起工作</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"toc_12\">结论和进一步的阅读</h3>\n<p>本指南通过对多个系统间进行交叉对比概述了一下包管理系统的基本操作，但只涉及了这个复杂主题的表面。对于特定系统更详细的信息，可以参考以下资源：</p>\n<ul>\n<li><a href=\"https://www.digitalocean.com/community/tutorials/ubuntu-and-debian-package-management-essentials\">这份指南</a> 详细介绍了 Ubuntu 和 Debian 的软件包管理。</li>\n<li>这里有一份 CentOS 官方的指南 <a href=\"https://www.centos.org/docs/5/html/yum/\">使用 yum 管理软件</a></li>\n<li>这里有一个有关 Fedora 的 <code>dnf</code> 的 <a href=\"https://fedoraproject.org/wiki/Dnf\">wifi 页面</a> 以及一份有关 <code>dnf</code> <a href=\"https://dnf.readthedocs.org/en/latest/index.html\">官方的手册</a></li>\n<li><a href=\"https://www.digitalocean.com/community/tutorials/how-to-manage-packages-on-freebsd-10-1-with-pkg\">这份指南</a> 讲述了如何使用 <code>pkg</code> 在 FreeBSD 上进行包管理</li>\n<li>这本 <a href=\"https://www.freebsd.org/doc/handbook/\">FreeBSD Handbook</a> 有一节讲述了<a href=\"https://www.freebsd.org/doc/handbook/ports-using.html\">如何使用 Ports 集合</a></li>\n</ul>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112219\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112219votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112219\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 10 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": "  评论", "praise_nums": "1", "url_object_id": "1e031f3dac72715c8de661ef03cc6ef1", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/05/77d80105fd15f2465894827e23cc4842.jpeg"], "front_image_path": "full/d1b17b98748a74826464a08e6d30a4ee1b15b171.jpg", "title": "Linux 包管理基础：apt、yum、dnf 和 pkg"}
{"create_date": "2017/08/22 ", "url": "http://blog.jobbole.com/112233/", "fav_nums": 4, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://www.jianshu.com/p/81601bb6914b\">泡面办公室/杜伟</a>   </div><h3>1 说多了都是泪</h3>\n<p>前些日子，我们<b>被自己部署的 Zookeeper 集群 DDOS 攻击了</b>，惊不惊喜，意不意外？肯定有很多朋友会问，怎么会呢？</p>\n<p>一般来说确实不可能，但在一系列条件的配合下，可以把不可能变为可能（感觉好励志有木有！），下面就让我给大家一一道来。</p>\n<div class=\"image-package\"><img class=\"aligncenter\" src=\"//upload-images.jianshu.io/upload_images/3675768-3f329debd5a32b4b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\"></div>\n<h3>2 交代下前提</h3>\n<p>在讲故事前，有几个前提先跟大家说明下：</p>\n<h4>前提一</h4>\n<p>我们公司服务治理框架用的是 Dubbo，注册中心使用的是 Zookeeper 集群。但是早期规划的时候，为了运维和开发维护简单，将 Zookeeper 的 IP 放到了 F5 的一个 VS Pool 里，后续增加或修改节点直接修改 VS Pool ，应用中注册中心配置的就是这个 VS 地址。</p>\n<p>我们年前已经发现这种连接方式存在弊端（应用通过 F5 与 Zookeeper 之间的心跳检测经常中断），并发布了邮件让大家改为直连 Zookeeper 集群，但没有重视，也没有强制要求。</p>\n<h4>前提二</h4>\n<p>我们有两个数据中心，且关键业务应用都实现了双活。但因为一些应用没有部署双活，所以存在跨机房服务调用与治理。因此，早期规划的时候 Zookeeper 也是在一个机房部署了集群，但这种模式在 Zookeeper 进行消息广播时，会占用较多的专线带宽。</p>\n<p>经监控系统报警后，我们决定在下周进行 Zookeeper 部署改造，一个机房部署普通 Zookeeper 节点，另一个机房部署 Oberserver 节点，同时修改 DNS，让应用连接本机房的 Zookeeper 节点，这样可以有效降低跨机房带宽占用。</p>\n<h3>3 吃一堑</h3>\n<p>那是一个周五的下午，大家本应该轻松下班，然后享受周末。突然监控系统报警 F5 流量过高，导致请求被阻塞。紧急来到案发现场，得到的信息是 Zookeeper 集群是流量大户。按照应急处理原则，我们将所有可能的上线都进行了回滚，但问题没有得到改善。于是，我们怀疑是不是某些应用连接 Zookeeper 做了坏事。</p>\n<p>通过网络抓包，看了下基本全是 Dubbo 的注册和订阅事件。当时我也非常奇怪，Dubbo 与 Zookeeper 之间只有在心跳检测失败时才会有大量的广播事件，导致流量上升。但我们的 F5 硬件、网络、 Zookeeper 服务都非常正常，一时之间想不到问题的原因，线索又中断了。</p>\n<p>所以当时的第一决定是启动紧急上线，即按照前提 1 中提到的，直接修改公司所有应用的配置文件，让大家直连 Zookeeper 集群，而不通过 F5 做代理。这一过程很坎坷，因为涉及的应用太多，但是完成改造后，F5 的流量终于降下来了。</p>\n<p>正当我们以为终于解决问题时，灾难再次发生，跨机房专线流量过高，导致电信机房业务受到影响，还是 Zookeeper 在疯狂的广播。当时的第一想法，是不是同时注册引起的，再加上本身专线带宽就不富裕。我们提议将前提 2 中的方案也实施，看一下效果。</p>\n<p>经过一番折腾后，专线流量也下来了，同时看业务也恢复了正常，加上人困马乏，我们决定后续再研究下之前抓取的网络包，先让大家回去休息下，以免明天没人支持。</p>\n<p>周六的一天，就这样在偶尔的报警中度过了。至于分析网络包，看了几个内容后，发现都是正常的服务注册和订阅事件，也是一头雾水。</p>\n<div class=\"image-package\"><img class=\"aligncenter\" src=\"//upload-images.jianshu.io/upload_images/3675768-56176261a1d52386.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\"></div>\n<p>然后从周日 5 点开始，部分业务突然报警，网络 Ping 不通。经排查发现，受影响的业务，都是和 Zookeeper 部署在同一宿主机的应用。Zookeeper 吃掉了宿主机 600M 的带宽。由于还是没查询出“内鬼”是谁，我们只能定下临时方案：迁移 Zookeeper ，部署到与业务系统无关的宿主机上。</p>\n<p>正当我们赶赴公司，准备完成迁移 Zookeeper 时，突然某个同事发现一个非常大的网络报文。当他把数据包给我看后，真的是柳暗花明的感觉，“内鬼”终于找到了。原来是一个基础服务，配置了很多路由规则，导致一个包的大小有几百 k ，而我们的机房里有将近两千台机器， Zookeeper 的性能又是变态的强，于是一切的巧合安排在一起，一瞬间，流量打死了物理机，打死了专线，打死了 F5……于是，事情就这样发生了。当我们把一堆无用规则删除后，整个世界安静了，所有报警都消失了。</p>\n<h3>4 长一智</h3>\n<p>故事讲到这里似乎就结束了，可是等等，我们在这件事故中到底犯了哪些错误，我们来复盘一下：</p>\n<p>在前提 1、2 中，我们发现了异常，却<b><i>没有刨根问底</i></b>，只是凭感觉认为做个简单处理方案即可。魔鬼在细节，一切的灾难在发生前都是有征兆的，如果再多一丝细心，多一丝警惕，结果也许会全然不同。</p>\n<p>同样在前提 1、2 中，整个事件的追踪与跟进完全没有，<b><i>问题没有闭环</i></b>，没有协作推进。</p>\n<p><b><i>监控不完善</i></b>，不论是内网的流量监控还是 Zookeeper 方面的监控都缺失，完全是靠运气找到了有问题的数据包。</p>\n<p><b><i>SOA 技术运营缺失</i></b>，由于功能权限的随意下放，导致造成了灾难的后果。</p>\n<p><b><i>技术架构选型与搭建时不够谨慎</i></b>，不管是 Zookeeper 集群的搭建还是 Dubbo 在服务治理那些坑不能踩等等，都没有去仔细讨论与思考。</p>\n<p>技术没有好坏之分，关键是看人如何运用。一定避免人云亦云，适合自己公司技术体系的就是最好的。选好自己公司的技术体系后，最重要的就是做好运维与监控工作。监控的每一次报警，就像先兆一样，万万不可掉以轻心。运维的事情，永远是最辛苦最复杂的，但不能因为这些，就将权限随意下放，一定要确保自己可以掌控全局。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112233\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112233votetotal\">4</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112233\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 4 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": 1, "praise_nums": "4", "url_object_id": "31a86b3ac18cd1f7d95efa9a354872a2", "front_image_url": ["http://upload-images.jianshu.io/upload_images/3675768-3f329debd5a32b4b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"], "front_image_path": "full/dcc89c273e9c6289e0b7a4143b0a918cb2a6075e.jpg", "title": "Zookeeper，你可把我坑惨了！"}
{"create_date": "2017/08/23 ", "url": "http://blog.jobbole.com/112237/", "fav_nums": 1, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文作者： <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/thoughtworkschina\">ThoughtWorks</a> 。未经作者许可，禁止转载！<br>欢迎加入伯乐在线 <a href=\"http://blog.jobbole.com/99322\" target=\"_blank\">专栏作者</a>。</div><blockquote><p>“你在团队里是做什么的？”“DevOps。”</p>\n<p>“DevOps是什么呢？”</p>\n<p>“DevOps是一种文化、一种实践，目标是加快软件迭代速度，让团队更快交付价值。”</p>\n<p>“能不能具体点，你们日常工作的主要内容是什么？”</p>\n<p>“修Pipeline…”</p></blockquote>\n<p><img src=\"http://insights.thoughtworks.cn/wp-content/uploads/2017/08/1-DevOps-700x436.png\" alt=\"\"></p>\n<p>作为一名开发，在刚涉足DevOps领域的时候，最难的就是和传统运维撇清关系；等到DevOps不再被当成是运维，又容易被当成是专职修Pipeline的人。</p>\n<p>DevOps在一遍遍被人们提及、一次次在项目中被实践时，也在不断地被重新定义，DevOps是什么？这个问题可能到现在也比较难说清楚，但是项目中的“DevOps”做了些什么，却是清晰可见的。</p>\n<p>本文就结合笔者的切身经历，谈一谈关于DevOps交付的价值以及在企业转型过程中遇到的一些问题。</p>\n<h3 id=\"toc_0\">背景介绍</h3>\n<p>客户是一家澳洲大型金融保险企业，其IT部门总人数在千人以上，维护应用两百余个。在经历了几年的收购和合并之后，在业务上指定了“将收购来的多个品牌进行整合”的大方针，于是IT部门也开始面临系统整合、业务线整合、网站合并的问题，同时客户正在将他们的服务逐渐从自建数据中心向AWS公有云服务上迁移。</p>\n<h3 id=\"toc_1\">团队概览</h3>\n<p>在数字化转型的漫漫长路中，该企业已经在内部搭建起了一套持续交付系统，以<a href=\"https://jenkins.io/\">Jenkins</a>为中心，有制品库、依赖管理、代码管理、任务管理系统，敏捷实践成熟。</p>\n<p>我所在的团队是在整个组织向DevOps转型中的一个比较关键的团队，肩负着CI/CD优化、持续交付改进、运维能力输出的重任。类似的团队应该在很多DevOps转型的组织里都有，负责维护CI/CD基础设施、搭建应用开发脚手架、维护基础设施变更、做各种自动化的工作（姑且就将这类团队称之为Platform团队）。</p>\n<p><img src=\"http://insights.thoughtworks.cn/wp-content/uploads/2017/08/2-Platform-700x402.png\" alt=\"\"></p>\n<p>比较特殊的是我在的这个团队实行轮岗制，由产品团队的成员（通常是开发人员）定期轮换到Platform团队，带着在产品团队遇到但是没能解决的问题，在这个团队中寻求最佳实践和解决方案，一段时间后（通常是三个月），开发人员从Platform团队回到开发团队，同时将DevOps技能和最佳实践带到产品开发团队。</p>\n<p>整个Platform团队基本维持在3-5人的规模，有一个IM（Iteration Manager迭代经理），其余全是开发人员。</p>\n<h3 id=\"toc_2\">取得的成就</h3>\n<p>回顾过去的五个月，Platform团队一共经历了10个迭代（每个迭代两个星期），我梳理了一下每个迭代的工作内容，整理出主要成就如下：</p>\n<ul>\n<li>围绕CI/CD做了很多优化，比如简化Jenkins slave创建流程、给自动化脚本（基础设施代码）贡献了许多新功能。</li>\n<li>新技术试点，比如尝试将静态文件部署到<a href=\"https://aws.amazon.com/cn/s3/\">AWS S3</a>中代替<a href=\"https://httpd.apache.org/\">Apache</a>服务。</li>\n<li>为应用设置监控，更新了基础设施脚本用于开启监控，并协助应用团队将配置脚本应用到各个环境。</li>\n<li>团队之间的沟通，了解开发团队痛点，帮助开发团队找到能够解决问题的团队（权限、责任划分、知识传递），技能培训等。</li>\n<li>响应变化，解决技术难题（虽然我认为这更像是一个沟通+权限的问题，但是其他所有团队都认为是技术难题，那我也就这样认为吧），以及修复一些类似于硬盘空间已满、网络延迟、权限的问题。</li>\n</ul>\n<h3 id=\"toc_3\">遇到的问题</h3>\n<p>当然在交付价值的同时，有很多痛点是非常折磨人的：</p>\n<ul>\n<li><strong>权限分配：</strong>作为一个跨开发团队工作的团队，不但没有拥有比开发团队更多的权限，甚至连开发团队的一些权限都没有，比如不能向开发团队的代码库提交代码(修改基础设施代码需要这个权限)，比如缺少Linux权限导致服务器底层问题没法直接修复，再比如 Jenkins 的问题追踪到了服务层需要维护Jenkins的团队支持，因为涉及到CI／CD的应用是由别的团队在管理。</li>\n<li><strong>沟通效率：</strong>为了解决一个bug，有时候要花上两周的时间发邮件，找关键人物，组织会议，跟不同的人解释五遍以上的上下文（技术细节的上下文是很繁琐的），最后解决问题的人还很有可能不是自己团队的（没有权限）。因为大家平时都很忙，而且建卡工作的方式让一部分人对团队请求帮助的问题不是很热心，这种情况在沟通的时候如果表现得情商不够高，对方就会要你发邮件给他们团队然后等 IM 建卡，规划到迭代里再说了，我遇到过一次这样的情况，最后还是通过社工手段拿下了这个关键人物，过程不可谓不曲折。</li>\n<li><strong>明确需求：</strong>Platform团队并不交付业务价值，因此没有BA(Business analyst业务分析师，通常扮演梳理需求的角色)，建卡的事基本都由IM和Dev来做，虽然感觉上是合理的，但实施起来却遇到很多问题，究其根本就是对需求的定义和划分不够明确，导致最后挪卡的时候大家都说不准这张卡算不算完成了，只能用拍脑袋的方式来决定。</li>\n<li><strong>质量分析：</strong>同上，团队缺少QA(Quality Assurance，质量工程师，测试人员)，Dev们都是自己做卡自己测，有时候会结对测试，但也会因为对需求理解不充分，或者说拆卡拆得有问题，导致一些卡完成得质量不够，直接影响受依赖的卡。举个例子，部署监控需要自动化脚本的两个模块支持，两个模块被分为两张卡，在做第一张卡的时候遇到了诸多问题，好不容易把代码提交到别人的版本库里了，在做第二张卡的时候却发现第一张卡代码里多写了一对引号，导致整个逻辑实现失败，这个时候再回过头来改之前的代码，又要重新解决之前遇到的各种问题（沟通、权限，PS：这个时候做第一张卡的人还下了项目），周期和浪费的工时是可想而知的。</li>\n<li><strong>人员轮岗：</strong>这是 IM 一直很头疼的一件事，Platform团队大量的时间花在给新来的团队成员输入上下文、同时又有成员离开团队要交接工作、尤其在沟通重要的工作中，成员的离开意味着需要新的人重新和干系人建立联系，再者，一些成员因为项目上的痛点，不是很有心思工作在团队的事务上，而是更关心自己过段时间会被分配到那个团队，如此种种都对团队的价值交付造成了很大的困扰。举一个例子，有一个端到端测试工具一直由Platform团队维护，从我加入Platform团队开始，这个测试工具就打算新增一个集成远程浏览器引擎的功能，这是一个非常有价值的功能，因为开发团队长期苦于浏览器版本支持过少，端到端测试不稳定；但是在实现过程中一直存在一个网络问题，这张卡先后被关闭、开启、标记完成、又重新开启，经历了大概五六个人的手，困扰我们的网络问题直到Platform团队解散，都没能解决。</li>\n<li><strong>关键角色管理：</strong>做了什么很重要，有时候让别人知道你做了什么比做了什么更重要。这一点在 Platform 团队体现的得尤为明显；在交付团队中，开发如果发现资源不足，需要和TL(Tech Lead 或是Team Lead，可以理解为项目组长)或者PM(Production Manager 产品经理)沟通，如果缺少合适的汇报对象，一方面在团队需要外部支持或更多资源（比如权限）的时候得不到及时的支持，另一方面意味着团队缺少了更高的视角来实时回顾自己做的事情是否是正确的，方向有没有走偏，或者是不是又在造别人造过的轮子。我在团队解散后的回顾会议中，IM还坚持认为我们团队被解散是因为没有一个强有力的领导在背后支持，这也从侧面反映了我们没有找到合适的汇报人，告诉他，我们在做什么，听他说，我们下一步可以做什么。</li>\n</ul>\n<p><img src=\"http://insights.thoughtworks.cn/wp-content/uploads/2017/08/4-Tech-Lead-1-700x390.jpg\" alt=\"\"></p>\n<h3 id=\"toc_4\">分析</h3>\n<h4 id=\"toc_5\">问题背后的原因及可能的改进方案</h4>\n<p>团队解散后经过一段时间的沉淀，我针对以上痛点与过往的成员一一交谈，了解了他们的想法，总结分析出了以下原因，以及可能的解决方案。</p>\n<h4 id=\"toc_6\">原因1：团队方向不清晰</h4>\n<p>不同于交付业务价值的产品团队，Platform团队不对某一个具体的产品负责，也不直接产出业务价值，加上Platform团队对交付的价值缺乏有效的指标度量，造成了团队方向不清晰的状况。</p>\n<p><strong>可能的改进方案：</strong>Platform 团队应该是属于架构师的一个机动团队，在团队方向不清晰的时候应该立即与利益相关者(Stakeholder)沟通，即与架构师取得联系，取得高视角的资源，最好能建立交付价值指标，比如Platform团队的目标是加快持续交付，提高交付质量，那就可视化开发团队发布周期、质量报告，让每个团队成员看到Platform团队交付价值的体现，从而明确团队方向。</p>\n<h4 id=\"toc_7\">原因2：团队角色缺失</h4>\n<p>在架构师不能全权参与团队工作的情况下（甚至Platform团队还可能没有IM），一帮Dev就很容易失去对团队整体的感知，每个Dev只关心自己手里的工作，迭代开始初期容易考虑不到全局影响、不能准确建卡，迭代进行时因为没有合适的汇报人因而跨团队交流困难，迭代结束时没有优质的回顾。 在Micromanagement Culture（微观管理文化）中有一个Alignment(校准)和Autonomy(自治)两个互斥的指标，我们使用这两个指标作为向量构成四个象限，如下图所示：</p>\n<p><img src=\"http://insights.thoughtworks.cn/wp-content/uploads/2017/08/5-Spotify-Engineering-Culture.png\" alt=\"\"></p>\n<p style=\"text-align: center;\">图片来源：<a href=\"https://www.youtube.com/watch?v=4GK1NDTWbkY\">Spotify Engineering Culture</a></p>\n<ul>\n<li>高校准、低自治的团队由领导决定做什么以及怎么做，团队只需要执行，这样会形成“领导说什么就是什么”的局面；</li>\n<li>而高校准且高自治的团队是由领导指出要解决的问题以及原因，然后由团队成员相互合作共同找到问题的解决方案；</li>\n<li>低校准、低自治的团队则缺乏活力，只能循规蹈矩；</li>\n<li>而高自治、低校准的团队成员可以做任何他们想做的事情，领导则很无助因为没有人关心真正需要解决的问题。</li>\n</ul>\n<p>在敏捷团队中，如果团队成员只剩下Dev，情形则很有可能变成图中左下象限（也有些许右下）的情况，要想达到右上象限的期望状态，需要提高自治，更多的是校准。</p>\n<p><strong>可能的改进方案：</strong>在意识到这个问题的时候，团队需要一个关键人物出面充当领导者的角色，扮演这个角色的人必须关注团队交付价值、目标和方向，并且有强大的沟通能力让团队成员目标一致；和利益相关者加强沟通，保证团队方向不会跑偏。</p>\n<h4 id=\"toc_8\">根本原因</h4>\n<p>Platform团队成立初期被定义为一个立意高远（DevOps转型）的组织，但是在项目实施过程中变得越来越边缘化，其中有“人”的原因，有组织架构的原因，当然还有一些客观原因。但我突然意识到这背后有一个原因一直忽视了，那就是——我们在实践DevOps反模式。</p>\n<p>国内近年来一直在对DevOps如何落地争论不休，DevOps提倡的是打破开发和运维的部门墙，将开发和运维（的能力）放在一个团队。然而国内大部分项目的现状是，开发不具备运维技能和意识，也不愿意做“背锅侠”（要求开发做运维一定程度上牺牲了开发的利益，比如亚马逊的开发每隔一周会被要求24小时On-call）。</p>\n<p>因此一些公司选择了在项目中先成立一个 “DevOps团队” 作为过渡，再慢慢将CI/CD的理念和技能扩散到其他团队，但是这种方式稍不注意就会变成“换了个名字的Ops ”，因为工作内容相似，写脚本、做高可用，这些是传统运维也会做的事情，这种形式非常不利于团队思维的转变，“团队整体对最终交付物负责”才是DevOps的精要，而不是把团队按职责划分（只对流程负责）。</p>\n<p>这样的要求无异是给项目成员增加了工作量和责任，对他们提出了更高的要求。然而很多职员不愿意无回报地多背负一些责任，比如说开发，谁不愿意每天写点代码一提交就早早回家，DevOps要求他们得看着新功能上线，确保无误之后才能离开；所以DevOps的推行在产品团队中是有阻力的，因此DevOps的成功不光需要团队内部努力，也需要得到高层支持并扫除障碍。</p>\n<h3 id=\"toc_9\">反思</h3>\n<blockquote><p>在一个不确定性多发的时代，快速的从成败经验中学习比找寻正确的路径更加重要。——ThoughtWorks高级咨询师顾宇</p></blockquote>\n<ul>\n<li><strong>尽早找到关键角色，并且管理好利益相关人。</strong>这一点在一个扁平化组织里往往是最容易被忽视的，在意识到要和 Stackholders(利益相关者)建立联系之前，Platform 团队走了很多弯路，也错失了很多机会。</li>\n<li><strong>让事情发生比如何发生更重要。</strong>应该说在这5个月的工作中，我认为最有价值的是最后两个迭代开始真正搜集来自应用团队的需求，开始在两地组织各个团队的 TL 开会搜集痛点和解决方案。作为 Platform 团队的一员，这件事其实我早就意识到会是非常有价值的，但始终没有去做，总是顾虑不知道怎么去开始、去推动，担心TL 们提出的问题不能得到真正解决。但是最后这件事终于发生了，才意识到真的是非常有价值，而且早该这么做了。关于这点在我还在 ThoughtWorks 试用期的时候我的 Buddy(由公司安排负责伴随新员工渡过试用期的人) 给了我一个非常好的建议，就是决定在讲一个分享之前先把日程表（邀请邮件）发出来，这种看似是“Deadline driven(截止日期驱动)”的方式，背后暗含了“这件事情必须发生”的道理，这和 MVP(Minumum viable product，产品原型) 的原理也是一样的，先上线，再搜集反馈，迭代改进；就算它是一个错误的行为，这也是一次有价值的试错。</li>\n</ul>\n<h3 id=\"toc_10\">我们是否还需要DevOps团队</h3>\n<p>结合我自身的经历，“DevOps 团队”应该是一次有价值的试错，让我看到了这种方式的一些弊端，应用开发团队自身如果不具备产品思维，要由一个独立的团队去影响它们是很难的，这种实践下的 DevOps 团队就像是披着 DevOps 外衣的 Ops 团队，不能产生理想的价值。</p>\n<p>相比之下如果有一种自上而下的方式让开发团队基于已有业务基础之上去优化交付流程，并对每一个提交的最终价值负责，将产品思维真正植入到开发团队，从而达到全局优化的效果，这种做法才更符合真正的 DevOps 精神。</p>\n<p>（文／ThoughtWorks杜屹东）</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112237\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112237votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112237\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/thoughtworkschina\">ThoughtWorks</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/thoughtworkschina\">\r\n\t\t\t<img src=\"http://tp3.sinaimg.cn/1774908135/180/0/1\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            ThoughtWorks是一家全球IT咨询公司，追求卓越软件质量，致力于科技驱动商业变革。擅长构建定制化软件产品，帮助客户快速将概念转化为价值。同时为客户提供用户体验设计、技术战略咨询、组织转型等咨询服务。        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/thoughtworkschina\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/thoughtworkschina/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/thoughtworkschina/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 72</a> · <a title=\"我的网站\" target=\"_blank\" href=\"http://insights.thoughtworkers.org/\"><i class=\"fa fa-link\"></i></a> <a title=\"微博主页\" target=\"_blank\" href=\"http://weibo.com/thoughtworkschina\"><i class=\"fa fa-weibo\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": "  评论", "praise_nums": "1", "url_object_id": "fea447f655adc5e5a294480152ef9eb8", "front_image_url": ["http://insights.thoughtworks.cn/wp-content/uploads/2017/08/1-DevOps-700x436.png"], "front_image_path": "full/7a7918d976b65d75d9b90138280a1268fb97e0b4.jpg", "title": "DevOps 团队之殇"}
{"create_date": "2017/08/21 ", "url": "http://blog.jobbole.com/112224/", "fav_nums": 4, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://tech.lede.com/2017/07/21/rd/server/crossdomain/\">网易乐得 - 张捷</a>   </div><h3 id=\"1-前言\">1. 前言</h3>\n<p>贵金属wap版直播间上线后，偶尔有用户反馈，在进入wap直播间的时候，出现空白页面，但是重新刷新又可以正常显示了。我们曾一度认为是网络请求异常或兼容问题，直到开发PC版直播间，在进行调试中，同样遇到了“白屏”问题，才引起了足够重视，并进行了问题跟踪与分析。现在跟大家分享一下，这种偶然现象出现的原因。</p>\n<p>我们的直播间落地页在fa.163.com 系统，而直播间内容，是通过 向直播间系统 qz.fa.163.com 发起Ajax请求获取的。在出现“白屏”的时候，可以通过浏览器的调试窗口，可以看到出现下面的报错</p>\n<p style=\"text-align: center\"><a href=\"http://jbcdn2.b0.upaiyun.com/2017/08/a12fbf3c168315a7d1b5b5a2ca4b6129.png\"><img class=\"alignnone size-full wp-image-112226\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/a12fbf3c168315a7d1b5b5a2ca4b6129.png\" alt=\"p1\"></a></p>\n<h3 id=\"2-问题分析\">2. 问题分析</h3>\n<p>从上述错误提示文案中可以看到，问题首先和 <strong>跨域</strong> 有关。</p>\n<blockquote><p><strong>何为跨域</strong></p>\n<p>从字面上理解为“跨域名”，<br>\n浏览器不能执行其他网站的脚本，然而，跨域不仅仅局限于域名这一项。只要协议、域名、端口有任何一个不同，都被当作是不同的域。 这是由于&gt;同源策略的限制，从一个域上加载的脚本不允许访问另外一个域的文档属性。虽然在浏览器中，&lt;script&gt;、&lt;img&gt;、&lt;iframe&gt;、&lt;link&gt;等标签都&gt;可&gt;以加载跨域资源，而不受同源限制，但浏览器会限制脚本中发起的跨域请求。比如，使用 XMLHttpRequest 对象和Fetch发起 HTTP 请求就必须遵守同源策略。</p>\n<p><strong>同源策略/SOP（Same origin policy）</strong>是一种约定，它是浏览器最核心也最基本的安全功能，如果缺少了同源策略，浏览器很容易受到XSS、CSFR等攻击。SOP要求两个通讯地址的协议、域名、端口号必须相同，否则两个地址的通讯将被浏览器视为不安全的，并被block下来。</p>\n<p style=\"text-align: center\">举个例子：从贵金属主站 <a href=\"http://fa.163.com\" target=\"_blank\" rel=\"external\">http://fa.163.com</a> 发起请求访问以下url：<br>\n<a href=\"http://jbcdn2.b0.upaiyun.com/2017/08/b26b0c19bf035ea217c4df11feb23328.png\"><img class=\"alignnone size-full wp-image-112227\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/b26b0c19bf035ea217c4df11feb23328.png\" alt=\"p6\"></a></p>\n<p><strong>解决跨域</strong></p>\n<p>在实际应用中有多种方式来解决跨域问题，相信在实践中都会用到其中的某些方案：</p>\n<p>1.JSONP （无状态连接，不能获悉连接状态和错误事件，而且只能走GET的形式）</p>\n<p>2.iframe形式</p>\n<p>3.服务器代理</p>\n<p>页面直接向同域的服务端发请求，服务端进行跨域处理或爬虫后，再把数据返回给客户端页。</p>\n<p>4.CORS</p>\n<p>CORS(Cross-Origin Resource Sharing)跨域资源共享，定义了必须在访问跨域资源时，浏览器与服务器应该如何沟通。CORS背后的基本思想就&gt;是使用自定义的HTTP头部让浏览器与服务器进行沟通，从而决定请求或响应是应该成功还是失败。目前，所有浏览器都支持该功能，IE浏览器不能低&gt;于IE10。整个CORS通信过程，都是浏览器自动完成，不需要用户参与。对于开发者来说，CORS通信与同源的AJAX通信没有差别，代码完全一样。浏&gt;览器一旦发现AJAX请求跨源，就会自动添加一些附加的头信息，有时还会多出一次附加的请求，但用户不会有感觉。</p>\n<p>CORS方式实现：</p>\n<p>浏览器在发出CORS请求时会在头信息之中增加一个Origin字段；</p>\n<p>后端返回代码中增加三个字段</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33c8865390470458215\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nheader(“Access-Control-Allow-Origin”:“”);           // 必选 允许所有来源访问\r\nheader(“Access-Control-Allow-Credentials”:“true”);  //可选 是否允许发送cookie\r\nheader(“Access-Control-Allow-Method”:“POST,GET”);   //可选 允许访问的方式</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33c8865390470458215-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c8865390470458215-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f33c8865390470458215-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33c8865390470458215-1\"><span class=\"crayon-e\">header</span><span class=\"crayon-sy\">(</span>“<span class=\"crayon-v\">Access</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">Control</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">Allow</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">Origin</span>”<span class=\"crayon-o\">:</span>“”<span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">           </span><span class=\"crayon-c\">// 必选 允许所有来源访问</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c8865390470458215-2\"><span class=\"crayon-e\">header</span><span class=\"crayon-sy\">(</span>“<span class=\"crayon-v\">Access</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">Control</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">Allow</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">Credentials</span>”<span class=\"crayon-o\">:</span>“<span class=\"crayon-t\">true</span>”<span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span><span class=\"crayon-c\">//可选 是否允许发送cookie</span></div><div class=\"crayon-line\" id=\"crayon-59f33c8865390470458215-3\"><span class=\"crayon-e\">header</span><span class=\"crayon-sy\">(</span>“<span class=\"crayon-v\">Access</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">Control</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">Allow</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">Method</span>”<span class=\"crayon-o\">:</span>“<span class=\"crayon-v\">POST</span><span class=\"crayon-sy\">,</span><span class=\"crayon-i\">GET</span>”<span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">   </span><span class=\"crayon-c\">//可选 允许访问的方式</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p>nginx是一个高性能的web服务器，常用作反向代理服务器。nginx作为反向代理服务器，就是把http请求转发到另一个或者一些服务器上。通过把本地一个url前缀映射到要跨域访问的web服务器上，就可以。</p></blockquote>\n<p>为了解决跨域问题，我们选择方案d ， 在直播间的过滤器中，统一添加了如下代码：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33c886539a167228934\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n   &lt;a href=\"http://www.jobbole.com/members/wx610506454\"&gt;@Override&lt;/a&gt;\r\n   public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception {\r\n    // 加入响应头\r\n    String origin = request.getHeader(\"Origin\");\r\n    if(\"http://fa.163.com\".equals(origin) || \"https://fa.163.com\".equals(origin) ) {\r\n        response.addHeader(\"Access-Control-Allow-Origin\", origin);\r\n        response.addHeader(\"Access-Control-Allow-Credentials\", \"true\");\r\n    }\r\n    return true;\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33c886539a167228934-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c886539a167228934-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f33c886539a167228934-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c886539a167228934-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f33c886539a167228934-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c886539a167228934-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f33c886539a167228934-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c886539a167228934-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f33c886539a167228934-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c886539a167228934-10\">10</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33c886539a167228934-1\"><span class=\"crayon-h\">   </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-i\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">href</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"http://www.jobbole.com/members/wx610506454\"</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">Override</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">a</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c886539a167228934-2\"><span class=\"crayon-h\">   </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">boolean</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">preHandle</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">HttpServletRequest </span><span class=\"crayon-v\">request</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">HttpServletResponse </span><span class=\"crayon-v\">response</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Object</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">handler</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">throws</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Exception</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f33c886539a167228934-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">// 加入响应头</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c886539a167228934-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">origin</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">request</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getHeader</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"Origin\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33c886539a167228934-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"http://fa.163.com\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">equals</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">origin</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">||</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"https://fa.163.com\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">equals</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">origin</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c886539a167228934-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">response</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">addHeader</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"Access-Control-Allow-Origin\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">origin</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f33c886539a167228934-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">response</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">addHeader</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"Access-Control-Allow-Credentials\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"true\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c886539a167228934-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-59f33c886539a167228934-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c886539a167228934-10\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0023 seconds] -->\r\n<p>从错误提示文案中，我们还可以看到错误提示的关键点 “<a href=\"http://fa.163.com%E2%80%9D\" target=\"_blank\" rel=\"external\">http://fa.163.com”</a> that is not equal to the supplied origin. Origin ‘<a href=\"https://fa.163.com\" target=\"_blank\" rel=\"external\">https://fa.163.com</a>‘ is therefore not allowed access.<br>\n目前我们的系统同时支持http访问和https访问，但是为什么使用 http访问 ，返回的header中却是 https 协议呢？<br>\n通过多次模拟，确认出现问题的请求中，Request URL使用的协议和 response返回的headers中的 Access-Control-Allow-Origin 中的 协议确实不一致，且还有一个特性，X-Cached 为 HIT，如下图：</p>\n<p style=\"text-align: center\"><a href=\"http://jbcdn2.b0.upaiyun.com/2017/08/c7581ea997ecc2922a2e162ed57aef52.jpg\"><img class=\"alignnone size-full wp-image-112228\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/c7581ea997ecc2922a2e162ed57aef52.jpg\" alt=\"p2\"></a></p>\n<p>命中了缓存的请求，出现了协议不一致？</p>\n<p>突然想到，这个接口，我们配置了nginx 缓存，那必然和nginx缓存有关了。</p>\n<blockquote><p><strong>Nginx 缓存</strong></p>\n<p>Nginx (engine x) 是一个高性能的HTTP和反向代理服务器。<br>\n首先从源服务器（内部网络上的web服务器）上获取内容，然后把内容返回给用户，同时，也会把内容保存到代理服务器上一份，这样日后再接收同样的信息请求时，他会把本地缓存里的内容直接发给用户，以此减少后端web服务器的压力，提高响应速度。这其实就是缓存服务器所实现的功能。如下图所示。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/08/d93182a8d7f7fe0c1129b5c36ab6aad8.png\"><img class=\"alignnone size-full wp-image-112229\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/d93182a8d7f7fe0c1129b5c36ab6aad8.png\" alt=\"p3\"></a></p></blockquote>\n<p>进入直播间后，首先需要查询直播内容是否有更新，而这个接口客户端会以5s间隔轮询，为了减少tomcat的压力，我们配置了nginx缓存。配置如下</p>\n<p style=\"text-align: center\"><a href=\"http://jbcdn2.b0.upaiyun.com/2017/08/ecf29cf6d154c4ad3cfe0f5d4acfa2a4.png\"><img class=\"alignnone size-full wp-image-112231\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/ecf29cf6d154c4ad3cfe0f5d4acfa2a4.png\" alt=\"p4\"></a></p>\n<p>其中：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33c88653a0824061521\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nproxy_cache_methods： 用来设置HTTP哪些方法会被缓存，直播间接口配置了GET、HEAD、POST；\r\nproxy_cache_valid:    用来设置对不同HTTP状态码的不同缓存时间。直播间接口配置了对于 返回值为200的状态码，缓存5秒；\r\nproxy_cache_min_uses: 用来设置多少次访问后，应答值会被缓存，配置为3次；\r\nproxy_cache_key:      设置Web缓存的key\r\nproxy_cache:          用来设置哪个缓存区将被使用，并定义缓存区的名称\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33c88653a0824061521-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c88653a0824061521-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f33c88653a0824061521-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c88653a0824061521-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f33c88653a0824061521-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c88653a0824061521-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33c88653a0824061521-1\"><span class=\"crayon-v\">proxy_cache</span><span class=\"crayon-sy\">_</span>methods：<span class=\"crayon-h\"> </span>用来设置<span class=\"crayon-i\">HTTP</span>哪些方法会被缓存，直播间接口配置了<span class=\"crayon-i\">GET</span>、<span class=\"crayon-i\">HEAD</span>、<span class=\"crayon-i\">POST</span>；</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c88653a0824061521-2\"><span class=\"crayon-v\">proxy_cache_valid</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">    </span>用来设置对不同<span class=\"crayon-i\">HTTP</span>状态码的不同缓存时间。直播间接口配置了对于<span class=\"crayon-h\"> </span>返回值为<span class=\"crayon-cn\">200</span>的状态码，缓存<span class=\"crayon-cn\">5</span>秒；</div><div class=\"crayon-line\" id=\"crayon-59f33c88653a0824061521-3\"><span class=\"crayon-v\">proxy_cache_min_uses</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span>用来设置多少次访问后，应答值会被缓存，配置为<span class=\"crayon-cn\">3</span>次；</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c88653a0824061521-4\"><span class=\"crayon-v\">proxy_cache_key</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">      </span>设置<span class=\"crayon-i\">Web</span>缓存的<span class=\"crayon-e\">key</span></div><div class=\"crayon-line\" id=\"crayon-59f33c88653a0824061521-5\"><span class=\"crayon-v\">proxy_cache</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">          </span>用来设置哪个缓存区将被使用，并定义缓存区的名称</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c88653a0824061521-6\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0017 seconds] -->\r\n<p>通过上述配置，我们可以看到 proxy_cache_key 配置中，只配置了host + uri + 参数，但没有配置协议，所以无论用http访问，还是https访问，只要被缓存后，返回的内容都是一样的，而不会区分http或https。从而引起了跨域问题。<br>\n至此，问题分析完毕。</p>\n<h3 id=\"3-问题解决\">3. 问题解决</h3>\n<p>跟运维同学沟通后，通过修改nginx配置，将协议类型scheme加入到缓存查找的判断参数中，配置如下。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/08/ce493ab2cec7b730fd5801c8cd15fa69.png\"><img class=\"alignnone size-full wp-image-112230\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/ce493ab2cec7b730fd5801c8cd15fa69.png\" alt=\"p5\"></a></p>\n<p>问题得到了解决。</p>\n<h1 id=\"4-总结\">4. 总结</h1>\n<p>上述“惨案” ，是 跨域、nginx缓存、http/https协议 这三种条件同时出现引发的。<br>\n如果不涉及跨域，混用 http/https协议 + nginx缓存，其实也是没有问题的。但是一旦出现了跨域使用，必须 在nginx 缓存配置中，配置 scheme + host + uri +　参数。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112224\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112224votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112224\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 4 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": "  评论", "praise_nums": "1", "url_object_id": "1a6ec2a64adc4d7e67f112d418752843", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2013/07/Nginx-Logo.jpg"], "front_image_path": "full/2d4fd40c8eaec8319c1de2f154b3275aecd23f9d.jpg", "title": "Nginx 缓存引发的跨域惨案"}
{"create_date": "2017/08/16 ", "url": "http://blog.jobbole.com/112167/", "fav_nums": 5, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://opensource.com/article/17/8/reasons-i-come-back-gnome\">Jay LaCroix</a>   译文出处：<a target=\"_blank\" href=\"https://my.oschina.net/editorial-story/blog/1510722\">开源中国</a>   </div><p>摘要: 一位资深 Linux 用户告诉你为什么 GNOME 仍然是最好的 Linux 桌面环境</p>\n<p><img class=\"alignnone\" src=\"http://wx1.sinaimg.cn/mw690/7cc829d3gy1filbc2mwdfj218g0nywhd.jpg\" width=\"690\" height=\"372\"></p>\n<blockquote><p>关于本文作者 Jay LaCroix</p>\n<p>Jay LaCroix 是来自密歇根州的技术专家，专注于 Linux 和开源软件。自 2002 年使用 Linux 以来，Jay 一直是它的“死忠粉”。他目前是云计算系统工程师和自由的咨询顾问，乐于教授他人使用 Linux，以充分利用这个优秀的系统。在空闲时间，Jay 会撰写图书，他是 Linux Mint Essentials, Mastering Linux Network Administration 这些书的作者，最近他成为了 Ubuntu Server 的会员。</p></blockquote>\n<p>我使用 Linux 大概已经有 15 年的时间了，在这期间一直都在尝试使用各种桌面环境。在我职业生涯的大部分时间里，我一直是一个坚定的 KDE Plasma 用户（从 2.x 版开始使用），一直坚持使用 Plasma 至 4.x 系列的大部分版本，最终由于稳定性问题，选择了迁移到其他的桌面环境。此后，我尝试过使用 Xfce, MATE, Openbox 等桌面环境。但自从我选择投入 <a href=\"https://www.gnome.org/gnome-3/\" target=\"_blank\" rel=\"nofollow\">GNOME 3</a> 的怀抱后，我就再没有离开过它了。GNOME 是一个稳定且反应灵敏的桌面环境，它使得我可以专注于自己的工作而尽可能少地受到干扰。</p>\n<p>下面说一下我彻底沉醉于 GNOME 3 Shell 的六个原因。</p>\n<h3 id=\"h2_0\">1. 智能且稳定</h3>\n<p>自从切换到 GNOME 3 以来，我并没有遇到过任何稳定性方面的问题。我已经在三台 System76 机器和两台戴尔 Latitude 笔记本电脑上运行 GNOME 3 了，而且它在每台机器上的表现都十分优秀。总之，在 GNOME 上的体验不能更好了 —— 它十分稳定并且永远不会崩溃，这是十分重要的。</p>\n<p>虽然我使用 GNOME 3 的体验一直都很稳定，但在使用测试的 beta 版时，仍然会遇到一些崩溃的场景。当出现这些通常由错误的 beta 版驱动引起的崩溃时（而不是 GNOME 本身），GNOME 3 的恢复功能仍能允许我从锁定中恢复。如果 shell 已经停止响应，我所要做的是按下 ALT+F2，然后按下 R 和 Enter 来重新启动会话，而这不会丢失正在运行的应用程序。事实上，即使强制重新启动 GNOME Shell，它不仅会把应用程序带回来，还会把它们放回到重新启动之前的同一个显示器/工作区上。</p>\n<p>上面的案例只是想告诉大家 GNOME 是如此的智能和稳定 —— 使用它的期间，我确实没遇到过崩溃的场景。而且 GNOME 内置的恢复功能，使得我可以重启整个会话而不用担心丢失正在运行的作业。</p>\n<h3 id=\"h2_1\">2. 不影响我的使用体验</h3>\n<p>我听过对于 GNOME 3 的一个抱怨是它的桌面组件太大，并且在显示器上占用了太多的空间。但我认为，相比其他的桌面环境，GNOME 3 拥有一个更干净的界面。它的大多数桌面组件都包含在 Activities 的概览中，屏幕顶部只有一个非常窄的面板，让桌面的其余部分用于任何正在进行的工作。GNOME 2.x 和 MATE 的默认布局都有两个面板，因此占用了两倍的空间。虽然可以像 MATE 一样自定义环境来使用单个面板。但 GNOME 3.x 不使用旧的两个面板的布局，为应用程序留出了更多的空间。</p>\n<p>由于 GNOME 的大部分桌面组件都包含在 Activities 概览中，所以它永远不会影响我的使用。如果我想更加专注于某些东西，我可以在使用 GNOME 的终端时按下 F11，使其占满整个屏幕。如果我想再次访问 GNOME 界面，我只需按下 <a href=\"https://help.gnome.org/users/gnome-help/stable/keyboard-key-super.html.en\" target=\"_blank\" rel=\"nofollow\">Super</a> 键。在我尝试过的所有桌面环境中（事实上我已经尝试过所有的桌面环境），GNOME 更能提高我的生产力，并且给我的显示屏留下更多的空间这个特性对我来说真的十分重要。</p>\n<h3>3. 显示器的切换能保持正常工作</h3>\n<p>多年以来，我都是使用一个带有扩展坞的笔记本电脑连接到双显示器，这是使用 Linux 唯一的最令人沮丧的地方。我也数不清丢失作业的次数了，因为我的笔记本电脑使用扩展坞与显示器进行连接时会出现死机的情况，或 Xorg Server 崩溃。我几乎习惯了 Linux 上混乱的扩展坞使用体验，直到切换至 GNOEM 3。</p>\n<p>到目前为止，GNOME 3 是我使用过的唯一一个对扩展坞是完全可靠的桌面环境。当我卸下扩展坞时，GNOME 会切换回笔记本电脑，并将所有在两个显示器上运行的应用程序移至单个的内置显示器上，GNOME 不仅可以在不锁定的情况下处理扩展坞，还可以在锁定前十分智能地将应用程序重新移动至启动的显示器上。对我而言，这是十分完美的 —— 没有死机或崩溃。因为我使用扩展坞，所以 GNOME 似乎是我最好的选择。</p>\n<h3 id=\"h2_3\">4. 大量的扩展</h3>\n<p>有人说 GNOME 3 的默认界面是十分有限的，你不能做太多的工作来进行定制。但是默认的设置已经可以很好地为我服务了，不能说 GNOME 不可以定制。它的界面可以通过扩展进行自定义，允许你按照自己的喜欢的方式调整桌面环境。这些扩展可以显示当前的天气状况，在 NetworkManager 的无线网络列表中添加一个刷新图标，插入新菜单，以及更多的其他事情。可通过 <a href=\"https://extensions.gnome.org/\" target=\"_blank\" rel=\"nofollow\">extensions.gnome.org</a> 获取扩展，也可以通过 <a href=\"https://git.gnome.org/browse/gnome-tweak-tool/\" target=\"_blank\" rel=\"nofollow\">GNOME Tweak</a> 工具来管理他们。</p>\n<p>但扩展既是天使也是魔鬼，因为不同的扩展有不同的程度的稳定性和质量。<a href=\"https://opensource.com/article/17/2/top-gnome-shell-extensions\" target=\"_blank\" rel=\"nofollow\">最好的扩展</a>能帮助你完成一些通常不能完成的事情，而糟糕的扩展可能会拖慢桌面环境的运行速度或导致其崩溃。我的建议是适量地使用扩展（质量比数量重要），因为太多的扩展可能会导致稳定性问题或混论的桌面环境。平均来说，我尽量不会安装超过三个以上的扩展。因为我发现大多数扩展只是稍微增强了使用的体验，并不是必需品。我个人最喜欢的三个扩展是 OpenWeather, TopIcons Plus, 和 Workspace Indicator。虽然 Dash to Dock 可能是最受欢迎的扩展，但我不使用它，因为 GNOME 3 默认的体验已经足够满足我的使用需求。</p>\n<p>虽然扩展可以使得体验更好，但在大多数情况下，我并不是真的需要它们。GNOME 3 的默认布局不仅适合我的需要，而且我安装的任何扩展只是增强了体验，但不是我完成工作所必需的。</p>\n<h3 id=\"h2_4\">5. 动态的工作区</h3>\n<p>动态的工作区(workspaces)是使我离不开 GNOME 3 的功能之一。它的概念十分简单，你可以从单个工作区开始，然后会根据需要自动添加更多的工作区。你可以通过按下 Super 键轻松查看在工作区上运行的所有应用程序。看起来这并没解决什么大的问题，但如果你是那种在将一个又一个的窗口叠加在一起的人，你可以使用此功能轻松查看正在运行的内容，并关闭未使用的应用程序。按住 Ctrl+Alt 键并同时按向上或向下的箭头可以在活动的工作区之间切换。当在工作区上打开应用时，会自动创建一个新的空白工作区以便开始使用。当关闭工作区中的所有应用程序时，它们也将被删除。</p>\n<p>这似乎与我们一直以来管理运行的应用程序的方式有很大的区别，但如果你尝试过之后，你可能会喜欢这种方式。我通常在每个工作区中运行一个应用程序，因为我发现使用 Ctrl+Alt+上/下箭头来进行切换比单击面板中的应用程序要快得多，而且效率更高。如果我需要在工作区中运行多个应用程序，我会将它们贴在显示器的左右边缘。</p>\n<p>关于 GNOME 3 处理工作区的方式的另一件事是，如果有多个显示器连接到计算机，默认情况下只有一个显示器启用了工作区。这意味着当我切换工作区时，只有左侧的显示器在它们之间循环，右侧的显示器则保持静止。这允许我在右边的显示器打开一个终端窗口，当我想检查我的消息时，我可以切换工作区以使用我的电子邮件客户端，而不会错过终端中发生的情况。</p>\n<h3 id=\"h2_5\">6. 自定义主题</h3>\n<p>老实说，GNOME 3 的默认主题不是我用过的桌面环境中最好看的（当然也不是最差的）。它的简洁性很好，但对于像我这种喜欢主题并修饰主题的人，可以自定义视觉效果以适应我的口味是十分重要的。</p>\n<p>幸运的是，在 GNOME 中安装主题十分容易。要安装新的主题，只需下载主题（<a href=\"https://www.opendesktop.org/s/Gnome\" target=\"_blank\" rel=\"nofollow\">gnome-look.org</a> 是一个不错的下载源），并将下载的文件解压到主目录的 <strong>.themes </strong>目录中。通过使用 GNOME Tweak 工具，可以在安装的主题之间进行循环。它允许你更改应用程序的外观以及 GNOME Shell 本身。</p>\n<p>最近还没有太多可用的 GNOME 3 主题，Arc 和 Numix 主题几乎占据了所有的焦点。这些主题当然是很好的，但有更多的选择就更好了。幸运的是，自从 Ubuntu 宣布将 GNOME 切换为默认的桌面环境之后，主题社区似乎正在加班工作，现在出现了更多的主题。我个人最喜欢的主题是 Vimix Dark，你的是什么？</p>\n<p>虽然我通常会尝试其他的桌面环境以与桌面 Linux 的发展同步，但我最后总会回归到 GNOME。GNOME 3.x 可能不适用于每个人，但我建议可以给它一次尝试的机会。GNOME 处理某些问题的方式初次看起来可能很奇怪，但它是一个很好的桌面环境，与其他我使用过的任何图形用户界面相比，它使得我更高效地完成我的工作。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112167\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112167votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112167\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 5 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": 1, "praise_nums": "1", "url_object_id": "85bd8601e0edbec62fafb940f1ad7501", "front_image_url": ["http://wx1.sinaimg.cn/mw690/7cc829d3gy1filbc2mwdfj218g0nywhd.jpg"], "front_image_path": "full/92195357d24493250ceca135476203662d9775e6.jpg", "title": "6 个理由，为什么 GNOME 仍然是最好的 Linux 桌面环境"}
{"create_date": "2017/08/08 ", "url": "http://blog.jobbole.com/112127/", "fav_nums": 7, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/wx879560138\">碎美</a> 翻译，<a href=\"http://www.jobbole.com/members/randomli\">欣仔</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"http://jamesclear.com/value-of-time\">James Clear</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>【导读】：本文介绍了几种估算你每小时值多少钱的方法，方便你判断值不值得花时间做某事，比如：值得为了省 $95 的机票而花 5 小时转机 2 次么？值得花 2 小时与某人吃顿饭？值得花半小时回某封邮件么？</p>\n<p><img id=\"pic\" class=\"\" src=\"http://wx4.sinaimg.cn/large/7cc829d3gy1ficm10dakhj20m80ciq37.jpg\"></p>\n<p>并非所有对时间的利用都是均等的，而且这个简单的道理可以让生活大为不同。明白怎样充分利用自己的时间，始于了解到（准确地说是）你的时间价值多少。本文讲述如何系统计算你时间的价值。</p>\n<p>把时间花在更有利可图的事上的人，能赚更多的钱。把时间投注在他人身上的人，能建立良好的人际关系。把时间花在创建灵活的事业上的人，能享受更多自由。把时间花在具有高影响力的项目上的人，能为社会带来更多贡献。不论你想要更多财富，更多友谊，更多自由，还是更多影响力，问题都会回归到你如何支配自己的时间。</p>\n<p>如果你和我一样，你可能会想要上面提到的东西（友谊，自由，影响力），也许还有其他（健康）。但是，你不可能同时拥有所有东西，所以你需要明白日常生活中如何有效地权衡这些问题。本文告诉你如何计算时间的价值，以及如何利用这些信息来更有效地利用时间。</p>\n<h2>时间的价值：一小时值多少？</h2>\n<p>在动笔写这篇文章的几周前，我正想买一个小的旅行包。搜索了半天，我找到一个我喜欢并且只要 19 美元的包，价格很实惠。问题在于：这包是一个英国公司产的，寄到美国要收 45 美元运费。</p>\n<p>我立即打消了花 45 美元运费拿到一个 19 美元的包的念头，所以我开始搜索零售店的位置。这家公司在纽约市有一间店，而我恰好打算几周后去一趟纽约。我找到了店址，发现假如我旅途中特地去一下这间店，要花一小时。</p>\n<p>那时我脑海中出现了促使我写这篇文章的问题：“我的一小时值 45 美元吗？”</p>\n<p>我应该节省时间，花 45 美元，让他们把包直接寄给我，还是应该省下钱，花一小时自己去店里买？我完全不知道去店里买或者额外花运费，哪一种是对于时间和钱更好的利用。</p>\n<h2>时间 VS 金钱的两难</h2>\n<p>我们或多或少都对自己时间的价值有个内在判断。比如说，如果有人提供你每小时 0.07 美元薪水的工作，你肯定会立刻回绝。但如果有人愿意付你每小时 7000 美元，你会立刻接受这份工作。</p>\n<p>在这个范围的两端，你很容易判断一件事是否值得花费时间去做。但当你向时间-价值比的中间档滑动，某一任务是否值得花费时间就变得不那么明朗。问题就在此：生活的多数时间，我们都处在时间-价值比的灰色区域。</p>\n<p>例如：</p>\n<ul>\n<li>    应当购买直飞航班，节省两小时，还是选择有一次经停的航班，节省 90 美元？</li>\n<li>    要不要花 20 美元请邻居的小孩帮忙除草，以享用周末额外的一小时？</li>\n<li>    这一周，应当服务一个会立刻付你 2000 美元的客户，还是挖掘一个能在明年产生 20000 美元利润的商业构想？</li>\n</ul>\n<p>每一天我们都会做出类似的选择，但大多数人都是依直觉或猜测行事，而不去计算他们时间的实际价值。每个人都有一个每小时（时间）价值，但很少有人能确切地告诉你这个数字是多少。在此之前，我也不例外。</p>\n<h2>如何计算你的时间的实际价值</h2>\n<p>这个时间 vs 金钱的难题促使我询问了各种我能接触的这个话题上的专家。我和企业家、生产力顾问、企业教练甚至是职业扑克玩家都聊过怎样计算时间价值，以及怎样利用这一点来更好地做决策。</p>\n<p>然后，我记录了三个月中，每一小时我都做了什么，并用六种不同的方法计算了一小时的价值。别担心，我已经把这些研究和实验精简成了一个相对简单的过程，接下来就讲。</p>\n<p>本文剩余内容分为两部分。</p>\n<ul>\n<li><strong>第一部分快捷易懂，基本涵盖了大部分人需要的东西。</strong>在 15 分钟内，第一部分能帮助你建立一份合理的评估，你能通过这份对你时间价值的评估做出更明智的决策。我推荐所有人都读一下第一部分。</li>\n<li><strong>第二部分要花费一些时间，但也值得一看。</strong>企业家和管理者会发现第二部分尤其有用。第二部分建立在第一部分的基础上，能帮你评估不同时间用途的期望价值，以便你做出更好的战略决策，获得长期回报。</li>\n</ul>\n<p>在我们开始第一部分之前，我想先分享一个免费的表格，里面有关于本文中所有计算公式的例子。你可以将你的数据填入表格，它会算出你的时间价值。余下的内容中，我会经常提及这个表格。</p>\n<blockquote><p>时间价值表，下载链接：<a href=\"https://docs.google.com/spreadsheets/d/1xJm9BIpuf0Cu4P01YJQ_PNam7fds31KaDXgwxJaJWxc/edit?usp=sharing\">Google Docs</a>、百度网盘：<a href=\"https://pan.baidu.com/s/1i5ta2SP\" target=\"_blank\">https://pan.baidu.com/s/1i5ta2SP</a></p></blockquote>\n<h2><span style=\"color: #ff0000;\">第一部分：实际收入法</span></h2>\n<p>我们先讲讲怎样用实际收入法来计算你的时间价值。这些计算主要基于你实际得到（或实现）的收入，所以叫实际收入法。此法可以帮你优化日常花费的决策（例如上述的例子，花 45 美元网购或开车去店里）。</p>\n<p>首先，你需要两个数字：</p>\n<ul>\n<li>    你花了多少时间赚钱。</li>\n<li>    利用这些时间你赚了多少钱。</li>\n</ul>\n<p>我们来聊聊怎样估算这两项数据，以及怎样快速用这两个数据得出一个对你时间价值的估计。</p>\n<h3>第 1 步：如何追踪你的时间</h3>\n<p>第一步是估算你投资了多少时间在赚钱上，而不是你有多少小时在工作岗位上。举例来说，假如每天你有一小时在路途中，另有八小时在工作，那么实际上你每天花费了九小时在赚钱上。同样，你也应该算上你搞副业或者送孩子去日托中心的时间。我们将用这些数字来全面地了解一年中你花在赚钱上的总时间。</p>\n<p>不止你一个人会觉得估算时间有点困难。大部分人对于自己一天 24 小时做了什么只有一种模糊的意识。如果你不确定你花了多少时间工作，我推荐用一年 2500 小时作为起点。理由：假设你一天花了 10 小时工作、通勤或者做工作相关的事。一周工作五天，那就是每周 50 小时。再假设你每年工作 50 周（两周休假），那就是每年 2500 小时。你可以根据自己的实际情况调整，不过对于大多数全职员工或企业家来说，我觉得 2500 小时是一个基本准确的估计。</p>\n<h3>追踪时间：我是如何做的</h3>\n<p>我是个网络创业者，多数时间我都在电脑上工作。当我开始估算时间时，我安装了一个叫 <a href=\"https://www.rescuetime.com/\">RescueTime</a> 的软件。它能准确记录我在每件事上花费的时间：用了多久看每个网站、用每个软件、浏览社交媒体等等。</p>\n<p>在我完成三个月的收集后，我还整合了从其他应用中得到的数字，以完善我的估算。比如说，我算出了在 <a href=\"https://www.amazon.com/gp/product/B00NB86OYE/ref=as_li_qf_sp_asin_il_tl?ie=UTF8&amp;camp=1789&amp;creative=9325&amp;creativeASIN=B00NB86OYE&amp;linkCode=as2&amp;tag=jamesclear-20&amp;linkId=IEHSPLRV25VARHV7\">Audible</a> 上面听有声书的时间，就得到了我花费在“读书”上的时间。</p>\n<p>利用从 RescueTime 获得的数字，加上几个合理的推算，我得出我每年工作 2742 小时的结论。</p>\n<p>RecueTime 是分类记录事件的，所以我还能分别了解我在写作、阅读、网站设计、市场营销等事上分别花了多少时间。这么细的分类其实不是很必要，不过在本文的第二部分中能派上用场。目前，你只需要对你每年花在赚钱上的总时间有一个合理的估计就好了。</p>\n<h3>第 2 步：如何记录你赚了多少钱</h3>\n<p>第二步你需要知道利用工作时间你赚了多少钱。</p>\n<p>这项非常简单。如果你是个小时工或赚薪水的职员，看看你最新的工资支票，乘上每年获取的支票数即可。如果你今年的薪水变化不大，还可以看看去年退了多少税。你还要加上从副业和自由工作中得到的钱，因为花在这些事情上的时间在第一步中已经包含在内了。</p>\n<p>我们现在计算的是你的税后收入，即扣除税款后得到的钱。对于多数职员来说，税款在工资支票中就已经扣除了，所以你的税后收入就是付给你的钱。如果你是个企业主，那你就需要从总收入中扣掉税款和其他业务支出。</p>\n<h3>追踪收入：我是如何做的</h3>\n<p>我用了一个叫 <a href=\"https://bench.co/?fbuy_ref_code=bnbQH\">Bench Accounting</a> 的服务来记录我生意的收入和开支。Bench 是一个在线的记账服务，可以自动从我的企业账户自动提取数据，然后会计就会将所有东西整理在一个算好税的财务报表中。点击几下，我就能看到在上个月、上个季度或者上一年中我赚了多少钱。</p>\n<p>如果你和我一样是一个小企业主，自由职业者或企业家，我推荐你使用全年的收入来做计算，因为小公司的月收入可能会波动（有时是激烈波动）。查看一段更长时期的收入可以消除这些差异，让你对时间价值有个更实际的估算。</p>\n<h3>第 3 步：计算你的时间价值</h3>\n<p>最后一步，用你的总收入（得自第二步）除以你总共花费的时间（得自第一步）即可。</p>\n<p>举例说明，假设你每年花了 2500 小时来赚钱：</p>\n<ul>\n<li>如果你的收入是 12316 美元/年，你的时间价值 4.93 美元/小时。这是 2014 年全美个人收入的贫困线。</li>\n<li>如果你的收入是 46226 美元/年，你的时间价值 18.49 美元/小时。这是 2014 年全美女性收入的中位数。</li>\n<li>如果你的收入是 62455 美元/年，你的时间价值 24.98 美元/小时。这是 2014 年全美男性收入的中位数。</li>\n<li>如果你的收入是 10 万美元/年，你的时间价值 40 美元/小时。</li>\n<li>如果你的收入是 100 万美元/年，你的时间价值 400 美元/小时。</li>\n</ul>\n<p>当然啦，这些都是假设你每年花费了 2500 小时在工作上。计算结果会随着不同的工作时间而改变。</p>\n<h3>这些数字精确吗？</h3>\n<p>当我第一次做这个计算的时候我很惊讶。我一小时的价值比我想象的低得多。</p>\n<p>想想有多少自由职业者每小时收费40美元，一年赚不到 10 万美元。或者想想多少顾问每小时收费 400 美元，一年却赚不到 100 万美元。怎么会这样呢？答案是，他们只是在部分工作时间获得 40 或 400 美元一小时的薪酬，而非所有的时间。当我们用他们的总收入除以总工作时间时，每小时的价值比他们每小时向顾客收的费用低得多。</p>\n<p>此外，虽然我们知道自己每小时收多少佣金，但我们很少会计算除了工作时间外还有多少时间也是花费在赚钱上。搞清楚到底多少时间投资在赚钱上，我们就对自己时间的实际价值有一个更清楚的认识——通常这个数字比你每小时收的佣金低得多。</p>\n<p>呐，如果你和我一样，你可能会想核实一下计算的准确度。有几种快速检查你计算的小时价值是否准确的方法。我们现在来看一下。</p>\n<h3>支票和余额</h3>\n<p>我们刚刚用的计算方法是税后实得法，因为它是根据你的税后收入算的。还有另外两种实际收入方法，可以用来和税后实得法对照。下面我会简单地介绍一下这两种方法，不过最简单的学习方法是参照时间价值表的步骤3.</p>\n<h3>市场价格法</h3>\n<p>市场价格法是第一种检查的方法。这个方法用的是一个估价，即假设你接受了另一个公司的一个你能胜任的职位，所预期能挣到的钱。举例来说，我花很多时间在写作上，所以我可以胜任一个“内容创造者”的职位。我还花时间来扩展业务，所以我也可能胜任一个业务拓展的职位。我查了一下我可能胜任的每个职位的薪水，按照我在每种工作上投入的时间进行划分，就得到了对于我时间价值的另一种估算。你可以把这种方法想成在就业市场上你的时间的价值。</p>\n<h3>基于成本的方法</h3>\n<p>基于成本的方法是另一种核实方法。这个方法用的是一个估价，即你会付多少钱来让另一个人做你的工作。换句话说，想象你是老板，需要雇人代替你工作。我先是把我的工作分成了具体的任务（写作，市场营销等等），然后估算了花费在每项任务上的时间。然后，我代入了我会付别人全职做这项工作的薪水。之后，我计算了所有任务放在一起的加权平均数，得出了我愿意支付给别人做我每天做的工作的价格。最后，我用这个价格除以总的工作小时数。</p>\n<p>我用这三种方法算出了三个数值，得到了我的时间价值的平均值。我料到我可能会用一种方法得到高一些的结果，而用另一种得到低一些的结果，但是当我们用三种方法来取平均值，得到的时间价值可能更精确一些。重申一次，在时间价值表中，你可以看到每一种方法。</p>\n<h3>怎样利用这项信息</h3>\n<p>我们已经完成了第一部分。有了上面的计算结果，我们对你的时间价值有了一个快捷准确的估计。现在，我们可以缩小不确定的范围，做出更好的决策。</p>\n<p>例如：</p>\n<ul>\n<li>    如果你的时间值 25 美元一小时，那就不该排半小时队来领取 10 美元的礼品卡。</li>\n<li>    如果你的时间值 60 美元一小时，那你就应该花 49 美元网购而不是花一小时去店里。</li>\n<li>    如果你的时间值 80 美元一小时，那你就应该买直飞航班，而不是花两小时等待转机，只为节省 150 美元。</li>\n</ul>\n<p>当你精确地知道你的一小时到底值多少钱时，你每天都可以做出更好的决策。</p>\n<p>至此，我们知道你的时间<u>至少</u>值你刚刚算出来的那么多，因为实际收入法只能计算你已经获得的收入。准备好来看看你的时间是否值更多了吗？我们来看第二部分。</p>\n<h2><span style=\"color: #ff0000;\">第二部分：期望值法</span></h2>\n<p>现在来看第二种方法：期望值法。这种计算法基于你对于一小时的工作在长远来看能创造的价值的期望。</p>\n<p>期望值法可以帮助你在重大的、战略性的决策中决定要把时间花在哪里。你的公司今年应该专注于哪个项目？哪些事务没什么效率，应当从你的日常工作中取消？你应该开创一项十年后会获得巨大成功，但不能即刻为你带来收入的事业，还是找一份有可靠收入的稳定工作？管理这些权衡的最佳方法是什么？</p>\n<p>让我们从最简单的期望值法开始吧。</p>\n<h3>增长倍数法</h3>\n<p>有一种简单的方法，可以解释你的决策带来的期望收入。将你前几年的净收入乘以一个合理的增长倍数。</p>\n<p>关键当然在于选择一个合适的增长倍数。举个例子，我的生意从去年到今年翻了一番，所以我选择 2× 作为我的增长倍数。用这种方法实际上相当于说，“你今年的行动会持续推动下一年的增长，所以你的时间的真实价值其实是高于你现在的实际收入。”</p>\n<p>增长倍数法能让你简单估算今天的工作在长远看来能获得多少回报，但它并不能告诉你如何更高效地利用你的时间。要获知这一点，我们需要使用完整的期望值法。</p>\n<h3>期望值法</h3>\n<p>期望值法是最终也是最难的计算时间价值的方法。我会努力用最简单的话来解释，但我想最简单的学习方法就是来看时间价值表中的步骤4。</p>\n<p>基本逻辑如下：</p>\n<p>首先按不同工作来分类时间。你越能具体地说出每份时间用来做了什么，你就越能分辨哪些工作驱动了最多利益。</p>\n<p>选择一个可以将每项工作和收入连接在一起的测量单位。对于大部分企业主来说，这意味着你需要知道你的生意中一个“引子”的价值。就我自己来说，我用的是邮件订阅数，因为我知道平均每个新的订阅者能带来的收益，并且我大部分的工作内容都可以关联到获取更多地邮件订阅上。</p>\n<ul>\n<li>估算每项工作的价值。假设我花一小时工作，获得 50 个新的邮件订阅。如果每个订阅者的总价值是 1 美元，那么这项工作的期望价值就是 50 美元一小时。重复估算你的每一项工作的价值。</li>\n<li>把所有期望值加在一起，获得总的期望值。</li>\n<li>如有需要，加上其他变量。期望值法可以像你希望的一样复杂。你可以处理一些因素，像是某项工作可以带给你的生活多少幸福感，或者现在一小时的工作有多少可能性在之后的几年持续给你回报。</li>\n</ul>\n<p>期望值法是高度个性化的，你可能需要多斟酌一番这些公式，来让它们满足你的需求。当然啦，最简单的还是从数字层面看这个方法是怎么用的。你可以在<a href=\"https://docs.google.com/spreadsheets/d/1xJm9BIpuf0Cu4P01YJQ_PNam7fds31KaDXgwxJaJWxc/edit#gid=0\">时间-价值表</a>的步骤4中看到所有加入计算的因子。</p>\n<h2>补充说明</h2>\n<p>其实这些计算的幕后还有很多其他的想法。如下是另外一些我在思考我的时间价值时一直惦记的因素。</p>\n<h3>误入歧途的成功</h3>\n<p>不要把时间浪费于在错误的事情上取得成功。简单地了解你时间的价值是有帮助的，但你仍需明白你想要怎样的生活，以获取最精确的对于时间价值的概念。太多人追逐金钱、权利或认同，因为他们身边的每个人都一样。倘若这不是你真正想要的呢？没错，你可以找到增加时间价值的方法，但如果你宁愿有更多空闲时间而非钞票呢？这就是为什么弄明白你的<a href=\"http://jamesclear.com/core-values\">核心价值观</a>，做<a href=\"http://jamesclear.com/integrity\">诚实报告</a>，弄清楚什么对你来说最重要，都是有用的。</p>\n<h3>权衡和机会加成</h3>\n<p>比尔·盖茨多次被被称为世界上最富有的人。在 2015 年，他以 727 亿美元净资产再次排在首位。根据一个分析师的推算，“有 720 亿美元，6%的回报率大概能让盖茨活着的每秒赚 114.15 美元。一张 100 美元的纸币掉在地上，都不值得他花时间捡起来。”</p>\n<p>虽然有趣又值得引用，但是这个掉在地上的 100 美元钞票不值得盖茨弯腰捡起来的想法是错的。为什么？因为捡起这 100 美元不妨碍盖茨在同时赚 114.16 美元。不管他捡不捡这 100 美元，他总归在赚钱。实际上，捡起这 100 美元，在那一秒他就赚了 214.16 美元，而不是常规的 114.16 美元。</p>\n<p>捡起 100 美元并不需要比尔·盖茨付出停止赚钱的代价。这是在他已获得的收入之上的机会加成。机会加成，指的是那种如果你把所有时间花在上面会使你减少时间价值，但如果你在有机会的时候才去做，却会增加时间价值的选择。举例来说，试想那种有时会做演讲的作家。如果他们把所有时间都花在演讲上，会减少他们的时间价值，因为这样一来他们就没法写新书了，这会导致他们逐渐过气，演讲的出场费也会降低。但是，偶尔做一些演讲——比如一月一两次——许多作家就可以在净收入中增加几千美元，并仍能保持足够的时间来写新书。</p>\n<h3>不能商量的空闲时间</h3>\n<p>计算你的时间价值有一个危险之处，即你可能会说服自己多一个“创造价值”的小时，就能增加总的时间价值了。引自<a href=\"https://www.wsj.com/articles/do-you-know-what-your-time-is-really-worth-1437500727\">华尔街日报</a>的一篇文章，“一些研究人员表示，给时间标注经济价值，有损害人们生活质量的风险。那些被怂恿而只专注于时间的金钱价值的人，倾向于变得不耐烦而且压力大，Jeffery Pfeffer，一个斯坦福商学院组织行为学教授说到，这些人工作太多，花太少的时间做一些奖励自己的事，例如参加志愿活动或享受音乐。”</p>\n<p>对我来说，我决定记录我的空闲时间，来看看相较于工作我有多少闲暇，但我不会给空闲时间标注金钱价值。相反，我决定我的空闲时间是不能商量的。空闲时我可以放松减压，让我可以在工作时间保持高效。你应当重视你的空闲时间、停工时间、休闲活动，因为它们能为你的生活提供全面的身心健康。</p>\n<h3>你应当再工作一小时吗?</h3>\n<p>想不想知道你是否应该再工作一小时？如下是我从 <a href=\"http://sebastianmarshall.com/\">Sebastian Marshall</a> 那里学来的一个很好的经验法则：想想你一天中的每个小时。早上 9 点到 10 点，10 点到 11 点，以此类推。平均下来，那一个小时中，你的净收益是正的还是负的？例如如果你工作到比较晚，晚上 9 点到 10 点那一小时的成果平均下来是正向的吗？还是说那一小时的工作出的错比完成的内容多？那一小时是拖延还是高产？如果这一小时总的来说是负产出，那你就该停止工作了。努力做一个项目是好的，但如果接下来下一小时的工作会让你筋疲力尽，而非创造价值，那么在此之前就该停下来。</p>\n<h3>幸福和意义</h3>\n<p>如果你想的话，你可以将一项工作带给你的幸福或意义之类的因素也加入考虑。不过，我没有把这些变量放入我的计算公式中，而是对于每项工作，将这些因素进行了基于实现程度的1到10的排序。虽然这些排序没有放入任何公式中，但是当几项工作的期望值很接近时，这些排序就可以作为决胜属性。</p>\n<h3>下一步去哪儿</h3>\n<p>计算时间的真实价值实际上比听上去难得多，也比看上去有用得多。</p>\n<p>你的时间价值可能每年都有变化，甚至变化得更快。本文中我列出的这些方法都很灵活，可以修改。如果你在某件事上花费了更多时间，或者有了更多的收入，仅需将新的数字代入表格中，就能得到新的结果。</p>\n<p>我希望本文分享的策略，随着时间的推移，还会一直对你有所帮助。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112127\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112127votetotal\">3</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112127\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 7 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 2 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/wx879560138\">碎美</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/wx879560138\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2017/05/14c9242bd4336d2c12ac8ba7e56bd6c8.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            University at Buffalo IE Human Factors PhD program 在读        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/wx879560138\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/wx879560138/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/wx879560138/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 12</a> · <a title=\"QQ：274121119\" target=\"_blank\" href=\"#\"><i class=\"fa fa-qq\"></i></a> <a title=\"Facebook主页\" target=\"_blank\" href=\"https://www.facebook.com/profile.php?id=100009659581170&amp;ref=bookmarks\"><i class=\"fa fa-facebook\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": 2, "praise_nums": "3", "url_object_id": "594e76e00f6ec905e2cdae3003e50c75", "front_image_url": ["http://wx4.sinaimg.cn/large/7cc829d3gy1ficm10dakhj20m80ciq37.jpg"], "front_image_path": "full/5a100e2d6c9b049065e2a317a0a393644a168302.jpg", "title": "你的时间值多少钱？"}
{"create_date": "2017/08/10 ", "url": "http://blog.jobbole.com/112139/", "fav_nums": 2, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文作者： <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/Yonah\">肖汉松</a> 。未经作者许可，禁止转载！<br>欢迎加入伯乐在线 <a href=\"http://blog.jobbole.com/99322\" target=\"_blank\">专栏作者</a>。</div><div>\n<h2 id=\"u524D_u8A00\">前言</h2>\n<p>最近在看《代码大全》，可以说是一本软件开发的百科全书，特别厚，但是干货也很多。平时写代码，代码规范是一个最低的要求（很多老代码连最低要求都达不到），为什么要这样规定代码要这么写，而不是那么写？这是一个值得深究的问题。而不是说我照着代码规范写代码就算完了，高质量的代码是一个专业工程师的追求。要知其然知其所以然，最近写发票解析的代码，因为涉及带解析PDF的算法，复杂度比较高，所以花了很多时间在重构，学以致用的时候积累了一些心得。</p>\n<h2 id=\"u4FE1_u606F_u9690_u85CF_u539F_u5219\">信息隐藏原则</h2>\n<p>信息隐藏是面向对象设计的一个原则，是对封装和模块化的一个更高维度的概括。从Java的整个访问限制设计就体现了信息隐藏的原则，各种访问修饰符：<code>public,protect,private</code>，在类设计的时候，我们就要决定什么暴露给外部，什么隐藏起来。</p>\n<p>举一个例子下面的代码表示一个有自增ID的<code>Person</code>类。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f288d06903f736647461\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\npublic class Person {\r\n    int id;\r\n    private static int G_MAX_ID = 0;\r\n    public Person() {\r\n      this.id = ++G_MAX_ID;\r\n    }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f288d06903f736647461-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288d06903f736647461-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f288d06903f736647461-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288d06903f736647461-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f288d06903f736647461-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288d06903f736647461-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f288d06903f736647461-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f288d06903f736647461-1\"><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Person</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288d06903f736647461-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">id</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f288d06903f736647461-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">G_MAX_ID</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288d06903f736647461-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Person</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f288d06903f736647461-5\"><span class=\"crayon-h\">      </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">id</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">++</span><span class=\"crayon-v\">G_MAX_ID</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288d06903f736647461-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-59f288d06903f736647461-7\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p><span style=\"font-weight: normal;\">上面的类设计有什么问题呢？它违反了信息隐藏的原则，直接将ID分配的方式暴露了，这会给后面的维护带来很多问题：当你想给id的范围做出限制的时候怎么办？当你在所有代码中使用</span><code style=\"font-style: inherit;\">++G_MAX_ID</code><span style=\"font-weight: normal;\">分配ID时突然需要修改ID分配的算法怎么办？是不是需要去改所有</span><code style=\"font-style: inherit;\">++G_MAX_ID</code><span style=\"font-weight: normal;\">出现的地方？更好的设计是将ID的分配算法隐藏起来。</span></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f288d06904c981824189\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\npublic class Person {\r\n    int id;\r\n    private static int G_MAX_ID = 0;\r\n    public Person() {\r\n      this.id = NewId();\r\n    }\r\n    private int NewId() {\r\n      return ++G_MAX_ID;\r\n    }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f288d06904c981824189-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288d06904c981824189-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f288d06904c981824189-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288d06904c981824189-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f288d06904c981824189-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288d06904c981824189-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f288d06904c981824189-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288d06904c981824189-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f288d06904c981824189-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288d06904c981824189-10\">10</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f288d06904c981824189-1\"><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Person</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288d06904c981824189-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">id</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f288d06904c981824189-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">G_MAX_ID</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288d06904c981824189-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Person</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f288d06904c981824189-5\"><span class=\"crayon-h\">      </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">id</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">NewId</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288d06904c981824189-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-59f288d06904c981824189-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">NewId</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288d06904c981824189-8\"><span class=\"crayon-h\">      </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">++</span><span class=\"crayon-v\">G_MAX_ID</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f288d06904c981824189-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288d06904c981824189-10\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0018 seconds] -->\r\n<p><span style=\"font-weight: normal;\">咋一看只是将</span><code style=\"font-style: inherit;\">++G_MAX_ID</code><span style=\"font-weight: normal;\">写到一个方法里面而已，但是它隐藏了ID分配的算法，让调用者不需要关心里面的实现，同时控制了变化，不管ID分配算法怎么变，都不会影响其他的代码。调用者了解的信息越多，受到的影响就越大，信息隐藏可以降低复杂度，控制变化的范围。</span></p>\n<p>上面的例子只是信息隐藏的一个简单应用，下面我们来举几个其他的应用例子：</p>\n<ul>\n<li>为什么不推荐使用魔法值（即未经定义的常量）？：这个明显违反了信息隐藏的原则，当你将字面量直接写在代码里面时，就将信息直接暴露了，后面需要修改的时候，一旦少改了某个地方的字面量，bug就出现了。</li>\n<li>循环依赖（即A调用B，B调用A的情况）：类或方法之间的循环依赖会破坏信息隐藏，一个很直接的影响就是在测试的时候，A，B都需要同时准备好才能进行测试，而无法mock任意一方。</li>\n<li>使用全局变量：这个就不用说了，所有人都可以访问你的时候信息就暴露无疑了，全局变量能不用就不用。</li>\n<li>考虑性能损失：有时候我们为了一些性能上的考虑就破坏信息隐藏原则，将一些变量全局化，这样性能提高得不多，维护成本却上升不少，完全是得不偿失。</li>\n</ul>\n<p>最后总结一下信息隐藏的好处：</p>\n<ul>\n<li>隐藏信息即隐藏了复杂度，降低了编程的负担。</li>\n<li>隐藏信息即隐藏了底层变化，以便于在局部控制变化。</li>\n</ul>\n<h2 id=\"u4E00_u4E9B_u4E0D_u592A_u5E38_u89C1_u7684_u7F16_u7A0B_u6280_u5DE7\">一些不太常见的编程技巧</h2>\n<h3 id=\"u51FD_u6570_28function_29_u4E0E_u8FC7_u7A0B_28procedure_29_u7684_u9009_u62E9\">函数(function)与过程(procedure)的选择</h3>\n<p>我们先来看看函数与过程区别：</p>\n<ul>\n<li>Function：有返回值的方法</li>\n<li>Procedure：没有返回值的方法</li>\n</ul>\n<p>平时我们编程其实没有太区别函数与过程，什么时候用函数，什么时候用过程其实没有过多的考虑，感觉都可以用。一个选择的规则就是<strong>当你的方法的目的是想返回跟你方法名称相符的值的时候用函数，否则用过程</strong></p>\n<p>举个例子，我看过很多<code>XXProcessor</code>接口里面的方法都是<code>XX process()</code>，严格来讲，这样的命名是不符合上面的规则的，<code>process</code>是一个没有含义的命名，但是却有返回值，如果没有返回值那它的命名才是合理的。</p>\n<p>当然了，上面的规则仅供参考，世事无绝对，具体情况具体分析，当你不清楚用函数还是用过程的时候，可以参考这个规则。</p>\n<h3 id=\"u4F7F_u7528boolean_u503C_u6765_u7ED9_u7A0B_u5E8F_u505A_u6CE8_u91CA\">使用boolean值来给程序做注释</h3>\n<p>相信大家看到一个if语句有很多条件的时候都会特别头痛，因为很难理解。例如下面的例子：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f288d069056723154585\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nif ( ( elementIndex &lt; 0 ) || ( MAX_ELEMENTS &lt; elementIndex ) || elementIndex == lastElementIndex) {\r\n  do....\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f288d069056723154585-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288d069056723154585-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f288d069056723154585-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f288d069056723154585-1\"><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">elementIndex</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">||</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">MAX_ELEMENTS</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">elementIndex</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">||</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">elementIndex</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">lastElementIndex</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288d069056723154585-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-st\">do</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-59f288d069056723154585-3\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p><span style=\"font-weight: normal;\">但如果换成下面的写法，用boolean值的名字来给if语句注释，看起来就很好理解了。</span></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f288d06905b578726369\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfinished = ( ( elementIndex &lt; 0 ) || ( MAX_ELEMENTS &lt; elementIndex ) );\r\nrepeatedEntry = ( elementIndex == lastElementIndex );\r\nif ( finished || repeatedEntry ) {\r\n...\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f288d06905b578726369-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288d06905b578726369-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f288d06905b578726369-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f288d06905b578726369-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f288d06905b578726369-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f288d06905b578726369-1\"><span class=\"crayon-v\">finished</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">elementIndex</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">||</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">MAX_ELEMENTS</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">elementIndex</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288d06905b578726369-2\"><span class=\"crayon-v\">repeatedEntry</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">elementIndex</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">lastElementIndex</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59f288d06905b578726369-3\"><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">finished</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">||</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">repeatedEntry</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f288d06905b578726369-4\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-59f288d06905b578726369-5\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0018 seconds] -->\r\n<p><span style=\"font-family: 'Microsoft YaHei', 宋体, 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 24px; font-style: normal; font-weight: normal;\">总结</span></p>\n<p>怎么写高质量的代码是一个很大的话题，这里只是抛砖引玉，其实面向对象设计的很多原则都能够给我们写代码的时候提供指导，写代码的时候要时刻记得学以致用，而不是敷衍了事，专业的软件工程师必然要能写得一手好代码。</p>\n</div>\n\r\n        \r\n            <blockquote class=\"rewards\">\n        <p><strong>打赏支持我写出更多好文章，谢谢！</strong></p>\n        <a href=\"#rewardbox\" id=\"rewards-button\" class=\"fancybox\"><span class=\"btn-bluet-blue href-style\"><i class=\"fa fa-jpy\"></i> 打赏作者</span></a>\n    </blockquote>\n\n    <div id=\"rewardbox\">\n        <h4>打赏支持我写出更多好文章，谢谢！</h4>\n                <p>任选一种支付方式</p>\n                <p>\n                        <img src=\"http://jbcdn2.b0.upaiyun.com/2016/05/5bf123eeb2d2e5d53b487415f6c0555c.png\">\n            \n                            <img src=\"http://jbcdn2.b0.upaiyun.com/2016/05/c7fcb7a46ab889ed5518728242187ab5.jpg\">\n                    </p>\n    </div>\n\n    \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112139\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112139votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112139\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/Yonah\">肖汉松</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/Yonah\">\r\n\t\t\t<img src=\"http://www.jobbole.com/wp-content/uploads/2015/10/b312ba4ffd5245fa2a1ab819ec0d0347.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            热爱阅读，喜欢挑战。热衷尝试新的技术，关注技术背后的原理。关注领域：Java 服务端开发，网络编程。关注语言：Java, C, Python。        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/Yonah\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/yonah/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/Yonah/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 39</a> · <a title=\"我的网站\" target=\"_blank\" href=\"http://blog.xiaohansong.com\"><i class=\"fa fa-link\"></i></a> <a title=\"微博主页\" target=\"_blank\" href=\"http://weibo.com/xiaohansong\"><i class=\"fa fa-weibo\"></i></a> <a title=\"GitHub主页\" target=\"_blank\" href=\"https://github.com/x-hansong\"><i class=\"fa fa-github\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": "  评论", "praise_nums": "1", "url_object_id": "2b39c6050457697bdcf56fe2481a09cf", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2012/06/real-programmers-code-in-binary.jpg"], "front_image_path": "full/e4f0172387cbbdb2d04cefa86ba2081b49678dc1.jpg", "title": "编写高质量代码的思考"}
{"create_date": "2017/08/16 ", "url": "http://blog.jobbole.com/112206/", "fav_nums": 5, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://www.jianshu.com/p/c4d0837e9439\">ZPPenny</a>   </div><p>在计算机科学中，树是一种很重要的数据结构，比如我们最为熟悉的二叉查找树（Binary Search Tree），红黑树（Red-Black Tree）等，通过引入树这种数据结构，我们可以很快地缩小问题规模，实现高效的查找。</p>\n<p>在监督学习中，面对样本中复杂多样的特征，选取什么样的策略可以实现较高的学习效率和较好的分类效果一直是科学家们探索的目标。那么，树这种结构到底可以如何用于机器学习中呢？我们先从一个游戏开始。</p>\n<p>我们应该都玩过或者听过这么一种游戏：游戏中，出题者写下一个明星的名字，其他人需要猜出这个人是谁。当然，如果游戏规则仅此而已的话，几乎是无法猜出来的，因为问题的规模太大了。为了降低游戏的难度，答题者可以向出题者问问题，而出题者必须准确回答是或者否，答题者依据回答提出下一个问题，如果能够在指定次数内确定谜底，即为胜出。加入了问答规则之后，我们是否有可能猜出谜底呢？我们先实验一下，现在我已经写下了一个影视明星的名字，而你和我的问答记录如下：</p>\n<ol>\n<li>是男的吗？Y</li>\n<li>是亚洲人吗？Y</li>\n<li>是中国人吗？N</li>\n<li>是印度人吗？Y</li>\n<li> ……</li>\n</ol>\n<p>虽然只有短短四个问题，但是我们已经把答案的范围大大缩小了，那么接下，第5个问题你应该如何问呢？我相信你应该基本可以锁定答案了，因为我看过的印度电影就那么几部。我们将上面的信息结构化如下图所示：</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/08/d5e765a446f9f0cf17c21b596186d3b9.png\"><img class=\"aligncenter wp-image-112208 size-full\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/d5e765a446f9f0cf17c21b596186d3b9.png\" alt=\"2119554-bfc7f93e51ee6786\" width=\"521\" height=\"257\"></a></p>\n<p>在上面的游戏中，我们针对性的提出问题，每一个问题都可以将我们的答案范围缩小，在提问中和回答者有相同知识背景的前提下，得出答案的难度比我们想象的要小很多。</p>\n<p>回到我们最初的问题中，如何将树结构用于机器学习中？结合上面的图，我们可以看出，在每一个节点，依据问题答案，可以将答案划分为左右两个分支，左分支代表的是Yes，右分支代表的是No，虽然为了简化，我们只画出了其中的一条路径，但是也可以明显看出这是一个树形结构，这便是决策树的原型。</p>\n<h1>1. 决策树算法简介</h1>\n<p>我们面对的样本通常具有很多个特征，正所谓对事物的判断不能只从一个角度，那如何结合不同的特征呢？决策树算法的思想是，先从一个特征入手，就如同我们上面的游戏中一样，既然无法直接分类，那就先根据一个特征进行分类，虽然分类结果达不到理想效果，但是通过这次分类，我们的问题规模变小了，同时分类后的子集相比原来的样本集更加易于分类了。然后针对上一次分类后的样本子集，重复这个过程。在理想的情况下，经过多层的决策分类，我们将得到完全纯净的子集，也就是每一个子集中的样本都属于同一个分类。<a href=\"http://jbcdn2.b0.upaiyun.com/2017/08/4e67fca8490cef73a42855761c896291.png\"><img class=\"aligncenter wp-image-112209 size-full\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/4e67fca8490cef73a42855761c896291.png\" alt=\"2119554-bfc7f93e51ee6786\" width=\"395\" height=\"376\"></a>比如上图中，平面坐标中的六个点，我们无法通过其x坐标或者y坐标直接就将两类点分开。采用决策树算法思想：我们先依据y坐标将六个点划分为两个子类（如水平线所示），水平线上面的两个点是同一个分类，但是水平线之下的四个点是不纯净的。但是没关系，我们对这四个点进行再次分类，这次我们以x左边分类（见图中的竖线），通过两层分类，我们实现了对样本点的完全分类。这样，我们的决策树的伪代码实现如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33c86a042b073457961\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nif y &gt; a:\r\n    output dot\r\nelse:\r\n    if x &lt; b:\r\n          output cross\r\n    else:\r\n          output dot</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33c86a042b073457961-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c86a042b073457961-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f33c86a042b073457961-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c86a042b073457961-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f33c86a042b073457961-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c86a042b073457961-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f33c86a042b073457961-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33c86a042b073457961-1\"><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c86a042b073457961-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">output </span><span class=\"crayon-e\">dot</span></div><div class=\"crayon-line\" id=\"crayon-59f33c86a042b073457961-3\"><span class=\"crayon-st\">else</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c86a042b073457961-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-59f33c86a042b073457961-5\"><span class=\"crayon-h\">          </span><span class=\"crayon-e\">output </span><span class=\"crayon-e\">cross</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c86a042b073457961-6\"><span class=\"crayon-e\">    </span><span class=\"crayon-st\">else</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-59f33c86a042b073457961-7\"><span class=\"crayon-h\">          </span><span class=\"crayon-e\">output </span><span class=\"crayon-v\">dot</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p>由这个分类的过程形成一个树形的判决模型，树的每一个非叶子节点都是一个特征分割点，叶子节点是最终的决策分类。如下图所示：<a href=\"http://jbcdn2.b0.upaiyun.com/2017/08/7c7879e3286895e28cdd65ffa0da4740.png\"><img class=\"aligncenter wp-image-112210 size-full\" src=\"http://jbcdn2.b0.upaiyun.com/2017/08/7c7879e3286895e28cdd65ffa0da4740.png\" alt=\"2119554-bfc7f93e51ee6786\" width=\"423\" height=\"298\"></a>将新样本输入决策树进行判决时，就是将样本在决策树上自顶向下，依据决策树的节点规则进行遍历，最终落入的叶子节点就是该样本所属的分类。</p>\n<h1>2 决策树算法流程</h1>\n<p>上面我们介绍决策树算法的思想，可以简单归纳为如下两点：</p>\n<ol>\n<li>每次选择其中一个特征对样本集进行分类</li>\n<li>对分类后的子集递归进行步骤1</li>\n</ol>\n<p>看起来是不是也太简单了呢？实际上每一个步骤我们还有很多考虑的。在第一个步骤中，我们需要考虑的一个最重要的策略是，选取什么样的特征可以实现最好的分类效果，而所谓的分类效果好坏，必然也需要一个评价的指标。在上文中，我们都用纯净来说明分类效果好，那何为纯净呢？直观来说就是集合中样本所属类别比较集中，最理想的是样本都属于同一个分类。样本集的纯度可以用<a href=\"https://en.wikipedia.org/wiki/Entropy_(information_theory)\" target=\"_blank\">熵</a>来进行衡量。</p>\n<p>在信息论中，熵代表了一个系统的混乱程度，熵越大，说明我们的数据集纯度越低，当我们的数据集都是同一个类别的时候，熵为0，熵的计算公式如下：</p>\n<p><a href=\"https://wikimedia.org/api/rest_v1/media/math/render/svg/9017e7f5171f1770f8bd702487f297b77df8a907\"><img class=\"aligncenter\" src=\"https://wikimedia.org/api/rest_v1/media/math/render/svg/9017e7f5171f1770f8bd702487f297b77df8a907\" width=\"390\" height=\"56\"></a></p>\n<p>其中，P(xi)表示概率，b在此处取2。比如抛硬币的时候，正面的概率就是1/2，反面的概率也是1/2，那么这个过程的熵为：<a href=\"https://wikimedia.org/api/rest_v1/media/math/render/svg/0d5eab2ab8165e547d69a5fb49db1c18cb1518ef\"><img class=\"aligncenter\" src=\"https://wikimedia.org/api/rest_v1/media/math/render/svg/0d5eab2ab8165e547d69a5fb49db1c18cb1518ef\" width=\"649\" height=\"59\"></a>可见，由于抛硬币是一个完全随机事件，其结果正面和反面是等概率的，所以具有很高的熵。假如我们观察的是硬币最终飞行的方向，那么硬币最后往下落的概率是1，往天上飞的概率是0，带入上面的公式中，可以得到这个过程的熵为0，所以，熵越小，结果的可预测性就越强。在决策树的生成过程中，我们的目标就是要划分后的子集中其熵最小，这样后续的的迭代中，就更容易对其进行分类。</p>\n<p>既然是递归过程，那么就需要制定递归的停止规则。在两种情况下我们停止进一步对子集进行划分，其一是划分已经达到可以理想效果了，另外一种就是进一步划分收效甚微，不值得再继续了。用专业术语总结终止条件有以下几个：</p>\n<ol>\n<li>子集的熵达到阈值</li>\n<li>子集规模够小</li>\n<li>进一步划分的增益小于阈值</li>\n</ol>\n<p style=\"text-align: left\">其中，条件3中的增益代表的是一次划分对数据纯度的提升效果，也就是划分以后，熵减少越多，说明增益越大，那么这次划分也就越有价值，增益的计算公式如下：<a href=\"//upload-images.jianshu.io/upload_images/2119554-ed959b962943ebaf.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\"><img class=\"aligncenter\" src=\"//upload-images.jianshu.io/upload_images/2119554-ed959b962943ebaf.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\" alt=\"Gain\" width=\"316\" height=\"60\"></a></p>\n<p style=\"text-align: center\">Gain</p>\n<p>上述公式可以理解为：计算这次划分之后两个子集的熵之和相对划分之前的熵减少了多少，需要注意的是，计算子集的熵之和需要乘上各个子集的权重，权重的计算方法是子集的规模占分割前父集的比重，比如划分前熵为e，划分为子集A和B，大小分别为m和n，熵分别为e1和e2，那么增益就是<strong><span style=\"color: #ff0000\"><code>e - m/(m + n) * e1 - n/(m + n) * e2</code>。</span></strong></p>\n<h1>3. 决策树算法实现</h1>\n<p>有了上述概念，我们就可以开始开始决策树的训练了，训练过程分为：</p>\n<ol>\n<li>选取特征，分割样本集</li>\n<li>计算增益，如果增益够大，将分割后的样本集作为决策树的子节点，否则停止分割</li>\n<li>递归执行上两步</li>\n</ol>\n<p>上述步骤是依照ID3的算法思想（依据信息增益进行特征选取和分裂），除此之外还有C4.5以及CART等决策树算法。</p>\n<p>算法框架如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33c86a0437117073970\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nclass DecisionTree(object):\r\n    def fit(self, X, y):\r\n        # 依据输入样本生成决策树\r\n        self.root = self._build_tree(X, y)\r\n\r\n    def _build_tree(self, X, y, current_depth=0):\r\n        #1. 选取最佳分割特征，生成左右节点\r\n        #2. 针对左右节点递归生成子树\r\n      \r\n    def predict_value(self, x, tree=None):\r\n        # 将输入样本传入决策树中，自顶向下进行判定\r\n        # 到达叶子节点即为预测值</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33c86a0437117073970-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c86a0437117073970-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f33c86a0437117073970-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c86a0437117073970-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f33c86a0437117073970-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c86a0437117073970-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f33c86a0437117073970-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c86a0437117073970-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f33c86a0437117073970-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c86a0437117073970-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f33c86a0437117073970-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c86a0437117073970-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33c86a0437117073970-1\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">DecisionTree</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">object</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c86a0437117073970-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">def </span><span class=\"crayon-e\">fit</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">X</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-59f33c86a0437117073970-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-p\"># 依据输入样本生成决策树</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c86a0437117073970-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">root</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">_build_tree</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">X</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f33c86a0437117073970-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c86a0437117073970-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">def </span><span class=\"crayon-e\">_build_tree</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">X</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">current_depth</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-59f33c86a0437117073970-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-p\">#1. 选取最佳分割特征，生成左右节点</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c86a0437117073970-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-p\">#2. 针对左右节点递归生成子树</span></div><div class=\"crayon-line\" id=\"crayon-59f33c86a0437117073970-9\"><span class=\"crayon-h\">      </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c86a0437117073970-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">def </span><span class=\"crayon-e\">predict_value</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tree</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">None</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-59f33c86a0437117073970-11\"><span class=\"crayon-h\">        </span><span class=\"crayon-p\"># 将输入样本传入决策树中，自顶向下进行判定</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c86a0437117073970-12\"><span class=\"crayon-h\">        </span><span class=\"crayon-p\"># 到达叶子节点即为预测值</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0018 seconds] -->\r\n<p>在上述代码中，实现决策树的关键是递归构造子树的过程，为了实现这个过程，我们需要做好三件事：分别是节点的定义，最佳分割特征的选择，递归生成子树。</p>\n<h2>3.1 节点定义</h2>\n<p>决策树的目的是用于分类预测，即各个节点需要选取输入样本的<strong>特征</strong>，进行<strong>规则</strong>判定，最终决定样本归属到哪一棵<strong>子树</strong>，基于这个目的，决策树的每一个节点需要包含以下几个关键信息：</p>\n<ol>\n<li>判决特征：当前节点针对哪一个特征进行判决</li>\n<li>判决规则：对于二类问题，这个规则一般是一个布尔表达式</li>\n<li>左子树：判决为TRUE的样本</li>\n<li>右子树：判决为FALSE的样本</li>\n</ol>\n<p>决策树节点的定义代码如下所示：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33c86a043c229575925\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nclass DecisionNode():\r\n    \r\n    def __init__(self, feature_i=None, threshold=None,\r\n                 value=None, true_branch=None, false_branch=None):\r\n        self.feature_i = feature_i  # 用于测试的特征对应的索引\r\n        self.threshold = threshold  # 判断规则：&gt;=threshold为true\r\n        self.value = value  # 如果是叶子节点，用于保存预测结果\r\n        self.true_branch = true_branch  # 左子树\r\n        self.false_branch = false_branch  # 右子树</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33c86a043c229575925-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c86a043c229575925-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f33c86a043c229575925-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c86a043c229575925-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f33c86a043c229575925-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c86a043c229575925-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f33c86a043c229575925-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c86a043c229575925-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f33c86a043c229575925-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33c86a043c229575925-1\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">DecisionNode</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c86a043c229575925-2\"><span class=\"crayon-h\">    </span></div><div class=\"crayon-line\" id=\"crayon-59f33c86a043c229575925-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">def </span><span class=\"crayon-e\">__init__</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">feature_i</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">None</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">threshold</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">None</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c86a043c229575925-4\"><span class=\"crayon-h\">                 </span><span class=\"crayon-v\">value</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">None</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">true_branch</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">None</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">false_branch</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">None</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-59f33c86a043c229575925-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">feature_i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">feature_i</span><span class=\"crayon-h\">  </span><span class=\"crayon-p\"># 用于测试的特征对应的索引</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c86a043c229575925-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">threshold</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">threshold</span><span class=\"crayon-h\">  </span><span class=\"crayon-p\"># 判断规则：&gt;=threshold为true</span></div><div class=\"crayon-line\" id=\"crayon-59f33c86a043c229575925-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">value</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">value</span><span class=\"crayon-h\">  </span><span class=\"crayon-p\"># 如果是叶子节点，用于保存预测结果</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c86a043c229575925-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">true_branch</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">true_branch</span><span class=\"crayon-h\">  </span><span class=\"crayon-p\"># 左子树</span></div><div class=\"crayon-line\" id=\"crayon-59f33c86a043c229575925-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">false_branch</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">false_branch</span><span class=\"crayon-h\">  </span><span class=\"crayon-p\"># 右子树</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0020 seconds] -->\r\n<p></p>\n<h2>3.2 特征选取</h2>\n<p>特征选取是构造决策树最关键的步骤，其目的是选出能够实现分割结果最纯净的那个特征，其操作流程的代码如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33c86a0440506487624\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# 遍历样本集中的所有特征，针对每一个特征计算最佳分割点\r\n# 再选取最佳的分割特征\r\nfor feature_i in range(n_features):\r\n    # 遍历集合中某个特征的所有取值\r\n    for threshold in unique_values:\r\n        # 以当前特征值作为阈值进行分割\r\n        Xy1, Xy2 = divide_on_feature(X_y, feature_i, threshold)\r\n        # 计算分割后的增益\r\n        gain = gain(y, y1, y2)\r\n        # 记录最佳分割特征，最佳分割阈值\r\n        if gain &gt; largest_gain:\r\n        largest_gain = gain\r\n            best_criteria = {\r\n                \"feature_i\": feature_i, \r\n                \"threshold\": threshold \r\n                }</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33c86a0440506487624-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c86a0440506487624-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f33c86a0440506487624-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c86a0440506487624-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f33c86a0440506487624-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c86a0440506487624-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f33c86a0440506487624-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c86a0440506487624-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f33c86a0440506487624-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c86a0440506487624-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f33c86a0440506487624-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c86a0440506487624-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59f33c86a0440506487624-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c86a0440506487624-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59f33c86a0440506487624-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c86a0440506487624-16\">16</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33c86a0440506487624-1\"><span class=\"crayon-p\"># 遍历样本集中的所有特征，针对每一个特征计算最佳分割点</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c86a0440506487624-2\"><span class=\"crayon-p\"># 再选取最佳的分割特征</span></div><div class=\"crayon-line\" id=\"crayon-59f33c86a0440506487624-3\"><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">feature_i </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">range</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">n_features</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c86a0440506487624-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\"># 遍历集合中某个特征的所有取值</span></div><div class=\"crayon-line\" id=\"crayon-59f33c86a0440506487624-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">threshold </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">unique_values</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c86a0440506487624-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-p\"># 以当前特征值作为阈值进行分割</span></div><div class=\"crayon-line\" id=\"crayon-59f33c86a0440506487624-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">Xy1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Xy2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">divide_on_feature</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">X_y</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">feature_i</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">threshold</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c86a0440506487624-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-p\"># 计算分割后的增益</span></div><div class=\"crayon-line\" id=\"crayon-59f33c86a0440506487624-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">gain</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">gain</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">y</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y2</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c86a0440506487624-10\"><span class=\"crayon-h\">        </span><span class=\"crayon-p\"># 记录最佳分割特征，最佳分割阈值</span></div><div class=\"crayon-line\" id=\"crayon-59f33c86a0440506487624-11\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">gain</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">largest_gain</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c86a0440506487624-12\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">largest_gain</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">gain</span></div><div class=\"crayon-line\" id=\"crayon-59f33c86a0440506487624-13\"><span class=\"crayon-e\">            </span><span class=\"crayon-v\">best_criteria</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c86a0440506487624-14\"><span class=\"crayon-h\">                </span><span class=\"crayon-s\">\"feature_i\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">feature_i</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-59f33c86a0440506487624-15\"><span class=\"crayon-h\">                </span><span class=\"crayon-s\">\"threshold\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">threshold</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c86a0440506487624-16\"><span class=\"crayon-h\">                </span><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0022 seconds] -->\r\n<p></p>\n<h2>3.3 节点分裂</h2>\n<p>节点分裂的时候有两条处理分支，如果增益够大，就分裂为左右子树，如果增益很小，就停止分裂，将这个节点直接作为叶子节点。节点分裂和Gain（分割后增益）的计算可以做一个优化，在上一个步骤中，我们寻找最优分割点的时候其实就可以将最佳分裂子集和Gain计算并保存下来，将上一步中的for循环改写为：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33c86a0444465629449\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# 以当前特征值作为阈值进行分割\r\nXy1, Xy2 = divide_on_feature(X_y, feature_i, threshold)\r\n# 计算分割后的熵\r\ngain = gain(y, y1, y2)\r\n# 记录最佳分割特征，最佳分割阈值\r\nif gain &gt; largest_gain:\r\n    largest_gain = gain\r\n        best_criteria = {\r\n        \"feature_i\": feature_i, \r\n        \"threshold\": threshold ,\r\n        }\r\n    best_sets = {\r\n        \"left\": Xy1,\r\n        \"right\": Xy2,\r\n        \"gain\": gain\r\n        }</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33c86a0444465629449-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c86a0444465629449-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f33c86a0444465629449-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c86a0444465629449-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f33c86a0444465629449-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c86a0444465629449-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f33c86a0444465629449-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c86a0444465629449-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f33c86a0444465629449-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c86a0444465629449-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f33c86a0444465629449-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c86a0444465629449-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59f33c86a0444465629449-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c86a0444465629449-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59f33c86a0444465629449-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c86a0444465629449-16\">16</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33c86a0444465629449-1\"><span class=\"crayon-p\"># 以当前特征值作为阈值进行分割</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c86a0444465629449-2\"><span class=\"crayon-v\">Xy1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Xy2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">divide_on_feature</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">X_y</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">feature_i</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">threshold</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f33c86a0444465629449-3\"><span class=\"crayon-p\"># 计算分割后的熵</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c86a0444465629449-4\"><span class=\"crayon-v\">gain</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">gain</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">y</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y2</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-59f33c86a0444465629449-5\"><span class=\"crayon-p\"># 记录最佳分割特征，最佳分割阈值</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c86a0444465629449-6\"><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">gain</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">largest_gain</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-59f33c86a0444465629449-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">largest_gain</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">gain</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c86a0444465629449-8\"><span class=\"crayon-e\">        </span><span class=\"crayon-v\">best_criteria</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f33c86a0444465629449-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"feature_i\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">feature_i</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c86a0444465629449-10\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"threshold\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">threshold</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f33c86a0444465629449-11\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c86a0444465629449-12\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">best_sets</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59f33c86a0444465629449-13\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"left\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Xy1</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c86a0444465629449-14\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"right\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Xy2</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f33c86a0444465629449-15\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"gain\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">gain</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c86a0444465629449-16\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0022 seconds] -->\r\n<p>为了防止过拟合，需要设置合适的停止条件，比如设置Gain的阈值，如果Gain比较小，就没有必要继续进行分割，所以接下来，我们就可以依据gain来决定分割策略：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33c86a0447915904152\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nif best_sets[\"gain\"] &gt; MIN_GAIN:\r\n    # 对best_sets[\"left\"]进一步构造子树，并作为父节点的左子树\r\n    # 对best_sets[\"right\"]进一步构造子树，并作为父节点的右子树\r\n    ...\r\nelse:\r\n    # 直接将父节点作为叶子节点\r\n    ...</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33c86a0447915904152-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c86a0447915904152-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f33c86a0447915904152-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c86a0447915904152-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f33c86a0447915904152-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c86a0447915904152-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f33c86a0447915904152-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33c86a0447915904152-1\"><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">best_sets</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">\"gain\"</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">MIN_GAIN</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c86a0447915904152-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\"># 对best_sets[\"left\"]进一步构造子树，并作为父节点的左子树</span></div><div class=\"crayon-line\" id=\"crayon-59f33c86a0447915904152-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\"># 对best_sets[\"right\"]进一步构造子树，并作为父节点的右子树</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c86a0447915904152-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-59f33c86a0447915904152-5\"><span class=\"crayon-st\">else</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c86a0447915904152-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\"># 直接将父节点作为叶子节点</span></div><div class=\"crayon-line\" id=\"crayon-59f33c86a0447915904152-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>下面，我们结合一组实验数据来学习决策树的训练方法。实验数据来源于<a href=\"http://www.onlamp.com/pub/a/python/2006/02/09/ai_decision_trees.html\" target=\"_blank\">这里</a>，下表中的数据是一组消费调查结果，我们训练决策树的目的，就是构造一个分类算法，使得有新的用户数据时，我们依据训练结果去推断一个用户是否购买这个商品：</p>\n<table>\n<thead>\n<tr>\n<th>AGE</th>\n<th>EDUCATION</th>\n<th>INCOME</th>\n<th>MARITAL STATUS</th>\n<th>PURCHASE?</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>36-55</td>\n<td>master’s</td>\n<td>high</td>\n<td>single</td>\n<td>yes</td>\n</tr>\n<tr>\n<td>18-35</td>\n<td>high school</td>\n<td>low</td>\n<td>single</td>\n<td>no</td>\n</tr>\n<tr>\n<td>36-55</td>\n<td>master’s</td>\n<td>low</td>\n<td>single</td>\n<td>yes</td>\n</tr>\n<tr>\n<td>18-35</td>\n<td>bachelor’s</td>\n<td>high</td>\n<td>single</td>\n<td>no</td>\n</tr>\n<tr>\n<td> &lt; 18</td>\n<td>high school</td>\n<td>low</td>\n<td>single</td>\n<td>yes</td>\n</tr>\n<tr>\n<td>18-35</td>\n<td>bachelor’s</td>\n<td>high</td>\n<td>married</td>\n<td>no</td>\n</tr>\n<tr>\n<td>36-55</td>\n<td>bachelor’s</td>\n<td>low</td>\n<td>married</td>\n<td>no</td>\n</tr>\n<tr>\n<td>&gt; 55</td>\n<td>bachelor’s</td>\n<td>high</td>\n<td>single</td>\n<td>yes</td>\n</tr>\n<tr>\n<td>36-55</td>\n<td>master’s</td>\n<td>low</td>\n<td>married</td>\n<td>no</td>\n</tr>\n<tr>\n<td>&gt; 55</td>\n<td>master’s</td>\n<td>low</td>\n<td>married</td>\n<td>yes</td>\n</tr>\n<tr>\n<td>36-55</td>\n<td>master’s</td>\n<td>high</td>\n<td>single</td>\n<td>yes</td>\n</tr>\n<tr>\n<td>&gt; 55</td>\n<td>master’s</td>\n<td>high</td>\n<td>single</td>\n<td>yes</td>\n</tr>\n<tr>\n<td>18</td>\n<td>high school</td>\n<td>high</td>\n<td>single</td>\n<td>no</td>\n</tr>\n<tr>\n<td>36-55</td>\n<td>master’s</td>\n<td>low</td>\n<td>single</td>\n<td>yes</td>\n</tr>\n<tr>\n<td>36-55</td>\n<td>high school</td>\n<td>low</td>\n<td>single</td>\n<td>yes</td>\n</tr>\n<tr>\n<td> &lt; 18</td>\n<td>high school</td>\n<td>low</td>\n<td>married</td>\n<td>yes</td>\n</tr>\n<tr>\n<td>18-35</td>\n<td>bachelor’s</td>\n<td>high</td>\n<td>married</td>\n<td>no</td>\n</tr>\n<tr>\n<td>&gt; 55</td>\n<td>high school</td>\n<td>high</td>\n<td>married</td>\n<td>yes</td>\n</tr>\n<tr>\n<td>&gt; 55</td>\n<td>bachelor’s</td>\n<td>low</td>\n<td>single</td>\n<td>yes</td>\n</tr>\n<tr>\n<td>36-55</td>\n<td>high school</td>\n<td>high</td>\n<td>married</td>\n<td>no</td>\n</tr>\n</tbody>\n</table>\n<p>从表中可以看出，我们一共有20组调查样本，每一组样本包含四个特征，分别是年龄段，学历，收入，婚姻状况，而最后一列是所属分类，在这个问题中就代表是否购买了该产品。</p>\n<p>监督学习就是在每一个样本都有正确答案的前提下，用算法预测结果，然后根据预测情况的好坏，调整算法参数。在决策树中，预测的过程就是依据各个特征划分样本集，评价预测结果的好坏标准是划分结果的纯度。</p>\n<p>为了方便处理，我们对样本数据进行了简化，将年龄特征按照样本的特点，转化为离散的数据，比如小于18对应0，18对应1，18-35对应2，36-55对应3，大于55对应4，以此类推，同样其他的特征也一样最数字化处理，教育水平分别映射为0(hight school)，1(bachelor’s)，2(master’s)，收入映射为0(low)和1(hight), 婚姻状况同样映射为0(single), 1(married)，最终处理后的样本，放到一个numpy矩阵中，如下所示：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33c86a044d564329661\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nX_y = np.array(\r\n        [[3, 2, 1, 0, 1],\r\n         [2, 0, 0, 0, 0],\r\n         [3, 2, 0, 0, 1],\r\n         [2, 1, 1, 0, 0],\r\n         [0, 0, 0, 0, 1],\r\n         [2, 1, 1, 1, 0],\r\n         [3, 1, 0, 1, 0],\r\n         [4, 1, 1, 0, 1],\r\n         [3, 2, 0, 1, 0],\r\n         [4, 2, 0, 1, 1],\r\n         [3, 2, 1, 0, 1],\r\n         [4, 2, 1, 0, 1],\r\n         [1, 0, 1, 0, 0],\r\n         [3, 2, 0, 0, 1],\r\n         [3, 0, 0, 0, 1],\r\n         [0, 0, 0, 1, 1],\r\n         [2, 1, 1, 1, 0],\r\n         [4, 0, 1, 1, 1],\r\n         [4, 1, 0, 0, 1],\r\n         [3, 0, 1, 1, 0]]\r\n    )</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33c86a044d564329661-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c86a044d564329661-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f33c86a044d564329661-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c86a044d564329661-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f33c86a044d564329661-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c86a044d564329661-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f33c86a044d564329661-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c86a044d564329661-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f33c86a044d564329661-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c86a044d564329661-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f33c86a044d564329661-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c86a044d564329661-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59f33c86a044d564329661-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c86a044d564329661-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59f33c86a044d564329661-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c86a044d564329661-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-59f33c86a044d564329661-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c86a044d564329661-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-59f33c86a044d564329661-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c86a044d564329661-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-59f33c86a044d564329661-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c86a044d564329661-22\">22</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33c86a044d564329661-1\"><span class=\"crayon-v\">X_y</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c86a044d564329661-2\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f33c86a044d564329661-3\"><span class=\"crayon-h\">         </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c86a044d564329661-4\"><span class=\"crayon-h\">         </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f33c86a044d564329661-5\"><span class=\"crayon-h\">         </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c86a044d564329661-6\"><span class=\"crayon-h\">         </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f33c86a044d564329661-7\"><span class=\"crayon-h\">         </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c86a044d564329661-8\"><span class=\"crayon-h\">         </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f33c86a044d564329661-9\"><span class=\"crayon-h\">         </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c86a044d564329661-10\"><span class=\"crayon-h\">         </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f33c86a044d564329661-11\"><span class=\"crayon-h\">         </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c86a044d564329661-12\"><span class=\"crayon-h\">         </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f33c86a044d564329661-13\"><span class=\"crayon-h\">         </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c86a044d564329661-14\"><span class=\"crayon-h\">         </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f33c86a044d564329661-15\"><span class=\"crayon-h\">         </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c86a044d564329661-16\"><span class=\"crayon-h\">         </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f33c86a044d564329661-17\"><span class=\"crayon-h\">         </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c86a044d564329661-18\"><span class=\"crayon-h\">         </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f33c86a044d564329661-19\"><span class=\"crayon-h\">         </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c86a044d564329661-20\"><span class=\"crayon-h\">         </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-59f33c86a044d564329661-21\"><span class=\"crayon-h\">         </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c86a044d564329661-22\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0062 seconds] -->\r\n<p></p>\n<h1>4. 新样本预测</h1>\n<p>依照上面的算法构造决策树，我们将决策树打印出来，如下所示：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33c86a0452135081561\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n-- Classification Tree --\r\n0 : 4? \r\n   T -&gt; 1\r\n   F -&gt; 3 : 1? \r\n      T -&gt; 0 : 2? \r\n            T -&gt; 0\r\n            F -&gt; 1\r\n      F -&gt; 0 : 3? \r\n            T -&gt; 1\r\n            F -&gt; 0 : 1? \r\n                        T -&gt; 0\r\n                        F -&gt; 1</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33c86a0452135081561-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c86a0452135081561-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f33c86a0452135081561-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c86a0452135081561-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f33c86a0452135081561-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c86a0452135081561-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f33c86a0452135081561-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c86a0452135081561-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f33c86a0452135081561-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c86a0452135081561-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f33c86a0452135081561-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c86a0452135081561-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33c86a0452135081561-1\"><span class=\"crayon-o\">--</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Classification </span><span class=\"crayon-v\">Tree</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c86a0452135081561-2\"><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-59f33c86a0452135081561-3\"><span class=\"crayon-h\">   </span><span class=\"crayon-v\">T</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c86a0452135081561-4\"><span class=\"crayon-h\">   </span><span class=\"crayon-v\">F</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-59f33c86a0452135081561-5\"><span class=\"crayon-h\">      </span><span class=\"crayon-v\">T</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c86a0452135081561-6\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">T</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line\" id=\"crayon-59f33c86a0452135081561-7\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">F</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c86a0452135081561-8\"><span class=\"crayon-h\">      </span><span class=\"crayon-v\">F</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-59f33c86a0452135081561-9\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">T</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c86a0452135081561-10\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">F</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-59f33c86a0452135081561-11\"><span class=\"crayon-h\">                        </span><span class=\"crayon-v\">T</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c86a0452135081561-12\"><span class=\"crayon-h\">                        </span><span class=\"crayon-v\">F</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0021 seconds] -->\r\n<p>其中，冒号前代表选择的分割特征，冒号后面代表判别规则，二者组合起来就是一个决策树的非叶子节点，每个非叶子节点进一步分割为分为True和False分支，对于叶子节点箭头后面表示最终分类，0表示不购买，1表示购买。由于我们的数据做过简化，所以上述结果不太直观，我们将对应的特征以及判断规则翻译一下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33c86a0455530051910\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n年龄 : 大于55? \r\n   是 -&gt; 购买\r\n   否 -&gt; 收入 : 高? \r\n      是 -&gt; 年龄 : 大于18? \r\n            是 -&gt; 不购买\r\n            否 -&gt; 购买\r\n      否 -&gt; 年龄 : 大于36? \r\n            是 -&gt; 购买\r\n            否 -&gt; 年龄 : 大于等于18? \r\n                        是 -&gt; 不购买\r\n                        否 -&gt; 购买</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33c86a0455530051910-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c86a0455530051910-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f33c86a0455530051910-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c86a0455530051910-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f33c86a0455530051910-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c86a0455530051910-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f33c86a0455530051910-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c86a0455530051910-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f33c86a0455530051910-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c86a0455530051910-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f33c86a0455530051910-11\">11</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33c86a0455530051910-1\">年龄<span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span>大于<span class=\"crayon-cn\">55</span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c86a0455530051910-2\"><span class=\"crayon-h\">   </span>是<span class=\"crayon-h\"> </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span>购买</div><div class=\"crayon-line\" id=\"crayon-59f33c86a0455530051910-3\"><span class=\"crayon-h\">   </span>否<span class=\"crayon-h\"> </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span>收入<span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span>高<span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c86a0455530051910-4\"><span class=\"crayon-h\">      </span>是<span class=\"crayon-h\"> </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span>年龄<span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span>大于<span class=\"crayon-cn\">18</span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-59f33c86a0455530051910-5\"><span class=\"crayon-h\">            </span>是<span class=\"crayon-h\"> </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span>不购买</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c86a0455530051910-6\"><span class=\"crayon-h\">            </span>否<span class=\"crayon-h\"> </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span>购买</div><div class=\"crayon-line\" id=\"crayon-59f33c86a0455530051910-7\"><span class=\"crayon-h\">      </span>否<span class=\"crayon-h\"> </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span>年龄<span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span>大于<span class=\"crayon-cn\">36</span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c86a0455530051910-8\"><span class=\"crayon-h\">            </span>是<span class=\"crayon-h\"> </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span>购买</div><div class=\"crayon-line\" id=\"crayon-59f33c86a0455530051910-9\"><span class=\"crayon-h\">            </span>否<span class=\"crayon-h\"> </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span>年龄<span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span>大于等于<span class=\"crayon-cn\">18</span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c86a0455530051910-10\"><span class=\"crayon-h\">                        </span>是<span class=\"crayon-h\"> </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span>不购买</div><div class=\"crayon-line\" id=\"crayon-59f33c86a0455530051910-11\"><span class=\"crayon-h\">                        </span>否<span class=\"crayon-h\"> </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span>购买</div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0019 seconds] -->\r\n<p>决策树构造完之后，我们就可以用来进行新样本的分类了。决策树的预测过程十分容易理解，只需要将从根节点开始，按照节点定义的规则进行判决，选择对应的子树，并重复这个过程，直到叶子节点即可。决策树的预测功能实现代码如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59f33c86a0459748645210\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndef predict_value(self, x, tree=None):\r\n        # 如果当前节点是叶子节点，直接输出其值\r\n        if tree.value is not None:\r\n            return tree.value\r\n        # 否则将x按照当前节点的规则进行判决\r\n        # 如果判决为true选择左子树，否则选择右子树，\r\n        feature_value = x[tree.feature_i]\r\n        if feature_value &gt;= tree.threshold:\r\n            branch = tree.true_branch\r\n        else:\r\n            branch = tree.false_branch\r\n        # 在选中的子树上递归进行判断\r\n        return self.predict_value(x, branch)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59f33c86a0459748645210-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c86a0459748645210-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59f33c86a0459748645210-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c86a0459748645210-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59f33c86a0459748645210-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c86a0459748645210-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59f33c86a0459748645210-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c86a0459748645210-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59f33c86a0459748645210-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c86a0459748645210-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59f33c86a0459748645210-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59f33c86a0459748645210-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59f33c86a0459748645210-13\">13</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59f33c86a0459748645210-1\"><span class=\"crayon-e\">def </span><span class=\"crayon-e\">predict_value</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tree</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">None</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c86a0459748645210-2\"><span class=\"crayon-h\">        </span><span class=\"crayon-p\"># 如果当前节点是叶子节点，直接输出其值</span></div><div class=\"crayon-line\" id=\"crayon-59f33c86a0459748645210-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tree</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">value </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">None</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c86a0459748645210-4\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tree</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">value</span></div><div class=\"crayon-line\" id=\"crayon-59f33c86a0459748645210-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-p\"># 否则将x按照当前节点的规则进行判决</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c86a0459748645210-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-p\"># 如果判决为true选择左子树，否则选择右子树，</span></div><div class=\"crayon-line\" id=\"crayon-59f33c86a0459748645210-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">feature_value</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">tree</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">feature_i</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c86a0459748645210-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">feature_value</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tree</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">threshold</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-59f33c86a0459748645210-9\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">branch</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tree</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">true_branch</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c86a0459748645210-10\"><span class=\"crayon-e\">        </span><span class=\"crayon-st\">else</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-59f33c86a0459748645210-11\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">branch</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tree</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">false_branch</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59f33c86a0459748645210-12\"><span class=\"crayon-h\">        </span><span class=\"crayon-p\"># 在选中的子树上递归进行判断</span></div><div class=\"crayon-line\" id=\"crayon-59f33c86a0459748645210-13\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">predict_value</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">branch</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0021 seconds] -->\r\n<p></p>\n<h1>5. 总结</h1>\n<p>决策树是一种简单常用的分类器，通过训练好的决策树可以实现对未知的数据进行高效分类。从我们的例子中也可以看出，决策树模型具有较好的可读性和描述性，有助于辅助人工分析；此外，决策树的分类效率高，一次构建后可以反复使用，而且每一次预测的计算次数不超过决策树的深度。</p>\n<p>当然，决策树也有其缺点。对于连续的特征，比较难以处理，对于多分类问题，计算量和准确率都不理想。此外，在实际应用中，由于其最底层叶子节点是通过父节点中的单一规则生成的，所以通过手动修改样本特征比较容易欺骗分类器，比如在拦击邮件识别系统中，用户可能通过修改某一个关键特征，就可以骗过垃圾邮件识别系统。从实现上来讲，由于树的生成采用的是递归，随着样本规模的增大，计算量以及内存消耗会变得越来越大。</p>\n<p>此外，过拟合也是决策树面临的一个问题，完全训练的决策树(未进行剪纸，未限制Gain的阈值)能够100%准确地预测训练样本，因为其是对训练样本的完全拟合，但是，对与训练样本以外的样本，其预测效果可能会不理想，这就是过拟合。解决决策树的过拟合，除了上文说到的通过设置Gain的阈值作为停止条件之外，通常还需要对决策树进行剪枝，常用的剪枝策略有：</p>\n<ol>\n<li>Pessimistic Error Pruning：悲观错误剪枝</li>\n<li>Minimum Error Pruning：最小误差剪枝</li>\n<li>Cost-Complexity Pruning：代价复杂剪枝</li>\n<li> Error-Based Pruning：基于错误的剪枝，即对每一个节点，都用一组测试数据集进行测试，如果分裂之后，能够降低错误率，再继续分裂为两棵子树，否则直接作为叶子节点。</li>\n<li>Critical Value Pruning：关键值剪枝，这就是上文中提到的设置Gain的阈值作为停止条件。</li>\n</ol>\n<p>我们以最简单的方式展示了ID3决策树的实现方式，如果想要了解不同类型的决策树的差别，可以参考<a href=\"https://www.quora.com/What-are-the-differences-between-ID3-C4-5-and-CART\" target=\"_blank\">这个链接</a>。</p>\n<p>另外，关于各种机器学习算法的实现，强烈推荐参考Github仓库<a href=\"https://github.com/eriklindernoren/ML-From-Scratch.git\" target=\"_blank\">ML-From-Scratch</a>，下载代码之后，通过<strong><span style=\"color: #ff0000\"><code>pip install -r requirements.txt</code></span></strong>安装依赖库即可运行代码。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112206\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112206votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112206\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 5 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": "  评论", "praise_nums": "2", "url_object_id": "20f251db4302493feab2277f2e28cf93", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/08/d5e765a446f9f0cf17c21b596186d3b9.png"], "front_image_path": "full/1e981633d3d633f8ac4523b786bb76f0251e8b5e.jpg", "title": "决策树算法及实现"}
{"create_date": "2017/08/23 ", "url": "http://blog.jobbole.com/112239/", "fav_nums": 9, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/young605867996\">Lada</a> 翻译。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://rework.withgoogle.com/blog/five-keys-to-a-successful-google-team/\">rework.withgoogle</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><div>\n<h3>Google 成功团队的五大关键</h3>\n<p>小群聚、工作小组、委员会、自治体，无论它叫什么，身处其中，你都是 Google 的一份子，并且你无论在哪工作，都离不开团队。因此，如果我们知道什么能让管理者高效，那么为什么我们不知道什么能让团队高效呢？</p>\n<blockquote><p>更新：点击此处查看：工作指南——<a href=\"https://rework.withgoogle.com/guides/understanding-team-effectiveness/\">理解团队效能</a>之 Google 团队效能的调查全报道，以及有助于营造团队安全感的工具。</p></blockquote>\n<p>我们中的一群人在谷歌的人力运营部（我们称之为 HR）着手使用数据和严格的分析来回答这个问题：<strong><b>是什么让谷歌</b></strong><strong><b>的</b></strong><strong><b>团队</b></strong><strong><b>高效？</b></strong>今天的早些时候，我们与<a href=\"http://bigstory.ap.org/article/8c60341cc1da47e084b8e17e62e83c98/google-searches-itself-build-more-productive-teams\">美联社</a>分享了我们的研究，现在也在这里分享这些发现。</p>\n<p>过去两年我们对 200+ Googlers（谷歌员工）的采访，观察了 180+ 个谷歌活跃团队的 250 多种属性。我们曾非常自信能找到一流团队，一个完美混合了个人特质和必备技能的团队：一个 Rhodes 学者、两个外向的人、一个牛逼的 AngularJS 工程师，还有一个博士。你看看，这就是梦之队的配置，对吧?</p>\n<p>但我们大错特错了。<strong><span id=\"pos_placeholder\" style=\"width: 0px; height: 0px; margin: 0px; padding: 0px;\"></span>一个团队中有什么人，远不如团队成员是如何相互影响、组织工作、看待贡献更重要。</strong>因为神奇的算法，我们发现了更多。</p>\n<p>我们了解到了在 Google 区分成功团队和其他团队的五大关键因素：</p>\n<ol>\n<li><b></b><strong><b>安全感（<strong><b>Psychological safety）</b></strong>：</b></strong>在这个团队里，我们敢冒险，而且不会对此感到不安和难堪？</li>\n<li><b></b><strong><b>可靠性（<strong><b>Dependability</b></strong>）：</b></strong>我们能指望他人准时完成高质量的工作吗？</li>\n<li><b></b><strong><b>结构与清晰度（<strong><b>Structure &amp; clarity</b></strong>）：</b></strong>目标、角色和执行计划都是清楚明确的吗？</li>\n<li><b></b><strong><b>工作意义（<strong><b>Meaning of work）</b></strong>：</b></strong>我们都是在做对各自来说个人意义重大的工作吗？</li>\n<li><b></b><strong><b>工作影响（<strong><b>Impact of work</b></strong>）：</b></strong>我们从根本上认为自己所做的工作重要吗？</li>\n</ol>\n<p>如果上面 5 个问题，你的回答全是“yes”，那么恭喜你，你应该是处在一个高绩效团队里。如果没有，也不代表失去了希望。这只是一个帮助你找出哪里是重点、如何变得更好的快捷方式，一种和你的成员使用结构化方式讨论这种概念的方法。</p>\n<p><img class=\"alignnone\" src=\"http://wx4.sinaimg.cn/large/7cc829d3gy1fithlogdqdj21kw1v1anc.jpg\" width=\"2048\" height=\"2413\"></p>\n<p><a href=\"https://www.youtube.com/watch?v=LhoLuui9gX8\">安全感</a>无疑是五个动力中最重要的，我们发现——它是其他四个动力的支撑。这怎么可能呢？冒险在你的团队成员看来似乎很简单。但是回想你最后一次为一个项目工作的时候。你觉得你可以像一个唯一的局外人一样，忽略风险，只问目的？或是你选择了在没有明确问题的时候继续，只为了避免被视作无知？</p>\n<p>结果是，我们都不愿去做那些会负面影响别人看待我们的能力、意识和积极性的行为。虽然这种自我保护在工作场所是一种自然的策略，但它不利于高效的团队合作。而另一方面，团队成员彼此间感觉越安全，越有可能承认错误、一起合作，以及接受新的角色。它几乎影响着我们所观察雇员的每一个重要维度。在团队中具有较高安全感的个人不太可能离开 Google，<a href=\"http://www.mckinsey.com/insights/organization/why_diversity_matters\">他们更有可能</a>利用队友的<a href=\"http://blogs.wsj.com/atwork/2015/01/20/new-report-finds-a-diversity-dividend-at-work/\">多样化的想法</a>，带来更多的收入，高管常常会认为他们是双倍高效的。</p>\n<p>Googlers 热爱数据。并且他们不想让它闲置，而想做点什么。因此，我们创建了一个名为 gTeams exercise 的工具，包含：一个对五大动力进行的 10 分钟工作评估，一份总结团队是如何工作的报告，一场讨论结果、定制发展资源以帮助团队提高的现场面对面对话。在过去的一年里，已经有 3000 多名 Googlers 在 300 个团队中使用该工具。而这些谷歌团队中，采用了新团队规范的（比如通过在每次团队会议开始前共享上周的风险）安全感评分提高了 6%，结构与清晰度的评分提高了 10%。团队们说，“有一个团队效能的框架和强制方法来讨论这些之前失去的动力，是迄今为止最有效的一部分经历。”</p>\n<p class=\"\">从 Dublin（爱尔兰都柏林）的销售团队到 Mountain View（美国加州山景城）的工程团队，我们已经看到，关注这个框架有助于各种类型的团队提高。</p>\n</div>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112239\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112239votetotal\">4</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112239\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 9 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 7 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/young605867996\">Lada</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/young605867996\">\r\n\t\t\t<img src=\"http://q.qlogo.cn/qqapp/208656/B77EEB9D520DE9C7BD42E89DC348FEC7/100\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            希望了解更多互联网、创业管理、创新思维、前沿技术和设计的知识。渐进明细，持续改进。        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/young605867996\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/young605867996/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/young605867996/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 16</a> · <a title=\"我的网站\" target=\"_blank\" href=\"http://littlejanery.blog.163.com/\"><i class=\"fa fa-link\"></i></a> <a title=\"QQ：605867996\" target=\"_blank\" href=\"#\"><i class=\"fa fa-qq\"></i></a> <a title=\"个人微信：yao605867996\" target=\"_blank\" href=\"#\"><i class=\"fa fa-weixin\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": 7, "praise_nums": "4", "url_object_id": "f82b2deb2e66636ba145fc06d7391f6f", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2015/10/ec8b7891ca44138c9a9a09ee180cf33b.jpg"], "front_image_path": "full/5630c3d4f4f3f685aa06d550f00a4cdef5d9a492.jpg", "title": "谷歌用两年时间研究了 180 个团队，发现高效团队有这五个特征"}
{"create_date": "2017/08/15 ", "url": "http://blog.jobbole.com/112050/", "fav_nums": 4, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/maifansnet\">maifans</a> 翻译，<a href=\"http://www.jobbole.com/members/hearingdog\">BEASTQ</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://codeahoy.com/2016/04/03/effective-code-reviews/\">codeahoy</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>代码评审（Code review）是保证代码质量的一种有效手段，做得好的话，对公司来讲是一笔收益颇高的时间投资。但实践起来往往变成了炫耀编程技能、固执己见、恶言相向、同事关系恶化的事，这该如何是好？</p>\n<p>往往代码评审过程中，评审者（Reviewer）往往会过于关心旁枝末节，而忽视主要问题，也就是所谓的自行车棚效应。在批准价值百亿的核电站的建设提案中，专家们往往会浪费大量时间纠结于厂内自行车棚（bikeshed）的颜色；因为核电站太大、太复杂，“专家们”未必真懂，但总不能不说话啊，那就从无关痛痒的自行车棚挑毛病吧。</p>\n<p><img class=\"alignnone aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2013/02/how-to-code-review.jpg\" width=\"400\" height=\"649\"></p>\n<h3>有效的代码评审</h3>\n<p>代码评审是开发人员编写的代码由另一个人检查以查找缺陷和改进的过程。换句话说，开发人员大部分都是独立编写代码的，当代码完成之后，他们会召集一次评审。</p>\n<p>代码评审是提高软件质量的有效途径。在Google，所有代码都要经过同行评审。引用《<a href=\"https://www.amazon.cn/gp/product/B0061XKRXA/ref=as_li_qf_sp_asin_il_tl?ie=UTF8&amp;camp=536&amp;creative=3200&amp;creativeASIN=B0061XKRXA&amp;linkCode=as2&amp;tag=vastwork-23\" target=\"_blank\">代码大全（第2版）</a>》中的几个例子：</p>\n<blockquote>\n<ul>\n<li>IBM 的 Orbit 项目有 50 万行代码，使用了 11 级的检查。它提前交付，并且只有通常预期错误的百分之一。</li>\n<li>一份对 AT＆T 的一个 200 多人组织的研究报告显示，在引入评审后，生产率提高了14％，缺陷减少了90％。</li>\n<li>喷气推进实验室估计，通过早期发现和修复缺陷，每次评审节省约 25,000 美元。</li>\n</ul>\n</blockquote>\n<p>然而，不少团队在有效的代码评审争论中，失去了原本的效益。在功能失调的团队和组织中，对所有参与者来说它可以迅速变成一个<b>令人不快的经历</b>：</p>\n<ul>\n<li>它成为评审人员来展示技能的平台。他们在别人的代码中指出“错误”，并强加自己没有价值的“意见”。</li>\n<li>在代码完全就绪前，开发人员会非常抗拒别人审查他们的代码 ——可以说这可能是一件好事，但他没有真正理解评审的意义。</li>\n<li>开发人员放弃代码所有权，并开始依赖他人查找问题。</li>\n</ul>\n<p>在这篇文章中，我将讨论团队和组织可以做的一些事情，让代码评审为所有参与者带来愉快的体验。</p>\n<h3>对管理层的建议：营造健康文化</h3>\n<p><strong>有效的代码评审，需要一个重视质量和卓越的健康文化。</strong>如果团队不以提供高质量的产品为信仰，代码评审将不会给您所期望的结果。你需要一个人人参与的积极文化—立足于建设性批评，智者胜。</p>\n<p><strong>除了创造一个健康文化，并允许花时间和资源进行评审，管理者在代码评审中应保持低姿态。</strong>大多数人不想在上司面前暴露自己的秘密，这已是一种文化。代码评审最好由同行进行，管理层不应该询问可以用来评价人的细节<span style=\"font-family: Helvetica, sans-serif;\">。</span>的确有一些管理人员索要检查表和成绩，以便他们可以<span style=\"font-family: Helvetica, sans-serif;\">“</span>衡量<span style=\"font-family: Helvetica, sans-serif;\">”</span>并评价人。</p>\n<p><strong>可能你已经有一个健康的文化（算你幸运）。</strong>这还不够，营造健康的文化取决于许多因素（团队和组织内部）。这是非常具有挑战性的，没有灵丹妙药。没有正确的文化，代码评审不会带来期望的收获，甚至在极端情况下可能会适得其反。</p>\n<h3>对个人的建议：换位思考</h3>\n<p>Karl Wiegers 在他的《Peer Reviews in Software: A Practical Guide》中写道：</p>\n<blockquote><p>产品的作者与评审者之间的互动至关重要。<span style=\"color: #515151;\">作者必须足够信任和尊重评审者才能接受他们的意见。</span> <span style=\"color: #515151;\">同样，评审者必须尊重作者的才华和辛勤工作。评审者应谨慎选择他们用来提出问题的词汇，重点关注他们对产品的观察。说『我没有看到这些变量被初始化</span> <span style=\"color: #515151;\">』可能会引发建设性的反馈</span>， 而『你没有初始化这些变量』可能会让作者非常不爽。</p></blockquote>\n<p>关注代码很容易，但不要忘记，桌子（或计算机）的另一端有一个人。他有主见有<span style=\"font-family: Helvetica, sans-serif;\">“</span>自我<span style=\"font-family: Helvetica, sans-serif;\">”</span>。请记住，解决问题的方式有很多。</p>\n<ul>\n<li><strong>要谦虚。</strong>我既见过非常高效的评审，也见过因为吹毛求疵而非常低效的评审<span style=\"font-family: Helvetica, sans-serif;\">。</span>不要吹毛求疵<span style=\"font-family: Helvetica, sans-serif;\">！！！</span></li>\n<li><strong>确保您有编码标准<span style=\"font-family: Helvetica, sans-serif;\">。</span></strong>编码标准是在组织中共享的人人都认同的一套准则。如果你没有编码标准，那么不要让讨论变成一个比较编码风格的比赛（大括号 <span style=\"font-family: Helvetica, sans-serif;\"><strong><span style=\"color: #ff0000;\">{</span></strong> </span>在同一行还是下一行！）如果你遇到这样的情况，请在编码标准论坛上离线讨论<span style=\"font-family: Helvetica, sans-serif;\">。</span></li>\n<li><strong>学会良好地沟通。</strong>你必须能够清楚地表达想法和理由。</li>\n<li><strong>编程策略是一个仁者见仁智者见智的问题。</strong>评审者和开发人员应该寻求理解彼此的观点，而不应该成为哲学辩论</li>\n</ul>\n<h3>对评审者的建议：谦虚</h3>\n<ul>\n<li><strong>开发者不是冤大头。</strong>评审的目的不是证明谁是更优秀的程序员而是查找缺陷，并确保代码是简单和可维护的。</li>\n<li><strong>问问题。</strong>不要提出可能听起来带指责的要求或言论。例如，不要说：『你没有遵循标准<span style=\"font-family: Helvetica, sans-serif;\">XYZ</span>』。更好的方式是真正寻求理解开发者的观点：『你对标准 <span style=\"font-family: Helvetica, sans-serif;\">XYZ </span>有什么看法，它是否适用于这里？』，这可以引到我的下一个观点。</li>\n<li><strong>避免『你为什么』，『你为什么不』风格的问题。</strong>它会使人对立。 『为什么把它声明为全局变量？』可以更好地表达为『我不明白为什么这里用一个全局变量』。寻找方法来简化代码。代码评审的目标之一是创建<span style=\"font-family: Helvetica, sans-serif;\">“</span>可维护<span style=\"font-family: Helvetica, sans-serif;\">”</span>软件。</li>\n<li><strong>记住要欣赏并感谢对方。</strong>人们经常忘记一句简单的『干得好』或『它看起来很棒』的影响有多大。</li>\n</ul>\n<p>有些事情，如果看起来像排练过的或以讽刺的语气说出来，就不会奏效。像正常对话一样对待代码评审。你正在聆听他人，应该真正寻求理解他们的观点。需要时提供建议和提示。如果代码很棒，不要强迫找一些消极的来说。</p>\n<h3>对开发者的建议：它不是个人的事情</h3>\n<ul>\n<li><strong>不要感情用事。</strong>记住，别人说的不是，是代码中的缺陷或不足，而不是你。</li>\n<li><strong>意识到你和你的代码是捆绑在一起是正常的事情。</strong>如果你为自己的工作感到自豪，那是一个很好的迹象，说明你是一个关心作品的人。</li>\n<li><strong>有适当的自我。</strong><span style=\"font-family: Helvetica, sans-serif;\">足够信任和捍卫自己的观点，但又不至于盲目拒绝对方的好建议和意见</span>。</li>\n<li><strong>人非圣贤孰能无过。</strong>评审者作为第二双眼，可以指出你可能忽略的事情。问题与具体建议一样有价值。</li>\n<li><strong>提问题要有针对性。</strong>『将所有这些类纳入它们自己的软件包中是否更有意义』</li>\n<li><strong>感谢审稿人的时间和他们可能提供的任何反馈。</strong></li>\n</ul>\n<h3>总结</h3>\n<p><span style=\"font-family: Helvetica, sans-serif;\">同行评审是人们互相交流，而无效（ineffectiveness）则源于社会学问题。然而，管理者花费大量时间在操心使用哪些惊艳的工具。</span>工具会有所帮助，但只有工具并不会神奇地带来结果。立足于正确的文化同时<span style=\"font-family: Helvetica, sans-serif;\">…</span>换位思考，以人为本！<span style=\"font-family: Helvetica, sans-serif;\"> :-)</span></p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112050\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112050votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112050\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 4 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/maifansnet\">maifans</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/maifansnet\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2015/04/8fbdaaa5ea6d3b49c8c1c825aafeb5d9.png\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            软件工程师，关注人工智能，关注医疗器械。        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/maifansnet\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/maifansnet/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/maifansnet/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 13</a>        </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "comment_nums": "  评论", "praise_nums": "1", "url_object_id": "5eda13472020b0a94aa6bc350676f012", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2016/04/8d67b7db1e9704c55aad01b886ec4c46.jpg"], "front_image_path": "full/dfa8fff3b99c7011381e1666d2c2ba0015a7c34f.jpg", "title": "如何做有效的Code Review？我有这些建议"}
